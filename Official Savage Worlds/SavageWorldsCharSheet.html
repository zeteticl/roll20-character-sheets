<input type='hidden' name='attr_character_sheet' value="Official Savage Worlds v1.00.11" />
<input type='hidden' name='attr_firstInit' value="0" />
<input type='hidden' name='attr_namelength' value='0' />

<script type="text/worker">
    // Define colors for Logs
    const r20color = "#E948C9";
	// Better Logging Functionality
    on("sheet:opened change:character_name", function() {
        getAttrs(['character_name','CompendiumData'], function(v) {
            log("CompendiumData",JSON.stringify(v.CompendiumData),r20color);
            let name = v.character_name;
            let namelen = name.length;
            let nameclass;
            (namelen >=19 ? nameclass = "smallHeader" : nameclass = "normalHeader");
            setAttrs({namelength: nameclass});
        });
    });

	const log = (title, text, color = 'green', headerstyle = 'font-size:14px; font-weight:bold;', bodystyle = 'font-size:12px; font-weight:normal;') => {
		let titleStyle = `color:${color}; ${headerstyle} text-decoration:underline;`;
		let textStyle = `color:${color}; ${bodystyle}`;
		const output = `%c${title}:%c ${text}`;
		console.log(output,titleStyle,textStyle);
	};

	// Simple Sum function for Repeating Sections
	function repeatingSimpleSum(section, field, destination) {
		var repSection = "repeating_" + section;
		getSectionIDs(repSection, function (idArray) {
			//Construct Array of fields to get attributes for...
			var sumFields = [];
			for (var a=0; a< idArray.length; a++) {
				sumFields[sumFields.length] = repSection + "_" + idArray[a] + "_" + field;
			}
			getAttrs(sumFields, function (v) {
				console.log("%%% values of v: "+ JSON.stringify(v) +" %%%");
				var sumTotal = 0;
				for(a=0; a<idArray.length; a++){
					sumTotal += parseFloat(v[sumFields[a]]) || 0;
					console.log("$$$ sumTotal: " + sumTotal + " $$$");
				}
				var setSumValue = {};
				setSumValue[destination]=sumTotal;
				setAttrs(setSumValue);
			});
		});
	}

	// Simple Sum function for Repeating Sections with Check Field
	function repeatingSimpleSumWCheck (section, field, destination, checkfield, checkvalue){
		console.log("Made it repeatingSimpleSumWCheck");
		console.log("checkvalue: "+checkvalue);
		let repSection = "repeating_"+section;
		getSectionIDs(repSection, function(idArray) {
			//Construct Array of fields to get attributes for...
			let sumFields = [];
			let checkFields = [];
			for (let a=0; a< idArray.length; a++) {
				sumFields[sumFields.length] = repSection + "_" + idArray[a] + "_" + field;
				checkFields[checkFields.length] = repSection + "_" + idArray[a] + "_" + checkfield;
			}
			console.log("List of IDs: "+idArray);
			console.log("List of Sum Fields: "+sumFields);
			console.log("List of check Fields: "+checkFields);
			getAttrs(sumFields, function(v) {
				getAttrs(checkFields, function(c) {
					console.log("%%% values of v: "+ JSON.stringify(v) +" %%%");
					var sumTotal = 0;
					for(a=0; a<idArray.length; a++){
						if (c[checkFields[a]] === checkvalue) {
							sumTotal += parseFloat(v[sumFields[a]]) || 0;
							console.log("$$$ sumTotal: " + sumTotal + " $$$");
						}
					}
					var setSumValue = {};
					setSumValue[destination]=sumTotal;
					setAttrs(setSumValue);
				});
			});
		});
	}

    function fauxChange (field, fauxvalue) {
		//repeating  fields should be passed in the format: repating_<section>:attributes
		//example: repeating_skills:skillnamerank
		log("Setting faux value(s) for",field,"orangered");
		if (field.indexOf(':') > -1) {
			console.log("Need to update values in a repeating section");
			let getfields = field.split(':');
			let repeatingSection = getfields[0];
			let repeatingField = getfields[1];
			let sattrs = {};
			getSectionIDs(repeatingSection, function(idArray) {
				if (idArray.length > 0) {
					log("IDs in Repeating Section",idArray,"orangeread");
					let oldValues = [];
					let fieldArray = [];
					for (let a=0; a < idArray.length; a++) {
						fieldArray[fieldArray.length] = repeatingSection + "_" + idArray[a] + "_" + repeatingField;
						log("Added field",fieldArray[a],"orangered");
					}
					getAttrs(fieldArray, function(v) {
						for (let b=0; b < idArray.length; b++) {
							oldValues[oldValues.length] = v[fieldArray[b]];
							sattrs[fieldArray[b]] = fauxvalue;
						}
						log("Step","!!! Setting Fake Value !!!","orangered");
						setAttrs(sattrs);
						for (let c=0; c<idArray.length; c++) {
                            log("Added Field",fieldArray[c] + " = " + oldValues[c],"orangered");
							sattrs[fieldArray[c]] = oldValues[c];
						}
						log("Step","!!! Setting Real Values !!!","orangered");
						setAttrs(sattrs);
					});
				}
			});
		}
		else {
			console.log("Updating values in a Non-Repeating Section");
			getAttrs([field], function(v) {
				let prevValue = v[field];
				let sattrs = {};
				console.log(`++++ Setting ${field} to ${fauxvalue} ++++`);
				//console.log("Setting " + field + " to " + fauxvalue);
				sattrs[field] = fauxvalue;
				setAttrs(sattrs);
				console.log(`---- Setting ${field} to ${prevValue} ----`);
				//console.log("Setting " + field + " to " + fauxvalue);
				sattrs[field] = prevValue;
				setAttrs(sattrs);
			});
		}
	}

    //Force a change in a field to trigger a sheet worker and then reset the <fieldset>
    //This may be needed when an existing field is modified that's used in a roll button (e.g. Trademark Weapon modified how the skill formula is called, resulting in each we)
    const stepwiseFaux = function(section,field) {
		//only for repeating Sections
		//section = the repeating section
		//field = the field within the section to fauxily change
		//example call: stepwiseFaux("weapons","dmgbonusnum");
		//will do a faux change during each for loop

		let repeatingSection = `repeating_${section}`;
		getSectionIDs(repeatingSection, function(idArray) {
			if (idArray.length > 0) {
				for (let a=0; a < idArray.length; a++) {
					let fullField = `repeating_${section}_${idArray[a]}_${field}`;
					console.log("Stepwise Faux for: "+fullField);
					fauxChange(fullField,"1000");
				}
			}
			else {
				console.log("Nothing to see here...move along.");
			}
		});
	}

    const swapAttribute = function(section,oldField,newField) {
        log("Section",section,"orange");
        log("oldField",oldField,"orange");
        log("newField",newField,"orange");
        let repeatingSection = `repeating_${section}`;
        let output = {};
        let fieldList = [];
        let sectionList = [];
        //build list of fields to get the value of the field
		getSectionIDs(repeatingSection, function(idArray) {
            log(`Number of Rows in ${repeatingSection}`,idArray.length,"orange");
			if (idArray.length > 0) {
                log("idArray","Not Empty, made it to the If Statement","orange");
				for (let a=0; a < idArray.length; a++) {
                    log("Loop Count",a,"orange");
					let fullField = `${repeatingSection}_${idArray[a]}_${oldField}`;
                    fieldList.push(fullField);
                    sectionList.push(idArray[a]);
				}
			}
			else {
				log(`${repeatingSection} empty`,"Nothing to see here...move along.","orange");
			}
            //get the values of the "old" field
            log("Field List",fieldList,"orange");
            getAttrs(fieldList, function(v) {
                for (let b=0; b < fieldList.length; b++) {
                    log("getAttrs Loop",b,"orange");
                    let fieldValue = v[fieldList[b]];
                    log("Field Value",fieldValue,"orange");
                    output[`${repeatingSection}_${sectionList[b]}_${newField}`] = fieldValue;
                }
                log("Output",JSON.stringify(output),"orange");
                console.log("!!! Setting Real Values !!!");
                setAttrs(output);
            });
		});
    }

	/* ---- Begin Sheet Version Validation & Update ---- */

    const sheetVersionPrefix = "Official Savage Worlds v";
	const sheetVersion = "1.00.11";

	const upgradeSheet = function(version, versionone, versiontwo, versionthree,characterName) {
        //version format 1.00.01 (string)
        //versione format 1 (int)
        //versiontwo format 1 or 1.01 (float)
        //versionthree format 0.01 (float)
        log("Upgrade","Made to the upgrade path","Lime");
        log("Version Number",versionthree,"lime");
        let setattrvals = {};
        let setSheetVersion = sheetVersionPrefix+sheetVersion;
        log("shetSheetVersion",setSheetVersion,"lime");
        setattrvals["character_sheet"] = setSheetVersion;
        getAttrs(['character_sheet','initializeStatblock','wci'], function(v) {
            if(v.wci === "") {
                setattrvals["WCI"] = "✪";
            }
            //upgrade stuff goes here...
            if(versionthree < 0.03) {
                log("Version out of date",versionthree,"lime");
                //make sure Fighting is still unhidden for existing sheets
                setattrvals["staticFighting"] = "on";
            }
            if(versionthree < 0.04) {
                log("Upgrade Progress","Upgrading to version 1.00.05","pink");
                //setattrvals["newcontent"] = "unread";
                // setattrvals["newdocumentation"] = "unread";
            }
            if(versionthree < 0.05) {
                log("Upgrade Progress","Upgrading to version 1.00.05","pink");
            }
            if(versionthree < 0.06) {
                log("Upgrade Progress","Upgrading to version 1.00.06","cyan");
                stepwiseFaux("weapons","weaponAttackBonus");
            }
            if(versionthree < 0.07) {
                log("Upgrade Progress","Upgrding to version 1.00.07","goldenrod");
                stepwiseFaux("spells","spellbutton");
                //setattrvals["newcontent"] = "unread";
                // setattrvals["newdocumentation"] = "unread";
            }
            if(versionthree < 0.08) {
                //Start using a better field name...need to swap out the old field value into the new field...
                swapAttribute("weapons","minstrength","weaponminstrength");
                swapAttribute("armor","minstrength","armorminstrength");
                //Jiggle the buttons...
                fauxChange("repeating_weapons:weaponbutton","3");
                fauxChange("repeating_spells:spellbutton","3");
                //Make sure Bonus Damage Dice works for everyone (including those who may have unchecked variable bonus damage)
                fauxChange("RaiseHBRule","3");
                setattrvals["newcontent"] = "unread";
                setattrvals["newdocumentation"] = "unread";
            }
            if(versionthree < 0.10) {
                setattrvals["newcontent"] = "unread";
            }
            if(versionthree < 0.11) {
                setattrvals["newcontent"] = "unread";
            }
            else {
                log("Upgrade",`Sheet already updgraded (${characterName})`,"lime");
            }
            setAttrs(setattrvals);
        });
	};

	on('sheet:opened', function() {
		getAttrs(['character_name','character_sheet','initializeStatblock','wci'], function(v) {
			// v[character_sheet] will contain the current sheet version to know if an upgrade is necessary
			let setattrvals = {};
            let characterName = v.character_name;
			if(v.wci === "") {
				setattrvals["WCI"] = "✪";
			}
            log("Character Sheet",v.character_sheet,"lime");
            let charsheetName = v.character_sheet.substring(0,22);
            log("Sheet Name",charsheetName,"lime");
            let charsheetVersion = v.character_sheet.substring(24);
            log("Character Sheet Version",charsheetVersion,"lime");
            (charsheetName === "Official Savage Worlds" ? log("Sheet Type","Official","lime") : charsheetVersion = "1.00.00");
            let versionParts = charsheetVersion.split(".");
            log("Version before Upgrade",parseFloat(parseFloat(versionParts[1])+'.'+parseFloat(versionParts[2])) + ` (${characterName})`,"lime");
            //version format 1.00.01 (string)
            //versione format 1 (int)
            //versiontwo format 1 or 1.01 (float)
            //versionthree format 0.01 (float)
            let version = charsheetVersion;
            let versionone = parseInt(versionParts[0]);
            let versiontwo = parseFloat(versionParts[0]+"."+versionParts[1]);
            let versionthree = parseFloat(versionParts[1]+"."+versionParts[2]);
            log("Version Parts",versionParts,"lime");
            log("Version",version,"lime");
            log("Version One",versionone,"lime");
            log("versiontwo",versiontwo,"lime");
            log("Version Three",versionthree,"lime");
            upgradeSheet(version,versionone,versiontwo,versionthree,characterName);
			// if (v.character_sheet !== "Official Savage Worlds v1.00.02") {
            //     setattrvals["character_sheet"] = "Official Savage Worlds v1.00.02";
            //     setattrvals["newcontent"] = "unread";
            //     setattrvals["newdocumentation"] = "unread";
            // }
			// setAttrs(setattrvals);
		});
	});
	/* ---- End Sheet Version Validation & Update ---- */

	//Set Starting Attributes to d6
	on("change:attsatdsix", function(eventInfo) {
		let defaultdtype = "4";
		if(eventInfo.newValue === "1") {
			console.log("### Set default starting Die Type to d6");
			defaultdtype = "6";
		}
		setAttrs({
			agility: defaultdtype,
			smarts: defaultdtype,
			spirit: defaultdtype,
			strength: defaultdtype,
			vigor: defaultdtype
		});
	});

	const setWildDie = function() {
		getAttrs(["is_npc"], function(lvalue) {
			console.log("<==== Updating whether to Roll the Wild Die ====>")
			console.log("is_npc value: " + lvalue.is_npc);
			if (lvalue.is_npc === "0") {
				console.log("Is a Wild Card: Roll a Wild Die");
				setAttrs({ wdNum: 1 });
			}
			else {
				console.log("Is not a Wild Card: Don't roll a Wild Die");
				setAttrs({ wdNum: 0 });
			}
			console.log("<==== Finished Identifying Mook vs Wild Card ====>");
		});
	}

	/*Determine if Wild Die is rolled*/
	on("change:is_npc",function(){
		//'use strict';
		setWildDie();
	});

	on("change:repeating_edges:edge change:repeating_edges:tookat remove:repeating_edges", function(v) {
		log("Change in Edges","Look for Advances","yellow");
		getSectionIDs("edges", function(idArray) {
			let countOfAdvances = [];
			let listOfFields = [];
			for (let a=0; a< idArray.length; a++) {
				listOfFields[listOfFields.length] = "repeating_edges_" + idArray[a] + "_tookat";
			}
			getAttrs(listOfFields, function(v) {
				let arrayOfAdvances = Object.values(v);
				log("contents of v",arrayOfAdvances,"yellow");
				let countOfAdvances = 0;
				for(let i = 0; i < arrayOfAdvances.length; i++) {
					arrayOfAdvances[i] === "Advance" ? countOfAdvances++ : log("Not an Advance","True","yellow");
				}
				log("Number of Advances",countOfAdvances,"yellow");
				setAttrs({xp: countOfAdvances});
			});
		});
	});

	//Set Rank according to the XP value
	on("change:xp change:manualadvance change:rank change:usexp change:setadvance change:setrank", function() {
        //if setadvance = 1, xp should be hidden and the person wants to manually update the number of advances the character has taken (i.e. don't rely on the count of Advances in the Edges and Advances section)
		getAttrs(["xp","manualAdvance","rank","class","useXP","setadvance","setrank"], function(value) {
			console.log("useXP Value: "+value.useXP);
			console.log("xp value: " + value.xp);
			console.log("rank value: " + value.rank);
            let xpVal;
            (value.setadvance === "1" ? xpVal = parseInt(value.manualAdvance) || 0 : xpVal = parseInt(value.xp) || 0);
			//var xpVal = parseInt(value.xp)||0;
			console.log(xpVal);
			if (value.setrank === "on") {
				console.log("Don't set Rank at all, because there's a different structure");
			}
			else if(value.useXP === "on") {
				//Using XP instead of Advances
				if (xpVal >=80) {
					console.log("Setting rank to Legendary");
					setAttrs({Rank: 5});
					console.log("Setting class to Grad Student");
					setAttrs({Class: 5});
				}
				else if (xpVal >=60) {
					console.log("Setting rank to Heroic");
					setAttrs({Rank: 4});
					console.log("Setting class to Senior");
					setAttrs({Class: 4});
				}
				else if (xpVal >=40) {
					console.log("Setting rank to Veteran");
					setAttrs({Rank: 3});
					console.log("Setting class to Junior");
					setAttrs({Class: 3});
				}
				else if (xpVal >=20) {
					console.log("Setting rank to Seasoned");
					setAttrs({Rank: 2});
					console.log("Setting class to Sophomore");
					setAttrs({Class: 2});
				}
				else {
					console.log("Setting rank to Novice");
					setAttrs({Rank: 1});
					console.log("Setting class to Freshman");
					setAttrs({Class: 1});
				}
			}
			else {
				//Using Advances instead of xp
				if (xpVal < 4) {
					console.log("Setting rank to Novice");
					setAttrs({Rank: 1});
					console.log("Setting class to Freshman");
					setAttrs({Class: 1});
				}
				else if (xpVal < 8) {
					console.log("Setting rank to Seasoned");
					setAttrs({Rank: 2});
					console.log("Setting class to Sophomore");
					setAttrs({Class: 2});
				}
				else if (xpVal < 12) {
					console.log("Setting rank to Veteran");
					setAttrs({Rank: 3});
					console.log("Setting class to Junior");
					setAttrs({Class: 3});
				}
				else if (xpVal < 16) {
					console.log("Setting rank to Heroic");
					setAttrs({Rank: 4});
					console.log("Setting class to Senior");
					setAttrs({Class: 4});
				}
				else {
					console.log("Setting rank to Legendary");
					setAttrs({Rank: 5});
					console.log("Setting class to Grad Student");
					setAttrs({Class: 5});
				}
			}
		});
	});
	//End Rank

	// Animalistic Intelligence
	const updateAnimalIntelligenceDisplay = function() {
		getAttrs(["animalsmarts"], function(attributesValues) {
			console.log("Updating animal smarts " + attributesValues.animalsmarts);
			if (attributesValues.animalsmarts === "on") {
				setAttrs({ animalsmarts_display: "(A)" });
			} else {
				setAttrs({ animalsmarts_display: "" });
			}
		});
	}
	on("change:animalsmarts", function() {
		updateAnimalIntelligenceDisplay();
	});

	const baseToughness = function() {
		getAttrs(["vigor", "vigormod", "sizecur"], function(vvalue) {
			log("vigor Value",vvalue.vigor,"lime");
			log("vimod",vvalue.vigormod,"lime");
			var Vigor = parseInt(vvalue.vigor)||0;
			var ViMod = parseInt(vvalue.vigormod)||0;
			log("ViMod before Math",ViMod,"lime");
			log("ViMod with ceil",Math.ceil(ViMod/2),"lime");
			log("ViMod with floor",Math.floor(ViMod/2),"lime");
			(ViMod < 0 ? log("ViMod","Less than 0","lime") : log("ViMod","Greater than 0","Lime"));
			(ViMod < 0 ? ViMod = Math.ceil(ViMod/2) : ViMod = Math.floor(ViMod/2));
			log("ViMod",ViMod,"lime");
			var Size = parseInt(vvalue.sizecur)||0;
			var totVigor = Math.floor(Vigor/2) + ViMod;
			log("totVigor",totVigor,"lime");
			log("Toughness Formula Result",totVigor + 2 + Size,"lime");
			var toughFormulaResult = totVigor + 2 + Size;
            (toughFormulaResult < 1 ? toughFormulaResult = 1 : log("Toughness doesn't need to be adjusted","lime"));
			setAttrs({ toughness: toughFormulaResult });
			setToughness();
		});
	}

	//Set values for Size
	on("change:size change:sizemod", function() {
		getAttrs(["size","sizemod"], function(value) {
			let size = parseInt(value.size)||0;
			let sizemod = parseInt(value.sizemod)||0;
			let cursize = size + sizemod;
			let sizecat = "Normal";
			console.log(`#### Size: ${size}, Size Mod: ${sizemod}, Current Size: ${cursize} ####`);
			switch (cursize) {
				case ((cursize<=-4) ? cursize : -4) : console.log('Tiny'); sizecat = "tiny"; break;
				case ((cursize<=-3)?cursize:-3): console.log('Very Small'); sizecat = "very-small"; break;
				case ((cursize<=-2)?cursize:-2): console.log('Small'); sizecat = "small"; break;
				case ((cursize>=-1 && cursize<=3)?cursize:0): console.log('Normal'); sizecat = "normal"; break;
				case ((cursize>=4 && cursize<=7)?cursize:7): console.log('Large'); sizecat = "large"; break;
				case ((cursize>=8 && cursize<=11)?cursize:8): console.log('Huge'); sizecat = "huge"; break;
				default: console.log('Gargantuan'); sizecat = "gargantuan";
			}
			setAttrs({
				sizecategory: sizecat,
				sizecur: cursize
			});
		});
	});

	//Set Base Toughness (Regular and Neural)
	on("sheet:opened change:vigor change:vigormod change:toughness change:ntoughness change:sizecur", function() {
		log("Sheet Opened - Calling","baseToughness","lime");
		baseToughness();
	});

	const setToughness = function() {
		getAttrs(["toughness","tufnessMod","toughnessArmor"], function(value) {
			let tness = parseInt(value.toughness)||0;
			let tnessmod = parseInt(value.tufnessMod)||0;
			let tnessarmor = parseInt(value.toughnessArmor)||0;
            let currentToughness = tness+tnessmod+tnessarmor;
            (currentToughness < 1 ? currentToughness = 1 : log("Don't need to change Current Toughness","lime"));
			setAttrs({toughnesscur: currentToughness});
		});
	}

	//Set Current Toughness (Regular and Neural)
	on("change:toughness change:tufnessmod change:toughnessarmor", function(eventInfo) {
		log("Triggering","setToughness","lime");
		setToughness();
	});

    //check Parry updates for Shields
    on("change:repeating_shields change:repeating_shields:shieldworn change:repeating_shield:shieldparry remove:repeating_shields", function() {
        //get all shields
        getSectionIDs("repeating_shields", function(idArray) {
            log("Shields","Get Shields ID","green");
			//Construct Array of fields to get attributes for...
			let sumFields = [];
			for (let a=0; a< idArray.length; a++) {
				sumFields[sumFields.length] = "repeating_shields_" + idArray[a] + "_shieldWorn";
				sumFields[sumFields.length] = "repeating_shields_" + idArray[a] + "_ShieldParry";
			}
            log("Shields ID Array Length",sumFields.length,"green");
			//sumFields[sumFields.length] = "toughnessArmor"
			getAttrs(sumFields, function(v) {
                //Find the highest Parry value that's "Worn" and use that update Parry
                let highestParry = 0;
                let repSectionID;
                let parryScore;
                log("idArray Length",idArray.length,"green");
                if(idArray.length > 0) {
                    log("Array Loop","Loop through the array","green");
                    for (let a=0; a < idArray.length; a++) {
                        repSectionID = idArray[a];
                        log("Shield Parry",v[`repeating_shields_${repSectionID}_ShieldParry`],"green");
                        parryScore = parseInt(v[`repeating_shields_${repSectionID}_ShieldParry`]) || 0;
                        log("Shield Worn",v[`repeating_shields_${repSectionID}_shieldWorn`],"green");
                        if(v[`repeating_shields_${repSectionID}_shieldWorn`] === "1" && parryScore > highestParry) {
                            highestParry = parryScore;
                        }
                    }
                }
                log("Highest Parry",highestParry,"green");
                setAttrs({shieldparry: highestParry});
            });
        });
    });

	//Set Parry
	on("sheet:opened change:fighting change:fightingmod change:parry change:parryMod change:shieldparry", function() {
		getAttrs(["fighting", "fightingmod", "parryMod", "shieldparry"], function(pvalue) {
			console.log("fighting value: " + pvalue.fighting);
			console.log("mod value: " + pvalue.FightingMod);
			console.log("parry mod: " + pvalue.parryMod);
            console.log("shield parry: " + pvalue.shieldparry);
			var Fighting = parseInt(pvalue.fighting);
			var FightingMod = parseInt(pvalue.fightingmod);
			var totFighting = Fighting + FightingMod;
			switch (Fighting) {
				case 4:
					if (Fighting === 4 && FightingMod === -2) {
						//Unskilled
						totFighting = 0;
					}
					else { totFighting = Fighting; }
					break;
				case 6:
				case 8:
				case 10:
					totFighting = Fighting;
					break;
				case 12:
					totFighting = Fighting + FightingMod;
					break;
				default:
					totFighting = 4;
			}

			var parryMod = parseInt(pvalue.parryMod);
            let shieldParry = parseInt(pvalue.shieldparry) || 0;
			var parryCalc = Math.floor(totFighting/2) + 2;
			setAttrs({ parry: parryCalc  });
			setAttrs({ parryCur:  parryCalc + parryMod + shieldParry });
		});
	});

	const setPace = function() {
		getAttrs(["pace", "paceMod", "woundsMod", "paceignoreswounds"], function(pvalue) {
			console.log("pace value: " + pvalue.pace);
			console.log("mod value: " + pvalue.paceMod);
			let pace_base = parseInt(pvalue.pace) || 0;
			let pace_mod = parseInt(pvalue.paceMod) || 0;
			let wound_mod = parseInt(pvalue.woundsMod) || 0;
			let totPace = 0;
			if (pvalue.paceignoreswounds === "on") {
				totPace = pace_base + pace_mod;
			}
			else {
				totPace = pace_base + pace_mod - wound_mod;
			}

			if (totPace < 1) { totPace = 1;}
			setAttrs({ paceCur: totPace  });
		});
	}

	//Set Pace
	on("change:pace change:pacemod change:woundsmod change:paceignoreswounds", function() {
		setPace();
	});

	//Calculate Total Armor Weight
	on("change:repeating_armor:armortypeweight change:repeating_armor:armorcarried remove:repeating_armor", function(eventInfo) {
		repeatingSimpleSumWCheck('armor','ArmorTypeWeight','armortotalweightcarried','ArmorCarried','on');
	});

    //Calculate Total Shield Weight
    on("change:repeating_shields:shieldtypeweight change:repeating_shields:shieldworn remove:repeating_shields", function(eventInfo) {
        repeatingSimpleSumWCheck('shields','ShieldTypeWeight','shieldtotalweightcarried','shieldWorn','1');
    })

	//Calculate Total Weapon Weight
	on("change:repeating_weapons:weaponweight change:repeating_weapons:weaponcarried remove:repeating_weapons", function(eventInfo) {
		repeatingSimpleSumWCheck('weapons','weaponweight','weapontotalweightcarried','weaponcarried','on');
	});

	on("change:repeating_gear:itemqty change:repeating_gear:itemweight", function(eventInfo) {
		console.log("%%% Gear Quantity and Weight Changed %%%");
		getAttrs(['repeating_gear_itemqty','repeating_gear_itemweight'], function(v) {
			let quantity = parseFloat(v.repeating_gear_itemqty) || 0;
			let itemWeight = parseFloat(v.repeating_gear_itemweight) || 0;
			let itemTotalWeight = itemWeight * quantity;
			console.log("Quantity: "+quantity+", weight: "+itemWeight+", total weight: "+itemTotalWeight);
			setAttrs({repeating_gear_totalItemWeight: itemTotalWeight});
		});
	});

	on("change:repeating_gear:totalItemWeight change:repeating_gear:itemcarried remove:repeating_gear", function(eventInfo) {
		repeatingSimpleSumWCheck('gear','totalItemWeight','geartotalweightcarried','itemcarried','on');
	});

	//Calculate Total Load Carried
	on("change:armortotalweightcarried change:shieldtotalweightcarried change:weapontotalweightcarried change:rangedtotalweightcarried change:geartotalweightcarried",function(){
		getAttrs(["armortotalweightcarried", "shieldtotalweightcarried", "weapontotalweightcarried", "geartotalweightcarried"], function(lvalue) {
			let armor = parseFloat(lvalue.armortotalweightcarried)||0;
			let weapon = parseFloat(lvalue.weapontotalweightcarried)||0;
			let gear = parseFloat(lvalue.geartotalweightcarried)||0;
            let shields = parseFloat(lvalue.shieldtotalweightcarried)||0;
			setAttrs({ totalloadcarried: armor + weapon + gear + shields });
		});
	});

	//Calculate Armor Modifier for Toughness (Looking at Torso only)
	on("change:repeating_armor:armorworn change:repeating_armor:areaprotected change:repeating_armor:armortypeprotection change:repeating_armor:armorstack remove:repeating_armor", function() {
		console.log("^^^ Changes in Armor...might impact Toughness ^^^");
		getSectionIDs("repeating_armor", function(idArray) {
			//Construct Array of fields to get attributes for...
			let sumFields = [];
			for (let a=0; a< idArray.length; a++) {
				sumFields[sumFields.length] = "repeating_armor_" + idArray[a] + "_armorWorn";
				sumFields[sumFields.length] = "repeating_armor_" + idArray[a] + "_AreaProtected";
				sumFields[sumFields.length] = "repeating_armor_" + idArray[a] + "_ArmorTypeProtection";
				sumFields[sumFields.length] = "repeating_armor_" + idArray[a] + "_armorstack";
			}
			//sumFields[sumFields.length] = "toughnessArmor"
			getAttrs(sumFields, function(v) {
				console.log("%%% values of v: "+ JSON.stringify(v) +" %%%");
				let armorTotal = 0;
				let highestNonStack = 0;
				let highestStack = 0;
				let previousHighest = 0;
				let previousStack = 0;
				let stackProtection = 0;
				let stackCalc = 0;
				console.log("ARMOR VALUE: "+armorTotal);
				console.log("!!! Armor Worn Test Value: " + v['repeating_armor_'+idArray[0]+'_armorWorn']);
				for(a=0; a<idArray.length; a++){
					console.log("xXxX Armor Protection Value: " + v['repeating_armor_'+idArray[a]+'_ArmorTypeProtection'] + " xXxX");
					let aProtection = parseInt(v['repeating_armor_'+idArray[a]+'_ArmorTypeProtection']) || 0;
					let aStack = parseFloat(v['repeating_armor_'+idArray[a]+'_armorstack']) || 0;
					let aCovers = parseInt(v['repeating_armor_'+idArray[a]+'_AreaProtected']) || 0;
					console.log("xXxX Armor Protection Value: " + aProtection + " xXxX");
					//cycle through the armors and see if any of the worn items are of greater protection
					console.log("Iteration Number: "+a);
					if(v['repeating_armor_'+idArray[a]+'_armorWorn'] != '1') {
						//Armor is not worn
						console.log("Armor is not worn, moving on...");
					}
					else { //Armor is Worn, need to determine if it covers the Torso
						if (aCovers == 1 || aCovers == 6 || aCovers == 7) {
							//Not Torso
							console.log("Armor doesn't cover the Torso, moving on...");
						}
						else {
							//Armor covers Torso
							if(aStack === 0) {
								//Armor doesn't stack--need to find the highest armor value and store it
								if(aProtection > highestNonStack) {
									//Make this new armor value the Highest Non Stack
									console.log("!!! Worn Armor Covers Torso and protection is Higher than current highest Armor value");
									console.log("!!! Highest Value: "+highestNonStack);
									console.log("!!! Current Value: "+ aProtection);
									previousHighest = highestNonStack;
									highestNonStack = aProtection;
								}
								else {
									console.log("!!! Current Armor value is not higher than the current highest !!!");
								}
							}
							else {
								//Armor Stacks
								stackCalc += Math.floor(aProtection*aStack);
							}
						}
					}
				}
				console.log("Done iterating through the Armor");
				//armorTotal = highestNonStack + stackProtection;
				armorTotal = highestNonStack + stackCalc;
				console.log("___ Total Armor Protection: "+armorTotal+" ___");
				setAttrs({toughnessArmor: armorTotal});
			});
		});
	});

	//Weapon Button config
	const weaponlist = ['repeating_weapons','repeating_paweapons','repeating_raweapons'];

	weaponlist.forEach(weapon => {
		on(`change:${weapon}:weaponbutton change:${weapon}:weaponskill change:${weapon}:weaponAttackBonus change:${weapon}:paweaponbutton change:${weapon}:paweaponskill change:${weapon}:raweaponbutton change:${weapon}:raweaponskill`, function(eventInfo) {
			console.log(eventInfo.sourceAttribute);
			let pa = '';
			let wbutton = 'repeating_weapons_weaponbutton';
			let wskill = 'repeating_weapons_weaponskill';
			if (eventInfo.sourceAttribute.slice(10,12) === 'pa') {
				pa = 'pa';
				wbutton = 'repeating_paweapons_paweaponbutton';
				wskill = 'repeating_paweapons_paweaponskill';
			}
			else if (eventInfo.sourceAttribute.slice(10,12) === 'ra') {
				pa = 'ra';
				wbutton = 'repeating_raweapons_raweaponbutton';
				wskill = 'repeating_raweapons_raweaponskill';
			}
			const skillUn = `@{whisperweapon} &{template:roll} {{namelength=@{namelength}}} @{rolltUnskilled} {{skill_roll=&{noerror} [[ @{weaponUnskilledFormula} + @{weaponAttackBonus} [@{weaponAttackBonusReason}] ]]}} {{wild_die=[[ @{weaponUnskilledWildDieFormula} + @{weaponAttackBonus} [@{weaponAttackBonusReason}] ]]}} @{unshakeTemplate} {{trait=^{unskilled}}} {{source=@{${pa}weapon}}} {{button=y}} {{ReRoll=^{reroll}(~repeating_weapons_tWeapon) }} {{DmgRoll=^{roll-damage}(~repeating_${pa}weapons_${pa}dmg) }} @{unskilledencumbrancebutton} @{showtraitmods} @{multiattack}`;
			const skillFi = `@{whisperweapon} &{template:roll} {{namelength=@{namelength}}} {{trait=@{fightingname}}} {{source=@{${pa}weapon}}} @{rolltFighting} {{skill_roll=&{noerror} [[ @{weaponFightingFormula} + @{weaponAttackBonus} [@{weaponAttackBonusReason}] ]]}} {{wild_die=[[ @{weaponFightingWildDieFormula} + @{weaponAttackBonus} [@{weaponAttackBonusReason}] ]]}} @{unshakeTemplate} {{button=y}} {{ReRoll=^{reroll}(~repeating_weapons_tWeapon) }} {{DmgRoll=^{roll-damage}(~repeating_${pa}weapons_${pa}dmg) }} @{setmodsenc} @{showtraitmods} @{multiattack}`;
			const skillAt = `@{whisperweapon} &{template:roll} {{namelength=@{namelength}}} {{trait=@{athleticsname}}} {{source=@{${pa}weapon}}} @{rolltAthletics} {{skill_roll=&{noerror} [[ @{weaponAthleticsFormula} + @{weaponAttackBonus} [@{weaponAttackBonusReason}] ]]}} {{wild_die=[[ @{weaponAthleticsWildDieFormula} + @{weaponAttackBonus} [@{weaponAttackBonusReason}] ]]}} @{unshakeTemplate} {{button=y}} {{ReRoll=^{reroll}(~repeating_weapons_tWeapon) }} {{DmgRoll=^{roll-damage}(~repeating_${pa}weapons_${pa}dmg) }} @{setmodsenc} @{showtraitmods} @{multiattack}`;
			const skillSh = `@{whisperweapon} &{template:roll} {{namelength=@{namelength}}} {{trait=@{shootingname}}} {{source=@{${pa}weapon}}} @{rolltShooting} {{skill_roll=&{noerror} [[ @{weaponShootingFormula} + @{weaponAttackBonus} [@{weaponAttackBonusReason}] ]]}} {{wild_die=[[ @{weaponShootingWildDieFormula} + @{weaponAttackBonus} [@{weaponAttackBonusReason}] ]]}}@{unshakeTemplate} {{button=y}} {{ReRoll=^{reroll}(~repeating_weapons_tWeapon) }} {{DmgRoll=^{roll-damage}(~repeating_${pa}weapons_${pa}dmg) }} @{setmodsenc} @{showtraitmods} @{multiattack}`;
			const skillWS = `@{whisperweapon} &{template:roll} {{namelength=@{namelength}}} {{trait=@{weirdsciencename}}} {{source=@{${pa}weapon}}} @{rolltWeirdScience} {{skill_roll=&{noerror} [[ @{weaponWeirdScienceFormula} + @{weaponAttackBonus} [@{weaponAttackBonusReason}] ]]}} {{wild_die=[[ @{weaponWeirdScienceWildDieFormula} + @{weaponAttackBonus} [@{weaponAttackBonusReason}] ]]}}@{unshakeTemplate} {{button=y}} {{ReRoll=^{reroll}(~repeating_weapons_tWeapon) }} {{DmgRoll=^{roll-damage}(~repeating_${pa}weapons_${pa}dmg) }} @{setmodsenc} @{showtraitmods} @{multiattack}`;
			console.log(eventInfo.sourceAttribute);
			let sid = eventInfo.sourceAttribute.slice(18,38);
			let skillToUse = skillFi;
			console.log("sid: "+sid);
			console.log("skillFi: "+skillFi);
			getAttrs([`${weapon}_${pa}weaponbutton`,`${weapon}_${pa}weaponskill`], function(value) {
				let tWeaponFormula = '';
				if(value[wbutton] === "0" || value[wbutton] === "2") {
					//Attack + Damage Roll in One
					console.log("!! Attack + Damage !!");
					tWeaponFormula = `@{${pa}skillNDamage}`;
					switch(value[wskill]) {
						case 'fighting':
							skillToUse = skillFi;
							break;
						case 'athletics':
							skillToUse = skillAt;
							break;
						case 'shooting':
							skillToUse = skillSh;
							break;
						case 'weirdscience':
							skillToUse = skillWS;
							break;
						case 'unskilled':
							skillToUse = skillUn;
							break;
						default:
							skillToUse = skillFi;
							break;
					}
					console.log("weaponskill: "+value[wskill]);
					console.log("skillToUse: "+skillToUse);
				}
				else {
					//Damage roll only
					console.log("!! Damage Only !!");
					//tWeaponFormula = "@{repeating_weapons_"+ sid +"_damageOnly}";
					tWeaponFormula = `@{${pa}damageOnly}`;
					console.log(`tWeaponFormula: ${tWeaponFormula}`);
				}
				switch(pa) {
					case 'pa':
						setAttrs({
							repeating_paweapons_paweaponroll: tWeaponFormula,
							repeating_paweapons_paskillNDamage: skillToUse
						});
						break;
					case 'ra':
						console.log("### Updating the Robot Button Values ###");
						setAttrs({
							repeating_raweapons_raweaponroll: tWeaponFormula,
							repeating_raweapons_raskillNDamage: skillToUse
						});
						break;
					default:
						setAttrs({
							repeating_weapons_weaponroll: tWeaponFormula,
							repeating_weapons_skillNDamage: skillToUse
						});
						break;
				}
			});
		});
	});

	//Multi Attack
	on("change:repeating_weapons:rof change:repeating_weapons:weaponbutton change:repeating_weapons:weaponskill", function(eventInfo) {
		/* rof > 1; need to set showmulti = 1 (show Atk^+Dmg), otherwise 0 (hide Atk^+Dmg)
			if weaponbutton === 2, then we need to build the multi attack formula (goes in multiattack variable)
		*/
		console.log("@@@ A Change Happened @@@");
		console.log(`@@@ ${eventInfo.sourceAttribute} @@@`);
		getAttrs(["repeating_weapons_rof","repeating_weapons_weaponbutton","repeating_weapons_weaponskill","repeating_weapons_multiattack","atkxconfig"], function(v) {
			let rof = parseInt(v.repeating_weapons_rof) || 0;
			let weaponbutton = v.repeating_weapons_weaponbutton;
			let weaponskill = v.repeating_weapons_weaponskill;
			let xconfig = v.atkxconfig
			let multiattackformula ='';
			console.log(`*** ROF: ${rof} ***`);
			if (rof > 1) {
				console.log("Show the Atk^+Dmg button");
				setAttrs({repeating_weapons_showmulti: "1"}); /*show Atk^+Dmg on drop down menu*/
			}

			if (rof < 2 && weaponbutton === "2") { /*if ROF < 2 and Weapons Button is set to Atk^+Dmg, need set it to just Atk+Dmg*/
				console.log("Hide the Atk^+Dmg Button and if it was set to Atk^+Dmg, change it to Atk+Dmg");
				console.log("Set multiattack to 0, so we don't get the multi attack stuff in the roll template");
				setAttrs({
					repeating_weapons_showmulti: "0",
					repeating_weapons_weaponbutton: "0",
					repeating_weapons_multiattack: "0"
				});
			}
			console.log(`*** weaponbutton: ${weaponbutton} ***`);
			if (weaponbutton === "2") {
				console.log("### Constructing the multiattack formula ###");
				console.log("constructing roll query");
				let templatecalls = "";
				let a,b;
				let loopParam, loopParam2;
				//adjusting the roll query
				if (xconfig === "0") {a = rof; loopParam = `a > 0`; loopParam2 = `a--`;}
				else {a = 1; loopParam = `a <= ${rof}`; loopParam2 = `a++`;}
				//Create the Roll Query
				let rollquery = '?{Number of Skill Dice';
				for (a; eval(loopParam); eval(loopParam2)) {
					rollquery += `|${a}`;
					console.log(`RQ: ${rollquery}`);
				}
				rollquery += "}";
				//Create the Roll Formula
				let multiattackformula = "";
                let x;
                switch (weaponskill) {
                    case 'fighting':
                        x = 'Fighting';
                        break;
                    case 'athletics':
                        x = 'Athletics';
                        break;
                    case 'shooting':
                        x = 'Shooting';
                        break;
                    case 'weirdscience':
                        x = 'Weirdscience';
                        break;
                    default:
                        x = 'Unskilled';
                }
				for (b = 2; b <= rof; b++) {
					if (b === 6 && rof > 6 && xconfig !== "2"){
						console.log("!!! Using the Roll Query !!!");
						console.log(`b: ${b} || rof: ${rof} || xconfig: ${xconfig}`);
						// multiattackformula += `{{skill_rollall=^{plus-the-next} [[${rollquery}-5]]}} `;
					}
					//multiattackformula += `{{skill_roll${b}=[[@{${weaponskill}rollformula}]]}} `;
                    multiattackformula += `{{skill_roll${b}=&{noerror} [[ @{weapon${x}Formula} + @{weaponAttackBonus} [@{weaponAttackBonusReason}] ]]}} `;
				}
				if (xconfig === "2") {
					multiattackformula += `{{numrolls=[[1d0+${rof}]]}}`;
				}
				else {
					multiattackformula += `{{numrolls=[[1d0+${rollquery}]]}} `;
				}
				multiattackformula = multiattackformula.trim();
				console.log(`||| ${multiattackformula} |||`);
				setAttrs({
					repeating_weapons_multiattack: multiattackformula
				});
			}
			else {
				console.log("Change was triggered, but Weapon Button isn't Atk^+Dmg");
				setAttrs({
					repeating_weapons_multiattack: "0"
				});
			}
		});
	});

	//Spell Button config
	on("change:repeating_spells:spellbutton change:repeating_spells:spellskill", function(eventInfo) {
		console.log(eventInfo.sourceAttribute);
		let sid = eventInfo.sourceAttribute.slice(18,38);
		const skillUn = "@{rolltUnskilled} @{unshakeTemplate} {{trait=^{unskilled}}} @{unskilledencumbrancebutton} @{showtraitmods} {{button=y}} {{ReRoll=^{reroll}(~repeating_spells_tPower) }}";
		const skillAt = "{{trait=@{athleticsname}}} @{rolltAthletics} @{unshakeTemplate} @{setmodsenc} @{showtraitmods} {{button=y}} {{ReRoll=^{reroll}(~repeating_spells_tPower) }}";
		const skillFa = "{{trait=@{faithname}}} @{rolltFaith} @{unshakeTemplate} @{setmods} @{showtraitmods} {{button=y}} {{ReRoll=^{reroll}(~repeating_spells_tPower) }}";
		const skillFo = "{{trait=@{focusname}}} @{rolltFocus} @{unshakeTemplate} @{setmods} @{showtraitmods} {{button=y}} {{ReRoll=^{reroll}(~repeating_spells_tPower) }}";
		const skillPe = "{{trait=@{performancename}}} @{rolltPerformance} @{unshakeTemplate} @{setmods} @{showtraitmods} {{button=y}} {{ReRoll=^{reroll}(~repeating_spells_tPower) }}";
		const skillPs = "{{trait=@{psionicsname}}} @{rolltPsionics} @{unshakeTemplate} @{linkedpsionicsattbutton} @{showtraitmods} {{button=y}} {{ReRoll=^{reroll}(~repeating_spells_tPower) }}";
		const skillRi = "{{trait=@{ritualname}}} @{rolltRitual} @{unshakeTemplate} @{linkedritualattbutton} @{showtraitmods} {{button=y}} {{ReRoll=^{reroll}(~repeating_spells_tPower) }}";
		const skillSp = "{{trait=@{spellcastingname}}} @{rolltSpellcasting} @{unshakeTemplate} @{linkedspellcastingattbutton} @{showtraitmods} {{button=y}} {{ReRoll=^{reroll}(~repeating_spells_tPower) }}";
		const skillWs = "{{trait=@{weirdsciencename}}} @{rolltWeirdScience} {{skill_roll=&{noerror} [[ @{spellWeirdScienceFormula} + @{spellAttackBonus} [@{spellAttackBonusReason}] ]]}} {{wild_die=[[ @{spellWeirdScienceWildDieFormula} + @{spellAttackBonus} [@{spellAttackBonusReason}] ]]}} @{unshakeTemplate} @{linkedweirdscienceattbutton} @{showtraitmods} {{button=y}} {{ReRoll=^{reroll}(~repeating_spells_tPower) }}";
		const skilltemp = "@{whisperspell} &{template:roll} {{namelength=@{namelength}}} {{source=@{power}}} {{trappings=@{trappings}}} {{PowerTemplate=y}} @{shownotes} {{button=y}} {{ReRoll=^{reroll}(~repeating_spells_tPower) }}"

		let skillToUse = skillSp;
		console.log("sid: "+sid);
		console.log("skillSp: "+skillSp);
		getAttrs(["repeating_spells_spellbutton","repeating_spells_spellskill"], function(value) {
			let tSpellFormula = '';
			if(value.repeating_spells_spellbutton === "0" || value.repeating_spells_spellbutton === "2") {
				//Attack + Damage Roll in One
				console.log("!! Need to use Skills !!");
				skillToUse = skilltemp + " ";
				switch(value.repeating_spells_spellskill) {
					case 'athletics':
						skillToUse += skillAt;
						break;
					case 'faith':
						skillToUse += skillFa;
						break;
					case 'focus':
						skillToUse += skillFo;
						break;
					case 'performance':
						skillToUse += skillPe;
						break;
					case 'psionics':
						skillToUse += skillPs;
						break;
					case 'ritual':
						skillToUse += skillRi;
						break;
					case 'spellcasting':
						skillToUse += skillSp;
						break;
					case 'weirdscience':
						skillToUse += skillWs;
						break;
					case 'unskilled':
						skillToUse += skillUn;
						break;
					default:
						skillToUse += skillSp;
						break;
				}
				console.log("spellskill: "+value.repeating_spells_spellskill);
				console.log("skillToUse: "+skillToUse);
			}

			if (value.repeating_spells_spellbutton ===  "0") {
				//Atk + Damage
				tSpellFormula = "@{spellskillNDamage}";
				skillToUse += " {{DmgRoll=^{roll-damage}(~repeating_spells_spelldmg) }}";
			}
			else if (value.repeating_spells_spellbutton ===  "1")  {
				//Damage roll only
				console.log("!! Damage Only !!");
				//tspellFormula = "@{repeating_spells_"+ sid +"_damageOnly}";
				tSpellFormula = "@{spelldamageOnly}";
			}

			else {
				//skill only roll
				tSpellFormula = "@{skillOnly}";
			}
			setAttrs({
				repeating_spells_spellroll: tSpellFormula,
				repeating_spells_spellskillNDamage: skillToUse,
				repeating_spells_skillOnly: skillToUse
			});
		});
	});

	//Get Weapon Damage
	// Used to also contain: change:repeating_paweapons:padamageatt change:repeating_paweapons:padmgnumdice change:repeating_paweapons:padmgdietype change:repeating_paweapons:padmgbonusnum change:repeating_raweapons:radamageatt change:repeating_raweapons:radmgnumdice change:repeating_raweapons:radmgdietype change:repeating_raweapons:radmgbonusnum
	on("change:repeating_weapons:damageatt change:repeating_weapons:dmgnumdice change:repeating_weapons:dmgdietype change:repeating_weapons:dmgbonusnum",function(eventInfo) {
		let pa = '';
		if (eventInfo.sourceAttribute.slice(10,12) === 'pa') {
			pa = 'pa';
		}
		else if (eventInfo.sourceAttribute.slice(10,12) === 'ra') {
			pa = 'ra';
		}
		getAttrs(["agility_display","smarts_rank","spirit_rank","strength_rank","vigor_rank",`repeating_${pa}weapons_${pa}damageatt`,`repeating_${pa}weapons_${pa}dmgnumdice`,`repeating_${pa}weapons_${pa}dmgdietype`,`repeating_${pa}weapons_${pa}dmgbonusnum`],function(value) {
			let dmgdisplay, dmgformula = "";
			let strTranslation = getTranslationByKey('strength-abbr');
			let aglTranslation = getTranslationByKey('agility-abbr');
			let smaTranslation = getTranslationByKey('smarts-abbr');
			let spiTranslation = getTranslationByKey('spirit-abbr');
			let vigTranslation = getTranslationByKey('vigor-abbr');
			//Step One: Get the Attribute, if one is selected
			console.log("The Value: "+value[`repeating_${pa}weapons_${pa}damageatt`]);
			if (value[`repeating_${pa}weapons_${pa}damageatt`] === "strength") {
				dmgdisplay = strTranslation;
				dmgformula = `@{${pa}strength_rank}`;
			}
			else if (value.repeating_weapons_damageatt === "agility") {
				dmgdisplay = aglTranslation;
				dmgformula = "@{agility_rank}";
			}
			else if (value.repeating_weapons_damageatt === "smarts") {
				dmgdisplay = smaTranslation;
				dmgformula = "@{smarts_rank}";
			}
			else if (value.repeating_weapons_damageatt === "spirit") {
				dmgdisplay = spiTranslation;
				dmgformula = "@{spirit_rank}";
			}
			else if (value.repeating_weapons_damageatt === "vigor") {
				dmgdisplay = vigTranslation;
				dmgformula = "@{vigor_rank}";
			}
			else {
				console.log("No Attribute for this selection");
				dmgdisplay = "";
				dmgformula = "";
			}
			//Step Two: Determine the number of dice
			let numDice = parseInt(value[`repeating_${pa}weapons_${pa}dmgnumdice`]) || 0;
			if (numDice > 100) {
				console.log("Number of Dice too great, not using it as part of the damage expression");
				dmgdisplay = dmgdisplay;
				dmgformula = dmgformula;
			}
			else if (numDice === 0) {
				console.log("No Dice Type to roll");
				dmgdisplay = dmgdisplay;
				dmgformula = dmgformula;
			}
            else if (numDice < 0) {
                log("Number of Dice","Less than -1, use Variable","firebrick");
                dmgdisplay = "1" + value[`repeating_${pa}weapons_${pa}dmgnumdice`] + value[`repeating_${pa}weapons_${pa}dmgdietype`].replace('!','');
                dmgformula = "?{" + getTranslationByKey("number-of-damage-dice-to-roll");
                let tempNum = numDice * -1;
                for (a = tempNum; a > 0; a--) {
                    dmgformula += "|" + tempNum;
                    tempNum -= 1;
                }
                dmgformula += "}" + value[`repeating_${pa}weapons_${pa}dmgdietype`];
            }
			else { // Means the number of dice is bettween 1 and 100
				if (value[`repeating_${pa}weapons_${pa}damageatt`] === "na") {
					dmgdisplay = value[`repeating_${pa}weapons_${pa}dmgnumdice`] + value[`repeating_${pa}weapons_${pa}dmgdietype`].replace('!','');
					dmgformula = value[`repeating_${pa}weapons_${pa}dmgnumdice`] + value[`repeating_${pa}weapons_${pa}dmgdietype`];
				}
				else {
					dmgdisplay += "+" + value[`repeating_${pa}weapons_${pa}dmgnumdice`] + value[`repeating_${pa}weapons_${pa}dmgdietype`].replace('!','');
					dmgformula += "+" + value[`repeating_${pa}weapons_${pa}dmgnumdice`] + value[`repeating_${pa}weapons_${pa}dmgdietype`];
				}
			}
			console.log("___ Stuff so far: "+dmgdisplay+" ___");
			//Step Three:  Determine if we need to add a Modifier
			let checkString = value[`repeating_${pa}weapons_${pa}dmgbonusnum`];
			//will match anything from a single number to #d#!+/-###
			//const modFormat = /^(\d*d?\d{1,2}!)?([\+-]?\d{0,3})$/g;
			const modFormat = /^(-?\d*)((d?)(\d{1,2}))(!?)?([\+-]?)(\d{0,3})$/g;
			let modifier = checkString.match(modFormat);
			console.log("Modifier: " + modifier);
			let names=['fullExpression','preNum','fullDieType','die','dieType','ace','modType','postNum'];
			let result = modFormat.exec(checkString);
			console.log("checkString Value: " + checkString);
			if(modifier === null) {
				if(dmgdisplay.length > 0) {
					dmgdisplay = dmgdisplay;
					dmgformula = dmgformula;
				}
				else {
					dmgdisplay = "None";
					dmgformula = "1d0[None]";
				}
			}
			else { //modifier is not null
				if (dmgformula.length > 0) {
					dmgformula += "+" + modifier;
					dmgdisplay += "+" + modifier;
				}
				else {
					dmgformula = modifier;
					dmgdisplay = modifier;
				}
			}
			//Step Four: update the values
			console.log("!!! Damage: " + dmgdisplay + " !!!");
			console.log("!!! Formula: " + dmgformula + " !!!");
			switch(pa) {
				case 'pa':
					setAttrs({
						repeating_paweapons_paweapondamage: dmgdisplay,
						repeating_paweapons_paweapondmg: dmgformula
					});
					break;
				case 'ra':
					setAttrs({
						repeating_raweapons_raweapondamage: dmgdisplay,
						repeating_raweapons_raweapondmg: dmgformula
					});
					break;
				default:
					setAttrs({
						repeating_weapons_weapondamage: dmgdisplay,
						repeating_weapons_weapondmg: dmgformula,
						repeating_weapons_highlightdamage: "0"
					});
					break;
			}

		});
	});

	//Spell Damage config
	on("change:repeating_spells:power change:repeating_spells:spelldamageatt change:repeating_spells:spelldmgnumdice change:repeating_spells:spelldmgdietype change:repeating_spells:spelldmgbonusnum",function() {
		getAttrs(["agility_display","smarts_rank","spirit_rank","strength_rank","vigor_rank","repeating_spells_spelldamageatt","repeating_spells_spelldmgnumdice","repeating_spells_spelldmgdietype","repeating_spells_spelldmgbonusnum"],function(value) {
			let dmgdisplay, dmgformula = "";
			let strTranslation = getTranslationByKey('strength-abbr');
			let aglTranslation = getTranslationByKey('agility-abbr');
			let smaTranslation = getTranslationByKey('smarts-abbr');
			let spiTranslation = getTranslationByKey('spirit-abbr');
			let vigTranslation = getTranslationByKey('vigor-abbr');
			//Step One: Get the Attribute, if one is selected
			console.log("The Value: "+value.repeating_spells_spelldamageatt);
			if (value.repeating_spells_spelldamageatt === "strength") {
				dmgdisplay = strTranslation;
				dmgformula = "@{strength_rank}";
			}
			else if (value.repeating_spells_spelldamageatt === "agility") {
				dmgdisplay = aglTranslation;
				dmgformula = "@{agility_rank}";
			}
			else if (value.repeating_spells_spelldamageatt === "smarts") {
				dmgdisplay = smaTranslation;
				dmgformula = "@{smarts_rank}";
			}
			else if (value.repeating_spells_spelldamageatt === "spirit") {
				dmgdisplay = spiTranslation;
				dmgformula = "@{spirit_rank}";
			}
			else if (value.repeating_spells_spelldamageatt === "vigor") {
				dmgdisplay = vigTranslation;
				dmgformula = "@{vigor_rank}";
			}
			else {
				console.log("No Attribute for this selection");
				dmgdisplay = "";
				dmgformula = "";
			}
			//Step Two: Determine the number of dice
			let numDice = parseInt(value.repeating_spells_spelldmgnumdice) || 0;
			console.log("Number of Dice: "+ numDice);
			if (numDice > 100) {
				console.log("Number of Dice too great, not using it as part of the damage expression");
				dmgdisplay = dmgdisplay;
				dmgformula = dmgformula;
			}
			else if (numDice === 0) {
				console.log("No Dice Type to roll");
				dmgdisplay = dmgdisplay;
				dmgformula = dmgformula;
			}
            else if (numDice < 0) {
                log("Number of Dice","Less than -1, use Variable","firebrick");
                dmgdisplay = "1" + value.repeating_spells_spelldmgnumdice + value.repeating_spells_spelldmgdietype.replace('!','');
                dmgformula = "?{" + getTranslationByKey("number-of-damage-dice-to-roll");
                let tempNum = numDice * -1;
                for (a = tempNum; a > 0; a--) {
                    dmgformula += "|" + tempNum;
                    tempNum -= 1;
                }
                dmgformula += "}" + value.repeating_spells_spelldmgdietype;
            }
			else { // Means the number of dice is bettween 1 and 100
				if (value.repeating_spells_spelldamageatt === "na") {
					dmgdisplay = value.repeating_spells_spelldmgnumdice + value.repeating_spells_spelldmgdietype.replace('!','');
					dmgformula = value.repeating_spells_spelldmgnumdice + value.repeating_spells_spelldmgdietype;
				}
				else {
					dmgdisplay += "+" + value.repeating_spells_spelldmgnumdice + value.repeating_spells_spelldmgdietype.replace('!','');
					dmgformula += "+" + value.repeating_spells_spelldmgnumdice + value.repeating_spells_spelldmgdietype;
				}
			}
			console.log("___ Stuff so far: "+dmgdisplay+" ___");
			//Step Three:  Determine if we need to add a Modifier
			let checkString = value.repeating_spells_spelldmgbonusnum;
			//will match anything from a single number to #d#!+/-###
			//const modFormat = /^(\d*d?\d{1,2}!)?([\+-]?\d{0,3})$/g;
			const modFormat = /^(-?\d*)((d?)(\d{1,2}))(!?)?([\+-]?)(\d{0,3})$/g;
			let modifier = checkString.match(modFormat);
			console.log("Modifier: " + modifier);
			let names=['fullExpression','preNum','fullDieType','die','dieType','ace','modType','postNum'];
			let result = modFormat.exec(checkString);
			console.log("checkString Value: " + checkString);
			if(modifier === null) {
				if(dmgdisplay.length > 0) {
					dmgdisplay = dmgdisplay;
					dmgformula = dmgformula;
				}
				else {
					dmgdisplay = "None";
					dmgformula = "1d0[None]";
				}
			}
			else { //modifier is not null
				if (dmgformula.length > 0) {
					dmgformula += "+" + modifier;
					dmgdisplay += "+" + modifier;
				}
				else {
					dmgformula = modifier;
					dmgdisplay = modifier;
				}
			}
			//Step Four: update the values
			console.log("!!! Damage: " + dmgdisplay + " !!!");
			console.log("!!! Formula: " + dmgformula + " !!!");
			setAttrs({
				repeating_spells_powerdamage: dmgdisplay,
				repeating_spells_spelldmg: dmgformula,
				repeating_spells_shighlightdamage: "0"
			});
		});
	});

	//Select all Skills if "All" is selected
    //removed 'staticcore' from array
	const static = ['staticacademics','staticathletics','staticbattle','staticboating','staticcommonknowledge','staticdriving','staticelectronics','staticfaith','staticfighting','staticfocus','staticgambling','statichacking','statichealing','staticintimidation','staticlanguage','staticnotice','staticoccult','staticperformance','staticpersuasion','staticpiloting','staticpsionics','staticrepair','staticresearch','staticriding','staticscience','staticshooting','staticspellcasting','staticstealth','staticsurvival','statictaunt','staticthievery','staticweirdscience','staticKnowledgeOther'];
	on("change:staticall",function(eventInfo){
		let sattr = {};
		if (eventInfo.newValue === "1") {
			//All has been checked
			for(let i=0; i<static.length; i++) {
				console.log("Loop 1");
                log("setting",static[i]+" to on","goldenrod");
				sattr[static[i]] = "on";
			}
			console.log("Set: "+ JSON.stringify(sattr));
			setAttrs(sattr);
		}
		else {
			//All has been deselected
			for(let i=0; i<static.length; i++) {
				console.log("Loop 1");
                log("setting",static[i]+" to off","goldenrod");
				sattr[static[i]] = 0;
			}
			console.log("Set: "+ JSON.stringify(sattr));
			setAttrs(sattr);
		}
	});

	//Select all Core Skills if "Core" is selected
	on("change:staticcore",function(eventInfo){
		if (eventInfo.newValue === "1") {
			//All has been checked
			setAttrs({
				staticathletics: "on",
				staticcommonknowledge: "on",
				staticnotice: "on",
				staticpersuasion: "on",
				staticstealth: "on"
			});
		}
		else {
			//All has been deselected
			setAttrs({
				staticathletics: 0,
				staticcommonknowledge: 0,
				staticnotice: 0,
				staticpersuasion: 0,
				staticstealth: 0
			});
		}
	});

	//Create Trait values for rank and display hidden fields
	const traits = ['agility','smarts','spirit','strength','vigor','fighting','academics','athletics','battle','boating','commonknowledge','driving','electronics','faith','focus','gambling','hacking','healing','intimidation','language','notice','occult','performance','persuasion','piloting','psionics','repair','research','riding','science','shooting','spellcasting','stealth','survival','taunt','thievery','weirdscience','repeating_skills:skillnamerank','pastrength','rastrength'];
	traits.forEach(trait => {
		on(`change:${trait} change:${trait}mod`, function(eventInfo) { /*change:${trait}_delta*/
			log("Change Detected",`for ${trait}`,"cyan");
			log("Trait triggering update",eventInfo.sourceAttribute,"cyan");
			//let trait = traits;
			console.log("trait = "+trait);
			log("Check for repeating",trait.slice(0,6),"cyan");
			/*if (trait.slice(0,5) === 'repeating') {
				traitcheck = `repeating_skills_${traits}`;
			}*/
			trait = trait.replace(':','_');
			console.log("trait = "+trait);
			getAttrs([trait, `${trait}mod`, `${trait}_delta`], v => {
				log("Get Attrs",`${trait}, ${trait}mod, ${trait}_delta`,"cyan");
				log("intMod",v[`${trait}mod`],"cyan");
				log("Delta",v[`${trait}_delta`],"cyan");
				let tDelta = v[`${trait}_delta`];
				tDelta = parseInt(tDelta)||0;
				let tDie = parseInt(v[trait])||0;
				log("Values",`^^^ Delta: ${tDelta}, tDie: ${tDie} ^^^`,"cyan");
				let tRank = '1d';
				// let tDisplay = (tDelta === 0 ? "d" : "*d");
				let tDisplay = (tDelta === 0 ? getTranslationByKey('dice-abbreviation') : "*"+getTranslationByKey('dice-abbreviation') );
				let intMod = v[`${trait}mod`];
				intMod = parseInt(intMod)||0;
				tRank += v[trait]+'!';
				tDisplay += v[trait];
				if(intMod > 0) {
					log("Message","Mod is > 0...use +","cyan");
					tRank += '+'+intMod+'[trait]';
					tDisplay += '+' + intMod;
				}
				else if(intMod < 0) {
					log("Message","Mod is < 0...use -","cyan");
					tRank += intMod+'[trait]';
					tDisplay += intMod;
				}
				else {log("Message","Mod is 0...don't do anything","cyan");}
				const sAttRank = trait + '_rank', sAttDisplay = trait + '_display';
				const sattrs = {};
				sattrs[sAttRank]=tRank;
				sattrs[sAttDisplay]=tDisplay;
				setAttrs(sattrs);
			});
		});
	});

	//Do the Delta thing here...
	//Set the actual trait and trait mod fields...this is needed so things like Vigor and Parry update if the appropriate trait is boosted/lowered
	traits.forEach(trait => {
		on(`change:${trait}_delta`, function(eventInfo) {
			log("Delta Change Detected",`for ${trait}`,"darkgoldenrod");
			trait = trait.replace(':','_');
			console.log("trait = "+trait);
			getAttrs([trait, `${trait}mod`, `${trait}_base`, `${trait}mod_base`], function(v) {
				log("Get Attrs",`${trait}, ${trait}mod, ${trait}_base, ${trait}attr_gutsmod_base`);
				let tRank = parseInt(v[`${trait}`])||0;
				let tMod = parseInt(v[`${trait}mod`])||0;
				let tDelta = parseInt(eventInfo.newValue)||0;
				let prevDelta = parseInt(eventInfo.previousValue)||0;
				let tRankBase = v[`${trait}_base`];
				let tModBase = v[`${trait}mod_base`];
				const sAttRankBase = trait + '_base', sAttRankModBase = trait + 'mod_base', sAttRank = trait, sAttMod = trait + 'mod';
				log("Attributes to be Set",`${sAttRankBase}, ${sAttRankModBase}, ${sAttRank}, ${sAttMod}`,"darkgoldenrod");
				const sattrs = {};
				let counter = Math.abs(tDelta);
				log("Starting Values",`Rank/Base: ${tRank}/${tRankBase}, Mod/Base: ${tMod}/${tModBase}, Delta: ${tDelta}, Prev Delta: ${prevDelta}`,"darkgoldenrod");
				//Check if previous Delta was 0, if so, will want to set base before changing anything
				if(prevDelta === 0 || tRankBase === '') {
					//set the base values to the current values of the trait and mod
					log("Message","^^^ Setting the Bases ^^^","darkgoldenrod");
					sattrs[sAttRankBase] = tRank;
					sattrs[sAttRankModBase] = tMod;
					//set tRankBase and tModBase in case needed Boosting/lowering
					tRankBase = tRank;
					tModBase = tMod;
				}
				// Boosting/Lowering Trait or resetting to base?
				if(tDelta === 0) {
					log("Message","--- Resetting stats to base ---","darkgoldenrod");
					sattrs[sAttRank] = tRankBase;
					sattrs[sAttMod] = tModBase;
				}
				else if(tDelta > 0) {
					//reset rank and mod back to the baseline so the boost math is correct
					log("Message","!!! Re-baselining Attribute !!!","darkgolendrod");
					tRank = tRankBase;
					tMod = tModBase;
					log("Message","+++ Boosting a Trait from Base +++","darkgoldenrod");
					((tRank === 4 && tMod === -2) ? (tMod = 0, counter = counter -1) : counter = counter);
					console.log(`+++ tRank: ${tRank}, tMod: ${tMod}, counter: ${counter}`);
					for(let i = counter; i > 0; i--) {
						if(tRank === 12) {
							log("Message","+++ Rank is maxed...Boosting the Modifier +++","darkgoldenrod");
							tMod += 1;
						}
						else {
							log("Message","+++ Boosting Die Type +++","darkgoldenrod");
							tRank += 2;
						}
					}
					sattrs[sAttRank] = tRank;
					sattrs[sAttMod] = tMod;
				}
				else {
					//reset rank and mod back to the baseline so the boost math is correct
					log("Message","!!! Re-baselining Attribute !!!","darkgolendrod");
					tRank = tRankBase;
					tMod = tModBase;
					log("Message","--- Lowering a Trait ---","darkgoldenrod");
					for(let i = counter; i > 0; i--) {
						if(tRank === 4) {
							log("Message","--- Rank is already 4, breaking the loop ---","darkgoldenrod");
							break;
						}
						((tRank === 12 && tMod > 0) ? tMod = tMod - 1 : tRank = tRank - 2);
					}
					sattrs[sAttRank] = tRank;
					sattrs[sAttMod] = tMod;
				}
				setAttrs(sattrs);
			});
		});
	});

    on("change:staticfighting", function(eventInfo){
        let modValue;
        (eventInfo.newValue === 'on' ? modValue = "0" : modValue = "-2");
        setAttrs({fightingmod: modValue});
    });

    on("change: change:showFightingByDefault", function(eventInfo) {
        let modValue;
        (eventInfo.newValue === '1' ? modValue = "on" : modValue = "0");
        setAttrs({staticFighting: modValue});
    });

	const setEncPenalty = function() {
		getAttrs(["loadlimit", "totalloadcarried", "strength", "strengthmod", "encumbrancerules", "loadlimitdietypedelta", "loadlimitmulitplier", "loadlimitmod", "usekg"], function(lvalue) {
			let load = parseFloat(lvalue.totalloadcarried)||0;
			let strength = parseInt(lvalue.strength)||0;
			let limit = 0;
			let diedelta = parseInt(lvalue.loadlimitdietypedelta);
			let loadmulitplier = parseInt(lvalue.loadlimitmulitplier);
			let limitmod = parseFloat(lvalue.loadlimitmod);
            let stepmultiplier = 20;
			let penalty = 0;
			let base = 0;
            (lvalue.usekg === "kg" ? stepmultiplier = 10 : stepmultiplier = 20);
			console.log("### Encumbrance Rules: " + lvalue.encumbrancerules + " ###");
			//determine which rules are being Used
			if (lvalue.encumbrancerules === "1") {
				//use SWADE rules
				console.log("### Using SWADE Encumbrance Rules ###");
				(lvalue.usekg === "kg" ? base = (strength - 2)*5 : base = ((strength - 4)*10) + 20);
				if (lvalue.strength == "12" && lvalue.strengthmod > 0) {
					base = base + (lvalue.strengthmod * stepmultiplier);
				}
				limit = base + (diedelta * stepmultiplier) + limitmod;
				//determine penalty
				if (load > limit) {
					//character is encumbered
					penalty = "-2";
				}
				else {
					penalty = "0";
				}
			}
			else {
				//ignore encumbrance
				console.log("Not using Encumbrance");
				penalty = "0";
			}

			setAttrs({
				encumbrance: penalty,
				loadlimit: limit
			});
		});
	}

	on("change:useload", function(eventInfo) {
		console.log("Encumbrance Config Value: "+eventInfo.newValue);
		if (eventInfo.newValue === "on") {
			//Show Load and set the default value to Use Encumbrance (value 1)
			setAttrs({encumbrancerules: "1"});
		}
		else {
			//Don't show load and set the default value to Ignore Encumbrance (value 0)
			setAttrs({encumbrancerules: "0"});
		}
	});

	const setDynamicEnc = function(field) {
		getAttrs([field], function(v) {
			let button = `${field}button`;
			let formula = `${field}formula`;
			let sattrs = {};
			if(v[field] === "(AGL)" || v[field] === "agl-u" || v[field] === "str-u" || v[field] === "(STR)" || v[field] === "1") {
				console.log(`Need to set trait (${field}) to use Encumbrance`);
				sattrs[button] = `@{setmodsenc}`;
				sattrs[formula] = `@{ModSumEnc}[Distracted, Wounds, Fatigue, Encumbrance]`;
			}
			else {
				console.log(`Need to set trait (${field}) to NOT use Encumbrance`);
				sattrs[button] = `@{setmods}`;
				sattrs[formula] = `@{ModSum}[Distracted, Wounds, Fatigue]`;
			}
			console.log("Setting the following Values: " + JSON.stringify(sattrs));
			setAttrs(sattrs);
		});
	}

	const dynoTraits = ['unskilledencumbrance','linkedathleticsatt','linkedpsionicsatt','linkedritualatt','linkedspellcastingatt','linkedweirdscienceatt','repeating_skills:linkedotherattscore'];
	dynoTraits.forEach(dynoTrait => {
		on(`change:${dynoTrait}`, function(eventInfo) {
			console.log(`###### Changed Attribute: ${eventInfo.sourceAttribute} ######`);
			setDynamicEnc(eventInfo.sourceAttribute);
		});
	});

	//Calculate Encumbrance Penalty
	on("change:totalloadcarried change:loadlimit change:strength change:strengthmod change:encumbrancerules change:loadlimitdietypedelta change:loadlimitmulitplier change:loadlimitmod change:usekg",function(){
		setEncPenalty();
	});

	const setWoundsMod = function(flag) {
		console.log("<==== Updating woundsMod ====>");
		getAttrs(["wounds","reducewoundsby","increasewoundsby","maxwoundmods","reducereason","increasereason","maxreason"], function(lvalue) {
			let wound = parseInt(lvalue.wounds)||0;
			/*let nerves = parseInt(lvalue.NoS)||0;*/
			let reduce = parseInt(lvalue.reducewoundsby)||0;
			let increase = parseInt(lvalue.increasewoundsby)||0;
			let max = parseInt(lvalue.maxwoundmods)||0;

			console.log(`<==== Wounds: ${wound} || Reduce: ${reduce} || Increase: ${increase} || Max: ${max} ====>`);
			/*var wMS = wound+nerves;*/
			let wMS = Math.abs(wound) - Math.abs(reduce) + Math.abs(increase);
			console.log(`+++ wMS: ${wMS} +++`);
			if (wound === 0) {
				console.log("Made it wounds = 0");
				wMS = 0;
			}
			else {
				console.log("Made it wounds != 0");
				if (wMS < 0) {
					console.log("Wounds are less than 0, make it 0");
					wMS = 0;
				}
				if (wMS > Math.abs(max)) {
					console.log("wMS is greater than the Max, make it the max");
					wMS = Math.abs(max);
				}
			}
			if (flag === "silent") {
				console.log("Setting woundsMod silently");
				setAttrs({woundsMod: wMS},{silent:true});
			}
			else {
				setAttrs({woundsMod: wMS});
			}
			console.log("<==== Finished updating woundsMod ====>");
		});
	}

	on("change:wounds change:NoS change:reducewoundsby change:increasewoundsby change:maxwoundmods change:reducereason change:increasereason change:maxreason",function(){
		setWoundsMod();
	});

	const setFatigueMod = function(flag) {
		console.log("<==== Updating fatigueMod ====>");
		getAttrs(["fatigue","reducefatigueby","increasefatigueby","maxfatiguemods","fatiguereducereason","fatigueincreasereason","fatiguemaxreason"], function(lvalue) {
			let fatigue = parseInt(lvalue.fatigue)||0;
			/*let nerves = parseInt(lvalue.NoS)||0;*/
			let reduce = parseInt(lvalue.reducefatigueby)||0; //should be a positive number
			let increase = parseInt(lvalue.increasefatigueby)||0; //should be positive, but need to make negaitve
			let max = parseInt(lvalue.maxfatiguemods)||0; //should be negative number

			console.log(`<==== Fatigue: ${fatigue} || Reduce: ${reduce} || Increase: ${increase} || Max: ${max} ====>`);
			/*var wMS = wound+nerves;*/
			let fMS = Math.abs(fatigue) - Math.abs(reduce) + Math.abs(increase);
			console.log(`+++ fMS: ${fMS} +++`);
			if (fatigue === 0) {
				console.log("Made it fatigue = 0");
				fMS = 0;
			}
			else {
				console.log("Made it fatigue != 0");
				if (fMS < 0) {
					console.log("Fatigue is less than 0, make it 0");
					fMS = 0;
				}
				if (fMS > Math.abs(max)) {
					console.log("fMS is greater than the Max, make it the max");
					fMS = Math.abs(max);
				}
			}
			if (flag === "silent") {
				console.log("Setting faitugeMod silently");
				setAttrs({fatigueMod: fMS},{silent:true});
			}
			else {
				setAttrs({fatigueMod: fMS});
			}
			console.log("<==== Finished updating fatigueMod ====>");
		});
	}

	on("change:fatigue change:reducefatigueby change:increasefatigueby change:maxfatiguemods change:fatiguereducereason change:fatigueincreasereason change:fatiguemaxreason",function(){
		setFatigueMod();
	});

	const setModSums = function() {
		getAttrs(["woundsMod","fatigueMod","encumbrance","distracted"], function(lvalue) {
			//let tMod = parseInt(lvalue.ttmod)||0;
			let wMod = parseInt(lvalue.woundsMod)||0;
			let fMod = parseInt(lvalue.fatigueMod)||0;
			let eMod = parseInt(lvalue.encumbrance)||0;
			let dMod = parseInt(lvalue.distracted)||0;

			console.log("<==== wounds:"+wMod+"||fatigue:"+fMod+"||encumbrance:"+eMod+"||distracted:"+dMod+" ====>");
			let modSum = dMod-wMod-fMod;
			let modSumEnc = modSum+eMod;
			let modABS = Math.abs(wMod) + Math.abs(fMod) + Math.abs(dMod);
			let modABSEnc = modABS + Math.abs(eMod);
			console.log("!!!! modSum: "+modSum+" !!!!");
			console.log("!!!! modSumEnc: "+modSumEnc+" !!!!");
			console.log("!!!! absmod: "+modABS+" !!!!");
			setAttrs({
				ModSum: modSum,
				ModSumEnc: modSumEnc,
				absmod: modABS,
				absmodenc: modABSEnc
			});
		});
	}

	on("change:woundsmod change:fatiguemod change:encumbrance change:distracted",function(){
		setModSums();
	});

	on("change:promptmods", function(eventInfo) {
		if (eventInfo.newValue === "on") {
			//prompt for mods
			let setVal, setDmgVal;
			queryPop = getTranslationByKey('miscellaneous-abbr-trait-modifier-plural-singular');
			queryDmgPop = getTranslationByKey('miscellaneous-abbr-damage-modifier-plural-singular');
			setVal = `?{${queryPop}|0}`;
			setDmgVal = `?{${queryDmgPop}|0}`;
			setAttrs({
				traitmods: setVal,
				damagemods: setDmgVal
			});
		}
		else {
			//don't prompt for modifiers
			setAttrs ({
				traitmods: "@{ttmod}",
				damagemods: "@{dmgmod}"
			});
		}
	});

	on("change:showmods", function(eventInfo) {
		let setDamageMod, setTraitMod, setTraitModEnc;
		console.log("newValue: "+eventInfo.newValue);
		if (eventInfo.newValue == "on") {
			setTraitMod = "{{mods=[[1d0+@{absmod}+abs(@{traitmods}) ]] }}";
			setTraitModEnc = "{{mods=[[1d0+@{absmodenc}+abs(@{traitmods}) ]] }} {{showenc=[[1d0+@{encumbrance}]]}} {{encumbrance=@{encumbrance}}}";
			setDamageMod = "{{mods=[[1d0+[[abs(@{damagemods})]] ]] }}";
		}
		else {
			setTraitMod = `{{mods=[[1d0+0]]}}`;
			setTraitModEnc = `{{mods=[[1d0+0]]}}`;
			setDamageMod = `{{mods=[[1d0+0]]}}`;
		}
		console.log("setTraitMod: " + setTraitMod);
		console.log("setTraitModEnc: " + setTraitModEnc);
		setAttrs({
			setmods: setTraitMod,
			setmodsenc: setTraitModEnc,
			setdmgmods: setDamageMod
		});
	});

	function powerLabel() {
		getAttrs(["magictype","custompowerlabel"], function(v) {
			let slabel = '';
			let plabel = '';
			switch(v.magictype) {
				case '1': //Miracles
					console.log("+x+ Setting Power Label to Miracles +x+");
					slabel = getTranslationByKey('miracle');
					plabel = getTranslationByKey('miracles');
					break;
				case '2': //Psionics
					console.log("+x+ Setting Power Label to Psionics +x+");
					slabel = getTranslationByKey('psionic-ability');
					plabel = getTranslationByKey('psionics');
					break;
				case '3': //Spells
					console.log("+x+ Setting Power Label to Spells +x+");
					slabel = getTranslationByKey('spell');
					plabel = getTranslationByKey('spells');
					break;
				case '4': //Rituals
					console.log("+x+ Setting Power Label to Rituals +x+");
					slabel = getTranslationByKey('ritual');
					plabel = getTranslationByKey('rituals');
					break;
				case '5': //Weird Science Gadgets
					console.log("+x+ Setting Power Label to Weird Science Gadgets +x+");
					slabel = getTranslationByKey('weird-science-gadget');
					plabel = getTranslationByKey('weird-science-gadgets');
					break;
				case '6':
					console.log("+x+ Setting Power Label to Custom +x+");
					if (v.custompowerlabel === '') {
						slabel = getTranslationByKey('power');
						plabel = getTranslationByKey('powers');
					}
					else {
						slabel = v.custompowerlabel;
						plabel = v.custompowerlabel;
					}
					break;
				default: //Powers
					console.log("+x+ Setting Power Label to Powers +x+");
					slabel = getTranslationByKey('power');
					plabel = getTranslationByKey('powers');
					break;
			}
			console.log(`*** Singular Label: ${slabel} ***`);
			console.log(`*** Plural Label: ${plabel} ***`);
			setAttrs({
				powerlabelsingular: slabel,
				powerlabelplural: plabel
			});
		});
	}

	on("change:magictype change:custompowerlabel", function() {
		powerLabel();
	});

	function getBonusFields(repSection, setField) {
		//setField should = vbonusdamage || weaponsbdt || spellsbdt
		let fieldlist = {};
		getSectionIDs(`repeating_${repSection}`, function(idArray) {
			for (var i=0; i < idArray.length; i++) {
				console.log(`x-x|x-x Key: repeating_${repSection}_${idArray[i]}_${repSection}bonusdmg x-x|x-x`);
				console.log(`x-x|x-x Value: @{${setField}} x-x|x-x`);
				fieldlist[`repeating_${repSection}_${idArray[i]}_${repSection}bonusdmg`] = "@{"+setField+"}";
			}
			log("fieldlist",fieldlist,"yellow");
			setAttrs(fieldlist);
		});

	}

	function getRaiseRule(raiseRuleValue) {
		let useField;
		if (raiseRuleValue === "1") {
			//Using Variable Bonus Damage
			console.log("Using variable bonus damage: set up query...");
			let qString = getTranslationByKey('bonus-damage-die-type');
			setAttrs({vbonusdamage: `?{${qString}`+"|"+getTranslationByKey('d6')+"|"+getTranslationByKey('d8')+"|"+getTranslationByKey('d10')+"|"+getTranslationByKey('d12')+"|"+getTranslationByKey('d4')+"}"});
			useField = "vbonusdamage";
			// getBonusFields("weapons","vbonusdamage");
			// getBonusFields("spells","vbonusdamage");
		}
		else { //Used to be an else if statement checking for raiseRuleValue === "2"
			console.log("Using static variable bonus damage: determine damage to use");
			useField = "bdt";
			/*let fieldList = ["weapons","spells"];
			let finalList = {};*/
			// getBonusFields("weapons","weaponsbdt");
			// getBonusFields("spells","spellsbdt");

		}
		/*else {
			console.log("Not using using Variable Bonus Damage...");
			setAttrs({vbonusdamage: '1d6'});
			useField = "vbonusdamage";
		}*/
		return useField;
	}

	on("change:raisehbrule", function(eventInfo) {
		log("Raise Rule","Changed","yellow");
		let useField = getRaiseRule(eventInfo.newValue);
		log("Raise uses field",useField,"red");
		if (useField === "vbonusdamage") {
			getBonusFields("weapons",useField);
			getBonusFields("spells",useField);
		}
		else {
			getBonusFields("weapons",`weapons${useField}`);
			getBonusFields("spells",`spells${useField}`);
		}
	});

	function getTemplateBonusString(autoRollSetting,repeatingSection) {
		//setField should = vbonusdamage || weaponsbdt || spellsbdt
		let valueString;
		if (autoRollSetting === "1") {
			//Auto-roll the bonus damage
			valueString = `{{bonus_die=[[@{${repeatingSection}bonusdmg}!]]}}`;
		}
		else {
			//Show button to Roll Bonus Damage
			valueString = `{{bonus_die=[Roll Bonus Damage](~repeating_${repeatingSection}_${repeatingSection}bonusDamage)}}`;
		}
		log("Bonus Die String for the Template",valueString,"darkgoldenrod");
		return valueString;
	}

	function setBonusAutoroll(autoRollSetting,repSection) {
		//setField should = vbonusdamage || weaponsbdt || spellsbdt
		let fieldlist = {};
		getSectionIDs(`repeating_${repSection}`, function(idArray) {
			for (var i=0; i < idArray.length; i++) {
				fieldlist[`repeating_${repSection}_${idArray[i]}_${repSection}bonusDie`] = getTemplateBonusString(autoRollSetting, repSection);;
			}
			setAttrs(fieldlist);
		});

	}

	on("change:autorollbonusdmg change:repeating_weapons:weapon change:repeating_weapons:weapondamage change:repeating_weapons:weaponsbdt change:repeating_spells:power change:repeating_spells:powerdamage change:repeating_spells:spellsbdt", function(eventInfo) {
		//If a new weapon or spell is created, need to configure the Bonus Damage roll appropriately
		//Get which repeating section the change is from
		if (eventInfo.sourceAttribute === "autorollbonusdmg") {
			//Need to change all existing Weapons and Spells
			setBonusAutoroll(eventInfo.newValue,"weapons");
			setBonusAutoroll(eventInfo.newValue,"spells");
		}
		else {
			//Need to change only the current row
			//get autorollbonusdmg value
			let repeatingSection = eventInfo.sourceAttribute.split("_");
			console.log("*** Bonus Damage Change Watch ***");
			log("Repeating Section",repeatingSection[1],"red");
			getAttrs(["autorollbonusdmg","RaiseHBRule"], function(v) {
				let valueString = {}
				let rSection = repeatingSection[1];
				valueString[`repeating_${rSection}_${rSection}bonusDie`] = getTemplateBonusString(v.autorollbonusdmg, rSection);
				//set the appropriate Raise Rule for this weapon
				let raiseRule = getRaiseRule(v.RaiseHBRule);
				if (raiseRule === "bdt") {
					raiseRule = `${rSection}bdt`;
				}
				valueString[`repeating_${rSection}_${rSection}bonusdmg`] = "@{"+raiseRule+"}";
				console.log(valueString);
				setAttrs(valueString);
			});
		}
	});

	on("change:repeating_spells:shownotes change:repeating_spells:spellbutton", function() {
		/*If spellbutton is set to Atk+Dmg, then don't show notes on damage roll*/
		getAttrs(["repeating_spells_shownotes","repeating_spells_spellbutton"], function(v) {
			console.log(`shownotes: ${v.repeating_spells_shownotes} || spellbutton: ${v.repeating_spells_spellbutton}`);
			if (v.repeating_spells_shownotes != "0") {
				//showing notes is checked
				console.log("Showing Notes");
				if (v.repeating_spells_spellbutton === "0") {
					//button is set to Attack + Damage...don't show notes on damage roll
					console.log("Set Damage Rolls to not show notes");
					setAttrs({repeating_spells_dmgshownotes: "0"})
				}
				else {
					console.log("Set Damage to show Spell Notes");
					setAttrs({repeating_spells_dmgshownotes: "{{notes=@{spellnotes}}}"});
				}
			}
			else {
				//Not showing notes, don't show notes on damage rolls
				console.log("Set Damage Rolls to not show notes");
				setAttrs({repeating_spells_dmgshownotes: "0"});
			}
		});
	});

	on("change:wealth change:wealthwild", function(eventInfo) {
		let wealth = '&{template:roll} {{namelength=@{namelength}}} {{name=@{character_name} }} {{trait=^{wealth}}} {{skill_rank=@{wealth} }} {{skill_roll=[[@{wealth} + @{traitmods}]]}} {{mook=[[1d0+@{wdNum}]]}} {{wild_die=[[1d@{wealthwilddie}! + @{traitmods}]]}}';
		if(eventInfo.newValue === "d0") {
			console.log("The character is broke");
			wealth = "/em is broke and can't make purchases.";
		}
		setAttrs({rollwealth: wealth});
	});

	on("clicked:noEditMode", function() {
		log("No edit Mode","Clicked","maroon");
		setAttrs({miniDisplay: 1});
	});

	on("clicked:editMode", function() {
		log("Edit Mode","Clicked","maroon");
		setAttrs({miniDisplay: 0});
	});

	on("clicked:repeating_weapons:wdamage", function() {
		console.log("Damage Field clicked...show the Weapon config");
		setAttrs({
			repeating_weapons_showweaponconfig: "on",
			repeating_weapons_highlightdamage: "1"
		})
	});

	on("clicked:repeating_spells:sdamage", function() {
		console.log("Damage Field clicked...show the Weapon config");
		setAttrs({
			repeating_spells_showspellconfig: "on",
			repeating_spells_shighlightdamage: "1"
		})
	});

	on("clicked:paceCur", function() {
		getAttrs(["showPaceMod"], function(v) {
			let hideval = "0";
			if (v.showPaceMod === "on") {
				console.log("was hidden, but shouldn't be now");
			}
			else {
				console.log("Wasn't hidden, but needs to be...");
				hideval ="on";
			}
			setAttrs({showPaceMod: hideval});
		});
	});

	on("clicked:parryCur clicked:parryButton", function() {
		getAttrs(["showParryMod"], function(v) {
			let hideval = "0";
			if (v.showParryMod === "on") {
				console.log("was hidden, but shouldn't be now");
			}
			else {
				console.log("Wasn't hidden, but needs to be...");
				hideval ="on";
			}
			setAttrs({showParryMod: hideval});
		});
	});

	on("clicked:toughnessCur clicked:toughnessButton", function() {
		getAttrs(["showToughnessMod"], function(v) {
			let hideval = "0";
			if (v.showToughnessMod === "on") {
				console.log("was hidden, but shouldn't be now");
			}
			else {
				console.log("Wasn't hidden, but needs to be...");
				hideval ="on";
			}
			setAttrs({showToughnessMod: hideval});
		});
	});

	on("clicked:woundButton", function() {
		getAttrs(["showWoundmods"], function(v) {
			let hideval = "0";
			if (v.showWoundmods === "on") {
				console.log("was hidden, but shouldn't be now");
			}
			else {
				console.log("Wasn't hidden, but needs to be...");
				hideval ="on";
			}
			setAttrs({showWoundmods: hideval});
		});
	});

	on("clicked:fatigueButton", function() {
		getAttrs(["showFatiguemods"], function(v) {
			let hideval = "0";
			if (v.showFatiguemods === "on") {
				console.log("was hidden, but shouldn't be now");
			}
			else {
				console.log("Wasn't hidden, but needs to be...");
				hideval ="on";
			}
			setAttrs({showFatiguemods: hideval});
		});
	});

	console.debug("Make sure Skill Names have been set");
	const skillnamelist = ["fighting","academics","athletics","battle","boating","commonknowledge","driving","electronics","faith","focus","gambling","hacking","healing","intimidation","native-language","notice","occult","performance","persuasion","piloting","psionics","repair","research","riding","science","shooting","spellcasting","stealth","survival","taunt","thievery","weirdscience"];
	skillnamelist.forEach(skillname => {
		on("sheet:opened", function() {
			log("Checking Skill",skillname,"red");
			getAttrs([`${skillname}name`], function(skillv) {
				console.debug("Skill name: "+skillv[`${skillname}`]);
				if (skillv[`${skillname}name`] === "") {
					console.debug("Skill: "+ skillv[`${skillname}`]+"name is empty...filling it");
					log("Filling Skill Name",skillv[`${skillname}`],"darkgoldenrod");
					let value = getTranslationByKey(`${skillname}`);
					let setskill = {};
					setskill[`${skillname}name`] = value;
					setAttrs(setskill);
				}
				else {
					console.log("^^^ Skill Name Already Set: " + skillv[`${skillname}name`] + " ^^^");
				}
			});
		});
	});

	function setSkillDropdown(section, field, value, rowid) {
		let repsection = `repeating_${section}`;
		let setskill = {};
		if(Array.isArray(field) && value === "get names") {
			//is Array
			console.log("Field array: " + field);
			repsection += `_${rowid}_`;
			console.log("!!! Passed an Array !!!");
			getAttrs(field, function(v) {
				let setfield;
				let fieldprefix;
				let setvalue;
				if (section === "weapons") {fieldprefix = "r";}
				else {fieldprefix = "s";}
				for (let a = 0; a < field.length; a++) {
					console.log("iii section ID: " + rowid + " iii");
					setfield = repsection + fieldprefix + field[a];
					setvalue = v[field[a]];// || "something defaulty";
					console.log(`iii setfield: ${setfield} iii`);
					console.log(`iii setvalue: ${setvalue} iii`);
					setskill[setfield] = setvalue;
				}
				/*let defaultval = field[0].split('name');
				if (section === "weapons") { setfield = repsection + "weaponskill"; }
				else { setfield = repsection + "spellskill"; }
				setskill[setfield] = defaultval;*/
				console.log("Setting: " + JSON.stringify(setskill));
				setAttrs(setskill);
			});
		}
		else {
			console.log("iii passed a single field, so need to update that single field iii");
			getSectionIDs(repsection, function(idArray) {
				//passing in a single field
				for (let i = 0; i < idArray.length; i++) {
					console.log(`${repsection}_${idArray[i]}_${field}: ${value}`);
					setskill[`${repsection}_${idArray[i]}_${field}`] = value;
				}
				setAttrs(setskill);
			});
		}

	}

	const weaponsskilllist = ["fighting","athletics","shooting","weirdscience"];
	weaponsskilllist.forEach(weaponsskill => {
		on(`change:${weaponsskill}name`, function(eventInfo) {
			console.log("Triggering Attribute: " + eventInfo.sourceAttribute);
			let field = "r" + eventInfo.sourceAttribute;
			let value = eventInfo.newValue;
			setSkillDropdown("weapons", field, value);
		});
	});

	const spellskilllist = ["faith","athletics","focus","performance","psionics","spellcasting","weirdscience"];
	spellskilllist.forEach(spellskill => {
		on(`change:${spellskill}name`, function(eventInfo) {
			log("Spell Skill List","Skill Name Change","lime");
			console.log("Triggering Attribute: " + eventInfo.sourceAttribute);
			let field = "s" + eventInfo.sourceAttribute;
			let value = eventInfo.newValue;
			setSkillDropdown("spells", field, value);
		});
	});

	const weaponsskillnamelist = ["fightingname","athleticsname","shootingname","weirdsciencename"]; // Considering a refactor here
	const spellskillnamelist = ["faithname","athleticsname","focusname","performancename","psionicsname","spellcastingname","weirdsciencename"]; // similarly could consider a refactor
	on("change:repeating_spells:spellbutton change:repeating_weapons:weaponbutton", function(eventInfo) {
		console.log("iii sourceAttribute: " + eventInfo.sourceAttribute + " iii");
		let parts = eventInfo.sourceAttribute.split('_');
		let field, value;
		if (parts[1] === "weapons") { field = weaponsskillnamelist; }
		else { field = spellskillnamelist; }
		if (eventInfo.newValue === "2" || eventInfo.newValue === "0") {
			console.log("Make sure the drop down is populated with skill names");
			setSkillDropdown(parts[1], field, "get names", parts[2]);
		}
		else {
			console.log("No need to update anything...");
		}
	});

	const buttonlist = ["characterprofile1","vehicletab3","journaltab4","configurationtab2","releasetab5","documentationtab6","combatoptionstab7"];
	buttonlist.forEach(button => {
		on(`clicked:${button}`, function() {
			let setattr = {}
			console.log(`${button} button was clicked!!`);
			let radioval = `${button}`;
			radioval = radioval.slice(-1);
			console.log(`Value for Radio Button is: ${radioval}`);
			// setAttrs({ sheetTab: radioval });
			setattr["sheetTab"] = radioval;
			if (radioval === "5") {
				// setAttrs({ newcontent: "read" });
				setattr["newcontent"] = "read";
			}
			else if (radioval === "6") {
				// setAttrs({ newdocumentation: "read" });
				setattr["newdocumentation"] = "read";
			}
			setAttrs(setattr);
		});
	});

	on("clicked:powersectionconfig", function() {
		console.log("Do something");
		getAttrs(["showpowersectionconfig"], function(v) {
		if (v.showpowersectionconfig === "0") {
			//need to show the config
			setAttrs({
			showpowersectionconfig: "show",
			powerconfigindicator: "2"
			});
		}
		else {
			//need to close config
			setAttrs({
			showpowersectionconfig: "0",
			powerconfigindicator: "x"
			});
		}
		});
	});

	//Start Multiple AB Support Sheet Workers
	on("clicked:addab", function() {
		getAttrs(["numberofabs"], function(v) {
			let abcount = parseInt(v.numberofabs) || 0;
			if (abcount < 5) {
				abcount += 1;
				console.log("abcount: "+abcount);
				setAttrs({ numberofabs: abcount});
			}
			else {
				console.log("Max Number of ABs reached");
			}
		});
	});

	on("change:numberofabs", function(eventInfo) {
		console.log("Number of ABs: " + eventInfo.newValue);
		if (eventInfo.newValue == "1") {
			getSectionIDs("spells", function(idArray) {
				let setattrs = {};
				for (let i=0; i < idArray.length; i++) {
					console.log(`repeating_spells_${idArray[i]}_powercolor = "white"`);
					setattrs[`repeating_spells_${idArray[i]}_powergroup`] = "ab1";
				}
				setattrs["ab1color"] = "white";
				setAttrs(setattrs);
			});
		}
		else {
			console.log("Skipped the getSectionIDs portion of things...");
		}
	});

	on("clicked:removeab", function() {
		getAttrs(["numberofabs"], function(v) {
			let abcount = parseInt(v.numberofabs) || 0;
			if (abcount > 1) {
				abcount -= 1;
				setAttrs({ numberofabs: abcount});
			}
			else {
				console.log("Min Number of ABs reached");
			}
		});
	});

	const powerlabels = ["ablabel", "ablabel2", "ablabel3", "ablabel4", "ablabel5","ab1color","ab2color","ab3color","ab4color","ab5color"];
	powerlabels.forEach(powerlabel => {
		on(`change:${powerlabel}`, function(eventInfo) {
			console.log("Attribute that changed was: "+eventInfo.sourceAttribute.slice(3));
			getSectionIDs("repeating_spells", function(idArray) {
				const plabels = idArray.map(id => `repeating_spells_${id}_rpt${powerlabel}`);
				let newVal = eventInfo.newValue;
				const settings = plabels.reduce((obj, item) => (obj[item] = newVal, obj) ,{});
				console.log("Setting: " + JSON.stringify(settings));
				setAttrs(settings);
			});
		});
	});

	on("change:repeating_spells:powergroup", function(eventInfo) {
		let groupColor = eventInfo.newValue;
		getAttrs([`repeating_spells_rpt${groupColor}color`], function(v) {
			let rowColor = v[`repeating_spells_rpt${groupColor}color`];
			console.log("New Row Color: " + rowColor);
			setAttrs({repeating_spells_powercolor: rowColor});
		});
	});

	const powerColors = ["rptab1color", "rptab2color","rptab3color","rptab4color","rptab5color"];
	powerColors.forEach(powerColor => {
		on(`change:repeating_spells:${powerColor}`, function(eventInfo) {
			let colorNum = eventInfo.sourceAttribute;
			console.log("### Color Attribute: " + colorNum + "####");
			console.log("### Color that changed: " + colorNum.slice(-6,-5) + " ###");
			console.log("New Color: " + eventInfo.newValue);
			getAttrs(["repeating_spells_powergroup"], function(v) {
				console.log(">>> Power Group: " + v.repeating_spells_powergroup + " <<<");
				console.log("<<< Power Group Value: " + v.repeating_spells_powergroup.slice(2,3) + " >>>");
				if(v.repeating_spells_powergroup.slice(2,3) == colorNum.slice(-6,-5)) {
					console.log("Need to update the powercolor");
					setAttrs({repeating_spells_powercolor: eventInfo.newValue});
				}
				else { console.log("No need to update color"); }
			});
		});
	});

	const updateABLabels = function() {
		const powerlabels = ["ablabel", "ablabel2", "ablabel3", "ablabel4", "ablabel5","ab1color","ab2color","ab3color","ab4color","ab5color"];
		console.log("!!! Updating AB Labels and Colors !!!");
		powerlabels.forEach(powerlabel => {
			getSectionIDs("repeating_spells", function(idArray) {
				getAttrs([`${powerlabel}`], function(v) {
					console.log(`Attribute (${powerlabel}): `+v[`${powerlabel}`]);
					const plabels = idArray.map(id => `repeating_spells_${id}_rpt${powerlabel}`);
					const settings = plabels.reduce((obj, item) => (obj[item] = v[`${powerlabel}`], obj) ,{});
					const abini = idArray.map(id2 => `repeating_spells_${id2}_ablabsinit`);
					const settings2 = abini.reduce((obj, item) => (obj[item] = "1", obj) ,{});
					console.log("Setting: " + JSON.stringify(settings));
					setAttrs(settings);
					setAttrs(settings2);
				});
			});
		});
	}

	on("change:repeating_spells:power", function(eventInfo) {
		getAttrs(["repeating_spells_ablabsinit"], function(v) {
			if(v.repeating_spells_ablabsinit == "0") {
				updateABLabels();
			}
			else {
				console.log("Labels already initialized...");
			}
		});
	});

	//End Multiple AB Support Sheet Workers

	/*****************************
	* Skill Block functions
	*****************************/
	const statblockCheck = function() {
		getAttrs(["initstatblock","initdesc","initskills","initderived","initgear","initspecabilities","initpowers"], function(v) {
			let statBlockvals = {};
			if(v.initstatblock === "0") {
				//stat block isn't fully initialized
				log("Stat Block","⚠⚠ Not Initilized...create it ⚠⚠","aquamarine");
				if(v.initdesc === "0") {
					log("Character Description","⚠⚠ Not Initilized...create it ⚠⚠","aquamarine");
					descStatBlock();
					statBlockvals["initdesc"] = "1";
				}
				if(v.initskills === "0") {
					log("Skills","⚠⚠ Not Initilized...create them ⚠⚠","aquamarine");
					skillsStatBlock();
					statBlockvals["initskills"] = "1";
				}
				if(v.initderived === "0") {
					log("Derived Stats","⚠⚠ Not Initilized...create them ⚠⚠","aquamarine");
					derivedStatBlock();
					statBlockvals["initderived"] = "1";
				}
				if(v.initgear === "0") {
					log("Gear","⚠⚠ Not Initilized...create them ⚠⚠","aquamarine");
					gearStatBlock();
					statBlockvals["initgear"] = "1";
				}
				if(v.initspecabilities === "0") {
					log("Hindrances, Edges, Special Abilities","⚠⚠ Not Initilized...create them ⚠⚠","aquamarine");
					specabilityStatBlock();
					statBlockvals["inithindrances"] = "1";
					statBlockvals["initsbedges"] = "1";
					statBlockvals["initspecabilities"] = "1";
				}
				if(v.initpowers === "0") {
					log("Powers","⚠⚠ Character Powers Not Initilized...create them ⚠⚠","aquamarine");
					spellsStatBlock();
					statBlockvals["initpowers"] = "1";
				}
				initstatblock = "1";
				setAttrs(statBlockvals);
			}
		});
	}

	on("sheet:opened", function() {
		statblockCheck();
	});

	const descStatBlock = function() {
		let chardesc = "{{name=@{character_name}}}";
		getAttrs(["is_npc","physdescription"], function(v) {
			if(v.is_npc === "0") {
				//is Wild Card
				chardesc +=" {{wci=@{WCI}}}";
			}
			let physdesc = v.physdescription;
			console.log("Description length: "+physdesc.length);
			if(physdesc.length > 0) {
				chardesc += " {{description=@{physdescription}}}"
			}
			setAttrs({chardesc: chardesc});
		});
	}

	on("change:is_npc change:physdescription", function() {
		descStatBlock();
	});

	const staticlist = ["staticAcademics","staticAthletics","staticBattle","staticBoating","staticCommonKnowledge","staticDriving","staticElectronics","staticFaith","staticFighting","staticFocus","staticGambling","staticHacking","staticHealing","staticIntimidation","staticLanguage","staticNotice","staticOccult","staticPerformance","staticPersuasion","staticPiloting","staticPsionics","staticRepair","staticResearch","staticRiding","staticScience","staticShooting","staticSpellcasting","staticStealth","staticSurvival","staticTaunt","staticThievery","staticWeirdScience"]
	const skillsStatBlock = function() {
		console.log("skillnamelist length: "+skillnamelist.length+" staticlist length: "+staticlist.length);
		getAttrs(staticlist, function(v) {
			let charskills = '';
			for(let i = 0; i < staticlist.length; i++) {
				if(v[staticlist[i]] != "0") {
					//skill is turned on
					let skillname = staticlist[i];
					let uskillname = staticlist[i];
					let skilldisplay = staticlist[i];
					(skillname === "staticLanguage" ? skillname = skillname.replace('static','native-') : skillname = skillname.replace('static',''));
					skilldisplay = skilldisplay.replace('static','');
					uskillname = uskillname.replace('static','');
					skillname = skillname.toLowerCase();
					if(charskills.length < 1) {
						//no skills added to the list yet
						charskills = `[@{${skillname}name} @{${skilldisplay}_display}](~t${uskillname}Roll)`;
					}
					else {
						charskills += `, [@{${skillname}name} @{${skilldisplay}_display}](~t${uskillname}Roll)`;
					}
				}
				else {
					console.log(staticlist[i]+" isn't a shown character skill");
				}
			}
			//Need to do custom skill
			getSectionIDs("repeating_skills", function(idArray) {
				for (a = 0; a < idArray.length; a++) {
					if(charskills.length < 1) {
						charskills = `[@{repeating_skills_${idArray[a]}_custSkillName} @{repeating_skills_${idArray[a]}_skillnamerank_display}](~repeating_skills_${idArray[a]}_tSkillRoll)`;
					}
					else {
						charskills += `, [@{repeating_skills_${idArray[a]}_custSkillName} @{repeating_skills_${idArray[a]}_skillnamerank_display}](~repeating_skills_${idArray[a]}_tSkillRoll)`;
					}
				}
				setAttrs({ charskills: charskills });
			});
		});
	}

	staticlist.forEach(staticitem => {
		on(`change:${staticitem} change:repeating_skills:skillname change:repeating_skills:skillnamerank change:repeating_skills:skillnamerankmod remove:repeating_skills`, function() {
			skillsStatBlock();
		})
	});

    const getCustomDerivedStats = function(charderived) {
        log("Custom Derived Stats","Made it here...","yellow");
        log("charderived",charderived,"yellow");
        let derivedNameRows = [];
        let derivedValsRows = [];
        let customDerivedStats = charderived;
        getSectionIDs("repeating_derivedstats", function(idArray) {
            for (a = 0; a < idArray.length; a++) {
                derivedNameRows[derivedNameRows.length] = `repeating_derivedstats_${idArray[a]}_derivedName`;
				derivedValsRows[derivedValsRows.length] = `repeating_derivedstats_${idArray[a]}_derivedCurrent`;
            }
            (derivedNameRows.length <= 0 ? log("Custom Derived Stats","Array is empty, no repeating derived stats","yellow") : log("Custom Derived Stats","Array is not empty, captured repeating derived stats","yellow") );

            customDerivedStats += `;<br /> **@{derivedFirstName}:** @{derivedFirstCurrent}`;
            log("customDerivedStats",customDerivedStats,"yellow");
            //if the first derived state isn't blank, then check for other derived stats
            for (b = 0; b < derivedNameRows.length; b++) {
                customDerivedStats += `; **@{${derivedNameRows[b]}}:** @{${derivedValsRows[b]}}`;
                log("customDerivedStats",customDerivedStats,"yellow");
            }
            setAttrs({charderived: customDerivedStats});
        });
    }

    const derivedStatBlock = function() {
		const toughnessstats = ["toughnessArmor"];
		let derivedstats = [];
		let valuelist = derivedstats.concat(toughnessstats);
        valuelist.push("showadditionalderived"); //if showadditionalderived === "on", then need to check for additional derived stats...
		let charderived = "[**^{pace}:** @{paceCur}](~RunningRoll); **^{parry}:** @{parryCur}; **^{toughness}:** @{toughnesscur}";
		let dstat = '';
		getAttrs(valuelist, function(v) {
			if(v.toughnessArmor != "0") {
				charderived += "(@{toughnessArmor})";
			}

            if(v.showadditionalderived === "on") {
                log("Custom Derived Stats","Showing Custom Derived Stats; get info","yellow");
                //should have custom derived stats
                getCustomDerivedStats(charderived);
            }
            else {
                log("setting charderived",charderived,"yellow");
    			setAttrs({charderived: charderived});
            }
		});
	}

	on("change:toughnessarmor change:showadditionalderived change:derivedFirstName remove:repeating_derivedstats", function() {
		derivedStatBlock();
	});

	const gearStatBlock = function() {
		//Includes Armor, Weapons, Gear
		console.log("Started gearStatBlock");
		let chargear = '';
		let gearvals = [];
		let armorrows = [];
		let weaponrows = [];
		getSectionIDs(["armor"], function(armoridArray) {
			console.log("Got Armor Section IDs");
			for(a=0; a<armoridArray.length; a++) {
				gearvals[gearvals.length] = `repeating_armor_${armoridArray[a]}_armorWorn`;
				armorrows[armorrows.length] = `repeating_armor_${armoridArray[a]}_`;
				weaponrows[weaponrows.length] = 'empty';
			}
			console.log("Armor ID Array: "+armoridArray);
			getSectionIDs(["weapons"], function(weaponidArray) {
				console.log("Got Weapon Section IDs");
				console.log("Armor ID Array (again): "+armoridArray);
				console.log("Weapon ID Array: "+weaponidArray);
				for(b=0; b<weaponidArray.length; b++) {
					gearvals[gearvals.length] = `repeating_weapons_${weaponidArray[b]}_weaponcarried`;
					weaponrows[weaponrows.length] = `repeating_weapons_${weaponidArray[b]}_`;
				}
				getSectionIDs(["gear"], function(gearidArray) {
					console.log("Got Gear Section IDs");
					console.log("gearvals: "+gearvals);
					console.log("Armor ID Array (again x2): "+armoridArray);
					console.log("Weapon ID Array (again): "+weaponidArray);
					console.log("Gear ID Array: "+gearidArray);
					getAttrs(gearvals, function(v) {
						console.log("Got Armor and Weapon Values");
						for(c=0; c<gearvals.length; c++) {
							console.log("Cycling through Armor and Weapons: "+c);
							if(c < armoridArray.length) {
								//getting Armor
								let worn = gearvals[c];
								console.log("⍚⍚⍚ Worn: "+worn+" ⍚⍚⍚");
								console.log("worn value: "+v[worn]);
								if (v[worn] !== "0") {
									console.log("Armor is Worn");
									if (chargear.length < 1) {
										//First Item in List
										chargear = `@{${armorrows[c]}ArmorType} (+@{${armorrows[c]}ArmorTypeProtection})`;
									}
									else {
										//not first item in list
										chargear += `, @{${armorrows[c]}ArmorType} (+@{${armorrows[c]}ArmorTypeProtection})`;
									}
								}
								else { console.log("Armor is NOT Worn"); }
							}
							else {
								//getting weapons
								let carried = gearvals[c];
								console.log("⍚⍚⍚ carried: "+carried+" ⍚⍚⍚");
								if (v[carried] !== "0") {
									console.log("Weapons is Carried");
									if (chargear.length < 1) {
										//First Item in List
										chargear = `[@{${weaponrows[c]}weapon} (@{${weaponrows[c]}weapondamage})](~${weaponrows[c]}tWeapon)`;
									}
									else {
										//not first item in list
										chargear += `, [@{${weaponrows[c]}weapon} (@{${weaponrows[c]}weapondamage})](~${weaponrows[c]}tWeapon)`;
									}
								}
								else { console.log("Weapon is NOT Carried"); }
							}
						}
						for(d=0; d<gearidArray.length; d++) {
							if (chargear.length < 1) {
								//First Item in List
								chargear = `@{repeating_gear_${gearidArray[d]}_item}`;
							}
							else {
								//not first item in list
								chargear += `, @{repeating_gear_${gearidArray[d]}_item}`;
							}
						}
						setAttrs({ chargear: chargear });
					});
				});
			});
		});
	}

	on("change:repeating_armor change:repeating_weapons change:repeating_gear remove:repeating_armor remove:repeating_weapons remove:repeating_gear", function() {
		gearStatBlock();
	});

	const specabilityStatBlock = function() {
		let charhindrances = '';
		let charedges = '';
		let charspecabilities = '';
		let abilityvals = [];
		let hindrancerow = [];
		let edgerow = [];
        let specAbilityrow = [];
        //Get Hindrance List of IDs
		getSectionIDs("repeating_hindrances", function(hindranceidArray) {
			for(a=0; a<hindranceidArray.length; a++) {
				abilityvals[abilityvals.length] = `repeating_hindrances_${hindranceidArray[a]}_hindranceType`;
				hindrancerow[hindrancerow.length] = `repeating_hindrances_${hindranceidArray[a]}_`;
				edgerow[edgerow.length] = "empty";
			}
            //Get Edges List of IDs
			getSectionIDs("repeating_edges", function(edgeidArray) {
				for(b=0; b<edgeidArray.length; b++) {
					abilityvals[abilityvals.length] = `repeating_edges_${edgeidArray[b]}_tookat`;
					edgerow[edgerow.length] = `repeating_edges_${edgeidArray[b]}_`;
                    specAbilityrow[specAbilityrow.length] = "empty";
				}
                //Get Special Abilities List of IDs
                getSectionIDs("repeating_specialabilities", function(specAbilityIDArray) {
                    for(b=0; b<specAbilityIDArray.length; b++) {
    					abilityvals[abilityvals.length] = `repeating_specialabilities_${specAbilityIDArray[b]}_tookat`;
    					specAbilityrow[specAbilityrow.length] = `repeating_specialabilities_${specAbilityIDArray[b]}_`;
    				}
                    getAttrs(abilityvals, function(v) {
    					for(c=0; c<abilityvals.length; c++) {
    						let evalval = '';
    						if (c < hindrancerow.length) {
    							console.log("Found a Hindrance for Evaluation");
    							evalval = hindrancerow[c]+"hindranceType";
    							let speccheck = v[evalval];
    							console.log("Spec Check: "+speccheck);
    							speccheck = speccheck.toLowerCase();
    							console.log("Spec Check: "+speccheck);
    							if (speccheck === "racial") {
    								//Special ability
    								charspecabilities += `<li>**@{${hindrancerow[c]}hindrance}:** @{${hindrancerow[c]}hindrancedescription}</li>`;
    							}
    							else {
    								//hindrance
    								if (charhindrances.length < 1) {
    									charhindrances = `[@{${hindrancerow[c]}hindrance}](~${hindrancerow[c]}tHindrance)`;
    								}
    								else {
    									charhindrances += `, [@{${hindrancerow[c]}hindrance}](~${hindrancerow[c]}tHindrance)`;
    								}
    							}
    						}
    						else if (c < edgerow.length) { //used to just be an else statement...
    							console.log("Found an Edge for evaluation");
    							evalval = edgerow[c]+"tookat";
    							if (v[evalval].toLowerCase() === "racial") {
    								//Special ability
    								charspecabilities += `<li>**@{${edgerow[c]}edge}:** @{${edgerow[c]}edgedescription}</li>`;
    							}
    							else {
    								//edge
    								if (charedges.length > 0) {
    									charedges += `, `;
    								}
    								charedges += `[@{${edgerow[c]}edge}](~${edgerow[c]}tEdge)`;
    							}
    						}
                            else if (c < specAbilityrow.length) { //didn't used to exist...
                                log("Step","Found a Special Ability","yellow");
                                charspecabilities += `<li>**@{${specAbilityrow[c]}specialability}:** @{${specAbilityrow[c]}specialabilitydescription}</li>`;
                            }
    					}
    					let salength = charspecabilities.length;
    					let showspec = 0;
    					if (salength > 0) {
    						showspec = `{{showspec=[[1d0+${salength}]]}}`;
    					}
    					if (charhindrances.length < 1) { charhindrances = "&mdash;"; }
    					if (charedges.length < 1) { charedges = "&mdash;"; }
    					setAttrs({
    						charhindrances: charhindrances,
    						charedges: charedges,
    						showspec: showspec,
    						charspecabilities: charspecabilities
    					});
    				});
                });
			});
		});
	}

	on("change:repeating_hindrances change:repeating_edges change:repeating_specialabilities remove:repeating_hindrances remove:repeating_edges remove:repeating_specialabilities", function() {
		specabilityStatBlock();
	});

	const spellsStatBlock = function () {
		console.warn("Creating Spell Stat Block");
		let charpowers = '';
		let powercount = 0;
		getSectionIDs("spells", function(idArray) {
			if(idArray.length < 1) {
				console.log("No spells to worry about");
				setAttrs({powercount: "0"});
			}
			else {
				let getvalues = ["NoPPRule","numberofabs","powerlabelplural","ablabel","ppelabel","ablabel2","pplabel2","ablabel3","pplabel3","ablabel4","pplabel4","ablabel5","pplabel5","PowerPoints_max","powerpoints2_max","powerpoints3_max","powerpoints4_max","powerpoints5_max"];
				const powerbutton = idArray.map(x => `repeating_spells_${x}_tPower`);
				const actualpower = idArray.map(x => `repeating_spells_${x}_power`);
				const powergroup = idArray.map(x => `repeating_spells_${x}_powergroup`);
				getvalues = getvalues.concat(actualpower, powergroup);
				console.log("Values I want to get: "+getvalues);
				getAttrs(getvalues, function(v) {
					let ablabels = [v.ablabel, v.ablabel2, v.ablabel3, v.ablabel4, v.ablabel5];
					let pplabels = [v.ppelabel, v.pplabel2, v.pplabel3, v.pplabel4, v.pplabel5];
					if(v.NoPPRule == "0") {
						console.log("!!! Power Points are used !!!");
						pplabels = [v.ppelabel, v.pplabel2, v.pplabel3, v.pplabel4, v.pplabel5];
						powerpoints = [v.PowerPoints_max, v.powerpoints2_max, v.powerpoints3_max, v.powerpoints4_max, v.powerpoints5_max];
					}
					let arcanebg = '';
					let powers = '';
					let powerlists = ["not used","not used","not used","not used","not used"];
					let powerpointmax = '';
					let abpowercount = 0;
					console.log("Actual Powers: "+actualpower);
					console.log("Power Buttons: " + powerbutton);
					console.log("Values for v are: "+JSON.stringify(v));
					console.info("Beginning For Loops");
					for(let i=0; i < v.numberofabs; i++) {
						//cycle through the number of ABs used on the character
						console.log("Entering the First For Loop");
						arcanebg = `**${ablabels[i]}**`;
						if(v.NoPPRule == "0") {
							powerpointmax = `<ul><li>${pplabels[i]}: ${powerpoints[i]}</li>`;
						}
						else { powerpointmax = ''; }
						abpowercount = 0;
						for(let p=0; p < idArray.length; p++) {
							console.log("Reached the Inner Loop");
							//Check to see if any of the powers are associated the AB we are checking
							if(v[powergroup[p]] == `ab${i+1}`) {
								//powergroup is associated with the AB we are currently looking for
								if(abpowercount < 1) {
									console.warn("First Power found");
									powers = `[@{${actualpower[p]}}](~${powerbutton[p]})`;
								}
								else {
									console.log("Subsequent Power Found");
									powers += `, [@{${actualpower[p]}}](~${powerbutton[p]})`;
								}
								abpowercount++;
							}
							else {
								console.info("Power not in Power Group");
							}
						}
						powercount += abpowercount;
						//done cycling through the list of powers
						if(powercount > 0) {
							//number of powers associated with the AB is 1+
							charpowers += arcanebg + powerpointmax + "<li>" + v.powerlabelplural + ": " +powers + "</li></ul>";
							powerlists[i] = powers;
						}
					}
					//done cycling through the number of ABs
					setAttrs({
						charpowers: charpowers,
						powercount: powercount,
						ab1powerlist: powerlists[0],
						ab2powerlist: powerlists[1],
						ab3powerlist: powerlists[2],
						ab4powerlist: powerlists[3],
						ab5powerlist: powerlists[4]
					});
				});
			}
		});
	}

	on("change:NoPPRule change:numberofabs change:powerlabelplural change:ablabel change:ppelabel change:ablabel2 change:pplabel2 change:ablabel3 change:pplabel3 change:ablabel4 change:pplabel4 change:ablabel5 change:pplabel5 change:PowerPoints_max change:powerpoints2_max change:powerpoints3_max change:powerpoints4_max change:powerpoints5_max change:repeating_spells:power change:repeating_spells:powergroup remove:repeating_spells", function() {
		spellsStatBlock();
	});

	//End Statblock stuff
	on("change:stunned", function(eventInfo) {
		if(eventInfo.newValue === "-2") {
			getAttrs(["distracted"], function(v) {
				(v.distracted === "0" ? setAttrs({distracted: "-2"}) : log("Distracted","Setting distracted","darkblue"));
			})
		}
		else {log("Distracted","Don't need to change Distracted","darkblue");}
	});

	on("change:repeating_armor:armorworn", function(eventInfo) {
		if(eventInfo.newValue === "1") {
			getAttrs(["repeating_armor_ArmorCarried"], function(v) {
				if(v.repeating_armor_ArmorCarried === "on") {
					log("Armor","is already carried...","darkblue");
				}
				else {
					setAttrs({repeating_armor_ArmorCarried: "on"});
				}
			});
		}
		else {log("Is not worn","Don't need to carried...","darkblue");}
	});

    const resetCompendiumFields = function() {
        let setObj = {}
        setObj["CompendiumName"] = "";
        setObj["CompendiumCategory"] = "";
        setObj["CompendiumContent"] = "";
        setObj["CompendiumData"] = "";
        setAttrs(setObj,{silent:true});
        //return setObj;
    }

    //Start Compendium Drop
    const cleanCompendiumData = function(jsonData) {
        const leftRegEx = /(\"\[)/g;
        const rightRegEx = /(\]\")/g;
        const newLineRegEx = /(\\\\n)/g;
        const slashRegEx = /(\\\")/g;
        const singleQuote = /(\{')/g; //replace with {"
        const singleQuoteColonRight = /(':)/g; //replace with ":
        const doubleSingleQuote = /('')/g; //replace with ""
        const singleQuotecolonLeft = /(: ')/g; //replace with : "
        const singleQuoteCommaSeparated = /(', ')/g; //replace with ", "
        const doubleQuoteCommaSingle = /(\", ')/g; //replace with ", "
        const spaceSingleQuote = /( ')/g; //replace with , "
        const doubleComma = /(,,)/g; //replace with ,
        let newString = jsonData;
        newString = newString.replace(leftRegEx,'[');
        newString = newString.replace(rightRegEx,']');
        newString = newString.replace(newLineRegEx,"\\n");
        log("newString Brackets Replaced",newString,r20color);
        newString = newString.replace(slashRegEx,'"');
        log("Monster String","newString Remove single Quotes",r20color);
        newString = newString.replace(singleQuote,'{"');
        newString = newString.replace(singleQuoteColonRight,'":');
        newString = newString.replace(doubleSingleQuote,'""');
        newString = newString.replace(singleQuotecolonLeft,': "');
        newString = newString.replace(singleQuoteCommaSeparated,'", "');
        newString = newString.replace(doubleQuoteCommaSingle,'", "');
        newString = newString.replace(spaceSingleQuote,', "');
        newString = newString.replace(doubleComma,',');
        log("newString",newString,r20color);
        return(newString);
    }

    //Set attribute field names...these are all in repeating sections unless otherwise noted
    const hindrancefields = ["hindrance","hindrancedescription","hindranceType"];
    const edgefields = ["edge","edgedescription"];
    const gearfields = ["item","itemWeight","description"];
    const powerfields =["power","powerduration","powerrange","pp","trappings","spelldamageatt","spelldmgnumdice","spelldmgdietype","spelldmgbonusnum","spellnotes"];
    const weaponfields = ["weapon","range","rof","weaponap","shots_max","damageatt","dmgnumdice","dmgdietype","dmgbonusnum","weaponnotes","weaponweight","weaponminstrength"];
    const vehicleweaponfields = ["ShipWeaponType","ShipWeaponRange","ShipWeaponRoF","NoDmgDice","DmgType","DmgMod","ShipWeaponPlacement","ShipWeaponNotes","ShipWeaponAP"];
    const badVehicleWeaponFields = ["weapon","range","rof","dmgnumdice","dmgdietype","dmgbonusnum","placement","description","weaponap"];
    const vehiclefields = ["vehicletype","vehiclewounds_max","vehiclesize","vehiclehandling","vehicletopspeed","vehicletoughness","vehiclecrew","vehiclecargo","vehiclenotes"];
    //vehiclefields are non-repeating fields
    const armorfields = ["ArmorType","armorminstrength","areaprotected","armorTypeProtection","armorstack","ArmorTypeWeight","ArmorNotes"];
    const shieldfields = ["ShieldType","ShieldParry","ShieldCover","ShieldTypeWeight","ShieldNotes","shieldminstrength"];
    const badshieldfields = ["ArmorType","parry","cover","ArmorTypeWeight","ArmorNotes","armorminstrength"];

    const convertPersonalToVehicle = function(jsonObj,convertType = "vehicle") {
        log("jsonObj",JSON.stringify(jsonObj),r20color);
        let fieldArray;
        let badFields;
        convertType === "vehicle" ? fieldArray = vehicleweaponfields : fieldArray = shieldfields;
        convertType === "vehicle" ? badFields = badVehicleWeaponFields : badFields = badshieldfields;
        if(jsonObj) {
            //create Keys for Vehicle Weapons
            for(let i = 0; i < vehicleweaponfields.length; i++) {
                jsonObj[fieldArray[i]] = jsonObj[badFields[i]];
            }
            log("Ship Weapon JSON",JSON.stringify(jsonObj),r20color);
            return(jsonObj);
        }
        else {
            log("jsonObj","Not Found",r20color);
        }
    }

    const getDropInfo = function(jsonObj,targetObj,repSection) {
        let fields;
        let repSectionID;
        (typeof repSection !== "undefined" || repSection) ? repSectionID = generateRowID() : log("Repeating Section","Not Found",r20color);
        switch(repSection) {
            case "gear":
                fields = gearfields;
                targetObj[`repeating_${repSection}_${repSectionID}_itemcarried`] = "on";
                break;
            case "npc_hindrance":
                repSection = "hindrances";
                targetObj[`repeating_${repSection}_${repSectionID}_whisperDeets`] = "/w gm ";
                //fall through to hindrances
            case "hindrances":
                fields = hindrancefields;
                targetObj[`repeating_${repSection}_${repSectionID}_showHindraceDesc`] = "0";
                break;
            case "npc_Edge":
                repSection = "edges";
                targetObj[`repeating_${repSection}_${repSectionID}_tookat`] = "GM";
                targetObj[`repeating_${repSection}_${repSectionID}_showEdgeDesc`] = "0";
                targetObj[`repeating_${repSection}_${repSectionID}_whisperEdgeDeets`] = "/w gm ";
                //fall through to edges
            case "edges":
                fields = edgefields;
                break;
            case "weapons":
                fields = weaponfields;
                jsonObj["weaponnotes"] = jsonObj["description"];
                //check Rate of Fire to see if we need to change the Button Action
                parseInt(jsonObj["rof"] || 0) > 1 ? targetObj[`repeating_weapons_${repSectionID}_weaponbutton`] = "2" /* Atkx+Dmg */ : targetObj[`repeating_weapons_${repSectionID}_weaponbutton`] = "0"; /* Atk + Dmg */
                //set skill to use
                //determine range
                let shortRange = 0;
                typeof jsonObj["range"] !== "undefined" ? shortRange = Number(jsonObj["range"].substring(0,2).replace(/(\/)/g,'')) : log("Range","Not found...melee weapons",r20color);
                shortRange === 0 ? /*Set Skill to Fighting*/ targetObj[`repeating_weapons_${repSectionID}_weaponskill`] = "fighting" : shortRange < 12 ? /*Set Skill to Athletics*/ targetObj[`repeating_weapons_${repSectionID}_weaponskill`] = "athletics" : /*Set Skill to Shooting*/ targetObj[`repeating_weapons_${repSectionID}_weaponskill`] = "shooting";
                //if damageatt is not passed, set to na
                typeof jsonObj["damageatt"] === "undefined" ? targetObj[`repeating_${repSection}_${repSectionID}_damageatt`] = "na" : log("damageatt","Found...will set appropriately",r20color);
                targetObj[`repeating_${repSection}_${repSectionID}_weaponcarried`] = "on";
                if(jsonObj["dmgdietype"] === "dmgdietype") {
                    //check if the format is correct
                    (typeof jsonObj["dmgdietype"] !== "undefined" && (parseInt(jsonObj["dmgdietype"] || 0) > 0)) ? (jsonObj["dmgdietype"] = "d" + jsonObj["dmgdietype"] + "!") : log("dmgdietype","Either isn't defined or is formatted correctly, hopefully",r20color);
                }
                break;
            case "spells":
                fields = powerfields;
                if(typeof jsonObj.spelldamageatt === "undefined" && typeof jsonObj.spelldmgnumdice === "undefined" && typeof jsonObj.spelldmgdietype === "undefined" && typeof jsonObj.spelldmgbonusnum === "undefined"){
                    //Non-Damaging Power, set button to Cast instead of Damage
                    targetObj[`repeating_${repSection}_${repSectionID}_spellbutton`] = "2";
                    targetObj[`repeating_${repSection}_${repSectionID}_spelldmgnumdice`] = "0";
                }
                else {
                    //Damaging Power, do nothing so button remains with Damage.
                    log("Power Type","Att: " + jsonObj.spelldamageatt + ", Number of Dice " + jsonObj.spelldmgnumdice + ", Die Type: " + jsonObj.spelldmgdietype + ",Bonus: " + jsonObj.spelldmgbonusnum + " ergo: Damage causing power",r20color);
                }
                break;
            case "armor":
                fields = armorfields;
                break;
            case "shields":
                jsonObj = convertPersonalToVehicle(jsonObj,"shields");
                fields = shieldfields;
                targetObj[`repeating_${repSection}_${repSectionID}_shieldWorn`] = "1";
                break;
            case "vehicle_non-repeating":
                log("Vehicle Info","Made it to getting Vehicle Fields",r20color);
                fields = vehiclefields;
                repSection = false;
                break;
            case "shipweapons":
                log("jsonObj","Convert for Vehicle Weapons",r20color);
                jsonObj = convertPersonalToVehicle(jsonObj);
                log("Weapon JSON",JSON.stringify(jsonObj),r20color);
                fields = vehicleweaponfields;
                break;
            default:
                log("repSection","Not Found",r20color);
                break;
        }
        if(fields.length) {
            if (repSection) {
                log("Repeating Fields","Fields Found",r20color);
                fields.forEach(field => {
                    typeof jsonObj[`${field}`] !== "undefined" ? targetObj[`repeating_${repSection}_${repSectionID}_${field}`] = jsonObj[`${field}`] : log(`${field}`,"Not Found",r20color);
                });
            }
            else {
                log("Non-Repeating Fields","Fields Found",r20color);
                fields.forEach(field => {
                    typeof jsonObj[`${field}`] !== "undefined" ? targetObj[`${field}`] = jsonObj[`${field}`] : log(`${field}`,"Not Found",r20color);
                });
            }
        }

        return(targetObj);
    }

    const compendiumDrop = function(category) {
        //do stuff
        getAttrs(["CompendiumData","CompendiumContent"], function(v) {
            //reset the compendium drop fields
            resetCompendiumFields();
            //Set up setAttrs object variable AND add Compendium variables to be reset to blank
            let setattrvalues = {};
            //clean the data
            v.CompendiumData = cleanCompendiumData(v.CompendiumData);
            //parse the JSON Object
            let jsonObj = JSON.parse(v.CompendiumData);
            let repSection;
            switch(jsonObj.Category) {
                case "Gear":
                    repSection = "gear";
                    break;
                case "Hindrances":
                    repSection = "hindrances";
                    break;
                case "Edges":
                    repSection = "edges";
                    break;
                case "Powers":
                    repSection = "spells";
                    break;
                case "Weapons":
                    (jsonObj.category1 === "Vehicular Weapons" || jsonObj.category2 === "Vehicular Weapons" || jsonObj.category3 === "Vehicular Weapons") ? repSection = "shipweapons" : repSection ="weapons";
                    break;
                case "Armor":
                    repSection = "armor";
                    break;
                case "Shields":
                    repSection= "shields";
                    break;
                case "Vehicles":
                    //clear all fields in preparation for updated
                    let resetObj = {};
                    vehiclefields.forEach(field => {
                        resetObj[`${field}`] = "";
                    });
                    setAttrs(resetObj,{silent:true});
                    //Check if Vehicle Type is cared for; if not, will need to set it here.
                    typeof jsonObj["vehicletype"] !== "undefined" ? log("Vehicle Type","Should already be cared for",r20color) : setattrvalues["vehicletype"] = jsonObj.name;
                    //if not already set, show vehicle tab
                    setattrvalues["vehicle"] = "on";
                    setattrvalues["vehiclewounds"] = "0";
                    repSection = "vehicle_non-repeating"; //Vehicles don't have a Repeating Sections for the core vehicle
                    break;
                case "Vehicle Weapons":
                    repSection = "shipweapons";
                    break;
                default:
                    repSection = false;
                    break;
            }
            setattrvalues = getDropInfo(jsonObj,setattrvalues,repSection);
            if(jsonObj.Category === "Vehicles" && typeof jsonObj["data-Weapons"] !== "undefined") {
                //if this is a vehicle with weapons, then need to add more stuff to the JSON
                log("Weapons Array","Found",r20color);
                log("Weapons",JSON.stringify(jsonObj["data-Weapons"]),r20color);
                for (let weapon of jsonObj["data-Weapons"]) {
                    log("Import Weapon",weapon.data.weapon,r20color);
                    setattrvalues = getDropInfo(weapon.data,setattrvalues,"shipweapons");
                }
            }
            setAttrs(setattrvalues);
        });
    }

    //Bestiary Compendium Drop
    const attributeNames = ["agility","smarts","spirit","strength","vigor"];

    const compendiumBestiary = function() {
        log("Compendium Drop","Bestiary Entry dropped to table top",r20color);
        getAttrs(["CompendiumData","CompendiumContent","settings_bar1value","settings_bar1max","settings_bar1link","settings_bar2value","settings_bar2max","settings_bar2link","settings_bar3value","settings_bar3max","settings_bar3link"], function(monster) {
            log("settings_bar3max",monster["settings_bar3max"],r20color);
            log("jsonObj",JSON.stringify(monster.CompendiumData),r20color);
            //let monsterStats = resetCompendiumFields();
            const leftRegEx = /(\"\[)/g;
            const rightRegEx = /(\]\")/g;
            const newLineRegEx = /(\\\\n)/g;
            const slashRegEx = /(\\\")/g;
            const singleQuote = /(\{')/g; //replace with {"
            const singleQuoteColonRight = /(':)/g; //replace with ":
            const doubleSingleQuote = /('')/g; //replace with ""
            const singleQuotecolonLeft = /(: ')/g; //replace with : "
            const singleQuoteCommaSeparated = /(', ')/g; //replace with ", "
            const doubleQuoteCommaSingle = /(\", ')/g; //replace with ", "
            const spaceSingleQuote = /( ')/g; //replace with , "
            const doubleComma = /(,,)/g; //replace with ,
            let monsterString = monster.CompendiumData;
            monsterString = monsterString.replace(leftRegEx,'[');
            monsterString = monsterString.replace(rightRegEx,']');
            monsterString = monsterString.replace(newLineRegEx,"\\n");
            log("monsterString Brackets Replaced",monsterString,r20color);
            monsterString = monsterString.replace(slashRegEx,'"');
            log("Monster String","monsterString Remove single Quotes",r20color);
            monsterString = monsterString.replace(singleQuote,'{"');
            monsterString = monsterString.replace(singleQuoteColonRight,'":');
            monsterString = monsterString.replace(doubleSingleQuote,'""');
            monsterString = monsterString.replace(singleQuotecolonLeft,': "');
            monsterString = monsterString.replace(singleQuoteCommaSeparated,'", "');
            monsterString = monsterString.replace(doubleQuoteCommaSingle,'", "');
            monsterString = monsterString.replace(spaceSingleQuote,', "');
            monsterString = monsterString.replace(doubleComma,',');
            //monsterString = monsterString.replace("'","\"");
            log("monsterString",monsterString,r20color);
            let monsterStats = {};
            //let monsterObj = JSON.parse(monster.CompendiumData);
            let monsterObj = JSON.parse(monsterString);
            log("Monster Stats",JSON.stringify(monsterStats),r20color);
            log("monsterObj",JSON.stringify(monsterObj),r20color);
            let woundsMax = 0;
            let isWildCard = false;
            //set Wild Card Status
            if(typeof monsterObj.is_npc !== "undefined") {
                //if is_npc = TRUE, then set as Wild Card
                monsterObj.is_npc === "TRUE" ? monsterStats["is_npc"] = "0" : monster["is_npc"] = "1";
                monsterObj.is_npc === "TRUE" ? isWildCard = true : log("Extra","isWildCard false",r20color);
                monsterObj.is_npc === "TRUE" ? woundsMax = 3 : log("Extra","Leave Wounds at 0",r20color);
            }
            //set Size
            let monsterSize, tokenSize;
            typeof monsterObj.size !== "undefined" ? monsterSize = monsterObj.size : log("Size","Not found",r20color);
            monsterStats["size"] = monsterSize;
            //adjust woundsMax based on Size
            switch(monsterSize) {
                case "-4":
                case "-3":
                case "-2":
                case "-1":
                case "0":
                case "1":
                case "2":
                case "3":
                    woundsMax += 0;
                    tokenSize = 1;
                    break;
                case "4":
                case "5":
                case "6":
                case "7":
                    woundsMax += 1;
                    tokenSize = 2;
                    break;
                case "8":
                case "9":
                case "10":
                case "11":
                    woundsMax += 2;
                    tokenSize = 3;
                    break;
                default:
                    woundsMax += 3;
                    tokenSize = 4;
                    break;
            }
            //Set Wounds Values
            monsterStats["wounds"] = 0;
            monsterStats["wounds_max"] = woundsMax;
            log("woundsMax",woundsMax,r20color);
            //set character Core Attributes
            attributeNames.forEach(coreattribute => {
                (typeof monsterObj[`${coreattribute}`] !== "undefined" && monsterObj[`${coreattribute}`] !== "0") ? monsterStats[`${coreattribute}`] = monsterObj[`${coreattribute}`] : log(`${coreattribute}`,"Not found or 0",r20color);
                typeof monsterObj[`${coreattribute}mod`] !== "undefined" ? monsterStats[`${coreattribute}mod`] = monsterObj[`${coreattribute}mod`] : log(`${coreattribute}mod`,"Not found",r20color);
                //Don't set the attribute if it's equal to 0, because it should be a minimum of 4.
            });
            //set Skills
            log("Skills","Begin setting Skills",r20color);
            skillnamelist.forEach(skillname => {
                if(typeof monsterObj[`${skillname}`] !== "undefined" && monsterObj[`${skillname}`] !== "0") {
                    //if the skillname is defined AND not equal 0, then we need to show the skill and set the value
                    log(monsterObj[`${skillname}`],"Found this skill",r20color);
                    monsterStats[`static${skillname}`] = "on";
                    monsterStats[`${skillname}`] = monsterObj[`${skillname}`];
                }
                //Set Skill Mod
                typeof monsterObj[`${skillname}mod`] !== "undefined" ? monsterStats[`${skillname}mod`] = monsterObj[`${skillname}mod`] : log(`${skillname}mod`,"Not found or 0",r20color);
            })
            //Set the sheet Attributes
            log("Character Sheet","Setting Values",r20color);
            setAttrs(monsterStats, function(){
                //Begin Token Settings...
                //Token size: 4-7 = 2, 8-11 = 3, 12+ = 4
                const square_size = 70; // Default Roll20 square size (in px)
                let squares = 1.0; // Default number of squares for a token (if grid is used)
                let squaresize = parseInt(square_size * tokenSize);
                let default_attr = {};
                default_attr["width"] = squaresize;
                default_attr["height"] = squaresize;
                //Bar 1 (Link to parryCur)
                default_attr["bar1_link"] = "parryCur";
                //Bar 2 (Link to toughnesscur)
                default_attr["bar2_link"] = "toughnesscur";
                //Bar 3 (values of wounds)
                default_attr["bar3_link"] = "wounds";
                //default_attr["bar3_max"] = woundsMax;
                log("Token Defaults","Setting token defaults",r20color);
                setDefaultToken(default_attr);
                log("Final Details","Setting final details",r20color);
                let finalCharacterDetails = {};
                //set Pace
                typeof monsterObj.pace !== "undefined" ? finalCharacterDetails["pace"] = monsterObj.pace : log("Pace","Not found",r20color);
                //set Token  and Avatar URLs
                typeof monsterObj.Token !== "undefined" ? finalCharacterDetails["tokenURL"] = monsterObj.Token : log("Token URL","Not found",r20color);
                typeof monsterObj.avatarURL !== "undefined" ? finalCharacterDetails["avatarURL"] = monsterObj.avatarURL : typeof monsterObj.Token !== "undefined" ? finalCharacterDetails["avatarURL"] = monsterObj.Token : log("Avatar URL","Not found",r20color);
                //set description
                typeof monsterObj.biography !== "undefined" ? finalCharacterDetails["physdescription"] = monsterObj.biography : log("Biography","Not found",r20color);
                //set Edges
                log("Edges","Check for Edges",r20color);
                if (typeof monsterObj["data-Edges"] !== "undefined" && monsterObj["data-Edges"].length > 0) {
    				for (let edge of monsterObj["data-Edges"]) {
    					log("Import Edge",edge.name,r20color);
                        log("Monster Edge",JSON.stringify(edge),r20color);
                        //finalCharacterDetails = getEdgeInfo(monsterObj["data-Edges"],finalCharacterDetails);
                        finalCharacterDetails = getDropInfo(edge.data,finalCharacterDetails,"npc_Edge");
    					// let repSectionID = generateRowID();
    					// typeof edge.name !== "undefined" ? finalCharacterDetails[`repeating_edges_${repSectionID}_edge`] = edge.name : log("Edge Name","Not Found",r20color);
    					// typeof edge.description !== "undefined" ? finalCharacterDetails[`repeating_edges_${repSectionID}_edgedescription`] = edge.description : log("Edge Description","Not Found",r20color);
    					// finalCharacterDetails[`repeating_edges_${repSectionID}_tookat`] = "GM";
                        // finalCharacterDetails[`repeating_edges_${repSectionID}_showEdgeDesc`] = "0";
                        // finalCharacterDetails[`repeating_edges_${repSectionID}_whisperEdgeDeets`] = "/w gm ";
    				}
    			}
                //set Hindrances
                if (typeof monsterObj["data-Hinderances"] !== "undefined" && monsterObj["data-Hinderances"].length > 0) {
    				for (let hindrance of monsterObj["data-Hinderances"]) {
    					log("Import Hindrances",hindrance.hindrance,r20color);
                        log("Monster Hindrance",JSON.stringify(hindrance),r20color);
                        //finalCharacterDetails = getHindranceInfo(monsterObj["data-Hindrances"],)
    					// let repSectionID = generateRowID();
    					// finalCharacterDetails[`repeating_hindrances_${repSectionID}_hindrance`] = hindrance.hindrance;
    					// finalCharacterDetails[`repeating_hindrances_${repSectionID}_hindrancedescription`] = hindrance.hindrancedescription;
    					// finalCharacterDetails[`repeating_hindrances_${repSectionID}_showHindraceDesc`] = "0";
                        // (typeof hindrance.hindranceType !== "undefined" && hindrance.hindranceType !== "Both") ? finalCharacterDetails[`repeating_hindrances_${repSectionID}_hindranceType`] = hindrance.hindranceType : log("Hindrance Type","Both, so leave it blank",r20color);
                        // finalCharacterDetails[`repeating_hindrances_${repSectionID}_whisperDeets`] = "/w gm ";
                        finalCharacterDetails = getDropInfo(hindrance.data,finalCharacterDetails,"npc_hindrance");
    				}
    			}

                log("Edges & Hindrances","Write Edges and Hindrances to the Character",r20color);
                setAttrs(finalCharacterDetails);
                finalCharacterDetails = {};
                //Set Weapons
                //const weaponfields = ["weapon","range","rof","damageatt","dmgnumdice","dmgdietype","dmgbonusnum","weaponap","weaponminstrength","weaponweight"];
                log("Weapons","Check for Weapons",r20color);
                typeof monsterObj["data-Weapons"] !== "undefined" ? log("Monster Weapons",JSON.stringify(monsterObj["data-Weapons"]),r20color) : log("Monster Weapons","Not Found",r20color);
                if (typeof monsterObj["data-Weapons"] !== "undefined" && monsterObj["data-Weapons"].length > 0) {
                    log("Weapons Array","Found",r20color);
                    log("Monster Weapons",JSON.stringify(monsterObj["data-Weapons"]),r20color);
    				for (let weapon of monsterObj["data-Weapons"]) {
    					log("Import Weapon",weapon.data.weapon,r20color);
    					// let repSectionID = generateRowID();
                        // weaponfields.forEach(field => {
                        //     if(field === "dmgdietype") {
                        //         typeof weapon[`${field}`] !== "undefined" ? finalCharacterDetails[`repeating_weapons_${repSectionID}_${field}`] = "d" + weapon[`${field}`] + "!" : log(field,"Not Damage Die Type",r20color);
                        //     }
                        //     else {
                        //         typeof weapon[`${field}`] !== "undefined" ? finalCharacterDetails[`repeating_weapons_${repSectionID}_${field}`] =  weapon[`${field}`] : log(field,"Not found",r20color);
                        //     }
                        // });
                        // finalCharacterDetails[`repeating_weapons_${repSectionID}_showweaponconfig`] = "0"
                        finalCharacterDetails = getDropInfo(weapon.data,finalCharacterDetails,"weapons");
                    }
    			}

                log("Armor","Check for Armor",r20color);
                typeof monsterObj["data-Armors"] !== "undefined" ? log("Monster Armor",JSON.stringify(monsterObj["data-Armors"]),r20color) : log("Monster Armor","Not Found",r20color);
                if (typeof monsterObj["data-Armors"] !== "undefined" && monsterObj["data-Armors"].length > 0) {
                    log("Armor Array","Found",r20color);
    				for (let armor of monsterObj["data-Armors"]) {
    					log("Import Armor",armor.data.ArmorType,r20color);
                        finalCharacterDetails = getDropInfo(armor.data,finalCharacterDetails,"armor");
                    }
    			}

                log("Weapons and Armor","Write weapons to the character sheet",r20color);
                setAttrs(finalCharacterDetails);
                //Set Special Abilities
                log("Special Abilities","Begin processing...",r20color);
                log("Special Abilities",monsterObj["data-SpecialAbilities"],r20color);
                log("Number of Special Abilities",monsterObj["data-SpecialAbilities"].length,r20color);
                //if (typeof monsterObj["data-SpecialAbilities"] !== "undefined" && monsterObj["data-SpecialAbilities"].length > 0) {
                if (typeof monsterObj["descriptionList"] !== "undefined" && monsterObj["data-SpecialAbilities"].length > 0) {
                    finalCharacterDetails["showSpecAbilities"] = "1";
    				for (let compendiumSpecialAbility of monsterObj["data-SpecialAbilities"]) {
    					log("Special Ability",compendiumSpecialAbility.name,r20color);
    					let repSectionID = generateRowID();
    					typeof compendiumSpecialAbility.name !== "undefined" ? finalCharacterDetails[`repeating_specialabilities_${repSectionID}_specialability`] = compendiumSpecialAbility.name : log("Special Ability Name","Not Found",r20color);
    					typeof compendiumSpecialAbility.description !== "undefined" ? finalCharacterDetails[`repeating_specialabilities_${repSectionID}_specialabilitydescription`] = compendiumSpecialAbility.description : log("Special Ability Description","Not Found",r20color);
                        finalCharacterDetails[`repeating_specialabilities_${repSectionID}_showSpecAbilityDesc`] = "0";
                        finalCharacterDetails[`repeating_specialabilities_${repSectionID}_whisperSpecAbilityDeets`] = "/w gm ";
    				}
                    log("Special Abilities","Finished Processing",r20color);
    			}
                //switch character sheet view to mini-view
                finalCharacterDetails["miniDisplay"] = "1";
                log("Finish","Write remaining attributes to character sheet",r20color);
                setAttrs(finalCharacterDetails);
            });
        });
    }



    on("change:CompendiumCategory", function(eventInfo) {
        log("Compendium Drop",eventInfo.newValue,"#E948C9");
    	if (eventInfo.newValue !== "") {
            let compendiumCategory = eventInfo.newValue;
            let resetFields;
            switch (compendiumCategory) {
                case "Edges":
                case "Hindrances":
                case "Powers":
                case "Weapons":
                case "Armor":
                case "Vehicles":
                case "Gear":
                case "Shields":
                    compendiumDrop(compendiumCategory);
                    break;
                case "Bestiary":
                    compendiumBestiary();
                    break;
                default:
                    log(`Category: ${compendiumCategory}`,`Not recognized`,r20color);
                    resetFields = resetCompendiumFields();
                    setAttrs(resetFields,{silent:true});
                    break;
            }
    	}
    	else { log("Compendium Drop","Nothing dropped","#E948C9");}
    });
    //End Compendium Drop

	//JSON Importer
	on("change:jsonimport", function(eventInfo){
		console.log("Made it to the JSON Importer Sheet Worker");
		if (eventInfo.newValue !== null) {
			let jsonData = eventInfo.newValue;
			console.log(typeof jsonData + " newValue: " + jsonData + "length: " + jsonData.length);
			let jsonObj = JSON.parse(jsonData);
			let importAttrs = {};
			console.log("name: " + jsonObj.name + " paceBase: " + jsonObj.paceBase);
			//get the basic character bio stuff
			importAttrs["character_name"] = jsonObj.name;
			importAttrs["age"] = jsonObj.age;
			(jsonObj.professionOrTitle != "" ? importAttrs["physdescription"] = jsonObj.professionOrTitle + "\n" : log("Profession or Title","N/A","darkgoldenrod"));
			(jsonObj.iconicFramework != "" ? importAttrs["physdescription"] += jsonObj.iconicFramework + "\n" : log("Iconic Framework","N/A","darkgoldenrod"));
			(jsonObj.description != "" ? importAttrs["physdescription"] += jsonObj.description + "\n" : log("Description","N/A","darkgoldenrod"));
			importAttrs["physdescription"] += jsonObj.background;
			importAttrs["fatigue"] = jsonObj.fatigue;
			importAttrs["fatigue_max"] = jsonObj.fatigueMax;
			importAttrs["gender"] = jsonObj.gender;
			importAttrs["pace"] = jsonObj.paceBase;
			importAttrs["paceMod"] = jsonObj.paceMod;
			importAttrs["parryMod"] = jsonObj.parryMod;
			importAttrs["race"] = jsonObj.race;
			importAttrs["runningDie"] = "1" + jsonObj.runningDie;
			importAttrs["size"] = jsonObj.size;
			importAttrs["tufnessMod"] = jsonObj.toughnessMod - jsonObj.size;
			importAttrs["money"] = jsonObj.wealth;
			(jsonObj.wildcard ? importAttrs["is_npc"] = 0 : importAttrs["is_npc"] = 1);
			importAttrs["wounds"] = jsonObj.wounds;
			importAttrs["wounds_max"] = jsonObj.woundsMax;
			//get the Attributes
			for (let obj of jsonObj.attributes) {
				switch (obj.name) {
					case "agility":
						importAttrs["agility"] = obj.dieValue;
						importAttrs["agilitymod"] = obj.mod;
						break;
					case "smarts":
						importAttrs["smarts"] = obj.dieValue;
						importAttrs["smartsmod"] = obj.mod;
						break;
					case "spirit":
						importAttrs["spirit"] = obj.dieValue;
						importAttrs["spiritmod"] = obj.mod;
						break;
					case "strength":
						importAttrs["strength"] = obj.dieValue;
						importAttrs["strengthmod"] = obj.mod;
						break;
					case "vigor":
						importAttrs["vigor"] = obj.dieValue;
						importAttrs["vigormod"] = obj.mod;
						break;
					default:
						log("attributes","Unknown attribute: " + obj.name,"darkgoldenrod");
				}
			}
			//get the skills
			const traits = ['agility','smarts','spirit','strength','vigor','fighting','academics','athletics','battle','boating','commonknowledge','driving','electronics','faith','focus','gambling','hacking','healing','intimidation','language','notice','occult','performance','persuasion','piloting','psionics','repair','research','riding','science','shooting','spellcasting','stealth','survival','taunt','thievery','weirdscience'];
			let useCustomSkills = false;
			for (let skill of jsonObj.skills) {
				log("Import skills",skill.name,"goldenrod");
				let skill_name = skill.name.toLowerCase().replace(' ','');
				let found = traits.find(skillname => skillname === skill_name);
				log(skill_name,"is..." + found,"darkgoldenrod");
				if (skill_name === "language(native)") {
					//Native language
					log("Import Skill","Language (Native)","darkgoldenrod");
					importAttrs["language"] = skill.dieValue;
					importAttrs["languagemod"] = skill.mod;
					importAttrs["staticlanguage"] = "on";
				}
				else if(found) {
					//set the skill
					log("Import Skill",found,"darkgoldenrod");
					importAttrs[found] = skill.dieValue;
					importAttrs[`${found}mod`] = skill.mod;
					importAttrs[`static${found}`] = "on";
				}
				else {
					//is a custom skill
					//use a ternary to set useCustomSkills to true
					log("Import Skill",skill.name,"darkgoldenrod");
					let repSectionID = generateRowID();
					importAttrs[`repeating_skills_${repSectionID}_custSkillName`] = skill.name;
					importAttrs[`repeating_skills_${repSectionID}_skillnamerank`] = skill.dieValue;
					importAttrs[`repeating_skills_${repSectionID}_skillnamerankmod`] = skill.mod;
					switch (skill.attribute) {
						case "agility":
							importAttrs[`repeating_skills_${repSectionID}_linkedotherattscore`] = "agl-u";
							break;
						case "smarts":
							importAttrs[`repeating_skills_${repSectionID}_linkedotherattscore`] = "sma-u";
							break;
						case "spirit":
							importAttrs[`repeating_skills_${repSectionID}_linkedotherattscore`] = "spi-u";
							break;
						case "strength":
							importAttrs[`repeating_skills_${repSectionID}_linkedotherattscore`] = "str-u";
							break;
						default:
							importAttrs[`repeating_skills_${repSectionID}_linkedotherattscore`] = "vig-u";
							break;
					}
					importAttrs[`repeating_skills_${repSectionID}_showOtherRollMod`] = "0";
					(useCustomSkills ? log("Custom Skills","Already Set...","darkgoldenrod") : useCustomSkills = true);
					importAttrs[`staticKnowledgeOther`] = "on";
				}
			}
			// get hindrances
			if (jsonObj.hindrances.length > 0) {
				for (let hindrance of jsonObj.hindrances) {
					log("Import Hindrances",hindrance.name,"darkgoldenrod");
					let repSectionID = generateRowID();
					let strlen = hindrance.name.length;
					importAttrs[`repeating_hindrances_${repSectionID}_hindrance`] = hindrance.name.substr(0, strlen-8);
					(hindrance.major ? importAttrs[`repeating_hindrances_${repSectionID}_hindranceType`] = "Major" : importAttrs[`repeating_hindrances_${repSectionID}_hindranceType`] = "Minor");
					importAttrs[`repeating_hindrances_${repSectionID}_hindrancedescription`] = hindrance.description;
					importAttrs[`repeating_hindrances_${repSectionID}_showHindraceDesc`] = "0";
				}
			}

			//get Edges
			if (jsonObj.edges.length > 0) {
				for (let edge of jsonObj.edges) {
					log("Import Edges",edge.name,"darkgoldenrod");
					if (edge.note === "Advance") {
						log("Delay Edge Import","Edge (" + edge.name + ") took as Advance","yellow");
					}
					else {
						let repSectionID = generateRowID();
						importAttrs[`repeating_edges_${repSectionID}_edge`] = edge.name;
						importAttrs[`repeating_edges_${repSectionID}_edgedescription`] = edge.description;
						importAttrs[`repeating_edges_${repSectionID}_tookat`] = "Creation";
						importAttrs[`repeating_edges_${repSectionID}_showEdgeDesc`] = "0";
					}
				}
			}

			//get Advances
			if (jsonObj.advances.length > 0) {
				for (let charAdvance of jsonObj.advances) {
					log("Import Advances",charAdvance.name,"darkgoldenrod");
					let repSectionID = generateRowID();
					importAttrs[`repeating_edges_${repSectionID}_edge`] = charAdvance.name;
					importAttrs[`repeating_edges_${repSectionID}_edgedescription`] = charAdvance.description;
					importAttrs[`repeating_edges_${repSectionID}_tookat`] = "Advance";
					importAttrs[`repeating_edges_${repSectionID}_showEdgeDesc`] = "0";
				}
			}

			//get Special Abilities
			if (jsonObj.abilities.length > 0) {
				for (let specAbility of jsonObj.abilities) {
					log("Import Special Abilities",specAbility.name,"darkgoldenrod");
					let repSectionID = generateRowID();
					importAttrs[`repeating_specialabilities_${repSectionID}_specialability`] = specAbility.name;
					importAttrs[`repeating_specialabilities_${repSectionID}_specialabilitydescription`] = specAbility.description;
					importAttrs[`repeating_specialabilities_${repSectionID}_showSpecAbilityDesc`] = "0";
					//check for things like Armor
					if (specAbility.name.substr(0,5) === "Armor") {
						//Add stuff to Armor
						repSectionID = generateRowID();
						importAttrs[`repeating_armor_${repSectionID}_ArmorType`] = specAbility.name; //was description
						importAttrs[`repeating_armor_${repSectionID}_ArmorNotes`] = specAbility.description; //wasn't here before...
						importAttrs[`repeating_armor_${repSectionID}_AreaProtected`] = "8";
						let armorValue = specAbility.name.split('+');
						importAttrs[`repeating_armor_${repSectionID}_ArmorTypeProtection`] = armorValue[1];
						importAttrs[`repeating_armor_${repSectionID}_armorWorn`] = "1";
						importAttrs[`repeating_armor_${repSectionID}_armorstack`] = "1";
					}
				}
				importAttrs["showSpecAbilities"] = "1"
			}

			//get Gear
			if (jsonObj.gear.length > 0) {
				for (let gearItem of jsonObj.gear) {
					log("Import Gear",gearItem.name,"darkgoldenrod");
					let repSectionID = generateRowID();
					importAttrs[`repeating_gear_${repSectionID}_item`] = gearItem.name;
					importAttrs[`repeating_gear_${repSectionID}_itemqty`] = gearItem.quantity;
					importAttrs[`repeating_gear_${repSectionID}_itemWeight`] = gearItem.weight;
					importAttrs[`repeating_gear_${repSectionID}_itemcarried`] = "on";
					importAttrs[`repeating_gear_${repSectionID}_showGearDesc`] = "0";
				}
			}

			//get Weapons
			if (jsonObj.weapons.length > 0) {
				for (let weapon of jsonObj.weapons) {
					log("Import Weapons",weapon.name,"darkgoldenrod");
					let repSectionID = generateRowID();
					importAttrs[`repeating_weapons_${repSectionID}_weapon`] = weapon.name;
					(weapon.quantity > 1 ? importAttrs[`repeating_weapons_${repSectionID}_weapon`] += " (x" + weapon.quantity + ")" : log("Quantity","1, don't add anything","yellow"));
					importAttrs[`repeating_weapons_${repSectionID}_range`] = weapon.range;
					importAttrs[`repeating_weapons_${repSectionID}_weaponap`] = weapon.ap;
					importAttrs[`repeating_weapons_${repSectionID}_rof`] = weapon.rof;
					importAttrs[`repeating_weapons_${repSectionID}_shots`] = weapon.shots;
					importAttrs[`repeating_weapons_${repSectionID}_shots_max`] = weapon.shots;
					importAttrs[`repeating_weapons_${repSectionID}_weaponweight`] = weapon.weight;
					importAttrs[`repeating_weapons_${repSectionID}_weaponcarried`] = "on";
					importAttrs[`repeating_weapons_${repSectionID}_weaponnotes`] = weapon.notes;
					(weapon.minStr.substr(0,1) === "d" ? importAttrs[`repeating_weapons_${repSectionID}_minstrength`] = weapon.minStr.substr(1, weapon.minStr.length-1) : importAttrs[`repeating_weapons_${repSectionID}_minstrength`] = 0);
					importAttrs[`repeating_weapons_${repSectionID}_showweaponconfig`] = "0";
					//determine damage...
					let damageStart = weapon.damage.substr(0,3);
					if(damageStart === "Str" || damageStart === "Agl" || damageStart === "Sma" || damageStart === "Spi" || damageStart === "Vig") {
						//Weapon uses an Attribute
						switch(damageStart){
							case "Str":
								importAttrs[`repeating_weapons_${repSectionID}_damageatt`] = "strength";
								break;
							case "Agl":
								importAttrs[`repeating_weapons_${repSectionID}_damageatt`] = "agility";
								break;
							case "Sma":
								importAttrs[`repeating_weapons_${repSectionID}_damageatt`] = "smarts";
								break;
							case "Spi":
								importAttrs[`repeating_weapons_${repSectionID}_damageatt`] = "spirit";
								break;
							default:
								importAttrs[`repeating_weapons_${repSectionID}_damageatt`] = "vigor";
								break;
						}
						weapon.damage = weapon.damage.substr(4,weapon.damage.length-4);
						//debugger;
					}
					else {
						importAttrs[`repeating_weapons_${repSectionID}_damageatt`] = "na";
					}
					//weapon damage now should include NO attributes
					let indexofDie = weapon.damage.indexOf('d');
					//debugger;
					if (indexofDie === -1) {importAttrs[`repeating_weapons_${repSectionID}_dmgnumdice`] = "0";}
					else {
						(indexofDie < 1 ? importAttrs[`repeating_weapons_${repSectionID}_dmgnumdice`] = "1" : importAttrs[`repeating_weapons_${repSectionID}_dmgnumdice`] = weapon.damage.substr(0,indexofDie));
					}
					(indexofDie !== -1 ? weapon.damage = weapon.damage.substr(indexofDie,weapon.damage.length-indexofDie) : log("indexofDie","No Die Type exists","yellow"));
					//debugger;
					//replace all dice with exploding dice
					let regexD4 = /d4/gi;
					let regexD6 = /d6/gi;
					let regexD8 = /d8/gi;
					let regexD10 = /d10/gi;
					let regexD12 = /d12/gi;
					let regexD20 = /d20/gi;
					weapon.damage = weapon.damage.replace(regexD4,'d4!').replace(regexD6,'d6!').replace(regexD8,'d8!').replace(regexD10,'d10!').replace(regexD12,'d12!').replace(regexD20,'d20!');
					//if indexofDie === -1, then we move to the next field
					let dieEnd, noMod;
					if(indexofDie !== -1) {
						//need to determine the die type
						(weapon.damage.length > 4 ? dieEnd = weapon.damage.indexOf('!')+1 : noMod = true);
						(noMod ? importAttrs[`repeating_weapons_${repSectionID}_dmgdietype`] = weapon.damage : importAttrs[`repeating_weapons_${repSectionID}_dmgdietype`] = weapon.damage.substr(0,dieEnd));
						weapon.damage = weapon.damage.substr(dieEnd,weapon.damage.length-dieEnd);
					}
					//fill in the Mod Field
					(weapon.damage.substr(0,1) === "+" ? importAttrs[`repeating_weapons_${repSectionID}_dmgbonusnum`] = weapon.damage.substr(1,weapon.damage.length-1) : importAttrs[`repeating_weapons_${repSectionID}_dmgbonusnum`] = weapon.damage);
				}
			}

			// get Armor
			if (jsonObj.armor.length > 0) {
				for (let armorItem of jsonObj.armor) {
					log("Import Armor",armorItem.name,"darkgoldenrod");
					let repSectionID = generateRowID();
					importAttrs[`repeating_armor_${repSectionID}_ArmorType`] = armorItem.name;
					(armorItem.quantity > 1 ? importAttrs[`repeating_armor_${repSectionID}_ArmorType`] += `(x${armorItem.quantity})` : log("Armor Quantity","Single, don't add anything","darkgoldenrod"));
					(armorItem.minStr.substr(0,1) === "d" ? importAttrs[`repeating_armor_${repSectionID}_minstrength`] = armorItem.minStr.substr(1,armorItem.minStr.length-1) : importAttrs[`repeating_armor_${repSectionID}_minstrength`] = armorItem.minStr); //value should be integer
					if(armorItem.coversTorso && armorItem.coversLegs && armorItem.coversArms) {importAttrs[`repeating_armor_${repSectionID}_AreaProtected`] = "5";}
					else if(armorItem.coversTorso && armorItem.coversArms) {importAttrs[`repeating_armor_${repSectionID}_AreaProtected`] = "3";}
					else if(armorItem.coversTorso && armorItem.coversLegs) {importAttrs[`repeating_armor_${repSectionID}_AreaProtected`] = "4";}
					else if(armorItem.coversFace || armorItem.coversHead) {importAttrs[`repeating_armor_${repSectionID}_AreaProtected`] = "1";}
					else if(armorItem.coversTorso) {importAttrs[`repeating_armor_${repSectionID}_AreaProtected`] = "2";}
					else if(armorItem.coversArms) {importAttrs[`repeating_armor_${repSectionID}_AreaProtected`] = "6";}
					else if(armorItem.coversLegs) {importAttrs[`repeating_armor_${repSectionID}_AreaProtected`] = "7";}
					else log("Armor Covers","Unknown...leaving blank","pink");
					importAttrs[`repeating_armor_${repSectionID}_ArmorTypeProtection`] = armorItem.armor;
					importAttrs[`repeating_armor_${repSectionID}_ArmorTypeWeight`] = armorItem.weight;
					(armorItem.equipped ? importAttrs[`repeating_armor_${repSectionID}_ArmorCarried`] = "on" : console.log("amor not equipped"));
					(armorItem.equipped ? importAttrs[`repeating_armor_${repSectionID}_armorWorn`] = "1" : console.log("armor not worn"));
					importAttrs[`repeating_armor_${repSectionID}_ArmorNotes`] = armorItem.notes;
				}
			}

			//get Shields
			if (jsonObj.shields.length > 0) {
				for (let shield of jsonObj.shields) {
					log("Import Armor",shield.name,"darkgoldenrod");
					let repSectionID = generateRowID();
					importAttrs[`repeating_armor_${repSectionID}_ArmorType`] = shield.name;
					(shield.quantity > 1 ? importAttrs[`repeating_armor_${repSectionID}_ArmorType`] += `(x${shield.quantity})` : log("Armor Quantity","Single, don't add anything","darkgoldenrod"));
					(shield.minStr.substr(0,1) === "d" ? importAttrs[`repeating_armor_${repSectionID}_minstrength`] = shield.minStr.substr(1,shield.minStr.length-1) : importAttrs[`repeating_armor_${repSectionID}_minstrength`] = armorItem.minStr); //value should be integer
					importAttrs[`repeating_armor_${repSectionID}_ArmorTypeWeight`] = shield.weight;
					(shield.equipped ? importAttrs[`repeating_armor_${repSectionID}_ArmorCarried`] = "on" : log("Shield","not equipped","yellow"));
					(shield.equipped ? importAttrs[`repeating_armor_${repSectionID}_armorWorn`] = "1" : log("Shield","not equipped","yellow"));
					importAttrs[`repeating_armor_${repSectionID}_ArmorNotes`] = shield.cover + " " + shield.hardness + " . " + shield.notes;
				}
			}

			//get ABs
			if (jsonObj.abs.length > 0) {
				let numberofabs = 0;
				let arcaneSkills = ["athletics","faith","focus","performance","psionics","spellcasting","weirdscience","unskilled"];
				let found;
				for (let arcaneBackground of jsonObj.abs) {
					log("Import AB",arcaneBackground.name,"darkgoldenrod");
					numberofabs +=1;
					//debugger;
					if (numberofabs < 6) {
						(numberofabs === 1 ? importAttrs["ablabel"] = arcaneBackground.name : importAttrs[`ablabel${numberofabs}`] = arcaneBackground.name);
						//importAttrs["ppelabel"] = arcaneBackground.powerPointsName;
						//debugger;
						(numberofabs === 1 ? importAttrs["PowerPoints"] = arcaneBackground.powerPointsCurrent : importAttrs[`powerpoints${numberofabs}`] = arcaneBackground.powerPointsCurrent);
						(numberofabs === 1 ? importAttrs["PowerPoints_max"] = arcaneBackground.powerPointsMax : importAttrs[`powerpoints${numberofabs}_max`] = arcaneBackground.powerPointsMax);
						(numberofabs === 1 ? importAttrs["ppelabel"] = arcaneBackground.powerPointsName : importAttrs[`pplabel${numberofabs}`] = arcaneBackground.powerPointsName);
						for(let power of arcaneBackground.powers) {
							let repSectionID = generateRowID();
							importAttrs[`repeating_spells_${repSectionID}_power`] = power.name;
							importAttrs[`repeating_spells_${repSectionID}_pp`] = power.powerPoints;
							importAttrs[`repeating_spells_${repSectionID}_powerrange`] = power.range;
							importAttrs[`repeating_spells_${repSectionID}_powerduration`] = power.duration;
							importAttrs[`repeating_spells_${repSectionID}_spellnotes`] = power.summary + "\n" + power.description;
							importAttrs[`repeating_spells_${repSectionID}_powergroup`] = `ab${numberofabs}`;
							//debugger;
							if(power.damage === '') {
								//no damage => try and make button skill only
								importAttrs[`repeating_spells_${repSectionID}_spelldamageatt`] = "na";
								importAttrs[`repeating_spells_${repSectionID}_spelldmgnumdice`] = "0";
								importAttrs[`repeating_spells_${repSectionID}_spelldmgbonusnum`] = "0";
								importAttrs[`repeating_spells_${repSectionID}_spellbutton`] = "2";
								(found = arcaneSkills.indexOf(arcaneBackground.arcaneSkill.toLowerCase().replace(' ','')) > -1 ? importAttrs[`repeating_spells_${repSectionID}_spellskill`] = arcaneBackground.arcaneSkill.toLowerCase().replace(' ','') : importAttrs[`repeating_spells_${repSectionID}_spellskill`] = "unskilled");
							}
							else {
								//power does do damage...
								let spellDamageStart = power.damage.substr(0,3);
								if(spellDamageStart === "Str" || spellDamageStart === "Agl" || spellDamageStart === "Sma" || spellDamageStart === "Spi" || spellDamageStart === "Vig") {
									//Weapon uses an Attribute
									switch(spellDamageStart){
										case "Str":
											importAttrs[`repeating_spells_${repSectionID}_spelldamageatt`] = "strength";
											break;
										case "Agl":
											importAttrs[`repeating_spells_${repSectionID}_spelldamageatt`] = "agility";
											break;
										case "Sma":
											importAttrs[`repeating_spells_${repSectionID}_spelldamageatt`] = "smarts";
											break;
										case "Spi":
											importAttrs[`repeating_spells_${repSectionID}_spelldamageatt`] = "spirit";
											break;
										default:
											importAttrs[`repeating_spells_${repSectionID}_spelldamageatt`] = "vigor";
											break;
									}
									power.damage = power.damage.substr(4,power.damage.length-4);
									//debugger;
								}
								else {
									importAttrs[`repeating_spells_${repSectionID}_spelldamageatt`] = "na";
								}
								//spell damage now should include NO attributes
								let newindexofDie = power.damage.indexOf('d');
								//debugger;
								if (newindexofDie === -1) {importAttrs[`repeating_spells_${repSectionID}_spelldmgnumdice`] = "0";}
								else {
									(newindexofDie < 1 ? importAttrs[`repeating_spells_${repSectionID}_spelldmgnumdice`] = "1" : importAttrs[`repeating_spells_${repSectionID}_spelldmgnumdice`] = power.damage.substr(0,newindexofDie));
								}
								(newindexofDie !== -1 ? power.damage = power.damage.substr(newindexofDie,power.damage.length-newindexofDie) : log("indexofDie","No Die Type exists","yellow"));
								//debugger;
								//replace all dice with exploding dice
								let regexD4 = /d4/gi;
								let regexD6 = /d6/gi;
								let regexD8 = /d8/gi;
								let regexD10 = /d10/gi;
								let regexD12 = /d12/gi;
								let regexD20 = /d20/gi;
								power.damage = power.damage.replace(regexD4,'d4!').replace(regexD6,'d6!').replace(regexD8,'d8!').replace(regexD10,'d10!').replace(regexD12,'d12!').replace(regexD20,'d20!');
								//if indexofDie === -1, then we move to the next field
								let dieEnd, noMod;
								if(newindexofDie !== -1) {
									//need to determine the die type
									(power.damage.length > 4 ? dieEnd = power.damage.indexOf('!')+1 : noMod = true);
									(noMod ? importAttrs[`repeating_spells_${repSectionID}_spelldmgdietype`] = power.damage : importAttrs[`repeating_spells_${repSectionID}_spelldmgdietype`] = power.damage.substr(0,dieEnd));
									power.damage = power.damage.substr(dieEnd,power.damage.length-dieEnd);
								}
								//fill in the Mod Field
								(power.damage.substr(0,1) === "+" ? importAttrs[`repeating_spells_${repSectionID}_spelldmgbonusnum`] = power.damage.substr(1,power.damage.length-1) : importAttrs[`repeating_spells_${repSectionID}_spelldmgbonusnum`] = power.damage);

							}
							importAttrs[`repeating_spells_${repSectionID}_showspellconfig`] = "0";
						}

					}

				}
				importAttrs["numberofabs"] = numberofabs;
			}
			let additionalDerivedStats = 0;
			//get Cyberware
			if (jsonObj.cyberware.length > 0) {
				let strain = 0;
				for (let implant of jsonObj.cyberware) {
					log("Import Cyberware",implant.name,"darkgoldenrod");
					strain += implant.strain;
					let repSectionID = generateRowID();
					importAttrs[`repeating_gear_${repSectionID}_item`] = implant.name;
					importAttrs[`repeating_gear_${repSectionID}_itemqty`] = implant.quantity;
					importAttrs[`repeating_gear_${repSectionID}_itemcarried`] = "on";
					importAttrs[`repeating_gear_${repSectionID}_itemdescription`] = "Ranks: " + implant.ranks + "\n";
					importAttrs[`repeating_gear_${repSectionID}_itemdescription`] += "Strain: " + implant.strain + "\n";
					importAttrs[`repeating_gear_${repSectionID}_itemdescription`] += implant.notes;
					importAttrs[`repeating_gear_${repSectionID}_showGearDesc`] = "0";
				}
				let repSectionID = generateRowID();
				importAttrs["showadditionalderived"] = "on";
				(additionalDerivedStats === 0 ? importAttrs["derivedFirstName"] = "Strain" : importAttrs[`repeating_derivedstats_${repSectionID}_derivedName`] = "Strain");
				(additionalDerivedStats === 0 ? importAttrs["derivedFirstCurrent"] = strain : importAttrs[`repeating_derivedstats_${repSectionID}_derivedCurrent`] = strain);
			}

			//get sanity

			//set the values
			setAttrs(importAttrs);
			setAttrs({jsonImport: ''},{silent:true});
		}
		else {console.log("Nothing to see here");}
	});
    //End JSON Importer

	on("change:fightingunskilled", function(eventInfo) {
		log("Fighting","Setting to Unskilled...maybe","pink");
		getAttrs(["fighting"], function(v) {
			log("fightingunskilled",eventInfo.newValue,"pink");
			log("Fighting",v.fighting,"pink");
			(eventInfo.newValue === "1" && v.fighting === "4" ? setAttrs({fightingmod: "-2"}) : console.log("nothign to do"));
		});
	});

	// on("change:derivedfirstbase change:derivedfirstmod change:repeating_derivedstats:derivedbase change:repeating_derivedstats:derivedmod", function (eventInfo) {
	// 	let derivedChanges = [];
	// 	(eventInfo.sourceAttribute.substr(0,9) === "repeating" ? derivedChanges.push("repeating_derivedstats_derivedBase","repeating_derivedstats_derivedMod","repeating_derivedstats_derivedCurrent") : derivedChanges.push("derivedFirstBase","derivedFirstMod","derivedFirstCurrent"));
	// 	getAttrs(derivedChanges, function(v) {
	// 		let baseValue = parseInt(v[derivedChanges[0]]) || 0;
	// 		log("baseValue",baseValue,"cyan");
	// 		let modValue = parseInt(v[derivedChanges[1]]) || 0;
	// 		log("modValue",modValue,"cyan");
	// 		let currentValue = baseValue + modValue;
	// 		log("currentValue",currentValue,"cyan");
	// 		log("deriveChanges",derivedChanges[0]+" "+derivedChanges[1]+" "+derivedChanges[2],"cyan");
	// 		let setField = {};
	// 		setField[derivedChanges[2]] = currentValue;;
	// 		setAttrs(setField);
	// 	});
	// });

	//# sourceURL=sheetworker.js
</script>
<input type='hidden' name='attr_dopay' value="init" />
<input type='checkbox' class="sheet-hiddenInput" name="attr_dealtJoker" value="2" />
<input type='text' style='display: none;' name='attr_wdNum' value='1' />
<input type='checkbox' style="display: none;" name="attr_showFightingByDefault" value="1" />
<!-- Stat Block Fields -->
<input type="hidden" name="attr_initstatblock" value="0" />
<input type="hidden" name="attr_initdesc" value="0" />
<input type="hidden" name="attr_chardesc" value="{{name=@{character_name}}}" />
<input type="hidden" name="attr_charatts" value="[^{agility} @{agility_display}](~tAgilityRoll), [^{smarts} @{smarts_display}@{animalsmarts_display}](~tSmartsRoll), [^{spirit} @{spirit_display}](~tSpiritRoll), [^{strength} @{strength_display}](~tStrengthRoll), [^{vigor} @{vigor_display}](~tVigorRoll)" />
<input type="hidden" name="attr_initskills" value="0" />
<input type="hidden" name="attr_charskills" />
<input type="hidden" name="attr_initderived" value="0" />
<input type="hidden" name="attr_charderived" />
<input type="hidden" name="attr_initgear" value="0" />
<input type="hidden" name="attr_chargear" />
<input type="hidden" name="attr_inithindrances" value="0" />
<input type="hidden" name="attr_charhindrances" />
<input type="hidden" name="attr_initsbedges" value="0" />
<input type="hidden" name="attr_charedges" />
<input type="hidden" name="attr_initspecabilities" value="0" />
<input type="hidden" name="attr_showspec" />
<input type="hidden" name="attr_charspecabilities" />
<input type="hidden" name='attr_initpowers' value="0" />
<input type="hidden" name="attr_powercount" value="0" />
<input type="hidden" name="attr_charpowers" />
<input type="hidden" name="attr_ab1powerlist" />
<input type="hidden" name="attr_ab2powerlist" />
<input type="hidden" name="attr_ab3powerlist" />
<input type="hidden" name="attr_ab4powerlist" />
<input type="hidden" name="attr_ab5powerlist" />
<input type="hidden" name="attr_unshakeTemplate" value="{{shaken=[[0d6+@{isShaken}]]}} {{unshake=[<span data-i18n='roll-unshake-button'></span>](~unshakeroll)}}" />
<input type="hidden" name="attr_templateConditions" value="{{wildcard=[[@{is_npc}d1]]}} {{wcicon=@{WCI}}} {{vulnerable=[[0d6+@{vulnerable}]]}} {{stunned=[[0d6+@{stunned}]]}} {{distracteds=[[0d6+@{distracted}]]}}" />
<!-- End Stat Block Fields -->
<div class='sheet-maindiv compendium-drop-target bestiary'>
    <input type="text" class="sheet-hiddenInput" name="attr_CompendiumName" accept="Name" />
    <input type="text" class="sheet-hiddenInput" name="attr_CompendiumCategory" accept="Category" />
    <input type="text" class="sheet-hiddenInput" name="attr_CompendiumContent" accept="Content" />
    <input type="text" class="sheet-hiddenInput" name="attr_CompendiumData" accept="data" />
    <input type="checkbox" class="sheet-useBackground" style="display: none;" name="attr_background" value="1" checked />
    <!--<input type="checkbox" class="sheet-useBackground" style="display: none;" name="attr_background" value="2" />
    <input type="checkbox" class="sheet-useBackground" style="display: none;" name="attr_background" value="3" />
    <input type="checkbox" class="sheet-useBackground" style="display: none;" name="attr_background" value="4" />
    <input type="checkbox" class="sheet-useBackground" style="display: none;" name="attr_background" value="5" />
    <input type="checkbox" class="sheet-useBackground" style="display: none;" name="attr_background" value="6" />
    <input type="checkbox" class="sheet-useBackground" style="display: none;" name="attr_background" value="7" />
    <input type="checkbox" class="sheet-useBackground" style="display: none;" name="attr_background" value="8" />
    <input type="checkbox" class="sheet-useBackground" style="display: none;" name="attr_background" value="9" />
    <input type="checkbox" class="sheet-useBackground" style="display: none;" name="attr_background" value="10" />
    <input type="checkbox" class="sheet-useBackground" style="display: none;" name="attr_background" value="11" />
    <input type="checkbox" class="sheet-useBackground" style="display: none;" name="attr_background" value="12" />-->
    <div class='sheet-background'>
    	<div class='sheet-base'>
            <input type="checkbox" class="sheet-hiddenInput" value="2" />
            <div class="sheet-buttonbar">
                <div class="sheet-navbuttons">
                	<input type='hidden' class="sheet-tabselected" name='attr_sheetTab' value='1' />
                	<input class="sheet-showMiniDisplay" type="checkbox" name="attr_miniDisplay" value="1">
                	<button type="action" name="act_noEditMode" class="sheet-topbuttons sheet-noEditMode" data-i18n-title="go-to-statblock-view">F</button> <!-- already in Edit Mode set value = 1 -->
                	<button type="action" name="act_editMode" class="sheet-topbuttons sheet-editMode" data-i18n-title="go-to-full-edit-view">W</button> <!-- set value = 0 -->
                    <button type="action" name="act_characterprofile1" class="sheet-topbuttons sheet-characterprofile"><span class="sheet-jumpto" data-i18n-title="jump-to-character-profile-tab">U</span><span class="sheet-ontab" data-i18n-title="on-character-profile-tab">U</span></button>
                    <input type="checkbox" class="sheet-showVehicles" name="attr_vehicle" style="display: none;" />
                    <button type="action" name="act_vehicletab3" class="sheet-topbuttons sheet-vehiclesT sheet-vehicletab"><span class="sheet-jumpto" data-i18n-title="jump-to-vehicle-tab">T</span><span class="sheet-ontab" data-i18n-title="on-vehicle-tab">T</span></button>
                    <button type="action" name="act_journaltab4" class="sheet-topbuttons sheet-journaltab"><span class="sheet-jumpto" data-i18n-title="jump-to-journal-tab">n</span><span class="sheet-ontab" data-i18n-title="on-journal-tab">n</span></button>
                    <button type="action" name="act_configurationtab2" class="sheet-topbuttons sheet-configurationtab"><span class="sheet-jumpto" data-i18n-title="jump-to-sheet-configuration-tab">x</span><span class="sheet-ontab" data-i18n-title="on-sheet-configuration-tab">x</span></button>
                </div>
                <div class="sheet-functions">
                    <input class="sheet-isWC" type="hidden" name="attr_is_npc" value="1" /> <!-- value of 0 = Wild Card -->
                    <button class="sheet-statblock" type="roll" name="roll_fullstatblock" data-i18n-title="send-statblock-chatlog" value="@{whisperstatblock} &{template:statblock} @{chardesc} {{charatts=@{charatts}}} {{charskills=@{charskills}}} {{charderived=@{charderived}}} {{chargear=@{chargear}}} {{charhindrances=@{charhindrances}}} {{charedges=@{charedges}}} {{showspec=@{showspec}}} {{charspecabilities=@{charspecabilities}}} {{powercount=[[1d0+@{powercount}]]}} {{charpowers=@{charpowers}}}"><span class="sheet-showWCicon" name="attr_WCI"></span><img style="height: 28px;" src="http://imgsrv.roll20.net/?src=github.com/finderski/SWT/blob/master/BackgroundImages/statblock_profile.png%3Fraw%3Dtrue"></button>
                    <input type="checkbox" class="sheet-showFear" name="attr_showFear" value="1" checked />
                    <button class="sheet-topbuttons sheet-fearButton" type='roll' name='roll_fearCheckRoll' title="@{fearCheckRoll}" value='@{spiritbutton} {{ReRoll=^{reroll}(~fearCheckRoll)}}  {{DmgRoll=[Fear Result](~fearRoll)}}'>&#128561;</button>
                    <button style="display: none;" type="roll" name="roll_fearRoll" data-i18n-title="fear-roll" value="&{template:info} {{name=Fear Table}} {{item=Result for @{character_name}}} {{fear=[[1d20+?{Fear Roll Modifier|0}]]}} {{heartattack=[[2d6]]}}">&#128561;</button>
                </div>
                <div class="sheet-docbuttons">
                	<input type='hidden' class="sheet-tabselected" name='attr_sheetTab' value='1' />
                	<button type="action" name="act_combatoptionstab7" class="sheet-topbuttons sheet-combatOptionstab"><span class="sheet-jumpto" data-i18n-title="jump-to-combat-options-tab">&#128481;</span><span class="sheet-ontab" data-i18n-title="on-combat-options-tab">⚔️</span></button>
                	<input type='hidden' class="sheet-tabselected" name='attr_sheetTab' value='1' />
                    <input type="hidden" name="attr_newcontent" value="unread" class="sheet-newcontent" />
                    <button type="action" name="act_releasetab5" class="sheet-topbuttons sheet-releasenotesbutton"><span class="sheet-unreadReleaseNotes" data-i18n-title="unread-releasenotes">N</span><span class="sheet-readReleaseNotes" data-i18n-title="read-releasenotes">I</span></button>
                    <input type="hidden" name="attr_newdocumentation" value="unread" class="sheet-newdocumentation" />
                    <button type="action" name="act_documentationtab6" class="sheet-topbuttons sheet-documentationbutton">i</button>
                </div>
            </div>
			<!-- <input type='radio' class='sheet-characterT' name='attr_sheetTab' style="display: none;" value='1' checked />
            <input type="radio" class="sheet-journalT" name="attr_sheetTab" style="display: none;" value="4" />
            <input type='radio' class='sheet-vehiclesT' name='attr_sheetTab' style="display: none;" value='3' />
            <input type='radio' class='sheet-configT' name='attr_sheetTab' style="display: none;" value='2' />
            <input type='radio' class='sheet-releaseN' name='attr_sheetTab' style="display: none;" value='5' />
            <input type='radio' class='sheet-documentatioN' name='attr_sheetTab' style="display: none;" value='6' /> -->
            <input type='hidden' class='sheet-selectedTab' name='attr_sheetTab' value="1" />
            <!--Character Sheet Tab-->
        	<div class='sheet-character'>
        		<!-- <div class="sheet-topThree"> -->
            	<div class='sheet-left'>
            		<h1 class='sheet-groupHeader' data-i18n="attributes">Attributes</h1>
            		<!-- Uncollapsed View -->
            		<input class="sheet-showMiniDisplay" type="checkbox" name="attr_miniDisplay" value="1" />
            		<div class='sheet-fullSectionView'>
	                    <div class='sheet-basetrait'>
	                        <input class="sheet-deltabutton" type="hidden" name="attr_agility_delta" value="0" />
	                        <button class="sheet-traitbutton sheet-traitflexattbutton" type='roll' name='roll_tAgilityRoll' title="@{tAgilityRoll}" value='@{agilitybutton} @{unshakeTemplate}'> <span data-i18n="agility">Agility</span></button>
	                        <input type="hidden" name="attr_agilitybutton" value="@{whisperagility} &{template:roll} {{namelength=@{namelength}}} @{rolltAgility} @{setmodsenc} @{showtraitmods}" />
	                        <span>
                                <input class="sheet-useAlphaNum" type="checkbox" name="attr_useAlphaNum" value="1" />
								<label data-i18n-title="agility-die-type-d4" class="sheet-traitlabel"><input type="radio" name="attr_agility" class="sheet-traitradio" value="4" checked><span class="sheet-d4"></span><div class="sheet-d4a" data-i18n="d4"></div></label>
								<label data-i18n-title="agility-die-type-d6" class="sheet-traitlabel"><input type="radio" name="attr_agility" class="sheet-traitradio" value="6"><span class="sheet-d6"></span><div class="sheet-d6a" data-i18n="d6"></div></label>
								<label data-i18n-title="agility-die-type-d8" class="sheet-traitlabel"><input type="radio" name="attr_agility" class="sheet-traitradio" value="8"><span class="sheet-d8"></span><div class="sheet-d8a" data-i18n="d8"></div></label>
								<label data-i18n-title="agility-die-type-d10" class="sheet-traitlabel"><input type="radio" name="attr_agility" class="sheet-traitradio" value="10"><span class="sheet-d10"></span><div class="sheet-d10a" data-i18n="d10"></div></label>
								<label data-i18n-title="agility-die-type-d12" class="sheet-traitlabel"><input type="radio" name="attr_agility" class="sheet-traitradio" value="12"><span class="sheet-d12"></span><div class="sheet-d12a" data-i18n="d12"></div></label>
								+</span>
							<input class="sheet-otraitmod" type="number" name="attr_agilitymod" title="@{agilitymod}" value="0" />
	                        <input class='sheet-moremods' type='checkbox' name='attr_showAgMod' /><span>y</span>
							<div class='sheet-basetrait sheet-traitmodplus'>
	                            <input type='text' class='sheet-ModDesc' name='attr_agModType' placeholder='Modifier due to edges, hindrances, etc' data-i18n-placeholder="att-mod-description" />
	    						+<input class="sheet-otraitmod" type="number" name="attr_agrollMod" title="@{agrollMod}" value="0" />
	                            <hr class="sheet-modsection">
	                            <input class='sheet-whispercheck' type='checkbox' value='/w gm' name='attr_whisperagility' /> <span class='sheet-ModDesc' data-i18n="whisper-roll-to-gm">Whisper roll to GM</span><br />
	                            <select name="attr_agwilddie" title="@{agwilddie}" class="sheet-traitdie">
	                                <option value="4" data-i18n="d4">d4</option>
									<option value="6" selected data-i18n="d6">d6</option>
									<option value="8" data-i18n="d8">d8</option>
									<option value="10" data-i18n="d10">d10</option>
									<option value="12" data-i18n="d12">d12</option>
								</select>
	                            <span data-i18n='wild-die'>Wild Die</span> <input type='text' class='sheet-wildDieDesc' name='attr_agwilddieinfo' placeholder='No modifying edges' data-i18n-placeholder="no-modifying-edges" /><br />
	                            <input class="sheet-deltamod" type="number" name="attr_agility_delta" title="@{agility_delta}" value="0" /><label class="sheet-delta" data-i18n="die-step-delta">Boost/Lower Trait</label>
	                            <input type='hidden' name='attr_agility_base' /><input type='hidden' name='attr_agilitymod_base' />
							</div>
							<input type='hidden' name='attr_agility_rank' value='1d4!' />
							<input type='hidden' name='attr_agility_display' value='d4' />
							<input type='hidden' name='attr_rolltAgility' value='{{name=@{character_name} }} {{trait=^{agility}}} {{skill_rank=@{agility_display} }} {{skill_roll=[[@{agility_rank} + @{agrollMod} [@{agModType}] + @{ModSumEnc}[Wounds, Fatigue, Encumbrance, Distracted] + @{traitmods}]]}} {{mook=[[1d0+@{wdNum}]]}} {{wild_die=[[ 1d@{agwilddie}! + @{agilitymod} + @{agrollMod} + @{ModSumEnc}[Wounds, Fatigue, Encumbrance] + @{traitmods}]]}} {{button=y}} {{ReRoll=^{reroll}(~tAgilityRoll)}} @{templateConditions} {{conviction=[[ [[@{conviction}]]d6! ]] }}' />
	                    </div>
	                    <div class='sheet-basetrait'>
	                        <input class='sheet-deltabutton' type='hidden' name='attr_smarts_delta' value='0' />
	                        <button class="sheet-traitbutton sheet-traitflexattbutton" type="roll" name="roll_tSmartsRoll" title="@{tSmartsRoll}" value="@{smartsbutton} @{unshakeTemplate}"> <span data-i18n="smarts">Smarts</span> <span name="attr_animalsmarts_display"></span></button>
	                        <input type="hidden" name="attr_smartsbutton" value="@{whispersmarts} &{template:roll} {{namelength=@{namelength}}} @{rolltSmarts} @{setmods} @{showtraitmods}" />
	                        <span>
                                <input class="sheet-useAlphaNum" type="checkbox" name="attr_useAlphaNum" value="1" />
								<label data-i18n-title="smarts-die-type-d4" class="sheet-traitlabel"><input type="radio" name="attr_smarts" class="sheet-traitradio" value="4" checked><span class="sheet-d4"></span><div class="sheet-d4a" data-i18n="d4"></div></label>
								<label data-i18n-title="smarts-die-type-d6" class="sheet-traitlabel"><input type="radio" name="attr_smarts" class="sheet-traitradio" value="6"><span class="sheet-d6"></span><div class="sheet-d6a" data-i18n="d6"></div></label>
								<label data-i18n-title="smarts-die-type-d8" class="sheet-traitlabel"><input type="radio" name="attr_smarts" class="sheet-traitradio" value="8"><span class="sheet-d8"></span><div class="sheet-d8a" data-i18n="d8"></div></label>
								<label data-i18n-title="smarts-die-type-d10" class="sheet-traitlabel"><input type="radio" name="attr_smarts" class="sheet-traitradio" value="10"><span class="sheet-d10"></span><div class="sheet-d10a" data-i18n="d10"></div></label>
								<label data-i18n-title="smarts-die-type-d12" class="sheet-traitlabel"><input type="radio" name="attr_smarts" class="sheet-traitradio" value="12"><span class="sheet-d12"></span><div class="sheet-d12a" data-i18n="d12"></div></label>
							+</span>
							<input class="sheet-otraitmod" type="number" name="attr_smartsmod" title="@{smartsmod}" value="0" />
	                        <input class='sheet-moremods' type='checkbox' name='attr_showSmMod' /><span>y</span>
							<div class='sheet-basetrait sheet-traitmodplus'>
								<input type='text' class='sheet-ModDesc' name='attr_smModType' placeholder='Modifier due to edges, hindrances, etc' data-i18n-placeholder="att-mod-description" />
	    						+<input class="sheet-otraitmod" type="number" name="attr_smrollMod" title="@{smrollMod}" value="0" />
	                            <hr class="sheet-modsection">
	                            <input class='sheet-whispercheck' type='checkbox' value='/w gm' name='attr_whispersmarts' /> <span class='sheet-ModDesc' data-i18n="whisper-roll-to-gm">Whisper roll to GM</span><br />
	                            <select name="attr_smwilddie" title="@{smwilddie}" class="sheet-traitdie">
	                                <option value="4" data-i18n="d4">d4</option>
	                                <option value="6" selected data-i18n="d6">d6</option>
	                                <option value="8" data-i18n="d8">d8</option>
	                                <option value="10" data-i18n="d10">d10</option>
	                                <option value="12" data-i18n="d12">d12</option>
	                            </select>
	                            <span data-i18n='wild-die'>Wild Die</span> <input type='text' class='sheet-wildDieDesc' name='attr_smwilddieinfo' placeholder='Standard Wild Die die type' data-i18n-placeholder="no-modifying-edges" /><br />
								<input class='sheet-whispercheck' type="checkbox" name="attr_animalsmarts" /> <span class="sheet-ModDesc" data-i18n="animal-intelligence">Animal intelligence</span><br />
	                            <input class='sheet-deltamod' type='number' name='attr_smarts_delta' title='@{smarts_delta}' value='0' /><label class='sheet-delta' data-i18n='die-step-delta'>Boost/Lower Trait</label>
	                            <input type='hidden' name='attr_smarts_base' /><input type='hidden' name='attr_smartsmod_base' />
							</div>
							<input type='hidden' name='attr_smarts_rank' value='1d4!' />
							<input type='hidden' name='attr_smarts_display' value='d4' />
							<input type="hidden" name="attr_animalsmarts_display" value="" />
							<input type='hidden' name='attr_rolltSmarts' value='{{name=@{character_name} }} {{trait=^{smarts}}} {{skill_rank=@{smarts_display} }} {{skill_roll=[[@{smarts_rank} + @{smrollMod} [@{smModType}] + @{ModSum}[Wounds, Fatigue, Distracted] + @{traitmods}]]}} {{mook=[[1d0+@{wdNum}]]}} {{wild_die=[[ 1d@{smwilddie}! + @{smartsmod} + @{smrollMod} + @{ModSum}[Wounds, Fatigue, Distracted] + @{traitmods}]]}} {{button=y}} {{ReRoll=^{reroll}(~tSmartsRoll)}} @{templateConditions} {{conviction=[[ [[@{conviction}]]d6! ]] }}' />
	                    </div>
	                    <div class='sheet-basetrait'>
	                        <input class='sheet-deltabutton' type='hidden' name='attr_spirit_delta' value='0' />
	                        <button class="sheet-traitbutton sheet-traitflexattbutton" type='roll' name='roll_tSpiritRoll' title="@{tSpiritRoll}" value='@{spiritbutton} @{unshakeTemplate}'> <span data-i18n="spirit">Spirit</span></button>
	                        <input type="hidden" name="attr_spiritbutton" value="@{whisperspirit} &{template:roll} {{namelength=@{namelength}}} @{rolltSpirit} @{setmods} @{showtraitmods}" />
	                        <span>
                                <input class="sheet-useAlphaNum" type="checkbox" name="attr_useAlphaNum" value="1" />
								<label data-i18n-title="spirit-die-type-d4" class="sheet-traitlabel"><input type="radio" name="attr_spirit" class="sheet-traitradio" value="4" checked><span class="sheet-d4"></span><div class="sheet-d4a" data-i18n="d4"></div></label>
								<label data-i18n-title="spirit-die-type-d6" class="sheet-traitlabel"><input type="radio" name="attr_spirit" class="sheet-traitradio" value="6"><span class="sheet-d6"></span><div class="sheet-d6a" data-i18n="d6"></div></label>
								<label data-i18n-title="spirit-die-type-d8" class="sheet-traitlabel"><input type="radio" name="attr_spirit" class="sheet-traitradio" value="8"><span class="sheet-d8"></span><div class="sheet-d8a" data-i18n="d8"></div></label>
								<label data-i18n-title="spirit-die-type-d10" class="sheet-traitlabel"><input type="radio" name="attr_spirit" class="sheet-traitradio" value="10"><span class="sheet-d10"></span><div class="sheet-d10a" data-i18n="d10"></div></label>
								<label data-i18n-title="spirit-die-type-d12" class="sheet-traitlabel"><input type="radio" name="attr_spirit" class="sheet-traitradio" value="12"><span class="sheet-d12"></span><div class="sheet-d12a" data-i18n="d12"></div></label>
							+</span>
							<input class="sheet-otraitmod" type="number" name="attr_spiritmod" title="@{spiritmod}" value="0" />
	                        <input class='sheet-moremods' type='checkbox' name='attr_showSpMod' /><span>y</span>
							<div class='sheet-basetrait sheet-traitmodplus'>
	                            <input type='text' class='sheet-ModDesc' name='attr_spModType' placeholder='Modifier due to edges, hindrances, etc' data-i18n-placeholder="att-mod-description" />
	    						+<input class="sheet-otraitmod" type="number" name="attr_sprollMod" title="@{sprollMod}" value="0" />
	                            <hr class="sheet-modsection">
	                            <input class='sheet-whispercheck' type='checkbox' value='/w gm' name='attr_whisperspirit' /> <span class='sheet-ModDesc' data-i18n="whisper-roll-to-gm">Whisper roll to GM</span><br />
	                            <select name="attr_spwilddie" title="@{spwilddie}" class="sheet-traitdie">
	                                <option value="4" data-i18n="d4">d4</option>
	                                <option value="6" selected data-i18n="d6">d6</option>
	                                <option value="8" data-i18n="d8">d8</option>
	                                <option value="10" data-i18n="d10">d10</option>
	                                <option value="12" data-i18n="d12">d12</option>
	                            </select>
	                            <span data-i18n='wild-die'>Wild Die</span> <input type='text' class='sheet-wildDieDesc' name='attr_spwilddieinfo' placeholder='Standard Wild Die die type' data-i18n-placeholder="no-modifying-edges" /><br />
	                            <input class='sheet-deltamod' type='number' name='attr_spirit_delta' title='@{spirit_delta}' value='0' /><label class='sheet-delta' data-i18n='die-step-delta'>Boost/Lower Trait</label>
	                            <input type='hidden' name='attr_spirit_base' /><input type='hidden' name='attr_spiritmod_base' />
							</div>
							<input type='hidden' name='attr_spirit_rank' value='1d4!' />
							<input type='hidden' name='attr_spirit_display' value='d4' />
							<input type='hidden' name='attr_rolltSpirit' value='{{name=@{character_name} }} {{trait=^{spirit}}} {{skill_rank=@{spirit_display} }} {{skill_roll=[[@{spirit_rank} + @{sprollMod} [@{spModType}] + @{ModSum}[Wounds, Fatigue, Distracted] + @{traitmods}]]}} {{mook=[[1d0+@{wdNum}]]}} {{wild_die=[[ 1d@{spwilddie}! + @{spiritmod} + @{sprollMod} + @{ModSum}[Wounds, Fatigue, Distracted] + @{traitmods}]]}} {{button=y}} {{ReRoll=^{reroll}(~tSpiritRoll)}} @{templateConditions} {{conviction=[[ [[@{conviction}]]d6! ]] }}' />
	                    </div>
	                    <div class='sheet-basetrait'>
	                        <input class='sheet-deltabutton' type='hidden' name='attr_strength_delta' value='0' />
	                        <button class="sheet-traitbutton sheet-traitflexattbutton" type='roll' name='roll_tStrengthRoll' title="@{tStrengthRoll}" value='@{strengthbutton} @{unshakeTemplate}'> <span data-i18n="strength">Strength</span></button>
	                        <input type="hidden" name="attr_strengthbutton" value="@{whisperstrength} &{template:roll} {{namelength=@{namelength}}} @{rolltStrength} @{setmodsenc} @{showtraitmods}" />
	                        <span>
                                <input class="sheet-useAlphaNum" type="checkbox" name="attr_useAlphaNum" value="1" />
								<label data-i18n-title="strength-die-type-d4" class="sheet-traitlabel"><input type="radio" name="attr_strength" class="sheet-traitradio" value="4" checked><span class="sheet-d4"></span><div class="sheet-d4a" data-i18n="d4"></div></label>
								<label data-i18n-title="strength-die-type-d6" class="sheet-traitlabel"><input type="radio" name="attr_strength" class="sheet-traitradio" value="6"><span class="sheet-d6"></span><div class="sheet-d6a" data-i18n="d6"></div></label>
								<label data-i18n-title="strength-die-type-d8" class="sheet-traitlabel"><input type="radio" name="attr_strength" class="sheet-traitradio" value="8"><span class="sheet-d8"></span><div class="sheet-d8a" data-i18n="d8"></div></label>
								<label data-i18n-title="strength-die-type-d10" class="sheet-traitlabel"><input type="radio" name="attr_strength" class="sheet-traitradio" value="10"><span class="sheet-d10"></span><div class="sheet-d10a" data-i18n="d10"></div></label>
								<label data-i18n-title="strength-die-type-d12" class="sheet-traitlabel"><input type="radio" name="attr_strength" class="sheet-traitradio" value="12"><span class="sheet-d12"></span><div class="sheet-d12a" data-i18n="d12"></div></label>
							+</span>
							<input class="sheet-otraitmod" type="number" name="attr_strengthmod" title="@{strengthmod}" value="0" />
	                        <input class='sheet-moremods' type='checkbox' name='attr_showStMod' /><span>y</span>
							<div class='sheet-basetrait sheet-traitmodplus'>
	                            <input type='text' class='sheet-ModDesc' name='attr_stModType' placeholder='Modifier due to edges, hindrances, etc' data-i18n-placeholder="att-mod-description" />
	    						+<input class="sheet-otraitmod" type="number" name="attr_strollMod" title="@{strollMod}" value="0" />
	                            <hr class="sheet-modsection">
	                            <input class='sheet-whispercheck' type='checkbox' value='/w gm' name='attr_whisperstrength' /> <span class='sheet-ModDesc' data-i18n="whisper-roll-to-gm">Whisper roll to GM</span><br />
	                            <select name="attr_stwilddie" title="@{stwilddie}" class="sheet-traitdie">
	                                <option value="4" data-i18n="d4">d4</option>
	                                <option value="6" selected data-i18n="d6">d6</option>
	                                <option value="8" data-i18n="d8">d8</option>
	                                <option value="10" data-i18n="d10">d10</option>
	                                <option value="12" data-i18n="d12">d12</option>
	                            </select>
	                            <span data-i18n='wild-die'>Wild Die</span> <input type='text' class='sheet-wildDieDesc' name='attr_stwilddieinfo' placeholder='Standard Wild Die die type' data-i18n-placeholder="no-modifying-edges" /><br />
	                            <input class='sheet-detlamod' type='number' name='attr_strength_delta' title='@{strength_delta}' value='0' /><label class='sheet-delta' data-i18n='die-step-delta'>Boost/Lower Trait</label>
	                            <input type='hidden' name='attr_strength_base' /><input type='hidden' name='attr_strengthmod_base' />
							</div>
							<input type='hidden' name='attr_strength_rank' value='1d4!' />
							<input type='hidden' name='attr_strength_display' value='d4' />
							<input type='hidden' name='attr_rolltStrength' value='{{name=@{character_name} }} {{trait=^{strength}}} {{skill_rank=@{strength_display} }} {{skill_roll=[[@{strength_rank} + @{strollMod} [@{stModType}] + @{ModSumEnc}[Wounds, Fatigue, Encumbrance, Distracted] + @{traitmods}]]}} {{mook=[[1d0+@{wdNum}]]}} {{wild_die=[[ 1d@{stwilddie}! + @{strengthmod} + @{strollMod} + @{ModSumEnc}[Wounds, Fatigue, Encumbrance, Distracted] + @{traitmods}]]}} {{button=y}} {{ReRoll=^{reroll}(~tStrengthRoll)}} @{templateConditions} {{conviction=[[ [[@{conviction}]]d6! ]] }}' />
	                    </div>
	                    <div class='sheet-basetrait'>
	                        <input class='sheet-deltabutton' type='hidden' name='attr_vigor_delta' value='0' />
	                        <button class="sheet-traitbutton sheet-traitflexattbutton" type='roll' name='roll_tVigorRoll' title="@{tVigorRoll}" value='@{vigorbutton} @{unshakeTemplate}'> <span data-i18n="vigor">Vigor</span></button>
	                        <input type="hidden" name="attr_vigorbutton" value="@{whispervigor} &{template:roll} {{namelength=@{namelength}}} @{rolltVigor} @{setmods} @{showtraitmods}" />
	                        <span>
                                <input class="sheet-useAlphaNum" type="checkbox" name="attr_useAlphaNum" value="1" />
								<label data-i18n-title="vigor-die-type-d4" class="sheet-traitlabel"><input type="radio" name="attr_vigor" class="sheet-traitradio" value="4" checked><span class="sheet-d4"></span><div class="sheet-d4a" data-i18n="d4"></div></label>
								<label data-i18n-title="vigor-die-type-d6" class="sheet-traitlabel"><input type="radio" name="attr_vigor" class="sheet-traitradio" value="6"><span class="sheet-d6"></span><div class="sheet-d6a" data-i18n="d6"></div></label>
								<label data-i18n-title="vigor-die-type-d8" class="sheet-traitlabel"><input type="radio" name="attr_vigor" class="sheet-traitradio" value="8"><span class="sheet-d8"></span><div class="sheet-d8a" data-i18n="d8"></div></label>
								<label data-i18n-title="vigor-die-type-d10" class="sheet-traitlabel"><input type="radio" name="attr_vigor" class="sheet-traitradio" value="10"><span class="sheet-d10"></span><div class="sheet-d10a" data-i18n="d10"></div></label>
								<label data-i18n-title="vigor-die-type-d12" class="sheet-traitlabel"><input type="radio" name="attr_vigor" class="sheet-traitradio" value="12"><span class="sheet-d12"></span><div class="sheet-d12a" data-i18n="d12"></div></label>
							+</span>
							<input class="sheet-otraitmod" type="number" name="attr_vigormod" title="@{vigormod}" value="0" />
	                        <input class='sheet-moremods' type='checkbox' name='attr_showViMod' /><span>y</span>
							<div class='sheet-basetrait sheet-traitmodplus'>
	                            <input type='text' class='sheet-ModDesc' name='attr_viModType' placeholder='Modifier due to edges, hindrances, etc' data-i18n-placeholder="att-mod-description" />
	    						+<input class="sheet-otraitmod" type="number" name="attr_virollMod" title="@{virollMod}" value="0" />
	                            <hr class="sheet-modsection">
	                            <input class='sheet-whispercheck' type='checkbox' value='/w gm' name='attr_whispervigor' /> <span class='sheet-ModDesc' data-i18n="whisper-roll-to-gm">Whisper roll to GM</span><br />
	                            <select name="attr_viwilddie" title="@{viwilddie}" class="sheet-traitdie">
	                                <option value="4" data-i18n="d4">d4</option>
	                                <option value="6" selected data-i18n="d6">d6</option>
	                                <option value="8" data-i18n="d8">d8</option>
	                                <option value="10" data-i18n="d10">d10</option>
	                                <option value="12" data-i18n="d12">d12</option>
	                            </select>
	                            <span data-i18n='wild-die'>Wild Die</span> <input type='text' class='sheet-wildDieDesc' name='attr_viwilddieinfo' placeholder='Standard Wild Die die type' data-i18n-placeholder="no-modifying-edges" /><br />
	                            <input class='sheet-detlamod' type='number' name='attr_vigor_delta' title='@{vigor_delta}' value='0' /><label class='sheet-delta' data-i18n='die-step-delta'>Boost/Lower Trait</label>
	                            <input type='hidden' name='attr_vigor_base' /><input type='hidden' name='attr_vigormod_base' />
							</div>
							<input type='hidden' name='attr_vigor_rank' value='1d4!' />
							<input type='hidden' name='attr_vigor_display' value='d4' />
							<input type='hidden' name='attr_rolltVigor' value='{{name=@{character_name} }} {{trait=^{vigor}}} {{skill_rank=@{vigor_display} }} {{skill_roll=[[@{vigor_rank} + @{virollMod} [@{viModType}] + @{ModSum}[Wounds, Fatigue, Distracted] + @{traitmods}]]}} {{mook=[[1d0+@{wdNum}]]}} {{wild_die=[[ 1d@{viwilddie}! + @{vigormod} + @{virollMod} + @{ModSum}[Wounds, Fatigue, Distracted] + @{traitmods}]]}} {{button=y}} {{ReRoll=^{reroll}(~tVigorRoll)}} @{templateConditions} {{conviction=[[ [[@{conviction}]]d6! ]] }} {{vigorStunned=y}}' />
	                    </div>
	                </div>
                    <!-- Collapsed View of Attributes -->
                    <div class='sheet-collapsedSectionView'>
                    	<button class="sheet-traitbutton sheet-miniButton" type='roll' name='roll_tAgilityRoll' title="@{tAgilityRoll}" value='@{agilitybutton} @{unshakeTemplate}'> <span data-i18n="agility">Agility</span> (<span name="attr_agility_display"></span>)</button>
						<button class="sheet-traitbutton sheet-miniButton" type="roll" name="roll_tSmartsRoll" title="@{tSmartsRoll}" value="@{smartsbutton} @{unshakeTemplate}"> <span data-i18n="smarts">Smarts</span> <span name="attr_animalsmarts_display"></span> (<span name="attr_smarts_display"></span>)</button>
						<button class="sheet-traitbutton sheet-miniButton" type='roll' name='roll_tSpiritRoll' title="@{tSpiritRoll}" value='@{spiritbutton} @{unshakeTemplate}'> <span data-i18n="spirit">Spirit</span> (<span name="attr_spirit_display"></span>)</button>
						<button class="sheet-traitbutton sheet-miniButton" type='roll' name='roll_tStrengthRoll' title="@{tStrengthRoll}" value='@{strengthbutton} @{unshakeTemplate}'> <span data-i18n="strength">Strength</span> (<span name="attr_strength_display"></span>)</button>
						<button class="sheet-traitbutton sheet-miniButton" type='roll' name='roll_tVigorRoll' title="@{tVigorRoll}" value='@{vigorbutton} @{unshakeTemplate}'> <span data-i18n="vigor">Vigor</span> (<span name="attr_vigor_display"></span>)</button>
                    </div>
                    <!-- End Collapsed View of Attributes -->
                    <!-- Health (Wounds and Fatigue) used to be here -->
    				<!-- Soak and Unshake Buttons used to be here -->
    				<!-- Start Skills -->
    				<input type="checkbox" class="sheet-hideskillsconfig" /><span class="sheet-skillList"></span>
                    <h1 class='sheet-groupHeader' data-i18n="skills">Skills</h1>
                    <div class='sheet-fullSectionView'>
	                    <div class="sheet-base sheet-isSkillConfig">
	                        <span class="sheet-skillItem"><label class="sheet-SkillListLabel"><input class="sheet-StaticSkill" type="checkbox" name="attr_altRuleSkillSpec" /><span></span> <span data-i18n="use-skill-specialization">Use Skill Specialization</span></label></span>
	                        <!--<span class="sheet-skillItem"><label class="sheet-SkillListLabel"><input class="sheet-StaticSkill" type="checkbox" name="attattr_climbingnamer_fencinginfo" style='width:15px;' /><span></span> <span data-i18n="fencing-styles-n-schools">Use Fencing Styles & Schools</span></label></span>-->
	                        <hr />
	                        <div class="sheet-isSkillList" data-i18n-list="skill-select-list">
	                            <span data-i18n-list-item="all-skills" class="sheet-skillItem"><label class="sheet-SkillListLabel"><input class="sheet-StaticSkill" type="checkbox" name="attr_staticAll" value='1' /><span></span> <span data-i18n="all" style='font-weight: bold; color: maroon;'>ALL</span></label></span>
								<span data-i18n-list-item="core-skills" class="sheet-skillItem"><label class="sheet-SkillListLabel"><input class="sheet-StaticSkill" type="checkbox" name="attr_staticCore" value='1' /><span></span> <span data-i18n="core-skills" style='font-weight: bold; color: maroon;'>Core Skills</span></label></span>
								<span data-i18n-list-item="academics" class="sheet-skillItem"><label class="sheet-SkillListLabel"><input class="sheet-StaticSkill" type="checkbox" name="attr_staticAcademics" /><span></span> <span name="attr_academicsname"></span></label></span>
								<span data-i18n-list-item="athletics" class="sheet-skillItem"><label class="sheet-SkillListLabel"><input class="sheet-StaticSkill" type="checkbox" name="attr_staticAthletics" /><span></span> <span name="attr_athleticsname"></span></label></span>
								<span data-i18n-list-item="battle" class="sheet-skillItem"><label class="sheet-SkillListLabel"><input class="sheet-StaticSkill" type="checkbox" name="attr_staticBattle" /><span></span> <span name="attr_battlename"></span></label></span>
								<span data-i18n-list-item="boating" class="sheet-skillItem"><label class="sheet-SkillListLabel"><input class="sheet-StaticSkill" type="checkbox" name="attr_staticBoating" /><span></span> <span name="attr_boatingname"></span></label></span>
									<!-- <span class="sheet-skillItem"><label class="sheet-SkillListLabel"><input class="sheet-StaticSkill" type="checkbox" name="attr_staticClimbing" /><span></span> <span name="attr_climbingname"></span></label></span>								 -->
								<span data-i18n-list-item="common-knowledge" class="sheet-skillItem"><label class="sheet-SkillListLabel"><input class="sheet-StaticSkill" type="checkbox" name="attr_staticCommonKnowledge" /><span></span> <span name="attr_commonknowledgename"></span></label></span>
								<span data-i18n-list-item="driving" class="sheet-skillItem"><label class="sheet-SkillListLabel"><input class="sheet-StaticSkill" type="checkbox" name="attr_staticDriving" /><span></span> <span name="attr_drivingname"></span></label></span>
								<span data-i18n-list-item="electronics" class="sheet-skillItem"><label class="sheet-SkillListLabel"><input class="sheet-StaticSkill" type="checkbox" name="attr_staticElectronics" /><span></span> <span name="attr_electronicsname"></span></label></span>
								<span data-i18n-list-item="faith" class="sheet-skillItem"><label class="sheet-SkillListLabel"><input class="sheet-StaticSkill" type="checkbox" name="attr_staticFaith" /><span></span> <span name="attr_faithname"></span></label></span>
                                <span data-i18n-list-item="fighting" class="sheet-skillItem"><label class="sheet-SkillListLabel"><input class="sheet-StaticSkill" type="checkbox" name="attr_staticFighting" /><span></span> <span name="attr_fightingname"></span></label></span>
								<span data-i18n-list-item="focus" class="sheet-skillItem"><label class="sheet-SkillListLabel"><input class="sheet-StaticSkill" type="checkbox" name="attr_staticFocus" /><span></span> <span name="attr_focusname"></span></label></span>
								<span data-i18n-list-item="gambling" class="sheet-skillItem"><label class="sheet-SkillListLabel"><input class="sheet-StaticSkill" type="checkbox" name="attr_staticGambling" /><span></span> <span name="attr_gamblingname"></span></label></span>
								<!-- <span class="sheet-skillItem"><label class="sheet-SkillListLabel"><input class="sheet-StaticSkill" type="checkbox" name="attr_staticGuts" /><span></span> <span name="attr_gutsname"></span></label></span> -->
								<span data-i18n-list-item="hacking" class="sheet-skillItem"><label class="sheet-SkillListLabel"><input class="sheet-StaticSkill" type="checkbox" name="attr_staticHacking" /><span></span> <span name="attr_hackingname"></span></label></span>
								<span data-i18n-list-item="healing" class="sheet-skillItem"><label class="sheet-SkillListLabel"><input class="sheet-StaticSkill" type="checkbox" name="attr_staticHealing" /><span></span> <span name="attr_healingname"></span></label></span>
								<span data-i18n-list-item="intimidation" class="sheet-skillItem"><label class="sheet-SkillListLabel"><input class="sheet-StaticSkill" type="checkbox" name="attr_staticIntimidation" /><span></span> <span name="attr_intimidationname"></span></label></span>
								<!-- <span class="sheet-skillItem"><label class="sheet-SkillListLabel"><input class="sheet-StaticSkill" type="checkbox" name="attr_staticInvestigation" /><span></span> <span name="attr_investigationname"></span></label></span> -->
								<span data-i18n-list-item="language" class="sheet-skillItem"><label class="sheet-SkillListLabel"><input class="sheet-StaticSkill" type="checkbox" name="attr_staticLanguage" /><span></span> <span name="attr_native-languagename"></span></label></span>
								<!-- <span class="sheet-skillItem"><label class="sheet-SkillListLabel"><input class="sheet-StaticSkill" type="checkbox" name="attr_staticLockpicking" /><span></span> <span name="attr_lockpickingname"></span></label></span> -->
								<span data-i18n-list-item="notice" class="sheet-skillItem"><label class="sheet-SkillListLabel"><input class="sheet-StaticSkill" type="checkbox" name="attr_staticNotice" /><span></span> <span name="attr_noticename"></span></label></span>
								<span data-i18n-list-item="occult" class="sheet-skillItem"><label class="sheet-SkillListLabel"><input class="sheet-StaticSkill" type="checkbox" name="attr_staticOccult" /><span></span> <span name="attr_occultname"></span></label></span>
								<span data-i18n-list-item="performance" class="sheet-skillItem"><label class="sheet-SkillListLabel"><input class="sheet-StaticSkill" type="checkbox" name="attr_staticPerformance" /><span></span> <span name="attr_performancename"></span></label></span>
								<span data-i18n-list-item="persuasion" class="sheet-skillItem"><label class="sheet-SkillListLabel"><input class="sheet-StaticSkill" type="checkbox" name="attr_staticPersuasion" /><span></span> <span name="attr_persuasionname"></span></label></span>
								<span data-i18n-list-item="piloting" class="sheet-skillItem"><label class="sheet-SkillListLabel"><input class="sheet-StaticSkill" type="checkbox" name="attr_staticPiloting" /><span></span> <span name="attr_pilotingname"></span></label></span>
								<span data-i18n-list-item="psionics" class="sheet-skillItem"><label class="sheet-SkillListLabel"><input class="sheet-StaticSkill" type="checkbox" name="attr_staticPsionics" /><span></span> <span name="attr_psionicsname"></span></label></span>
								<span data-i18n-list-item="repair" class="sheet-skillItem"><label class="sheet-SkillListLabel"><input class="sheet-StaticSkill" type="checkbox" name="attr_staticRepair" /><span></span> <span name="attr_repairname"></span></label></span>
								<span data-i18n-list-item="research" class="sheet-skillItem"><label class="sheet-SkillListLabel"><input class="sheet-StaticSkill" type="checkbox" name="attr_staticResearch" /><span></span> <span name="attr_researchname"></span></label></span>
								<span data-i18n-list-item="riding" class="sheet-skillItem"><label class="sheet-SkillListLabel"><input class="sheet-StaticSkill" type="checkbox" name="attr_staticRiding" /><span></span> <span name="attr_ridingname"></span></label></span>
								<!-- <span class="sheet-skillItem"><label class="sheet-SkillListLabel"><input class="sheet-StaticSkill" type="checkbox" name="attr_staticRitual" /><span></span> <span name="attr_ritualname"></span></label></span> -->
								<span data-i18n-list-item="science" class="sheet-skillItem"><label class="sheet-SkillListLabel"><input class="sheet-StaticSkill" type="checkbox" name="attr_staticScience" /><span></span> <span name="attr_sciencename"></span></label></span>
								<span data-i18n-list-item="shooting" class="sheet-skillItem"><label class="sheet-SkillListLabel"><input class="sheet-StaticSkill" type="checkbox" name="attr_staticShooting" /><span></span> <span name="attr_shootingname"></span></label></span>
								<span data-i18n-list-item="spellcasting" class="sheet-skillItem"><label class="sheet-SkillListLabel"><input class="sheet-StaticSkill" type="checkbox" name="attr_staticSpellcasting" /><span></span> <span name="attr_spellcastingname"></span></label></span>
								<span data-i18n-list-item="stealth" class="sheet-skillItem"><label class="sheet-SkillListLabel"><input class="sheet-StaticSkill" type="checkbox" name="attr_staticStealth" /><span></span> <span name="attr_stealthname"></span></label></span>
								<!-- <span class="sheet-skillItem"><label class="sheet-SkillListLabel"><input class="sheet-StaticSkill" type="checkbox" name="attr_staticStreetwise" /><span></span> <span name="attr_streetwisename"></span></label></span> -->
								<span data-i18n-list-item="survival" class="sheet-skillItem"><label class="sheet-SkillListLabel"><input class="sheet-StaticSkill" type="checkbox" name="attr_staticSurvival" /><span></span> <span name="attr_survivalname"></span></label></span>
								<!-- <span class="sheet-skillItem"><label class="sheet-SkillListLabel"><input class="sheet-StaticSkill" type="checkbox" name="attr_staticSwimming" /><span></span> <span name="attr_swimmingname"></span></label></span> -->
								<span data-i18n-list-item="taunt" class="sheet-skillItem"><label class="sheet-SkillListLabel"><input class="sheet-StaticSkill" type="checkbox" name="attr_staticTaunt" /><span></span> <span name="attr_tauntname"></span></label></span>
								<span data-i18n-list-item="thievery" class="sheet-skillItem"><label class="sheet-SkillListLabel"><input class="sheet-StaticSkill" type="checkbox" name="attr_staticThievery" /><span></span> <span name="attr_thieveryname"></span></label></span>
								<!-- <span class="sheet-skillItem"><label class="sheet-SkillListLabel"><input class="sheet-StaticSkill" type="checkbox" name="attr_staticThrowing" /><span></span> <span name="attr_throwingname"></span></label></span> -->
								<!-- <span class="sheet-skillItem"><label class="sheet-SkillListLabel"><input class="sheet-StaticSkill" type="checkbox" name="attr_staticTracking" /><span></span> <span name="attr_trackingname"></span></label></span> -->
								<span data-i18n-list-item="weird-science" class="sheet-skillItem"><label class="sheet-SkillListLabel"><input class="sheet-StaticSkill" type="checkbox" name="attr_staticWeirdScience" /><span></span> <span name="attr_weirdsciencename"></span></label></span>
	    						<span data-i18n-list-item="knowledge-other" class="sheet-skillItem"><label class="sheet-SkillListLabel"><input class="sheet-StaticSkill" type="checkbox" name="attr_staticKnowledgeOther" /><span></span> <span data-i18n="knowledge-other">Knowledge/Other</span></label></span>
	                        </div>
	                    </div>
	                    <!-- <div class='sheet-base sheet-abilities'> -->
	                    <div class="sheet-selected-skills" data-i18n-list="character-skills">
	                        <!-- Unskilled -->
	                        <div class='sheet-basetrait' data-i18n-list-item="unskilled">
	                            <button class="sheet-unskilledbutton sheet-traitflexattbutton" type='roll' name='roll_tUnskilledRoll' title="@{tUnskilledRoll}" value='@{whisperunskilled} &{template:roll} {{namelength=@{namelength}}} @{rolltUnskilled} {{skill_roll=[[ @{unskilledSkillRollFormula} ]]}} {{wild_die=[[ @{unskilledWildDieFormula} ]]}} @{unskilledencumbrancebutton} @{showtraitmods} {{conviction=[[ [[@{conviction}]]d6! ]] }} @{unshakeTemplate} {{button=y}} {{ReRoll=^{reroll}(~tUnskilledRoll)}}'> <span data-i18n="unskilled-d4-2">Unskilled (d4-2)</span></button>
	                            <span class='sheet-unskilledOptions'>
									<label data-i18n-title="jack-of-all-trades" class="sheet-traitlabel"><input type="checkbox" name="attr_JackOfAllTrades" class="sheet-traitradio" value="2" /><span class="sheet-joat">g</span></label>
									<label data-i18n-title="apply-encumbrance" class="sheet-traitlabel"><input type="checkbox" name="attr_unskilledencumbrance" title="@{unskilledencumbrance}" class="sheet-traitradio" value="1" /><span class="sheet-joat">O</span></label>
									<!-- <label class="sheet-traitlabel"><input type="radio" name="attr_vigor" title="@{vigor}" class="sheet-traitradio" value="8" checked><span class="sheet-d8"></span></label>
									<label class="sheet-traitlabel"><input type="radio" name="attr_vigor" title="@{vigor}" class="sheet-traitradio" value="10" checked><span class="sheet-d10"></span></label>
									<label class="sheet-traitlabel"><input type="radio" name="attr_vigor" title="@{vigor}" class="sheet-traitradio" value="12" checked><span class="sheet-d12"></span></label> -->
								</span>
	                            <!-- <span style='width:31px; line-height: 28px; padding-left:4px;'>d4</span><span style='width:7.81px; line-height: 28px;'>-</span> -->
								<!--<input class="sheet-traitmod" type="number" name="attr_agMod" title="@{unSMod}" value="2" />-->
								<!-- <span style="width:28px; height: 28px; line-height:28px; text-align: center;">2</span> -->
	                            <input class='sheet-moremods' type='checkbox' name='attr_showUSMod' /><span>y</span>
	    						<div class='sheet-basetrait sheet-traitmodplus'>
	                                <hr class="sheet-modsection">
	                                <input class='sheet-whispercheck' type='checkbox' value='/w gm' name='attr_whisperunskilled' /> <span class='sheet-ModDesc' data-i18n="whisper-roll-to-gm">Whisper roll to GM</span><br />
	                                <select name="attr_unskilledwilddie" title="@{unskilledwilddie}" class="sheet-traitdie">
	                                    <option value="4" data-i18n="d4">d4</option>
	                                    <option value="6" selected data-i18n="d6">d6</option>
	                                    <option value="8" data-i18n="d8">d8</option>
	                                    <option value="10" data-i18n="d10">d10</option>
	                                    <option value="12" data-i18n="d12">d12</option>
	                                </select>
	                                <span data-i18n='wild-die'>Wild Die</span> <input type='text' class='sheet-wildDieDesc' name='attr_unskilledwilddieinfo' placeholder='Standard Wild Die die type' data-i18n-placeholder="no-modifying-edges" />
	                                <!-- <hr class="sheet-modsection">
	    						    <input type="checkbox" name="attr_JackOfAllTrades" value="2" />
	    						    <span class='sheet-ModDesc' data-i18n="jack-of-all-trades">Jack of All Trades</span><br/>
	    						    <input type="checkbox" name="attr_unskilledencumbrance" title="@{unskilledencumbrance}" value="1" />
	    						    <span class='sheet-ModDesc' data-i18n="apply-encumbrance">Apply Encumbrance</span> -->
	    						</div>
	    						<input type='hidden' name='attr_unskilled_rank' value='1d4!-2+@{JackOfAllTrades}[Jack of All Trades Mod]' />
	    						<input type='hidden' name='attr_unskilled_display' value='1d4-2' />
                                <input type='hidden' name='attr_unskilledSkillRollFormula' value='@{unskilled_rank} + @{ModSum}[Wounds, Fatigue, Distracted] + @{traitmods} + [[@{UnskilledEncumbrance}*@{encumbrance}]][Encumbrance Penalty]' />
                                <input type='hidden' name='attr_unskilledWildDieFormula' value='1d@{unskilledwilddie}! -2[Unskilled Penalty] + {0,@{JackOfAllTrades}}kh1[Jack of All Trades Modifier] + @{ModSum}[Modifiers] + @{traitmods} + [[@{UnskilledEncumbrance}*@{encumbrance}]][Encumbrance Penalty]' />
	    						<input type='hidden' name='attr_rolltUnskilled' value='{{name=@{character_name} }} {{trait=^{unskilled}}} {{skill_rank=@{unskilled_display} }} {{mook=[[1d0+@{wdNum}]]}} @{templateConditions}' />
	    						<input type="hidden" name="attr_unskilledencumbrancebutton" value="@{setmods}" />
								<input type="hidden" name="attr_unskilledrollformula" value="@{unskilled_rank} + @{ModSum}[Wounds, Fatigue, Distracted] + @{traitmods} + [[@{UnskilledEncumbrance}*@{encumbrance}]] [Encumbrance Penalty]" />
	                        </div>
							<!-- Academics Skill -->
	                        <input class="sheet-StaticSkill" type="checkbox" name="attr_staticAcademics" style='display:none;'/>
	                        <div class='sheet-basetrait sheet-staticAcademics' data-i18n-list-item="academics">
	                            <input class='sheet-deltabutton' type='hidden' name='attr_academics_delta' value='0' />
	                            <button class="sheet-skillbutton sheet-skillflexattbutton" type='roll' name='roll_tAcademicsRoll' title="@{tAcademicsRoll}" value='@{academicsRollValue}'> <span name='attr_academicsname'></span> <span class='sheet-linkedAtt' data-i18n="sma-u">(SMA)</span></button>
	                            <input type="hidden" name="attr_academicsRollValue" value="@{whisperacademics} &{template:roll} {{namelength=@{namelength}}} {{button=y}} {{ReRoll=^{reroll}(~tAcademicsRoll)}} {{trait=@{academicsname}}} @{rolltAcademics} @{setmods} @{showtraitmods} @{unshakeTemplate}" />
	                            <div class="sheet-skillRankContainer">
	                            	<div class="sheet-skillRankChild">
                                        <input class="sheet-useAlphaNum" type="checkbox" name="attr_useAlphaNum" value="1" />
	                            		<label data-i18n-title="academics-die-type-d4" class="sheet-skilldielabel"><input type="radio" name="attr_academics" class="sheet-traitradio" value="4" checked><span class="sheet-d4"></span><div class="sheet-d4a" data-i18n="d4"></div></label>
										<label data-i18n-title="academics-die-type-d6" class="sheet-skilldielabel"><input type="radio" name="attr_academics" class="sheet-traitradio" value="6"><span class="sheet-d6"></span><div class="sheet-d6a" data-i18n="d6"></div></label>
										<label data-i18n-title="academics-die-type-d8" class="sheet-skilldielabel"><input type="radio" name="attr_academics" class="sheet-traitradio" value="8"><span class="sheet-d8"></span><div class="sheet-d8a" data-i18n="d8"></div></label>
										<label data-i18n-title="academics-die-type-d10" class="sheet-skilldielabel"><input type="radio" name="attr_academics" class="sheet-traitradio" value="10"><span class="sheet-d10"></span><div class="sheet-d10a" data-i18n="d10"></div></label>
										<label data-i18n-title="academics-die-type-d12" class="sheet-skilldielabel"><input type="radio" name="attr_academics" class="sheet-traitradio" value="12"><span class="sheet-d12"></span><div class="sheet-d12a" data-i18n="d12"></div></label>
										<input type="hidden" class="sheet-traitradio" name="attr_academics" value="4" />
										<div class="sheet-d4Selected"><span class="sheet-d4"></span><div class="sheet-d4a" data-i18n="d4"></div></div>
		                            	<div class="sheet-d6Selected"><span class="sheet-d6"></span><div class="sheet-d6a" data-i18n="d6"></div></div>
		                            	<div class="sheet-d8Selected"><span class="sheet-d8"></span><div class="sheet-d8a" data-i18n="d8"></div></div>
		                            	<div class="sheet-d10Selected"><span class="sheet-d10"></span><div class="sheet-d10a" data-i18n="d10"></div></div>
		                            	<div class="sheet-d12Selected"><span class="sheet-d12"></span><div class="sheet-d12a" data-i18n="d12"></div></div>
	                            	</div>
	                            	+
	                            </div>
								<input class="sheet-otraitmod" type="number" name="attr_academicsmod" title="@{academicsmod}" value="0" />
	                            <input class='sheet-moremods' type='checkbox' name='attr_showAcademicsRollMod' /><span>y</span>
	    						<div class='sheet-basetrait sheet-traitmodplus'>
	                                <input type='text' class='sheet-ModDesc' name='attr_academicsModType' placeholder='Modifier due to edges, hindrances, etc' data-i18n-placeholder="att-mod-description" />
	    						    +<input class="sheet-otraitmod" type="number" name="attr_AcademicsskillMod" title="@{AcademicsskillMod}" value="0" />
	                                <hr class="sheet-modsection">
	                                <input class='sheet-whispercheck' type='checkbox' value='/w gm' name='attr_whisperacademics' /> <span class='sheet-ModDesc' data-i18n="whisper-roll-to-gm">Whisper roll to GM</span><br />
	                                <select name="attr_academicswilddie" title="@{academicswilddie}" class="sheet-traitdie">
	                                    <option value="4" data-i18n="d4">d4</option>
	                                    <option value="6" selected data-i18n="d6">d6</option>
	                                    <option value="8" data-i18n="d8">d8</option>
	                                    <option value="10" data-i18n="d10">d10</option>
	                                    <option value="12" data-i18n="d12">d12</option>
	                                </select>
	                                <span data-i18n='wild-die'>Wild Die</span><input type='text' class='sheet-wildDieDesc' name='attr_academicswilddieinfo' placeholder='Standard Wild Die die type' data-i18n-placeholder="no-modifying-edges" /><br />
	                                <input class='sheet-otraitmod' style='border-bottom: 1px solid black;' type='number' name='attr_academics_delta' title='@{academics_delta}' value='0' /><label class='sheet-delta' data-i18n='die-step-delta'>steps boosted/lowered from Base</label><input type='hidden' name='attr_academics_base' /><input type='hidden' name='attr_academicsmod_base' />
	    						</div>
	    						<input type='hidden' name='attr_academics_rank' value='1d4!' />
	    						<input type='hidden' name='attr_academics_display' value='d4' />
	    						<input type='hidden' name='attr_rolltAcademics' value='{{name=@{character_name} }} {{skill_rank=@{academics_display} }} {{skill_roll=[[@{academics_rank} + @{AcademicsskillMod}+ @{ModSum}[Distracted, Wounds, Fatigue] + @{traitmods}]]}} {{mook=[[1d0+@{wdNum}]]}} {{wild_die=[[ 1d@{academicswilddie}! + @{academicsmod} + @{AcademicsskillMod} + @{ModSum}[Distracted, Wounds, Fatigue] + @{traitmods}]]}} @{templateConditions} {{conviction=[[ [[@{conviction}]]d6! ]] }}' />
	    						<input type="checkbox" class="sheet-useSkillSpec" name="attr_altRuleSkillSpec" style="display: none;" />
	    						<div class='sheet-SkillSpec'>
	    						    <fieldset class="repeating_academicsspec">
	    						        <button class="sheet-skillbutton sheet-smallskillflexattbutton sheet-specbutton" type='roll' name='roll_tAcademicsSpecRoll' title="@{tAcademicsSpecRoll}" value='@{academicsSpecRollValue}'></button>
	    						        <input type="hidden" name="attr_academicsSpecRollValue" value="@{whisperacademics} &{template:roll} {{namelength=@{namelength}}} {{button=y}} {{ReRoll=^{reroll}(~repeating_academicsspec_tAcademicsSpecRoll)}} {{trait=@{academicsSpecName} }} @{rolltAcademics} @{unshakeTemplate}" />
	    						        <input class="sheet-speciality" type="text" name="attr_academicsSpecName" title="@{repeating_academicsSpec_$#_SpecName}" placeholder="Specialization" data-i18n-placeholder="specialization" />
	    						    </fieldset>
	    						</div>
	                        </div>
							<!-- Athletics Skill -->
	                        <input class="sheet-StaticSkill" type="checkbox" name="attr_staticAthletics" style='display:none;'/>
	                        <div class='sheet-basetrait sheet-staticAthletics' data-i18n-list-item="athletics">
	                            <input class='sheet-deltabutton' type='hidden' name='attr_athletics_delta' value='0' />
	                            <button class="sheet-skillbutton sheet-skillflexattbutton" type='roll' name='roll_tAthleticsRoll' title="@{tAthleticsRoll}" value='@{athleticsRollValue} {{skill_roll=[[ @{athleticsSkillRollFormula} ]]}} {{wild_die=[[ @{athleticsWildDieFormula} ]]}}'> <span name="attr_athleticsname"></span> <span class='sheet-linkedAtt' name="attr_linkedathleticsatt" data-i18n-dynamic></span></button>
								<input type="hidden" name="attr_athleticsRollValue" value="@{whisperathletics} &{template:roll} {{namelength=@{namelength}}} {{button=y}} {{ReRoll=^{reroll}(~tAthleticsRoll)}} {{trait=@{athleticsname}}} @{rolltAthletics} @{linkedathleticsattbutton} @{showtraitmods} @{unshakeTemplate}" />
								<div class="sheet-skillRankContainer">
	                            	<div class="sheet-skillRankChild">
                                        <input class="sheet-useAlphaNum" type="checkbox" name="attr_useAlphaNum" value="1" />
	                            		<label data-i18n-title="athletics-die-type-d4" class="sheet-skilldielabel"><input type="radio" name="attr_athletics" class="sheet-traitradio" value="4" checked><span class="sheet-d4"></span><div class="sheet-d4a" data-i18n="d4"></div></label>
										<label data-i18n-title="athletics-die-type-d6" class="sheet-skilldielabel"><input type="radio" name="attr_athletics" class="sheet-traitradio" value="6"><span class="sheet-d6"></span><div class="sheet-d6a" data-i18n="d6"></div></label>
										<label data-i18n-title="athletics-die-type-d8" class="sheet-skilldielabel"><input type="radio" name="attr_athletics" class="sheet-traitradio" value="8"><span class="sheet-d8"></span><div class="sheet-d8a" data-i18n="d8"></div></label>
										<label data-i18n-title="athletics-die-type-d10" class="sheet-skilldielabel"><input type="radio" name="attr_athletics" class="sheet-traitradio" value="10"><span class="sheet-d10"></span><div class="sheet-d10a" data-i18n="d10"></div></label>
										<label data-i18n-title="athletics-die-type-d12" class="sheet-skilldielabel"><input type="radio" name="attr_athletics" class="sheet-traitradio" value="12"><span class="sheet-d12"></span><div class="sheet-d12a" data-i18n="d12"></div></label>
										<input type="hidden" class="sheet-traitradio" name="attr_athletics" value="4" />
										<div class="sheet-d4Selected"><span class="sheet-d4"></span><div class="sheet-d4a" data-i18n="d4"></div></div>
		                            	<div class="sheet-d6Selected"><span class="sheet-d6"></span><div class="sheet-d6a" data-i18n="d6"></div></div>
		                            	<div class="sheet-d8Selected"><span class="sheet-d8"></span><div class="sheet-d8a" data-i18n="d8"></div></div>
		                            	<div class="sheet-d10Selected"><span class="sheet-d10"></span><div class="sheet-d10a" data-i18n="d10"></div></div>
		                            	<div class="sheet-d12Selected"><span class="sheet-d12"></span><div class="sheet-d12a" data-i18n="d12"></div></div>
	                            	</div>
	                            	+
	                            </div>
								<input class="sheet-otraitmod" type="number" name="attr_athleticsmod" title="@{AthleticsMod}" value="0" />
	                            <input class='sheet-moremods' type='checkbox' name='attr_showAthleticsRollMod' /><span>y</span>
	    						<div class='sheet-basetrait sheet-traitmodplus'>
	    						    <input type='text' class='sheet-ModDesc' name='attr_athleticsModType' placeholder='Modifier due to edges, hindrances, etc' data-i18n-placeholder="att-mod-description" />
	    						    +<input class="sheet-otraitmod" type="number" name="attr_AthleticsskillMod" title="@{AthleticsskillMod}" value="0" />
	    						    <span class="sheet-ModDesc" data-i18n="linked-attribute">Linked Attribute</span>
	    						    <select class="sheet-LinkedAttSelect" name="attr_linkedathleticsatt">
	    						        <option value="agl-u" data-i18n="agility" selected >Agility</option>
										<!-- <option value="sma-u" data-i18n="smarts">Smarts</option>
										<option value="spi-u" data-i18n="spirit">Spirit</option> -->
										<option value="str-u" data-i18n="strength">Strength</option>
										<!-- <option value="vig-u" data-i18n="vigor">Vigor</option> -->
	    						    </select>
	    						    <input type='hidden' name='attr_linkedathleticsattbutton' value="@{setmodsenc}" />
	    						    <input type='hidden' name='attr_linkedathleticsattformula' value="@{ModSumEnc}[Distracted, Wounds, Fatigue, Encumbrance]" />
	                                <hr class="sheet-modsection">
	                                <input class='sheet-whispercheck' type='checkbox' value='/w gm' name='attr_whisperathletics' /> <span class='sheet-ModDesc' data-i18n="whisper-roll-to-gm">Whisper roll to GM</span><br />
	                                <select name="attr_athleticswilddie" title="@{athleticswilddie}" class="sheet-traitdie">
	                                    <option value="4" data-i18n="d4">d4</option>
	                                    <option value="6" selected data-i18n="d6">d6</option>
	                                    <option value="8" data-i18n="d8">d8</option>
	                                    <option value="10" data-i18n="d10">d10</option>
	                                    <option value="12" data-i18n="d12">d12</option>
	                                </select>
	                                <span data-i18n='wild-die'>Wild Die</span><input type='text' class='sheet-wildDieDesc' name='attr_athleticswilddieinfo' placeholder='Standard Wild Die die type' data-i18n-placeholder="no-modifying-edges" /><br />
	                                <input class='sheet-otraitmod' style='border-bottom: 1px solid black;' type='number' name='attr_athletics_delta' title='@{athletics_delta}' value='0' /><label class='sheet-delta' data-i18n='die-step-delta'>steps boosted/lowered from Base</label><input type='hidden' name='attr_athletics_base' /><input type='hidden' name='attr_athleticsmod_base' />
	                            </div>
	    						<input type='hidden' name='attr_athletics_rank' value='1d4!' />
	    						<input type='hidden' name='attr_athletics_display' value='d4' />
                                <input type='hidden' name='attr_athleticsSkillRollFormula' value='@{athletics_rank} + @{AthleticsskillMod}+ @{linkedathleticsattformula} + @{traitmods}' />
                                <input type='hidden' name='attr_athleticsWildDieFormula' value='1d@{athleticswilddie}! + @{athleticsmod} + @{AthleticsskillMod} + @{linkedathleticsattformula} + @{traitmods}' />
	    						<input type='hidden' name='attr_rolltAthletics' value='{{name=@{character_name} }} {{skill_rank=@{athletics_display} }} {{mook=[[1d0+@{wdNum}]]}} @{templateConditions} {{conviction=[[ [[@{conviction}]]d6! ]] }}' />
								<input type="hidden" name="attr_athleticsrollformula" value="@{athletics_rank} + @{AthleticsskillMod}+ @{linkedathleticsattformula} + @{traitmods}" />
	    						<input type="checkbox" class="sheet-useSkillSpec" name="attr_altRuleSkillSpec" style="display: none;" />
	    						<div class='sheet-SkillSpec'>
	    						    <fieldset class="repeating_athleticsspec">
	    						        <button class="sheet-skillbutton sheet-smallskillflexattbutton sheet-specbutton" type='roll' name='roll_tAthleticsSpecRoll' title="@{tAthleticsSpecRoll}" value='@{athleticsSpecRollValue} {{skill_roll=[[ @{athleticsSkillRollFormula} ]]}} {{wild_die=[[ @{athleticsWildDieFormula} ]]}}'></button>
	    						        <input type="hidden" name="attr_athleticsSpecRollValue" value="@{whisperathletics} &{template:roll} {{namelength=@{namelength}}} {{button=y}} {{ReRoll=^{reroll}(~tAthleticsSpecRoll)}} {{trait=@{repeating_athleticsspec_athleticsSpecName} }} @{rolltAthletics} @{unshakeTemplate}" />
	    						        <input class="sheet-speciality" type="text" name="attr_athleticsSpecName" title="@{repeating_athleticsSpec_$#_SpecName}" placeholder="Specialization" data-i18n-placeholder="specialization" />
	    						    </fieldset>
	    						</div>
	                        </div>
							<!-- Battle -->
	                        <input class="sheet-StaticSkill" type="checkbox" name="attr_staticBattle" style='display:none;'/>
	                        <div class='sheet-basetrait sheet-staticBattle' data-i18n-list-item="battle">
	                            <input class='sheet-deltabutton' type='hidden' name='attr_battle_delta' value='0' />
	                            <button class="sheet-skillbutton sheet-skillflexattbutton" type='roll' name='roll_tBattleRoll' title="@{tBattleRoll}" value='@{battleRollValue}'> <span name="attr_battlename"></span> <span class='sheet-linkedAtt' data-i18n="sma-u">(SMA)</span></button>
	                            <input type="hidden" name="attr_battleRollValue" value="@{whisperbattle} &{template:roll} {{namelength=@{namelength}}} {{button=y}} {{ReRoll=^{reroll}(~tBattleRoll)}} {{trait=@{battlename}}} @{rolltBattle} @{setmods} @{showtraitmods} @{unshakeTemplate}" />
	                            <div class="sheet-skillRankContainer">
	                            	<div class="sheet-skillRankChild">
                                        <input class="sheet-useAlphaNum" type="checkbox" name="attr_useAlphaNum" value="1" />
	                            		<label data-i18n-title="battle-die-type-d4" class="sheet-skilldielabel"><input type="radio" name="attr_battle" class="sheet-traitradio" value="4" checked><span class="sheet-d4"></span><div class="sheet-d4a" data-i18n="d4"></div></label>
										<label data-i18n-title="battle-die-type-d6" class="sheet-skilldielabel"><input type="radio" name="attr_battle" class="sheet-traitradio" value="6"><span class="sheet-d6"></span><div class="sheet-d6a" data-i18n="d6"></div></label>
										<label data-i18n-title="battle-die-type-d8" class="sheet-skilldielabel"><input type="radio" name="attr_battle" class="sheet-traitradio" value="8"><span class="sheet-d8"></span><div class="sheet-d8a" data-i18n="d8"></div></label>
										<label data-i18n-title="battle-die-type-d10" class="sheet-skilldielabel"><input type="radio" name="attr_battle" class="sheet-traitradio" value="10"><span class="sheet-d10"></span><div class="sheet-d10a" data-i18n="d10"></div></label>
										<label data-i18n-title="battle-die-type-d12" class="sheet-skilldielabel"><input type="radio" name="attr_battle" class="sheet-traitradio" value="12"><span class="sheet-d12"></span><div class="sheet-d12a" data-i18n="d12"></div></label>
										<input type="hidden" class="sheet-traitradio" name="attr_battle" value="4" />
										<div class="sheet-d4Selected"><span class="sheet-d4"></span><div class="sheet-d4a" data-i18n="d4"></div></div>
		                            	<div class="sheet-d6Selected"><span class="sheet-d6"></span><div class="sheet-d6a" data-i18n="d6"></div></div>
		                            	<div class="sheet-d8Selected"><span class="sheet-d8"></span><div class="sheet-d8a" data-i18n="d8"></div></div>
		                            	<div class="sheet-d10Selected"><span class="sheet-d10"></span><div class="sheet-d10a" data-i18n="d10"></div></div>
		                            	<div class="sheet-d12Selected"><span class="sheet-d12"></span><div class="sheet-d12a" data-i18n="d12"></div></div>
	                            	</div>
	                            	+
	                            </div>
								<input class="sheet-otraitmod" type="number" name="attr_battlemod" title="@{BattleMod}" value="0" />
	                            <input class='sheet-moremods' type='checkbox' name='attr_showBattleRollMod' /><span>y</span>
	    						<div class='sheet-basetrait sheet-traitmodplus'>
	                                <input type='text' class='sheet-ModDesc' name='attr_battleModType' placeholder='Modifier due to edges, hindrances, etc' data-i18n-placeholder="att-mod-description" />
	    						    +<input class="sheet-otraitmod" type="number" name="attr_BattleskillMod" title="@{BattleskillMod}" value="0" />
	                                <hr class="sheet-modsection">
	                                <input class='sheet-whispercheck' type='checkbox' value='/w gm' name='attr_whisperbattle' /> <span class='sheet-ModDesc' data-i18n="whisper-roll-to-gm">Whisper roll to GM</span><br />
	                                <select name="attr_battlewilddie" title="@{battlewilddie}" class="sheet-traitdie">
	                                    <option value="4" data-i18n="d4">d4</option>
	                                    <option value="6" selected data-i18n="d6">d6</option>
	                                    <option value="8" data-i18n="d8">d8</option>
	                                    <option value="10" data-i18n="d10">d10</option>
	                                    <option value="12" data-i18n="d12">d12</option>
	                                </select>
	                                <span data-i18n='wild-die'>Wild Die</span><input type='text' class='sheet-wildDieDesc' name='attr_battlewilddieinfo' placeholder='Standard Wild Die die type' data-i18n-placeholder="no-modifying-edges" /><br />
	                                <input class='sheet-otraitmod' style='border-bottom: 1px solid black;' type='number' name='attr_battle_delta' title='@{battle_delta}' value='0' /><label class='sheet-delta' data-i18n='die-step-delta'>steps boosted/lowered from base</label><input type='hidden' name='attr_battle_base' /><input type='hidden' name='attr_battlemod_base' />
	    						</div>
	    						<input type='hidden' name='attr_battle_rank' value='1d4!' />
	    						<input type='hidden' name='attr_battle_display' value='d4' />
	    						<input type='hidden' name='attr_rolltBattle' value='{{name=@{character_name} }} {{skill_rank=@{battle_display} }} {{skill_roll=[[@{battle_rank} + @{BattleskillMod}+ @{ModSum}[Distracted, Wounds, Fatigue] + @{traitmods}]]}} {{mook=[[1d0+@{wdNum}]]}} {{wild_die=[[ 1d@{battlewilddie}! + @{battlemod} + @{BattleskillMod} + @{ModSum}[Distracted, Wounds, Fatigue] + @{traitmods}]]}} @{templateConditions} {{conviction=[[ [[@{conviction}]]d6! ]] }}' />
	    						<input type="checkbox" class="sheet-useSkillSpec" name="attr_altRuleSkillSpec" style="display: none;" />
	    						<div class='sheet-SkillSpec'>
	    						    <fieldset class="repeating_battlespec">
	    						        <button class="sheet-skillbutton sheet-smallskillflexattbutton sheet-specbutton" type='roll' name='roll_tBattleSpecRoll' title="@{tBattleSpecRoll}" value='@{battleSpecRollValue}'></button>
	    						        <input type="hidden" name="attr_battleSpecRollValue" value="@{whisperbattle} &{template:roll} {{namelength=@{namelength}}} {{button=y}} {{ReRoll=^{reroll}(~repeating_battlespec_tBattleSpecRoll)}} {{trait=@{battleSpecName} }} @{rolltBattle} @{unshakeTemplate}" />
	    						        <input class="sheet-speciality" type="text" name="attr_battleSpecName" title="@{repeating_battleSpec_$#_SpecName}" placeholder="Specialization" data-i18n-placeholder="specialization" />
	    						    </fieldset>
	    						</div>
	                        </div>
	                        <!-- Boating -->
	                        <input class="sheet-StaticSkill" type="checkbox" name="attr_staticBoating" style='display:none;'/>
	                        <div class='sheet-basetrait sheet-staticBoating' data-i18n-list-item="boating">
	                            <input class='sheet-deltabutton' type='hidden' name='attr_boating_delta' value='0' />
	                            <button class="sheet-skillbutton sheet-skillflexattbutton" type='roll' name='roll_tBoatingRoll' title="@{tBoatingRoll}" value='@{boatingRollValue}'> <span name="attr_boatingname"></span> <span class='sheet-linkedAtt' data-i18n="agl-u">(AGL)</span></button>
	                            <input type="hidden" name="attr_boatingRollValue" value="@{whisperboating} &{template:roll} {{namelength=@{namelength}}} {{button=y}} {{ReRoll=^{reroll}(~tBoatingRoll)}} {{trait=@{boatingname}}} @{rolltBoating} @{setmodsenc} @{showtraitmods} @{unshakeTemplate}" />
	                            <div class="sheet-skillRankContainer">
	                            	<div class="sheet-skillRankChild">
                                        <input class="sheet-useAlphaNum" type="checkbox" name="attr_useAlphaNum" value="1" />
	                            		<label data-i18n-title="boating-die-type-d4" class="sheet-skilldielabel"><input type="radio" name="attr_boating" class="sheet-traitradio" value="4" checked><span class="sheet-d4"></span><div class="sheet-d4a" data-i18n="d4"></div></label>
										<label data-i18n-title="boating-die-type-d6" class="sheet-skilldielabel"><input type="radio" name="attr_boating" class="sheet-traitradio" value="6"><span class="sheet-d6"></span><div class="sheet-d6a" data-i18n="d6"></div></label>
										<label data-i18n-title="boating-die-type-d8" class="sheet-skilldielabel"><input type="radio" name="attr_boating" class="sheet-traitradio" value="8"><span class="sheet-d8"></span><div class="sheet-d8a" data-i18n="d8"></div></label>
										<label data-i18n-title="boating-die-type-d10" class="sheet-skilldielabel"><input type="radio" name="attr_boating" class="sheet-traitradio" value="10"><span class="sheet-d10"></span><div class="sheet-d10a" data-i18n="d10"></div></label>
										<label data-i18n-title="boating-die-type-d12" class="sheet-skilldielabel"><input type="radio" name="attr_boating" class="sheet-traitradio" value="12"><span class="sheet-d12"></span><div class="sheet-d12a" data-i18n="d12"></div></label>
										<input type="hidden" class="sheet-traitradio" name="attr_boating" value="4" />
										<div class="sheet-d4Selected"><span class="sheet-d4"></span><div class="sheet-d4a" data-i18n="d4"></div></div>
		                            	<div class="sheet-d6Selected"><span class="sheet-d6"></span><div class="sheet-d6a" data-i18n="d6"></div></div>
		                            	<div class="sheet-d8Selected"><span class="sheet-d8"></span><div class="sheet-d8a" data-i18n="d8"></div></div>
		                            	<div class="sheet-d10Selected"><span class="sheet-d10"></span><div class="sheet-d10a" data-i18n="d10"></div></div>
		                            	<div class="sheet-d12Selected"><span class="sheet-d12"></span><div class="sheet-d12a" data-i18n="d12"></div></div>
	                            	</div>
	                            	+
	                            </div>
								<input class="sheet-otraitmod" type="number" name="attr_boatingmod" title="@{boatingmod}" value="0" />
	                            <input class='sheet-moremods' type='checkbox' name='attr_showBoatingRollMod' /><span>y</span>
	    						<div class='sheet-basetrait sheet-traitmodplus'>
	                                <input type='text' class='sheet-ModDesc' name='attr_boatingModType' placeholder='Modifier due to edges, hindrances, etc' data-i18n-placeholder="att-mod-description" />
	    						    +<input class="sheet-otraitmod" type="number" name="attr_BoatingskillMod" title="@{BoatingskillMod}" value="0" />
	                                <hr class="sheet-modsection">
	                                <input class='sheet-whispercheck' type='checkbox' value='/w gm' name='attr_whisperboating' /> <span class='sheet-ModDesc' data-i18n="whisper-roll-to-gm">Whisper roll to GM</span><br />
	                                <select name="attr_boatingwilddie" title="@{boatingwilddie}" class="sheet-traitdie">
	                                    <option value="4" data-i18n="d4">d4</option>
	                                    <option value="6" selected data-i18n="d6">d6</option>
	                                    <option value="8" data-i18n="d8">d8</option>
	                                    <option value="10" data-i18n="d10">d10</option>
	                                    <option value="12" data-i18n="d12">d12</option>
	                                </select>
	                                <span data-i18n='wild-die'>Wild Die</span><input type='text' class='sheet-wildDieDesc' name='attr_boatingwilddieinfo' placeholder='Standard Wild Die die type' data-i18n-placeholder="no-modifying-edges" /><br />
	                                <input class='sheet-otraitmod' style='border-bottom: 1px solid black;' type='number' name='attr_boating_delta' title='@{boating_delta}' value='0' /><label class='sheet-delta' data-i18n='die-step-delta'>steps boosted/lowered from base</label><input type='hidden' name='attr_boating_base' /><input type='hidden' name='attr_boatingmod_base' />
	    						</div>
	    						<input type='hidden' name='attr_boating_rank' value='1d4!' />
	    						<input type='hidden' name='attr_boating_display' value='d4' />
	    						<input type='hidden' name='attr_rolltBoating' value='{{name=@{character_name} }} {{skill_rank=@{boating_display} }} {{skill_roll=[[@{boating_rank} + @{BoatingskillMod}+ @{ModSumEnc}[Distracted, Wounds, Fatigue, Encumbrance] + @{traitmods}]]}} {{mook=[[1d0+@{wdNum}]]}} {{wild_die=[[ 1d@{boatingwilddie}! + @{boatingmod} + @{BoatingskillMod} + @{ModSumEnc}[Distracted, Wounds, Fatigue, Encumbrance] + @{traitmods}]]}} @{templateConditions} {{conviction=[[ [[@{conviction}]]d6! ]] }}' />
	    						<input type="checkbox" class="sheet-useSkillSpec" name="attr_altRuleSkillSpec" style="display: none;" />
	    						<div class='sheet-SkillSpec'>
	    						    <fieldset class="repeating_boatingspec">
	    						        <button class="sheet-skillbutton sheet-smallskillflexattbutton sheet-specbutton" type='roll' name='roll_tBoatingSpecRoll' title="@{tBoatingSpecRoll}" value='@{boatingSpecRollValue}'></button>
	    						        <input type="hidden" name="attr_boatingSpecRollValue" value="@{whisperboating} &{template:roll} {{namelength=@{namelength}}} {{button=y}} {{ReRoll=^{reroll}(~repeating_boatingspec_tBoatingSpecRoll)}} {{trait=@{boatingSpecName} }} @{rolltBoating} @{unshakeTemplate}" />
	    						        <input class="sheet-speciality" type="text" name="attr_boatingSpecName" title="@{repeating_boatingSpec_$#_SpecName}" placeholder="Specialization" data-i18n-placeholder="specialization" />
	    						    </fieldset>
	    						</div>
	                        </div>
							<!-- Common Knowledge | CommonKnowledge -->
	                        <input class="sheet-StaticSkill" type="checkbox" name="attr_staticCommonKnowledge" style='display:none;'/>
	                        <div class='sheet-basetrait sheet-staticCommonKnowledge' data-i18n-list-item="common-knowledge">
	                            <input class='sheet-deltabutton' type='hidden' name='attr_commonknowledge_delta' value='0' />
	                            <button class="sheet-skillbutton sheet-skillflexattbutton" type='roll' name='roll_tCommonKnowledgeRoll' title="@{tCommonKnowledgeRoll}" value='@{commonknowledgeRollValue}'> <span name="attr_commonknowledgename"></span> <span class='sheet-linkedAtt' data-i18n="sma-u">(SMA)</span></button>
	                            <input type="hidden" name="attr_commonknowledgeRollValue" value="@{whispercommonknowledge} &{template:roll} {{namelength=@{namelength}}} {{button=y}} {{ReRoll=^{reroll}(~tCommonKnowledgeRoll)}} {{trait=@{commonknowledgename}}} @{rolltCommonKnowledge} @{setmods} @{showtraitmods} @{unshakeTemplate}" />
	                            <div class="sheet-skillRankContainer">
	                            	<div class="sheet-skillRankChild">
                                        <input class="sheet-useAlphaNum" type="checkbox" name="attr_useAlphaNum" value="1" />
	                            		<label data-i18n-title="commonknowledge-die-type-d4" class="sheet-skilldielabel"><input type="radio" name="attr_commonknowledge" class="sheet-traitradio" value="4" checked><span class="sheet-d4"></span><div class="sheet-d4a" data-i18n="d4"></div></label>
										<label data-i18n-title="commonknowledge-die-type-d6" class="sheet-skilldielabel"><input type="radio" name="attr_commonknowledge" class="sheet-traitradio" value="6"><span class="sheet-d6"></span><div class="sheet-d6a" data-i18n="d6"></div></label>
										<label data-i18n-title="commonknowledge-die-type-d8" class="sheet-skilldielabel"><input type="radio" name="attr_commonknowledge" class="sheet-traitradio" value="8"><span class="sheet-d8"></span><div class="sheet-d8a" data-i18n="d8"></div></label>
										<label data-i18n-title="commonknowledge-die-type-d10" class="sheet-skilldielabel"><input type="radio" name="attr_commonknowledge" class="sheet-traitradio" value="10"><span class="sheet-d10"></span><div class="sheet-d10a" data-i18n="d10"></div></label>
										<label data-i18n-title="commonknowledge-die-type-d12" class="sheet-skilldielabel"><input type="radio" name="attr_commonknowledge" class="sheet-traitradio" value="12"><span class="sheet-d12"></span><div class="sheet-d12a" data-i18n="d12"></div></label>
										<input type="hidden" class="sheet-traitradio" name="attr_commonknowledge" value="4" />
										<div class="sheet-d4Selected"><span class="sheet-d4"></span><div class="sheet-d4a" data-i18n="d4"></div></div>
		                            	<div class="sheet-d6Selected"><span class="sheet-d6"></span><div class="sheet-d6a" data-i18n="d6"></div></div>
		                            	<div class="sheet-d8Selected"><span class="sheet-d8"></span><div class="sheet-d8a" data-i18n="d8"></div></div>
		                            	<div class="sheet-d10Selected"><span class="sheet-d10"></span><div class="sheet-d10a" data-i18n="d10"></div></div>
		                            	<div class="sheet-d12Selected"><span class="sheet-d12"></span><div class="sheet-d12a" data-i18n="d12"></div></div>
	                            	</div>
	                            	+
	                            </div>
								<input class="sheet-otraitmod" type="number" name="attr_commonknowledgemod" title="@{commonknowledgemod}" value="0" />
	                            <input class='sheet-moremods' type='checkbox' name='attr_showCommonKnowledgeRollMod' /><span>y</span>
	    						<div class='sheet-basetrait sheet-traitmodplus'>
	                                <input type='text' class='sheet-ModDesc' name='attr_commonknowledgeModType' placeholder='Modifier due to edges, hindrances, etc' data-i18n-placeholder="att-mod-description" />
	    						    +<input class="sheet-otraitmod" type="number" name="attr_CommonKnowledgeskillMod" title="@{CommonKnowledgeskillMod}" value="0" />
	                                <hr class="sheet-modsection">
	                                <input class='sheet-whispercheck' type='checkbox' value='/w gm' name='attr_whispercommonknowledge' /> <span class='sheet-ModDesc' data-i18n="whisper-roll-to-gm">Whisper roll to GM</span><br />
	                                <select name="attr_commonknowledgewilddie" title="@{commonknowledgewilddie}" class="sheet-traitdie">
	                                    <option value="4" data-i18n="d4">d4</option>
	                                    <option value="6" selected data-i18n="d6">d6</option>
	                                    <option value="8" data-i18n="d8">d8</option>
	                                    <option value="10" data-i18n="d10">d10</option>
	                                    <option value="12" data-i18n="d12">d12</option>
	                                </select>
	                                <span data-i18n='wild-die'>Wild Die</span><input type='text' class='sheet-wildDieDesc' name='attr_commonknowledgewilddieinfo' placeholder='Standard Wild Die die type' data-i18n-placeholder="no-modifying-edges" /><br />
	                                <input class='sheet-otraitmod' style='border-bottom: 1px solid black;' type='number' name='attr_commonknowledge_delta' title='@{commonknowledge_delta}' value='0' /><label class='sheet-delta' data-i18n='die-step-delta'>steps boosted/lowered from base</label><input type='hidden' name='attr_commonknowledge_base' /><input type='hidden' name='attr_commonknowledgemod_base' />
	    						</div>
	    						<input type='hidden' name='attr_commonknowledge_rank' value='1d4!' />
	    						<input type='hidden' name='attr_commonknowledge_display' value='d4' />
	    						<input type='hidden' name='attr_rolltCommonKnowledge' value='{{name=@{character_name} }} {{skill_rank=@{commonknowledge_display} }} {{skill_roll=[[@{commonknowledge_rank} + @{CommonKnowledgeskillMod}+ @{ModSum}[Distracted, Wounds, Fatigue] + @{traitmods}]]}} {{mook=[[1d0+@{wdNum}]]}} {{wild_die=[[ 1d@{commonknowledgewilddie}! + @{commonknowledgemod} + @{CommonKnowledgeskillMod} + @{ModSum}[Distracted, Wounds, Fatigue] + @{traitmods}]]}} @{templateConditions} {{conviction=[[ [[@{conviction}]]d6! ]] }}' />
	    						<input type="checkbox" class="sheet-useSkillSpec" name="attr_altRuleSkillSpec" style="display: none;" />
	    						<div class='sheet-SkillSpec'>
	    						    <fieldset class="repeating_commonknowledgespec">
	    						        <button class="sheet-skillbutton sheet-smallskillflexattbutton sheet-specbutton" type='roll' name='roll_tCommonKnowledgeSpecRoll' title="@{tCommonKnowledgeSpecRoll}" value='@{commonknowledgeSpecRollValue}'></button>
	    						        <input type="hidden" name="attr_commonknowledgeSpecRollValue" value="@{whispercommonknowledge} &{template:roll} {{namelength=@{namelength}}} {{button=y}} {{ReRoll=^{reroll}(~repeating_commonknowledgespec_tCommonKnowledgeSpecRoll)}} {{trait=@{commonknowledgeSpecName} }} @{rolltCommonKnowledge} @{unshakeTemplate}" />
	    						        <input class="sheet-speciality" type="text" name="attr_commonknowledgeSpecName" title="@{repeating_commonknowledgeSpec_$#_SpecName}" placeholder="Specialization" data-i18n-placeholder="specialization" />
	    						    </fieldset>
	    						</div>
	                        </div>
	                        <!-- Driving Skill -->
	                        <input class="sheet-StaticSkill" type="checkbox" name="attr_staticDriving" style='display:none;'/>
	                        <div class='sheet-basetrait sheet-staticDriving' data-i18n-list-item="driving">
	                            <input class='sheet-deltabutton' type='hidden' name='attr_driving_delta' value='0' />
	                            <button class="sheet-skillbutton sheet-skillflexattbutton" type='roll' name='roll_tDrivingRoll' title="@{tDrivingRoll}" value='@{drivingRollValue}'> <span name="attr_drivingname"></span> <span class='sheet-linkedAtt' data-i18n="agl-u">(AGL)</span></button>
	                            <input type="hidden" name="attr_drivingRollValue" value="@{whisperdriving} &{template:roll} {{namelength=@{namelength}}} {{button=y}} {{ReRoll=^{reroll}(~tDrivingRoll)}} {{trait=@{drivingname}}} @{rolltDriving} @{setmodsenc} @{showtraitmods} @{unshakeTemplate}" />
	                            <div class="sheet-skillRankContainer">
	                            	<div class="sheet-skillRankChild">
                                        <input class="sheet-useAlphaNum" type="checkbox" name="attr_useAlphaNum" value="1" />
	                            		<label data-i18n-title="driving-die-type-d4" class="sheet-skilldielabel"><input type="radio" name="attr_driving" class="sheet-traitradio" value="4" checked><span class="sheet-d4"></span><div class="sheet-d4a" data-i18n="d4"></div></label>
										<label data-i18n-title="driving-die-type-d6" class="sheet-skilldielabel"><input type="radio" name="attr_driving" class="sheet-traitradio" value="6"><span class="sheet-d6"></span><div class="sheet-d6a" data-i18n="d6"></div></label>
										<label data-i18n-title="driving-die-type-d8" class="sheet-skilldielabel"><input type="radio" name="attr_driving" class="sheet-traitradio" value="8"><span class="sheet-d8"></span><div class="sheet-d8a" data-i18n="d8"></div></label>
										<label data-i18n-title="driving-die-type-d10" class="sheet-skilldielabel"><input type="radio" name="attr_driving" class="sheet-traitradio" value="10"><span class="sheet-d10"></span><div class="sheet-d10a" data-i18n="d10"></div></label>
										<label data-i18n-title="driving-die-type-d12" class="sheet-skilldielabel"><input type="radio" name="attr_driving" class="sheet-traitradio" value="12"><span class="sheet-d12"></span><div class="sheet-d12a" data-i18n="d12"></div></label>
										<input type="hidden" class="sheet-traitradio" name="attr_driving" value="4" />
										<div class="sheet-d4Selected"><span class="sheet-d4"></span><div class="sheet-d4a" data-i18n="d4"></div></div>
		                            	<div class="sheet-d6Selected"><span class="sheet-d6"></span><div class="sheet-d6a" data-i18n="d6"></div></div>
		                            	<div class="sheet-d8Selected"><span class="sheet-d8"></span><div class="sheet-d8a" data-i18n="d8"></div></div>
		                            	<div class="sheet-d10Selected"><span class="sheet-d10"></span><div class="sheet-d10a" data-i18n="d10"></div></div>
		                            	<div class="sheet-d12Selected"><span class="sheet-d12"></span><div class="sheet-d12a" data-i18n="d12"></div></div>
	                            	</div>
	                            	+
	                            </div>
								<input class="sheet-otraitmod" type="number" name="attr_drivingmod" title="@{DrivingMod}" value="0" />
	                            <input class='sheet-moremods' type='checkbox' name='attr_showDrivingRollMod' /><span>y</span>
	    						<div class='sheet-basetrait sheet-traitmodplus'>
	                                <input type='text' class='sheet-ModDesc' name='attr_drivingModType' placeholder='Modifier due to edges, hindrances, etc' data-i18n-placeholder="att-mod-description" />
	    						    +<input class="sheet-otraitmod" type="number" name="attr_DrivingskillMod" title="@{DrivingskillMod}" value="0" />
	                                <hr class="sheet-modsection">
	                                <input class='sheet-whispercheck' type='checkbox' value='/w gm' name='attr_whisperdriving' /> <span class='sheet-ModDesc' data-i18n="whisper-roll-to-gm">Whisper roll to GM</span><br />
	                                <select name="attr_drivingwilddie" title="@{drivingwilddie}" class="sheet-traitdie">
	                                    <option value="4" data-i18n="d4">d4</option>
	                                    <option value="6" selected data-i18n="d6">d6</option>
	                                    <option value="8" data-i18n="d8">d8</option>
	                                    <option value="10" data-i18n="d10">d10</option>
	                                    <option value="12" data-i18n="d12">d12</option>
	                                </select>
	                                <span data-i18n='wild-die'>Wild Die</span><input type='text' class='sheet-wildDieDesc' name='attr_drivingwilddieinfo' placeholder='Standard Wild Die die type' data-i18n-placeholder="no-modifying-edges" /><br />
	                                <input class='sheet-otraitmod' style='border-bottom: 1px solid black;' type='number' name='attr_driving_delta' title='@{driving_delta}' value='0' /><label class='sheet-delta' data-i18n='die-step-delta'>steps boossted/lowered from base</label><input type='hidden' name='attr_driving_base' /><input type='hidden' name='attr_drivingmod_base' />
	    						</div>
	    						<input type='hidden' name='attr_driving_rank' value='1d4!' />
	    						<input type='hidden' name='attr_driving_display' value='d4' />
	    						<input type='hidden' name='attr_rolltDriving' value='{{name=@{character_name} }} {{skill_rank=@{driving_display} }} {{skill_roll=[[@{driving_rank} + @{DrivingskillMod}+ @{ModSumEnc}[Distracted, Wounds, Fatigue, Encumbrance] + @{traitmods}]]}} {{mook=[[1d0+@{wdNum}]]}} {{wild_die=[[ 1d@{drivingwilddie}! + @{drivingmod} + @{DrivingskillMod} + @{ModSumEnc}[Distracted, Wounds, Fatigue, Encumbrance] + @{traitmods}]]}} @{templateConditions} {{conviction=[[ [[@{conviction}]]d6! ]] }}' />
	    						<input type="checkbox" class="sheet-useSkillSpec" name="attr_altRuleSkillSpec" style="display: none;" />
	    						<div class='sheet-SkillSpec'>
	    						    <fieldset class="repeating_drivingspec">
	    						        <button class="sheet-skillbutton sheet-smallskillflexattbutton sheet-specbutton" type='roll' name='roll_tDrivingSpecRoll' title="@{tDrivingSpecRoll}" value='@{drivingSpecRollValue}'></button>
	    						        <input type="hidden" name="attr_drivingSpecRollValue" value="@{whisperdriving} &{template:roll} {{namelength=@{namelength}}} {{button=y}} {{ReRoll=^{reroll}(~repeating_drivingspec_tDrivingSpecRoll)}} {{trait=@{drivingSpecName} }} @{rolltDriving} @{unshakeTemplate}" />
	    						        <input class="sheet-speciality" type="text" name="attr_drivingSpecName" title="@{repeating_drivingSpec_$#_SpecName}" placeholder="Specialization" data-i18n-placeholder="specialization" />
	    						    </fieldset>
	    						</div>
	                        </div>
							<!-- Electronics -->
	                        <input class="sheet-StaticSkill" type="checkbox" name="attr_staticElectronics" style='display:none;'/>
	                        <div class='sheet-basetrait sheet-staticElectronics' data-i18n-list-item="electronics">
	                            <input class='sheet-deltabutton' type='hidden' name='attr_electronics_delta' value='0' />
	                            <button class="sheet-skillbutton sheet-skillflexattbutton" type='roll' name='roll_tElectronicsRoll' title="@{tElectronicsRoll}" value='@{electronicsRollValue}'> <span name="attr_electronicsname"></span> <span class='sheet-linkedAtt' data-i18n="sma-u">(SMA)></span></button>
	                            <input type="hidden" name="attr_electronicsRollValue" value="@{whisperelectronics} &{template:roll} {{namelength=@{namelength}}} {{button=y}} {{ReRoll=^{reroll}(~tElectronicsRoll)}} {{trait=@{electronicsname}}} @{rolltElectronics} @{setmods} @{showtraitmods} @{unshakeTemplate}" />
	                            <div class="sheet-skillRankContainer">
	                            	<div class="sheet-skillRankChild">
                                        <input class="sheet-useAlphaNum" type="checkbox" name="attr_useAlphaNum" value="1" />
	                            		<label data-i18n-title="electronics-die-type-d4" class="sheet-skilldielabel"><input type="radio" name="attr_electronics" class="sheet-traitradio" value="4" checked><span class="sheet-d4"></span><div class="sheet-d4a" data-i18n="d4"></div></label>
										<label data-i18n-title="electronics-die-type-d6" class="sheet-skilldielabel"><input type="radio" name="attr_electronics" class="sheet-traitradio" value="6"><span class="sheet-d6"></span><div class="sheet-d6a" data-i18n="d6"></div></label>
										<label data-i18n-title="electronics-die-type-d8" class="sheet-skilldielabel"><input type="radio" name="attr_electronics" class="sheet-traitradio" value="8"><span class="sheet-d8"></span><div class="sheet-d8a" data-i18n="d8"></div></label>
										<label data-i18n-title="electronics-die-type-d10" class="sheet-skilldielabel"><input type="radio" name="attr_electronics" class="sheet-traitradio" value="10"><span class="sheet-d10"></span><div class="sheet-d10a" data-i18n="d10"></div></label>
										<label data-i18n-title="electronics-die-type-d12" class="sheet-skilldielabel"><input type="radio" name="attr_electronics" class="sheet-traitradio" value="12"><span class="sheet-d12"></span><div class="sheet-d12a" data-i18n="d12"></div></label>
										<input type="hidden" class="sheet-traitradio" name="attr_electronics" value="4" />
										<div class="sheet-d4Selected"><span class="sheet-d4"></span><div class="sheet-d4a" data-i18n="d4"></div></div>
		                            	<div class="sheet-d6Selected"><span class="sheet-d6"></span><div class="sheet-d6a" data-i18n="d6"></div></div>
		                            	<div class="sheet-d8Selected"><span class="sheet-d8"></span><div class="sheet-d8a" data-i18n="d8"></div></div>
		                            	<div class="sheet-d10Selected"><span class="sheet-d10"></span><div class="sheet-d10a" data-i18n="d10"></div></div>
		                            	<div class="sheet-d12Selected"><span class="sheet-d12"></span><div class="sheet-d12a" data-i18n="d12"></div></div>
	                            	</div>
	                            	+
	                            </div>
								<input class="sheet-otraitmod" type="number" name="attr_electronicsmod" title="@{ElectronicsMod}" value="0" />
	                            <input class='sheet-moremods' type='checkbox' name='attr_showElectronicsRollMod' /><span>y</span>
	    						<div class='sheet-basetrait sheet-traitmodplus'>
	                                <input type='text' class='sheet-ModDesc' name='attr_electronicsModType' placeholder='Modifier due to edges, hindrances, etc' data-i18n-placeholder="att-mod-description" />
	    						    +<input class="sheet-otraitmod" type="number" name="attr_ElectronicsskillMod" title="@{ElectronicsskillMod}" value="0" />
	                                <hr class="sheet-modsection">
	                                <input class='sheet-whispercheck' type='checkbox' value='/w gm' name='attr_whisperelectronics' /> <span class='sheet-ModDesc' data-i18n="whisper-roll-to-gm">Whisper roll to GM</span><br />
	                                <select name="attr_electronicswilddie" title="@{electronicswilddie}" class="sheet-traitdie">
	                                    <option value="4" data-i18n="d4">d4</option>
	                                    <option value="6" selected data-i18n="d6">d6</option>
	                                    <option value="8" data-i18n="d8">d8</option>
	                                    <option value="10" data-i18n="d10">d10</option>
	                                    <option value="12" data-i18n="d12">d12</option>
	                                </select>
	                                <span data-i18n='wild-die'>Wild Die</span><input type='text' class='sheet-wildDieDesc' name='attr_electronicswilddieinfo' placeholder='Standard Wild Die die type' data-i18n-placeholder="no-modifying-edges" /><br />
	                                <input class='sheet-otraitmod' style='border-bottom: 1px solid black;' type='number' name='attr_electronics_delta' title='@{electronics_delta}' value='0' /><label class='sheet-delta' data-i18n='die-step-delta'>steps boosted/lowered from base</label><input type='hidden' name='attr_electronics_base' /><input type='hidden' name='attr_electronicsmod_base' />
	    						</div>
	    						<input type='hidden' name='attr_electronics_rank' value='1d4!' />
	    						<input type='hidden' name='attr_electronics_display' value='d4' />
	    						<input type='hidden' name='attr_rolltElectronics' value='{{name=@{character_name} }} {{skill_rank=@{electronics_display} }} {{skill_roll=[[@{electronics_rank} + @{ElectronicsskillMod}+ @{ModSum}[Distracted, Wounds, Fatigue] + @{traitmods}]]}} {{mook=[[1d0+@{wdNum}]]}} {{wild_die=[[ 1d@{electronicswilddie}! + @{electronicsmod} + @{ElectronicsskillMod} + @{ModSum}[Distracted, Wounds, Fatigue] + @{traitmods}]]}} @{templateConditions} {{conviction=[[ [[@{conviction}]]d6! ]] }}' />
	    						<input type="checkbox" class="sheet-useSkillSpec" name="attr_altRuleSkillSpec" style="display: none;" />
	    						<div class='sheet-SkillSpec'>
	    						    <fieldset class="repeating_electronicsspec">
	    						        <button class="sheet-skillbutton sheet-smallskillflexattbutton sheet-specbutton" type='roll' name='roll_tElectronicsSpecRoll' title="@{tElectronicsSpecRoll}" value='@{electronicsSpecRollValue}'></button>
	    						        <input type="hidden" name="attr_electronicsSpecRollValue" value="@{whisperelectronics} &{template:roll} {{namelength=@{namelength}}} {{button=y}} {{ReRoll=^{reroll}(~repeating_electronicsspec_tElectronicsSpecRoll)}} {{trait=@{electronicsSpecName} }} @{rolltElectronics} @{unshakeTemplate}" />
	    						        <input class="sheet-speciality" type="text" name="attr_electronicsSpecName" title="@{repeating_electronicsSpec_$#_SpecName}" placeholder="Specialization" data-i18n-placeholder="specialization" />
	    						    </fieldset>
	    						</div>
	                        </div>
	                        <!-- Faith Skill -->
	                        <input class="sheet-StaticSkill" type="checkbox" name="attr_staticFaith" style='display:none;'/>
	                        <div class='sheet-basetrait sheet-staticFaith' data-i18n-list-item="faith">
	                            <input class='sheet-deltabutton' type='hidden' name='attr_faith_delta' value='0' />
	                            <button class="sheet-skillbutton sheet-skillflexattbutton" type='roll' name='roll_tFaithRoll' title="@{tFaithRoll}" value='@{faithRollValue}'> <span name="attr_faithname"></span> <span class='sheet-linkedAtt' data-i18n="spi-u">(SPI)</span></button>
	                            <input type="hidden" name="attr_faithRollValue" value="@{whisperfaith} &{template:roll} {{namelength=@{namelength}}} {{button=y}} {{ReRoll=^{reroll}(~tFaithRoll)}} {{trait=@{faithname}}} @{rolltFaith} @{setmods} @{showtraitmods} @{unshakeTemplate}" />
	                            <div class="sheet-skillRankContainer">
	                            	<div class="sheet-skillRankChild">
                                        <input class="sheet-useAlphaNum" type="checkbox" name="attr_useAlphaNum" value="1" />
	                            		<label data-i18n-title="faith-die-type-d4" class="sheet-skilldielabel"><input type="radio" name="attr_faith" class="sheet-traitradio" value="4" checked><span class="sheet-d4"></span><div class="sheet-d4a" data-i18n="d4"></div></label>
										<label data-i18n-title="faith-die-type-d6" class="sheet-skilldielabel"><input type="radio" name="attr_faith" class="sheet-traitradio" value="6"><span class="sheet-d6"></span><div class="sheet-d6a" data-i18n="d6"></div></label>
										<label data-i18n-title="faith-die-type-d8" class="sheet-skilldielabel"><input type="radio" name="attr_faith" class="sheet-traitradio" value="8"><span class="sheet-d8"></span><div class="sheet-d8a" data-i18n="d8"></div></label>
										<label data-i18n-title="faith-die-type-d10" class="sheet-skilldielabel"><input type="radio" name="attr_faith" class="sheet-traitradio" value="10"><span class="sheet-d10"></span><div class="sheet-d10a" data-i18n="d10"></div></label>
										<label data-i18n-title="faith-die-type-d12" class="sheet-skilldielabel"><input type="radio" name="attr_faith" class="sheet-traitradio" value="12"><span class="sheet-d12"></span><div class="sheet-d12a" data-i18n="d12"></div></label>
										<input type="hidden" class="sheet-traitradio" name="attr_faith" value="4" />
										<div class="sheet-d4Selected"><span class="sheet-d4"></span><div class="sheet-d4a" data-i18n="d4"></div></div>
		                            	<div class="sheet-d6Selected"><span class="sheet-d6"></span><div class="sheet-d6a" data-i18n="d6"></div></div>
		                            	<div class="sheet-d8Selected"><span class="sheet-d8"></span><div class="sheet-d8a" data-i18n="d8"></div></div>
		                            	<div class="sheet-d10Selected"><span class="sheet-d10"></span><div class="sheet-d10a" data-i18n="d10"></div></div>
		                            	<div class="sheet-d12Selected"><span class="sheet-d12"></span><div class="sheet-d12a" data-i18n="d12"></div></div>
	                            	</div>
	                            	+
	                            </div>
								<input class="sheet-otraitmod" type="number" name="attr_faithmod" title="@{FaithMod}" value="0" />
	                            <input class='sheet-moremods' type='checkbox' name='attr_showFaithRollMod' /><span>y</span>
	    						<div class='sheet-basetrait sheet-traitmodplus'>
	                                <input type='text' class='sheet-ModDesc' name='attr_faithModType' placeholder='Modifier due to edges, hindrances, etc' data-i18n-placeholder="att-mod-description" />
	    						    +<input class="sheet-otraitmod" type="number" name="attr_FaithskillMod" title="@{FaithskillMod}" value="0" />
	                                <hr class="sheet-modsection">
	                                <input class='sheet-whispercheck' type='checkbox' value='/w gm' name='attr_whisperfaith' /> <span class='sheet-ModDesc' data-i18n="whisper-roll-to-gm">Whisper roll to GM</span><br />
	                                <select name="attr_faithwilddie" title="@{faithwilddie}" class="sheet-traitdie">
	                                    <option value="4" data-i18n="d4">d4</option>
	                                    <option value="6" selected data-i18n="d6">d6</option>
	                                    <option value="8" data-i18n="d8">d8</option>
	                                    <option value="10" data-i18n="d10">d10</option>
	                                    <option value="12" data-i18n="d12">d12</option>
	                                </select>
	                                <span data-i18n='wild-die'>Wild Die</span><input type='text' class='sheet-wildDieDesc' name='attr_faithwilddieinfo' placeholder='Standard Wild Die die type' data-i18n-placeholder="no-modifying-edges" /><br />
	                                <input class='sheet-otraitmod' style='border-bottom: 1px solid black;' type='number' name='attr_faith_delta' title='@{faith_delta}' value='0' /><label class='sheet-delta' data-i18n='die-step-delta'>steps boosted/lowered from base</label><input type='hidden' name='attr_faith_base' /><input type='hidden' name='attr_faithmod_base' />
	    						</div>
	    						<input type='hidden' name='attr_faith_rank' value='1d4!' />
	    						<input type='hidden' name='attr_faith_display' value='d4' />
	    						<input type='hidden' name='attr_rolltFaith' value='{{name=@{character_name} }} {{skill_rank=@{faith_display} }} {{skill_roll=[[@{faith_rank} + @{FaithskillMod}+ @{ModSum}[Distracted, Wounds, Fatigue] + @{traitmods}]]}} {{mook=[[1d0+@{wdNum}]]}} {{wild_die=[[ 1d@{faithwilddie}! + @{faithmod} + @{FaithskillMod} + @{ModSum}[Distracted, Wounds, Fatigue] + @{traitmods}]]}} @{templateConditions} {{conviction=[[ [[@{conviction}]]d6! ]] }}' />
								<input type="hidden" name="attr_faithrollformula" value="@{faith_rank} + @{FaithskillMod}+ @{ModSumEnc}[Distracted, Wounds, Fatigue, Encumbrance] + @{traitmods}" />
								<input type="checkbox" class="sheet-useSkillSpec" name="attr_altRuleSkillSpec" style="display: none;" />
	    						<div class='sheet-SkillSpec'>
	    						    <fieldset class="repeating_faithspec">
	    						        <button class="sheet-skillbutton sheet-smallskillflexattbutton sheet-specbutton" type='roll' name='roll_tFaithSpecRoll' title="@{tFaithSpecRoll}" value='@{faithSpecRollValue}'></button>
	    						        <input type="hidden" name="attr_faithSpecRollValue" value="@{whisperfaith} &{template:roll} {{namelength=@{namelength}}} {{button=y}} {{ReRoll=^{reroll}(~repeating_faithspec_tFaithSpecRoll)}} {{trait=@{faithSpecName} }} @{rolltFaith} @{unshakeTemplate}" />
	    						        <input class="sheet-speciality" type="text" name="attr_faithSpecName" title="@{repeating_faithSpec_$#_SpecName}" placeholder="Specialization" data-i18n-placeholder="specialization" />
	    						    </fieldset>
	    						</div>
	                        </div>
	                        <!-- Fighting -->
                            <input class="sheet-StaticSkill" type="checkbox" name="attr_staticFighting"  style='display:none;'/>
	                        <div class='sheet-basetrait sheet-staticFighting' data-i18n-list-item="fighting">
	                            <input class='sheet-deltabutton' type='hidden' name='attr_fighting_delta' value='0' />
	                            <button class="sheet-skillbutton sheet-skillflexattbutton" type='roll' name='roll_tFightingRoll' title="@{tFightingRoll}" value='@{fightingRollValue} {{skill_roll=[[ @{fightingSkillRollFormula} ]]}} {{wild_die=[[ @{fightingWildDieFormula} ]]}}'> <span name='attr_fightingname'></span> <span class='sheet-linkedAtt' data-i18n="agl-u">(AGL)</span></button>
	                            <input type="hidden" name="attr_fightingRollValue" value="@{whisperfighting} &{template:roll} {{namelength=@{namelength}}} {{button=y}} {{ReRoll=^{reroll}(~tFightingRoll)}} {{trait=@{fightingname}}} @{rolltFighting} @{setmodsenc} @{showtraitmods} @{unshakeTemplate}" />
	                            <div class="sheet-skillRankContainer">
	                            	<div class="sheet-skillRankChild">
                                        <input class="sheet-useAlphaNum" type="checkbox" name="attr_useAlphaNum" value="1" />
	                            		<label data-i18n-title="fighting-die-type-d4" class="sheet-skilldielabel"><input type="radio" name="attr_fighting" class="sheet-traitradio" value="4" checked><span class="sheet-d4"></span><div class="sheet-d4a" data-i18n="d4"></div></label>
										<label data-i18n-title="fighting-die-type-d6" class="sheet-skilldielabel"><input type="radio" name="attr_fighting" class="sheet-traitradio" value="6"><span class="sheet-d6"></span><div class="sheet-d6a" data-i18n="d6"></div></label>
										<label data-i18n-title="fighting-die-type-d8" class="sheet-skilldielabel"><input type="radio" name="attr_fighting" class="sheet-traitradio" value="8"><span class="sheet-d8"></span><div class="sheet-d8a" data-i18n="d8"></div></label>
										<label data-i18n-title="fighting-die-type-d10" class="sheet-skilldielabel"><input type="radio" name="attr_fighting" class="sheet-traitradio" value="10"><span class="sheet-d10"></span><div class="sheet-d10a" data-i18n="d10"></div></label>
										<label data-i18n-title="fighting-die-type-d12" class="sheet-skilldielabel"><input type="radio" name="attr_fighting" class="sheet-traitradio" value="12"><span class="sheet-d12"></span><div class="sheet-d12a" data-i18n="d12"></div></label>
										<input type="hidden" class="sheet-traitradio" name="attr_fighting" value="4" />
										<div class="sheet-d4Selected"><span class="sheet-d4"></span><div class="sheet-d4a" data-i18n="d4"></div></div>
		                            	<div class="sheet-d6Selected"><span class="sheet-d6"></span><div class="sheet-d6a" data-i18n="d6"></div></div>
		                            	<div class="sheet-d8Selected"><span class="sheet-d8"></span><div class="sheet-d8a" data-i18n="d8"></div></div>
		                            	<div class="sheet-d10Selected"><span class="sheet-d10"></span><div class="sheet-d10a" data-i18n="d10"></div></div>
		                            	<div class="sheet-d12Selected"><span class="sheet-d12"></span><div class="sheet-d12a" data-i18n="d12"></div></div>
	                            	</div>
	                            	+
	                            </div>
								<input class="sheet-otraitmod" type="number" name="attr_fightingmod" title="@{fightingmod}" value="-2" />
	                            <input class='sheet-moremods' type='checkbox' name='attr_showFightingRollMod' /><span>y</span>
	    						<div class='sheet-basetrait sheet-traitmodplus'>
	                                <input type='text' class='sheet-ModDesc' name='attr_fightingModType' placeholder='Modifier due to edges, hindrances, etc' data-i18n-placeholder="att-mod-description" />
	    						    +<input class="sheet-otraitmod" type="number" name="attr_FightingskillMod" title="@{FightingskillMod}" value="0" />
	                                <hr class="sheet-modsection">
	                                <input class='sheet-whispercheck' type='checkbox' value='/w gm' name='attr_whisperfighting' /> <span class='sheet-ModDesc' data-i18n="whisper-roll-to-gm">Whisper roll to GM</span><br />
	                                <select name="attr_fightingwilddie" title="@{fightingwilddie}" class="sheet-traitdie">
	                                    <option value="4" data-i18n="d4">d4</option>
	                                    <option value="6" selected data-i18n="d6">d6</option>
	                                    <option value="8" data-i18n="d8">d8</option>
	                                    <option value="10" data-i18n="d10">d10</option>
	                                    <option value="12" data-i18n="d12">d12</option>
	                                </select>
	                                <span data-i18n='wild-die'>Wild Die</span><input type='text' class='sheet-wildDieDesc' name='attr_fightingwilddieinfo' placeholder='Standard Wild Die die type' data-i18n-placeholder="no-modifying-edges" /><br />
	                                <input class='sheet-otraitmod' style='border-bottom: 1px solid black;' type='number' name='attr_fighting_delta' title='@{fighting_delta}' value='0' /><label class='sheet-delta' data-i18n='die-step-delta'>steps boosted/lowered from Base</label><input type='hidden' name='attr_fighting_base' /><input type='hidden' name='attr_fightingmod_base' />
	    						</div>
	    						<input type='hidden' name='attr_fighting_rank' value='1d4!-2' />
	    						<input type='hidden' name='attr_fighting_display' value='d4-2' />
                                <input type='hidden' name='attr_fightingSkillRollFormula' value='@{fighting_rank} + @{FightingskillMod}+ @{ModSumEnc}[Distracted, Wounds, Fatigue, Encumbrance] + @{traitmods}' />
                                <input type='hidden' name='attr_fightingWildDieFormula' value='1d@{fightingwilddie}! + @{fightingmod} + @{FightingskillMod} + @{ModSumEnc}[Distracted, Wounds, Fatigue, Encumbrance] + @{traitmods}' />
                                <!-- New Template Piect to put in button
                                    {{skill_roll=[[ @{fightingSkillRollFormula} ]]}} {{wild_die=[[ @{fightingWildDieFormula} ]]}}
                                -->
                                <!-- Was in roll_tFighting
                                    {{skill_roll=[[@{fighting_rank} + @{FightingskillMod}+ @{ModSumEnc}[Distracted, Wounds, Fatigue, Encumbrance] + @{traitmods}]]}}
                                    {{wild_die=[[ 1d@{fightingwilddie}! + @{fightingmod} + @{FightingskillMod} + @{ModSumEnc}[Distracted, Wounds, Fatigue, Encumbrance] + @{traitmods}]]}}
                                -->
	    						<input type='hidden' name='attr_rolltFighting' value='{{name=@{character_name} }} {{skill_rank=@{fighting_display} }} {{mook=[[1d0+@{wdNum}]]}} @{templateConditions} {{conviction=[[ [[@{conviction}]]d6! ]] }}' />
								<input type="hidden" name="attr_fightingrollformula" value="@{fighting_rank} + @{FightingskillMod}+ @{ModSumEnc}[Distracted, Wounds, Fatigue, Encumbrance] + @{traitmods}" />
								<input type="checkbox" class="sheet-useSkillSpec" name="attr_altRuleSkillSpec" style="display: none;" />
	    						<div class='sheet-SkillSpec'>
	    						    <fieldset class="repeating_fightingspec">
	    						        <button class="sheet-skillbutton sheet-smallskillflexattbutton sheet-specbutton" type='roll' name='roll_tFightingSpecRoll' title="@{tFightingSpecRoll}" value='@{fightingSpecRollValue} {{skill_roll=[[ @{fightingSkillRollFormula} ]]}} {{wild_die=[[ @{fightingWildDieFormula} ]]}}'></button>
	    						        <input type="hidden" name="attr_fightingSpecRollValue" value="@{whisperfighting} &{template:roll} {{namelength=@{namelength}}} {{button=y}} {{ReRoll=^{reroll}(~repeating_fightingspec_tFightingSpecRoll)}} {{trait=@{fightingSpecName} }} @{rolltFighting} @{unshakeTemplate}" />
	    						        <input class="sheet-speciality" type="text" name="attr_fightingSpecName" title="@{repeating_fightingSpec_$#_SpecName}" placeholder="Specialization" data-i18n-placeholder="specialization" />
	    						    </fieldset>
	    						</div>
	                        </div>
							<!-- Focus -->
	                        <input class="sheet-StaticSkill" type="checkbox" name="attr_staticFocus" style='display:none;'/>
	                        <div class='sheet-basetrait sheet-staticFocus' data-i18n-list-item="focus">
	                            <input class='sheet-deltabutton' type='hidden' name='attr_focus_delta' value='0' />
	                            <button class="sheet-skillbutton sheet-skillflexattbutton" type='roll' name='roll_tFocusRoll' title="@{tFocusRoll}" value='@{focusRollValue}'> <span name="attr_focusname"></span> <span class='sheet-linkedAtt' data-i18n="spi-u">(SPI)</span></button>
	                            <input type="hidden" name="attr_focusRollValue" value="@{whisperfocus} &{template:roll} {{namelength=@{namelength}}} {{button=y}} {{ReRoll=^{reroll}(~tFocusRoll)}} {{trait=@{focusname}}} @{rolltFocus} @{setmods} @{showtraitmods} @{unshakeTemplate}" />
	                            <div class="sheet-skillRankContainer">
	                            	<div class="sheet-skillRankChild">
                                        <input class="sheet-useAlphaNum" type="checkbox" name="attr_useAlphaNum" value="1" />
	                            		<label data-i18n-title="focus-die-type-d4" class="sheet-skilldielabel"><input type="radio" name="attr_focus" class="sheet-traitradio" value="4" checked><span class="sheet-d4"></span><div class="sheet-d4a" data-i18n="d4"></div></label>
										<label data-i18n-title="focus-die-type-d6" class="sheet-skilldielabel"><input type="radio" name="attr_focus" class="sheet-traitradio" value="6"><span class="sheet-d6"></span><div class="sheet-d6a" data-i18n="d6"></div></label>
										<label data-i18n-title="focus-die-type-d8" class="sheet-skilldielabel"><input type="radio" name="attr_focus" class="sheet-traitradio" value="8"><span class="sheet-d8"></span><div class="sheet-d8a" data-i18n="d8"></div></label>
										<label data-i18n-title="focus-die-type-d10" class="sheet-skilldielabel"><input type="radio" name="attr_focus" class="sheet-traitradio" value="10"><span class="sheet-d10"></span><div class="sheet-d10a" data-i18n="d10"></div></label>
										<label data-i18n-title="focus-die-type-d12" class="sheet-skilldielabel"><input type="radio" name="attr_focus" class="sheet-traitradio" value="12"><span class="sheet-d12"></span><div class="sheet-d12a" data-i18n="d12"></div></label>
										<input type="hidden" class="sheet-traitradio" name="attr_focus" value="4" />
										<div class="sheet-d4Selected"><span class="sheet-d4"></span><div class="sheet-d4a" data-i18n="d4"></div></div>
		                            	<div class="sheet-d6Selected"><span class="sheet-d6"></span><div class="sheet-d6a" data-i18n="d6"></div></div>
		                            	<div class="sheet-d8Selected"><span class="sheet-d8"></span><div class="sheet-d8a" data-i18n="d8"></div></div>
		                            	<div class="sheet-d10Selected"><span class="sheet-d10"></span><div class="sheet-d10a" data-i18n="d10"></div></div>
		                            	<div class="sheet-d12Selected"><span class="sheet-d12"></span><div class="sheet-d12a" data-i18n="d12"></div></div>
	                            	</div>
	                            	+
	                            </div>
								<input class="sheet-otraitmod" type="number" name="attr_focusmod" title="@{FocusMod}" value="0" />
	                            <input class='sheet-moremods' type='checkbox' name='attr_showFocusRollMod' /><span>y</span>
	    						<div class='sheet-basetrait sheet-traitmodplus'>
	                                <input type='text' class='sheet-ModDesc' name='attr_focusModType' placeholder='Modifier due to edges, hindrances, etc' data-i18n-placeholder="att-mod-description" />
	    						    +<input class="sheet-otraitmod" type="number" name="attr_FocusskillMod" title="@{FocusskillMod}" value="0" />
	                                <hr class="sheet-modsection">
	                                <input class='sheet-whispercheck' type='checkbox' value='/w gm' name='attr_whisperfocus' /> <span class='sheet-ModDesc' data-i18n="whisper-roll-to-gm">Whisper roll to GM</span><br />
	                                <select name="attr_focuswilddie" title="@{focuswilddie}" class="sheet-traitdie">
	                                    <option value="4" data-i18n="d4">d4</option>
	                                    <option value="6" selected data-i18n="d6">d6</option>
	                                    <option value="8" data-i18n="d8">d8</option>
	                                    <option value="10" data-i18n="d10">d10</option>
	                                    <option value="12" data-i18n="d12">d12</option>
	                                </select>
	                                <span data-i18n='wild-die'>Wild Die</span><input type='text' class='sheet-wildDieDesc' name='attr_focuswilddieinfo' placeholder='Standard Wild Die die type' data-i18n-placeholder="no-modifying-edges" /><br />
	                                <input class='sheet-otraitmod' style='border-bottom: 1px solid black;' type='number' name='attr_focus_delta' title='@{focus_delta}' value='0' /><label class='sheet-delta' data-i18n='die-step-delta'>steps boosted/lowered from base</label><input type='hidden' name='attr_focus_base' /><input type='hidden' name='attr_focusmod_base' />
	    						</div>
	    						<input type='hidden' name='attr_focus_rank' value='1d4!' />
	    						<input type='hidden' name='attr_focus_display' value='d4' />
	    						<input type='hidden' name='attr_rolltFocus' value='{{name=@{character_name} }} {{skill_rank=@{focus_display} }} {{skill_roll=[[@{focus_rank} + @{FocusskillMod}+ @{ModSum}[Distracted, Wounds, Fatigue] + @{traitmods}]]}} {{mook=[[1d0+@{wdNum}]]}} {{wild_die=[[ 1d@{focuswilddie}! + @{focusmod} + @{FocusskillMod} + @{ModSum}[Distracted, Wounds, Fatigue] + @{traitmods}]]}} @{templateConditions} {{conviction=[[ [[@{conviction}]]d6! ]] }}' />
								<input type="hidden" name="attr_focusrollformula" value="@{focus_rank} + @{FocusskillMod}+ @{ModSumEnc}[Distracted, Wounds, Fatigue, Encumbrance] + @{traitmods}" />
	    						<input type="checkbox" class="sheet-useSkillSpec" name="attr_altRuleSkillSpec" style="display: none;" />
	    						<div class='sheet-SkillSpec'>
	    						    <fieldset class="repeating_focusspec">
	    						        <button class="sheet-skillbutton sheet-smallskillflexattbutton sheet-specbutton" type='roll' name='roll_tFocusSpecRoll' title="@{tFocusSpecRoll}" value='@{focusSpecRollValue}'></button>
	    						        <input type="hidden" name="attr_focusSpecRollValue" value="@{whisperfocus} &{template:roll} {{namelength=@{namelength}}} {{button=y}} {{ReRoll=^{reroll}(~repeating_focusspec_tFocusSpecRoll)}} {{trait=@{focusSpecName} }} @{rolltFocus} @{unshakeTemplate}" />
	    						        <input class="sheet-speciality" type="text" name="attr_focusSpecName" title="@{repeating_focusSpec_$#_SpecName}" placeholder="Specialization" data-i18n-placeholder="specialization" />
	    						    </fieldset>
	    						</div>
	                        </div>
	                        <!-- Gambling Skill -->
	                        <input class="sheet-StaticSkill" type="checkbox" name="attr_staticGambling" style='display:none;'/>
	                        <div class='sheet-basetrait sheet-staticGambling' data-i18n-list-item="gambling">
	                            <input class='sheet-deltabutton' type='hidden' name='attr_gambling_delta' value='0' />
	                            <button class="sheet-skillbutton sheet-skillflexattbutton" type='roll' name='roll_tGamblingRoll' title="@{tGamblingRoll}" value='@{gamblingRollValue}'> <span name="attr_gamblingname"></span> <span class='sheet-linkedAtt' data-i18n="sma-u">(SMA)</span></button>
	                            <input type="hidden" name="attr_gamblingRollValue" value="@{whispergambling} &{template:roll} {{namelength=@{namelength}}} {{button=y}} {{ReRoll=^{reroll}(~tGamblingRoll)}} {{trait=@{gamblingname}}} @{rolltGambling} @{setmods} @{showtraitmods} @{unshakeTemplate}" />
	                            <div class="sheet-skillRankContainer">
	                            	<div class="sheet-skillRankChild">
                                        <input class="sheet-useAlphaNum" type="checkbox" name="attr_useAlphaNum" value="1" />
	                            		<label data-i18n-title="gambling-die-type-d4" class="sheet-skilldielabel"><input type="radio" name="attr_gambling" class="sheet-traitradio" value="4" checked><span class="sheet-d4"></span><div class="sheet-d4a" data-i18n="d4"></div></label>
										<label data-i18n-title="gambling-die-type-d6" class="sheet-skilldielabel"><input type="radio" name="attr_gambling" class="sheet-traitradio" value="6"><span class="sheet-d6"></span><div class="sheet-d6a" data-i18n="d6"></div></label>
										<label data-i18n-title="gambling-die-type-d8" class="sheet-skilldielabel"><input type="radio" name="attr_gambling" class="sheet-traitradio" value="8"><span class="sheet-d8"></span><div class="sheet-d8a" data-i18n="d8"></div></label>
										<label data-i18n-title="gambling-die-type-d10" class="sheet-skilldielabel"><input type="radio" name="attr_gambling" class="sheet-traitradio" value="10"><span class="sheet-d10"></span><div class="sheet-d10a" data-i18n="d10"></div></label>
										<label data-i18n-title="gambling-die-type-d12" class="sheet-skilldielabel"><input type="radio" name="attr_gambling" class="sheet-traitradio" value="12"><span class="sheet-d12"></span><div class="sheet-d12a" data-i18n="d12"></div></label>
										<input type="hidden" class="sheet-traitradio" name="attr_gambling" value="4" />
										<div class="sheet-d4Selected"><span class="sheet-d4"></span><div class="sheet-d4a" data-i18n="d4"></div></div>
		                            	<div class="sheet-d6Selected"><span class="sheet-d6"></span><div class="sheet-d6a" data-i18n="d6"></div></div>
		                            	<div class="sheet-d8Selected"><span class="sheet-d8"></span><div class="sheet-d8a" data-i18n="d8"></div></div>
		                            	<div class="sheet-d10Selected"><span class="sheet-d10"></span><div class="sheet-d10a" data-i18n="d10"></div></div>
		                            	<div class="sheet-d12Selected"><span class="sheet-d12"></span><div class="sheet-d12a" data-i18n="d12"></div></div>
	                            	</div>
	                            	+
	                            </div>
								<input class="sheet-otraitmod" type="number" name="attr_gamblingmod" title="@{GamblingMod}" value="0" />
	                            <input class='sheet-moremods' type='checkbox' name='attr_showGamblingRollMod' /><span>y</span>
	    						<div class='sheet-basetrait sheet-traitmodplus'>
	                                <input type='text' class='sheet-ModDesc' name='attr_gamblingModType' placeholder='Modifier due to edges, hindrances, etc' data-i18n-placeholder="att-mod-description" />
	    						    +<input class="sheet-otraitmod" type="number" name="attr_GamblingskillMod" title="@{GamblingskillMod}" value="0" />
	                                <hr class="sheet-modsection">
	                                <input class='sheet-whispercheck' type='checkbox' value='/w gm' name='attr_whispergambling' /> <span class='sheet-ModDesc' data-i18n="whisper-roll-to-gm">Whisper roll to GM</span><br />
	                                <select name="attr_gamblingwilddie" title="@{gamblingwilddie}" class="sheet-traitdie">
	                                    <option value="4" data-i18n="d4">d4</option>
	                                    <option value="6" selected data-i18n="d6">d6</option>
	                                    <option value="8" data-i18n="d8">d8</option>
	                                    <option value="10" data-i18n="d10">d10</option>
	                                    <option value="12" data-i18n="d12">d12</option>
	                                </select>
	                                <span data-i18n='wild-die'>Wild Die</span><input type='text' class='sheet-wildDieDesc' name='attr_gamblingwilddieinfo' placeholder='Standard Wild Die die type' data-i18n-placeholder="no-modifying-edges" /><br />
	                                <input class='sheet-otraitmod' style='border-bottom: 1px solid black;' type='number' name='attr_gambling_delta' title='@{gambling_delta}' value='0' /><label class='sheet-delta' data-i18n='die-step-delta'>steps boosted/lowered from base</label><input type='hidden' name='attr_gambling_base' /><input type='hidden' name='attr_gamblingmod_base' />
	    						</div>
	    						<input type='hidden' name='attr_gambling_rank' value='1d4!' />
	    						<input type='hidden' name='attr_gambling_display' value='d4' />
	    						<input type='hidden' name='attr_rolltGambling' value='{{name=@{character_name} }} {{skill_rank=@{gambling_display} }} {{skill_roll=[[@{gambling_rank} + @{GamblingskillMod}+ @{ModSum}[Distracted, Wounds, Fatigue] + @{traitmods}]]}} {{mook=[[1d0+@{wdNum}]]}} {{wild_die=[[ 1d@{gamblingwilddie}! + @{gamblingmod} + @{GamblingskillMod} + @{ModSum}[Distracted, Wounds, Fatigue] + @{traitmods}]]}} @{templateConditions} {{conviction=[[ [[@{conviction}]]d6! ]] }}' />
	    						<input type="checkbox" class="sheet-useSkillSpec" name="attr_altRuleSkillSpec" style="display: none;" />
	    						<div class='sheet-SkillSpec'>
	    						    <fieldset class="repeating_gamblingspec">
	    						        <button class="sheet-skillbutton sheet-smallskillflexattbutton sheet-specbutton" type='roll' name='roll_tGamblingSpecRoll' title="@{tGamblingSpecRoll}" value='@{gamblingSpecRollValue}'></button>
	    						        <input type="hidden" name="attr_gamblingSpecRollValue" value="@{whispergambling} &{template:roll} {{namelength=@{namelength}}} {{button=y}} {{ReRoll=^{reroll}(~repeating_gamblingspec_tGamblingSpecRoll)}} {{trait=@{gamblingSpecName} }} @{rolltGambling} @{unshakeTemplate}" />
	    						        <input class="sheet-speciality" type="text" name="attr_gamblingSpecName" title="@{repeating_gamblingSpec_$#_SpecName}" placeholder="Specialization" data-i18n-placeholder="specialization" />
	    						    </fieldset>
	    						</div>
	                        </div>
							<!-- Hacking -->
	                        <input class="sheet-StaticSkill" type="checkbox" name="attr_staticHacking" style='display:none;'/>
	                        <div class='sheet-basetrait sheet-staticHacking' data-i18n-list-item="hacking">
	                            <input class='sheet-deltabutton' type='hidden' name='attr_hacking_delta' value='0' />
	                            <button class="sheet-skillbutton sheet-skillflexattbutton" type='roll' name='roll_tHackingRoll' title="@{tHackingRoll}" value='@{hackingRollValue}'> <span name="attr_hackingname"></span> <span class='sheet-linkedAtt' data-i18n="sma-u">(SMA)</span></button>
	                            <input type="hidden" name="attr_hackingRollValue" value="@{whisperhacking} &{template:roll} {{namelength=@{namelength}}} {{button=y}} {{ReRoll=^{reroll}(~tHackingRoll)}} {{trait=@{hackingname}}} @{rolltHacking} @{setmods} @{showtraitmods} @{unshakeTemplate}" />
	                            <div class="sheet-skillRankContainer">
	                            	<div class="sheet-skillRankChild">
                                        <input class="sheet-useAlphaNum" type="checkbox" name="attr_useAlphaNum" value="1" />
	                            		<label data-i18n-title="hacking-die-type-d4" class="sheet-skilldielabel"><input type="radio" name="attr_hacking" class="sheet-traitradio" value="4" checked><span class="sheet-d4"></span><div class="sheet-d4a" data-i18n="d4"></div></label>
										<label data-i18n-title="hacking-die-type-d6" class="sheet-skilldielabel"><input type="radio" name="attr_hacking" class="sheet-traitradio" value="6"><span class="sheet-d6"></span><div class="sheet-d6a" data-i18n="d6"></div></label>
										<label data-i18n-title="hacking-die-type-d8" class="sheet-skilldielabel"><input type="radio" name="attr_hacking" class="sheet-traitradio" value="8"><span class="sheet-d8"></span><div class="sheet-d8a" data-i18n="d8"></div></label>
										<label data-i18n-title="hacking-die-type-d10" class="sheet-skilldielabel"><input type="radio" name="attr_hacking" class="sheet-traitradio" value="10"><span class="sheet-d10"></span><div class="sheet-d10a" data-i18n="d10"></div></label>
										<label data-i18n-title="hacking-die-type-d12" class="sheet-skilldielabel"><input type="radio" name="attr_hacking" class="sheet-traitradio" value="12"><span class="sheet-d12"></span><div class="sheet-d12a" data-i18n="d12"></div></label>
										<input type="hidden" class="sheet-traitradio" name="attr_hacking" value="4" />
										<div class="sheet-d4Selected"><span class="sheet-d4"></span><div class="sheet-d4a" data-i18n="d4"></div></div>
		                            	<div class="sheet-d6Selected"><span class="sheet-d6"></span><div class="sheet-d6a" data-i18n="d6"></div></div>
		                            	<div class="sheet-d8Selected"><span class="sheet-d8"></span><div class="sheet-d8a" data-i18n="d8"></div></div>
		                            	<div class="sheet-d10Selected"><span class="sheet-d10"></span><div class="sheet-d10a" data-i18n="d10"></div></div>
		                            	<div class="sheet-d12Selected"><span class="sheet-d12"></span><div class="sheet-d12a" data-i18n="d12"></div></div>
	                            	</div>
	                            	+
	                            </div>
								<input class="sheet-otraitmod" type="number" name="attr_hackingmod" title="@{HackingMod}" value="0" />
	                            <input class='sheet-moremods' type='checkbox' name='attr_showHackingRollMod' /><span>y</span>
	    						<div class='sheet-basetrait sheet-traitmodplus'>
	                                <input type='text' class='sheet-ModDesc' name='attr_hackingModType' placeholder='Modifier due to edges, hindrances, etc' data-i18n-placeholder="att-mod-description" />
	    						    +<input class="sheet-otraitmod" type="number" name="attr_HackingskillMod" title="@{HackingskillMod}" value="0" />
	                                <hr class="sheet-modsection">
	                                <input class='sheet-whispercheck' type='checkbox' value='/w gm' name='attr_whisperhacking' /> <span class='sheet-ModDesc' data-i18n="whisper-roll-to-gm">Whisper roll to GM</span><br />
	                                <select name="attr_hackingwilddie" title="@{hackingwilddie}" class="sheet-traitdie">
	                                    <option value="4" data-i18n="d4">d4</option>
	                                    <option value="6" selected data-i18n="d6">d6</option>
	                                    <option value="8" data-i18n="d8">d8</option>
	                                    <option value="10" data-i18n="d10">d10</option>
	                                    <option value="12" data-i18n="d12">d12</option>
	                                </select>
	                                <span data-i18n='wild-die'>Wild Die</span><input type='text' class='sheet-wildDieDesc' name='attr_hackingwilddieinfo' placeholder='Standard Wild Die die type' data-i18n-placeholder="no-modifying-edges" /><br />
	                                <input class='sheet-otraitmod' style='border-bottom: 1px solid black;' type='number' name='attr_hacking_delta' title='@{hacking_delta}' value='0' /><label class='sheet-delta' data-i18n='die-step-delta'>steps boosted/lowered from base</label><input type='hidden' name='attr_hacking_base' /><input type='hidden' name='attr_hackingmod_base' />
	    						</div>
	    						<input type='hidden' name='attr_hacking_rank' value='1d4!' />
	    						<input type='hidden' name='attr_hacking_display' value='d4' />
	    						<input type='hidden' name='attr_rolltHacking' value='{{name=@{character_name} }} {{skill_rank=@{hacking_display} }} {{skill_roll=[[@{hacking_rank} + @{HackingskillMod}+ @{ModSum}[Distracted, Wounds, Fatigue] + @{traitmods}]]}} {{mook=[[1d0+@{wdNum}]]}} {{wild_die=[[ 1d@{hackingwilddie}! + @{hackingmod} + @{HackingskillMod} + @{ModSum}[Distracted, Wounds, Fatigue] + @{traitmods}]]}} @{templateConditions} {{conviction=[[ [[@{conviction}]]d6! ]] }}' />
	    						<input type="checkbox" class="sheet-useSkillSpec" name="attr_altRuleSkillSpec" style="display: none;" />
	    						<div class='sheet-SkillSpec'>
	    						    <fieldset class="repeating_hackingspec">
	    						        <button class="sheet-skillbutton sheet-smallskillflexattbutton sheet-specbutton" type='roll' name='roll_tHackingSpecRoll' title="@{tHackingSpecRoll}" value='@{hackingSpecRollValue}'></button>
	    						        <input type="hidden" name="attr_hackingSpecRollValue" value="@{whisperhacking} &{template:roll} {{namelength=@{namelength}}} {{button=y}} {{ReRoll=^{reroll}(~repeating_hackingspec_tHackingSpecRoll)}} {{trait=@{hackingSpecName} }} @{rolltHacking} @{unshakeTemplate}" />
	    						        <input class="sheet-speciality" type="text" name="attr_hackingSpecName" title="@{repeating_hackingSpec_$#_SpecName}" placeholder="Specialization" data-i18n-placeholder="specialization" />
	    						    </fieldset>
	    						</div>
	                        </div>
	                        <!-- Healing Skill -->
	                        <input class="sheet-StaticSkill" type="checkbox" name="attr_staticHealing" style='display:none;'/>
	                        <div class='sheet-basetrait sheet-staticHealing' data-i18n-list-item="healing">
	                            <input class='sheet-deltabutton' type='hidden' name='attr_healing_delta' value='0' />
	                            <button class="sheet-skillbutton sheet-skillflexattbutton" type='roll' name='roll_tHealingRoll' title="@{tHealingRoll}" value='@{healingRollValue}'> <span name="attr_healingname"></span> <span class='sheet-linkedAtt' data-i18n="sma-u">(SMA)</span></button>
	                            <input type="hidden" name="attr_healingRollValue" value="@{whisperhealing} &{template:roll} {{namelength=@{namelength}}} {{button=y}} {{ReRoll=^{reroll}(~tHealingRoll)}} {{trait=@{healingname}}} @{rolltHealing} @{setmods} @{showtraitmods} @{unshakeTemplate}" />
	                            <div class="sheet-skillRankContainer">
	                            	<div class="sheet-skillRankChild">
                                        <input class="sheet-useAlphaNum" type="checkbox" name="attr_useAlphaNum" value="1" />
	                            		<label data-i18n-title="healing-die-type-d4" class="sheet-skilldielabel"><input type="radio" name="attr_healing" class="sheet-traitradio" value="4" checked><span class="sheet-d4"></span><div class="sheet-d4a" data-i18n="d4"></div></label>
										<label data-i18n-title="healing-die-type-d6" class="sheet-skilldielabel"><input type="radio" name="attr_healing" class="sheet-traitradio" value="6"><span class="sheet-d6"></span><div class="sheet-d6a" data-i18n="d6"></div></label>
										<label data-i18n-title="healing-die-type-d8" class="sheet-skilldielabel"><input type="radio" name="attr_healing" class="sheet-traitradio" value="8"><span class="sheet-d8"></span><div class="sheet-d8a" data-i18n="d8"></div></label>
										<label data-i18n-title="healing-die-type-d10" class="sheet-skilldielabel"><input type="radio" name="attr_healing" class="sheet-traitradio" value="10"><span class="sheet-d10"></span><div class="sheet-d10a" data-i18n="d10"></div></label>
										<label data-i18n-title="healing-die-type-d12" class="sheet-skilldielabel"><input type="radio" name="attr_healing" class="sheet-traitradio" value="12"><span class="sheet-d12"></span><div class="sheet-d12a" data-i18n="d12"></div></label>
										<input type="hidden" class="sheet-traitradio" name="attr_healing" value="4" />
										<div class="sheet-d4Selected"><span class="sheet-d4"></span><div class="sheet-d4a" data-i18n="d4"></div></div>
		                            	<div class="sheet-d6Selected"><span class="sheet-d6"></span><div class="sheet-d6a" data-i18n="d6"></div></div>
		                            	<div class="sheet-d8Selected"><span class="sheet-d8"></span><div class="sheet-d8a" data-i18n="d8"></div></div>
		                            	<div class="sheet-d10Selected"><span class="sheet-d10"></span><div class="sheet-d10a" data-i18n="d10"></div></div>
		                            	<div class="sheet-d12Selected"><span class="sheet-d12"></span><div class="sheet-d12a" data-i18n="d12"></div></div>
	                            	</div>
	                            	+
	                            </div>
								<input class="sheet-otraitmod" type="number" name="attr_healingmod" title="@{HealingMod}" value="0" />
	                            <input class='sheet-moremods' type='checkbox' name='attr_showHealingRollMod' /><span>y</span>
	    						<div class='sheet-basetrait sheet-traitmodplus'>
	                                <input type='text' class='sheet-ModDesc' name='attr_healingModType' placeholder='Modifier due to edges, hindrances, etc' data-i18n-placeholder="att-mod-description" />
	    						    +<input class="sheet-otraitmod" type="number" name="attr_HealingskillMod" title="@{HealingskillMod}" value="0" />
	                                <hr class="sheet-modsection">
	                                <input class='sheet-whispercheck' type='checkbox' value='/w gm' name='attr_whisperhealing' /> <span class='sheet-ModDesc' data-i18n="whisper-roll-to-gm">Whisper roll to GM</span><br />
	                                <select name="attr_healingwilddie" title="@{healingwilddie}" class="sheet-traitdie">
	                                    <option value="4" data-i18n="d4">d4</option>
	                                    <option value="6" selected data-i18n="d6">d6</option>
	                                    <option value="8" data-i18n="d8">d8</option>
	                                    <option value="10" data-i18n="d10">d10</option>
	                                    <option value="12" data-i18n="d12">d12</option>
	                                </select>
	                                <span data-i18n='wild-die'>Wild Die</span><input type='text' class='sheet-wildDieDesc' name='attr_healingwilddieinfo' placeholder='Standard Wild Die die type' data-i18n-placeholder="no-modifying-edges" /><br />
	                                <input class='sheet-otraitmod' style='border-bottom: 1px solid black;' type='number' name='attr_healing_delta' title='@{healing_delta}' value='0' /><label class='sheet-delta' data-i18n='die-step-delta'>steps boosted/lowered from base</label><input type='hidden' name='attr_healing_base' /><input type='hidden' name='attr_healingmod_base' />
	    						</div>
	    						<input type='hidden' name='attr_healing_rank' value='1d4!' />
	    						<input type='hidden' name='attr_healing_display' value='d4' />
	    						<input type='hidden' name='attr_rolltHealing' value='{{name=@{character_name} }} {{skill_rank=@{healing_display} }} {{skill_roll=[[@{healing_rank} + @{HealingskillMod}+ @{ModSum}[Distracted, Wounds, Fatigue] + @{traitmods}]]}} {{mook=[[1d0+@{wdNum}]]}} {{wild_die=[[ 1d@{healingwilddie}! + @{healingmod} + @{HealingskillMod} + @{ModSum}[Distracted, Wounds, Fatigue] + @{traitmods}]]}} @{templateConditions} {{conviction=[[ [[@{conviction}]]d6! ]] }}' />
	    						<input type="checkbox" class="sheet-useSkillSpec" name="attr_altRuleSkillSpec" style="display: none;" />
	    						<div class='sheet-SkillSpec'>
	    						    <fieldset class="repeating_healingspec">
	    						        <button class="sheet-skillbutton sheet-smallskillflexattbutton sheet-specbutton" type='roll' name='roll_tHealingSpecRoll' title="@{tHealingSpecRoll}" value='@{healingSpecRollValue}'></button>
	    						        <input type="hidden" name="attr_healingSpecRollValue" value="@{whisperhealing} &{template:roll} {{namelength=@{namelength}}} {{button=y}} {{ReRoll=^{reroll}(~repeating_healingspec_tHealingSpecRoll)}} {{trait=@{healingSpecName} }} @{rolltHealing} @{unshakeTemplate}" />
	    						        <input class="sheet-speciality" type="text" name="attr_healingSpecName" title="@{repeating_healingSpec_$#_SpecName}" placeholder="Specialization" data-i18n-placeholder="specialization" />
	    						    </fieldset>
	    						</div>
	                        </div>
	                        <!-- Intimidation Skill -->
	                        <input class="sheet-StaticSkill" type="checkbox" name="attr_staticIntimidation" style='display:none;'/>
	                        <div class='sheet-basetrait sheet-staticIntimidation' data-i18n-list-item="intimidation">
	                            <input class='sheet-deltabutton' type='hidden' name='attr_intimidation_delta' value='0' />
	                            <button class="sheet-skillbutton sheet-skillflexattbutton" type='roll' name='roll_tIntimidationRoll' title="@{tIntimidationRoll}" value='@{intimidationRollValue}'> <span name="attr_intimidationname"></span> <span class='sheet-linkedAtt' data-i18n="spi-u">(SPI)</span></button>
	                            <input type="hidden" name="attr_intimidationRollValue" value="@{whisperintimidation} &{template:roll} {{namelength=@{namelength}}} {{button=y}} {{ReRoll=^{reroll}(~tIntimidationRoll)}} {{trait=@{intimidationname}}} @{rolltIntimidation} @{setmods} @{showtraitmods} @{unshakeTemplate}" />
	                            <div class="sheet-skillRankContainer">
	                            	<div class="sheet-skillRankChild">
                                        <input class="sheet-useAlphaNum" type="checkbox" name="attr_useAlphaNum" value="1" />
	                            		<label data-i18n-title="intimidation-die-type-d4" class="sheet-skilldielabel"><input type="radio" name="attr_intimidation" class="sheet-traitradio" value="4" checked><span class="sheet-d4"></span><div class="sheet-d4a" data-i18n="d4"></div></label>
										<label data-i18n-title="intimidation-die-type-d6" class="sheet-skilldielabel"><input type="radio" name="attr_intimidation" class="sheet-traitradio" value="6"><span class="sheet-d6"></span><div class="sheet-d6a" data-i18n="d6"></div></label>
										<label data-i18n-title="intimidation-die-type-d8" class="sheet-skilldielabel"><input type="radio" name="attr_intimidation" class="sheet-traitradio" value="8"><span class="sheet-d8"></span><div class="sheet-d8a" data-i18n="d8"></div></label>
										<label data-i18n-title="intimidation-die-type-d10" class="sheet-skilldielabel"><input type="radio" name="attr_intimidation" class="sheet-traitradio" value="10"><span class="sheet-d10"></span><div class="sheet-d10a" data-i18n="d10"></div></label>
										<label data-i18n-title="intimidation-die-type-d12" class="sheet-skilldielabel"><input type="radio" name="attr_intimidation" class="sheet-traitradio" value="12"><span class="sheet-d12"></span><div class="sheet-d12a" data-i18n="d12"></div></label>
										<input type="hidden" class="sheet-traitradio" name="attr_intimidation" value="4" />
										<div class="sheet-d4Selected"><span class="sheet-d4"></span><div class="sheet-d4a" data-i18n="d4"></div></div>
		                            	<div class="sheet-d6Selected"><span class="sheet-d6"></span><div class="sheet-d6a" data-i18n="d6"></div></div>
		                            	<div class="sheet-d8Selected"><span class="sheet-d8"></span><div class="sheet-d8a" data-i18n="d8"></div></div>
		                            	<div class="sheet-d10Selected"><span class="sheet-d10"></span><div class="sheet-d10a" data-i18n="d10"></div></div>
		                            	<div class="sheet-d12Selected"><span class="sheet-d12"></span><div class="sheet-d12a" data-i18n="d12"></div></div>
	                            	</div>
	                            	+
	                            </div>
								<input class="sheet-otraitmod" type="number" name="attr_intimidationmod" title="@{IntimidationMod}" value="0" />
	                            <input class='sheet-moremods' type='checkbox' name='attr_showIntimidationRollMod' /><span>y</span>
	    						<div class='sheet-basetrait sheet-traitmodplus'>
	                                <input type='text' class='sheet-ModDesc' name='attr_intimidateModType' placeholder='Modifier due to edges, hindrances, etc' data-i18n-placeholder="att-mod-description" />
	    						    +<input class="sheet-otraitmod" type="number" name="attr_IntimidationskillMod" title="@{IntimidationskillMod}" value="0" />
	                                <hr class="sheet-modsection">
	                                <input class='sheet-whispercheck' type='checkbox' value='/w gm' name='attr_whisperintimidation' /> <span class='sheet-ModDesc' data-i18n="whisper-roll-to-gm">Whisper roll to GM</span><br />
	                                <select name="attr_intimidationwilddie" title="@{intimidationwilddie}" class="sheet-traitdie">
	                                    <option value="4" data-i18n="d4">d4</option>
	                                    <option value="6" selected data-i18n="d6">d6</option>
	                                    <option value="8" data-i18n="d8">d8</option>
	                                    <option value="10" data-i18n="d10">d10</option>
	                                    <option value="12" data-i18n="d12">d12</option>
	                                </select>
	                                <span data-i18n='wild-die'>Wild Die</span><input type='text' class='sheet-wildDieDesc' name='attr_intimidationwilddieinfo' placeholder='Standard Wild Die die type' data-i18n-placeholder="no-modifying-edges" /><br />
	                                <input class='sheet-otraitmod' style='border-bottom: 1px solid black;' type='number' name='attr_intimidation_delta' title='@{intimidation_delta}' value='0' /><label class='sheet-delta' data-i18n='die-step-delta'>steps boosted/lowered from base</label><input type='hidden' name='attr_intimidation_base' /><input type='hidden' name='attr_intimidationmod_base' />
	    						</div>
	    						<input type='hidden' name='attr_intimidation_rank' value='1d4!' />
	    						<input type='hidden' name='attr_intimidation_display' value='d4' />
	    						<input type='hidden' name='attr_rolltIntimidation' value='{{name=@{character_name} }} {{skill_rank=@{intimidation_display} }} {{skill_roll=[[@{intimidation_rank} + @{IntimidationskillMod}+ @{ModSum}[Distracted, Wounds, Fatigue] + @{traitmods}]]}} {{mook=[[1d0+@{wdNum}]]}} {{wild_die=[[ 1d@{intimidationwilddie}! + @{intimidationmod} + @{IntimidationskillMod} + @{ModSum}[Distracted, Wounds, Fatigue] + @{traitmods}]]}} @{templateConditions} {{conviction=[[ [[@{conviction}]]d6! ]] }}' />
	    						<input type="checkbox" class="sheet-useSkillSpec" name="attr_altRuleSkillSpec" style="display: none;" />
	    						<div class='sheet-SkillSpec'>
	    						    <fieldset class="repeating_intimidationspec">
	    						        <button class="sheet-skillbutton sheet-smallskillflexattbutton sheet-specbutton" type='roll' name='roll_tIntimidationSpecRoll' title="@{tIntimidationSpecRoll}" value='@{intimidationSpecRollValue}'></button>
	    						        <input type="hidden" name="attr_intimidationSpecRollValue" value="@{whisperintimidation} &{template:roll} {{namelength=@{namelength}}} {{button=y}} {{ReRoll=^{reroll}(~repeating_intimidationspec_tIntimidationSpecRoll)}} {{trait=@{intimidationSpecName} }} @{rolltIntimidation} @{unshakeTemplate}" />
	    						        <input class="sheet-speciality" type="text" name="attr_intimidationSpecName" title="@{repeating_intimidationSpec_$#_SpecName}" placeholder="Specialization" data-i18n-placeholder="specialization" />
	    						    </fieldset>
	    						</div>
	                        </div>
							<!-- Language -->
	                        <input class="sheet-StaticSkill" type="checkbox" name="attr_staticLanguage" style='display:none;'/>
	                        <div class='sheet-basetrait sheet-staticLanguage' data-i18n-list-item="language">
	                            <input class='sheet-deltabutton' type='hidden' name='attr_language_delta' value='0' />
	                            <button class="sheet-skillbutton sheet-skillflexattbutton" type='roll' name='roll_tLanguageRoll' title="@{tLanguageRoll}" value='@{languageRollValue}'> <span name="attr_native-languagename"></span> <span class='sheet-linkedAtt' data-i18n="sma-u">(SMA)</span></button>
	                            <input type="hidden" name="attr_languageRollValue" value="@{whisperlanguage} &{template:roll} {{namelength=@{namelength}}} {{button=y}} {{ReRoll=^{reroll}(~tLanguageRoll)}} {{trait=@{native-languagename}}} @{rolltLanguage} @{setmods} @{showtraitmods} @{unshakeTemplate}" />
	                            <div class="sheet-skillRankContainer">
	                            	<div class="sheet-skillRankChild">
                                        <input class="sheet-useAlphaNum" type="checkbox" name="attr_useAlphaNum" value="1" />
	                            		<label data-i18n-title="language-die-type-d4" class="sheet-skilldielabel"><input type="radio" name="attr_language" class="sheet-traitradio" value="4" checked><span class="sheet-d4"></span><div class="sheet-d4a" data-i18n="d4"></div></label>
										<label data-i18n-title="language-die-type-d6" class="sheet-skilldielabel"><input type="radio" name="attr_language" class="sheet-traitradio" value="6"><span class="sheet-d6"></span><div class="sheet-d6a" data-i18n="d6"></div></label>
										<label data-i18n-title="language-die-type-d8" class="sheet-skilldielabel"><input type="radio" name="attr_language" class="sheet-traitradio" value="8"><span class="sheet-d8"></span><div class="sheet-d8a" data-i18n="d8"></div></label>
										<label data-i18n-title="language-die-type-d10" class="sheet-skilldielabel"><input type="radio" name="attr_language" class="sheet-traitradio" value="10"><span class="sheet-d10"></span><div class="sheet-d10a" data-i18n="d10"></div></label>
										<label data-i18n-title="language-die-type-d12" class="sheet-skilldielabel"><input type="radio" name="attr_language" class="sheet-traitradio" value="12"><span class="sheet-d12"></span><div class="sheet-d12a" data-i18n="d12"></div></label>
										<input type="hidden" class="sheet-traitradio" name="attr_language" value="4" />
										<div class="sheet-d4Selected"><span class="sheet-d4"></span><div class="sheet-d4a" data-i18n="d4"></div></div>
		                            	<div class="sheet-d6Selected"><span class="sheet-d6"></span><div class="sheet-d6a" data-i18n="d6"></div></div>
		                            	<div class="sheet-d8Selected"><span class="sheet-d8"></span><div class="sheet-d8a" data-i18n="d8"></div></div>
		                            	<div class="sheet-d10Selected"><span class="sheet-d10"></span><div class="sheet-d10a" data-i18n="d10"></div></div>
		                            	<div class="sheet-d12Selected"><span class="sheet-d12"></span><div class="sheet-d12a" data-i18n="d12"></div></div>
	                            	</div>
	                            	+
	                            </div>
								<input class="sheet-otraitmod" type="number" name="attr_languagemod" title="@{LanguageMod}" value="0" />
	                            <input class='sheet-moremods' type='checkbox' name='attr_showLanguageRollMod' /><span>y</span>
	    						<div class='sheet-basetrait sheet-traitmodplus'>
	                                <input type='text' class='sheet-ModDesc' name='attr_languageModType' placeholder='Modifier due to edges, hindrances, etc' data-i18n-placeholder="att-mod-description" />
	    						    +<input class="sheet-otraitmod" type="number" name="attr_LanguageskillMod" title="@{LanguageskillMod}" value="0" />
	                                <hr class="sheet-modsection">
	                                <input class='sheet-whispercheck' type='checkbox' value='/w gm' name='attr_whisperlanguage' /> <span class='sheet-ModDesc' data-i18n="whisper-roll-to-gm">Whisper roll to GM</span><br />
	                                <select name="attr_languagewilddie" title="@{languagewilddie}" class="sheet-traitdie">
	                                    <option value="4" data-i18n="d4">d4</option>
	                                    <option value="6" selected data-i18n="d6">d6</option>
	                                    <option value="8" data-i18n="d8">d8</option>
	                                    <option value="10" data-i18n="d10">d10</option>
	                                    <option value="12" data-i18n="d12">d12</option>
	                                </select>
	                                <span data-i18n='wild-die'>Wild Die</span><input type='text' class='sheet-wildDieDesc' name='attr_languagewilddieinfo' placeholder='Standard Wild Die die type' data-i18n-placeholder="no-modifying-edges" /><br />
	                                <input class='sheet-otraitmod' style='border-bottom: 1px solid black;' type='number' name='attr_language_delta' title='@{language_delta}' value='0' /><label class='sheet-delta' data-i18n='die-step-delta'>steps boosted/lowered from base</label><input type='hidden' name='attr_language_base' /><input type='hidden' name='attr_languagemod_base' />
	    						</div>
	    						<input type='hidden' name='attr_language_rank' value='1d4!' />
	    						<input type='hidden' name='attr_language_display' value='d4' />
	    						<input type='hidden' name='attr_rolltLanguage' value='{{name=@{character_name} }} {{skill_rank=@{language_display} }} {{skill_roll=[[@{language_rank} + @{LanguageskillMod}+ @{ModSum}[Distracted, Wounds, Fatigue] + @{traitmods}]]}} {{mook=[[1d0+@{wdNum}]]}} {{wild_die=[[ 1d@{languagewilddie}! + @{languagemod} + @{LanguageskillMod} + @{ModSum}[Distracted, Wounds, Fatigue] + @{traitmods}]]}} @{templateConditions} {{conviction=[[ [[@{conviction}]]d6! ]] }}' />
	    						<input type="checkbox" class="sheet-useSkillSpec" name="attr_altRuleSkillSpec" style="display: none;" />
	    						<div class='sheet-SkillSpec'>
	    						    <fieldset class="repeating_languagespec">
	    						        <button class="sheet-skillbutton sheet-smallskillflexattbutton sheet-specbutton" type='roll' name='roll_tLanguageSpecRoll' title="@{tLanguageSpecRoll}" value='@{languageSpecRollValue}'></button>
	    						        <input type="hidden" name="attr_languageSpecRollValue" value="@{whisperlanguage} &{template:roll} {{namelength=@{namelength}}} {{button=y}} {{ReRoll=^{reroll}(~repeating_languagespec_tLanguageSpecRoll)}} {{trait=@{languageSpecName} }} @{rolltLanguage} @{unshakeTemplate}" />
	    						        <input class="sheet-speciality" type="text" name="attr_languageSpecName" title="@{repeating_languageSpec_$#_SpecName}" placeholder="Specialization" data-i18n-placeholder="specialization" />
	    						    </fieldset>
	    						</div>
	                        </div>
	                        <!-- Notice Skill -->
	                        <input class="sheet-StaticSkill" type="checkbox" name="attr_staticNotice" style='display:none;'/>
	                        <div class='sheet-basetrait sheet-staticNotice' data-i18n-list-item="notice">
	                            <input class='sheet-deltabutton' type='hidden' name='attr_notice_delta' value='0' />
	                            <button class="sheet-skillbutton sheet-skillflexattbutton" type='roll' name='roll_tNoticeRoll' title="@{tNoticeRoll}" value='@{noticeRollValue}'> <span name="attr_noticename"></span> <span class='sheet-linkedAtt' data-i18n="sma-u">(SMA)</span></button>
	                            <input type="hidden" name="attr_noticeRollValue" value="@{whispernotice} &{template:roll} {{namelength=@{namelength}}} {{button=y}} {{ReRoll=^{reroll}(~tNoticeRoll)}} {{trait=@{noticename}}} @{rolltNotice} @{setmods} @{showtraitmods} @{unshakeTemplate}" />
	                            <div class="sheet-skillRankContainer">
	                            	<div class="sheet-skillRankChild">
                                        <input class="sheet-useAlphaNum" type="checkbox" name="attr_useAlphaNum" value="1" />
	                            		<label data-i18n-title="notice-die-type-d4" class="sheet-skilldielabel"><input type="radio" name="attr_notice" class="sheet-traitradio" value="4" checked><span class="sheet-d4"></span><div class="sheet-d4a" data-i18n="d4"></div></label>
										<label data-i18n-title="notice-die-type-d6" class="sheet-skilldielabel"><input type="radio" name="attr_notice" class="sheet-traitradio" value="6"><span class="sheet-d6"></span><div class="sheet-d6a" data-i18n="d6"></div></label>
										<label data-i18n-title="notice-die-type-d8" class="sheet-skilldielabel"><input type="radio" name="attr_notice" class="sheet-traitradio" value="8"><span class="sheet-d8"></span><div class="sheet-d8a" data-i18n="d8"></div></label>
										<label data-i18n-title="notice-die-type-d10" class="sheet-skilldielabel"><input type="radio" name="attr_notice" class="sheet-traitradio" value="10"><span class="sheet-d10"></span><div class="sheet-d10a" data-i18n="d10"></div></label>
										<label data-i18n-title="notice-die-type-d12" class="sheet-skilldielabel"><input type="radio" name="attr_notice" class="sheet-traitradio" value="12"><span class="sheet-d12"></span><div class="sheet-d12a" data-i18n="d12"></div></label>
										<input type="hidden" class="sheet-traitradio" name="attr_notice" value="4" />
										<div class="sheet-d4Selected"><span class="sheet-d4"></span><div class="sheet-d4a" data-i18n="d4"></div></div>
		                            	<div class="sheet-d6Selected"><span class="sheet-d6"></span><div class="sheet-d6a" data-i18n="d6"></div></div>
		                            	<div class="sheet-d8Selected"><span class="sheet-d8"></span><div class="sheet-d8a" data-i18n="d8"></div></div>
		                            	<div class="sheet-d10Selected"><span class="sheet-d10"></span><div class="sheet-d10a" data-i18n="d10"></div></div>
		                            	<div class="sheet-d12Selected"><span class="sheet-d12"></span><div class="sheet-d12a" data-i18n="d12"></div></div>
	                            	</div>
	                            	+
	                            </div>
								<input class="sheet-otraitmod" type="number" name="attr_noticemod" title="@{NoticeMod}" value="0" />
	                            <input class='sheet-moremods' type='checkbox' name='attr_showNoticeRollMod' /><span>y</span>
	    						<div class='sheet-basetrait sheet-traitmodplus'>
	                                <input type='text' class='sheet-ModDesc' name='attr_noticeModType' placeholder='Modifier due to edges, hindrances, etc' data-i18n-placeholder="att-mod-description" />
	    						    +<input class="sheet-otraitmod" type="number" name="attr_NoticeskillMod" title="@{NoticeskillMod}" value="0" />
	                                <hr class="sheet-modsection">
	                                <input class='sheet-whispercheck' type='checkbox' value='/w gm' name='attr_whispernotice' /> <span class='sheet-ModDesc' data-i18n="whisper-roll-to-gm">Whisper roll to GM</span><br />
	                                <select name="attr_noticewilddie" title="@{noticewilddie}" class="sheet-traitdie">
	                                    <option value="4" data-i18n="d4">d4</option>
	                                    <option value="6" selected data-i18n="d6">d6</option>
	                                    <option value="8" data-i18n="d8">d8</option>
	                                    <option value="10" data-i18n="d10">d10</option>
	                                    <option value="12" data-i18n="d12">d12</option>
	                                </select>
	                                <span data-i18n='wild-die'>Wild Die</span><input type='text' class='sheet-wildDieDesc' name='attr_noticewilddieinfo' placeholder='Standard Wild Die die type' data-i18n-placeholder="no-modifying-edges" /><br />
	                                <input class='sheet-otraitmod' style='border-bottom: 1px solid black;' type='number' name='attr_notice_delta' title='@{notice_delta}' value='0' /><label class='sheet-delta' data-i18n='die-step-delta'>steps boosted/lowered from base</label><input type='hidden' name='attr_notice_base' /><input type='hidden' name='attr_noticemod_base' />
	    						</div>
	    						<input type='hidden' name='attr_notice_rank' value='1d4!' />
	    						<input type='hidden' name='attr_notice_display' value='d4' />
	    						<input type='hidden' name='attr_rolltNotice' value='{{name=@{character_name} }} {{skill_rank=@{notice_display} }} {{skill_roll=[[@{notice_rank} + @{NoticeskillMod}+ @{ModSum}[Distracted, Wounds, Fatigue] + @{traitmods}]]}} {{mook=[[1d0+@{wdNum}]]}} {{wild_die=[[ 1d@{noticewilddie}! + @{noticemod} + @{NoticeskillMod} + @{ModSum}[Distracted, Wounds, Fatigue] + @{traitmods}]]}} @{templateConditions} {{conviction=[[ [[@{conviction}]]d6! ]] }}' />
	    						<input type="checkbox" class="sheet-useSkillSpec" name="attr_altRuleSkillSpec" style="display: none;" />
	    						<div class='sheet-SkillSpec'>
	    						    <fieldset class="repeating_noticespec">
	    						        <button class="sheet-skillbutton sheet-smallskillflexattbutton sheet-specbutton" type='roll' name='roll_tNoticeSpecRoll' title="@{tNoticeSpecRoll}" value='@{noticeSpecRollValue}'></button>
	    						        <input type="hidden" name="attr_noticeSpecRollValue" value="@{whispernotice} &{template:roll} {{namelength=@{namelength}}} {{button=y}} {{ReRoll=^{reroll}(~repeating_noticespec_tNoticeSpecRoll)}} {{trait=@{noticeSpecName} }} @{rolltNotice} @{unshakeTemplate}" />
	    						        <input class="sheet-speciality" type="text" name="attr_noticeSpecName" title="@{repeating_noticeSpec_$#_SpecName}" placeholder="Specialization" data-i18n-placeholder="specialization" />
	    						    </fieldset>
	    						</div>
	                        </div>
							<!-- Occult -->
	                        <input class="sheet-StaticSkill" type="checkbox" name="attr_staticOccult" style='display:none;'/>
	                        <div class='sheet-basetrait sheet-staticOccult' data-i18n-list-item="occult">
	                            <input class='sheet-deltabutton' type='hidden' name='attr_occult_delta' value='0' />
	                            <button class="sheet-skillbutton sheet-skillflexattbutton" type='roll' name='roll_tOccultRoll' title="@{tOccultRoll}" value='@{occultRollValue}'> <span name="attr_occultname"></span> <span class='sheet-linkedAtt' data-i18n="sma-u">(SMA)</span></button>
	                            <input type="hidden" name="attr_occultRollValue" value="@{whisperoccult} &{template:roll} {{namelength=@{namelength}}} {{button=y}} {{ReRoll=^{reroll}(~tOccultRoll)}} {{trait=@{occultname}}} @{rolltOccult} @{setmods} @{showtraitmods} @{unshakeTemplate}" />
	                            <div class="sheet-skillRankContainer">
	                            	<div class="sheet-skillRankChild">
                                        <input class="sheet-useAlphaNum" type="checkbox" name="attr_useAlphaNum" value="1" />
	                            		<label data-i18n-title="occult-die-type-d4" class="sheet-skilldielabel"><input type="radio" name="attr_occult" class="sheet-traitradio" value="4" checked><span class="sheet-d4"></span><div class="sheet-d4a" data-i18n="d4"></div></label>
										<label data-i18n-title="occult-die-type-d6" class="sheet-skilldielabel"><input type="radio" name="attr_occult" class="sheet-traitradio" value="6"><span class="sheet-d6"></span><div class="sheet-d6a" data-i18n="d6"></div></label>
										<label data-i18n-title="occult-die-type-d8" class="sheet-skilldielabel"><input type="radio" name="attr_occult" class="sheet-traitradio" value="8"><span class="sheet-d8"></span><div class="sheet-d8a" data-i18n="d8"></div></label>
										<label data-i18n-title="occult-die-type-d10" class="sheet-skilldielabel"><input type="radio" name="attr_occult" class="sheet-traitradio" value="10"><span class="sheet-d10"></span><div class="sheet-d10a" data-i18n="d10"></div></label>
										<label data-i18n-title="occult-die-type-d12" class="sheet-skilldielabel"><input type="radio" name="attr_occult" class="sheet-traitradio" value="12"><span class="sheet-d12"></span><div class="sheet-d12a" data-i18n="d12"></div></label>
										<input type="hidden" class="sheet-traitradio" name="attr_occult" value="4" />
										<div class="sheet-d4Selected"><span class="sheet-d4"></span><div class="sheet-d4a" data-i18n="d4"></div></div>
		                            	<div class="sheet-d6Selected"><span class="sheet-d6"></span><div class="sheet-d6a" data-i18n="d6"></div></div>
		                            	<div class="sheet-d8Selected"><span class="sheet-d8"></span><div class="sheet-d8a" data-i18n="d8"></div></div>
		                            	<div class="sheet-d10Selected"><span class="sheet-d10"></span><div class="sheet-d10a" data-i18n="d10"></div></div>
		                            	<div class="sheet-d12Selected"><span class="sheet-d12"></span><div class="sheet-d12a" data-i18n="d12"></div></div>
	                            	</div>
	                            	+
	                            </div>
								<input class="sheet-otraitmod" type="number" name="attr_occultmod" title="@{occultmod}" value="0" />
	                            <input class='sheet-moremods' type='checkbox' name='attr_showOccultRollMod' /><span>y</span>
	    						<div class='sheet-basetrait sheet-traitmodplus'>
	                                <input type='text' class='sheet-ModDesc' name='attr_occultModType' placeholder='Modifier due to edges, hindrances, etc' data-i18n-placeholder="att-mod-description" />
	    						    +<input class="sheet-otraitmod" type="number" name="attr_OccultskillMod" title="@{OccultskillMod}" value="0" />
	                                <hr class="sheet-modsection">
	                                <input class='sheet-whispercheck' type='checkbox' value='/w gm' name='attr_whisperoccult' /> <span class='sheet-ModDesc' data-i18n="whisper-roll-to-gm">Whisper roll to GM</span><br />
	                                <select name="attr_occultwilddie" title="@{occultwilddie}" class="sheet-traitdie">
	                                    <option value="4" data-i18n="d4">d4</option>
	                                    <option value="6" selected data-i18n="d6">d6</option>
	                                    <option value="8" data-i18n="d8">d8</option>
	                                    <option value="10" data-i18n="d10">d10</option>
	                                    <option value="12" data-i18n="d12">d12</option>
	                                </select>
	                                <span data-i18n='wild-die'>Wild Die</span><input type='text' class='sheet-wildDieDesc' name='attr_occultwilddieinfo' placeholder='Standard Wild Die die type' data-i18n-placeholder="no-modifying-edges" /><br />
	                                <input class='sheet-otraitmod' style='border-bottom: 1px solid black;' type='number' name='attr_occult_delta' title='@{occult_delta}' value='0' /><label class='sheet-delta' data-i18n='die-step-delta'>steps boosted/lowered from base</label><input type='hidden' name='attr_occult_base' /><input type='hidden' name='attr_occultmod_base' />
	    						</div>
	    						<input type='hidden' name='attr_occult_rank' value='1d4!' />
	    						<input type='hidden' name='attr_occult_display' value='d4' />
	    						<input type='hidden' name='attr_rolltOccult' value='{{name=@{character_name} }} {{skill_rank=@{occult_display} }} {{skill_roll=[[@{occult_rank} + @{OccultskillMod}+ @{ModSum}[Distracted, Wounds, Fatigue] + @{traitmods}]]}} {{mook=[[1d0+@{wdNum}]]}} {{wild_die=[[ 1d@{occultwilddie}! + @{occultmod} + @{OccultskillMod} + @{ModSum}[Distracted, Wounds, Fatigue] + @{traitmods}]]}} @{templateConditions} {{conviction=[[ [[@{conviction}]]d6! ]] }}' />
	    						<input type="checkbox" class="sheet-useSkillSpec" name="attr_altRuleSkillSpec" style="display: none;" />
	    						<div class='sheet-SkillSpec'>
	    						    <fieldset class="repeating_occultspec">
	    						        <button class="sheet-skillbutton sheet-smallskillflexattbutton sheet-specbutton" type='roll' name='roll_tOccultSpecRoll' title="@{tOccultSpecRoll}" value='@{occultSpecRollValue}'></button>
	    						        <input type="hidden" name="attr_occultSpecRollValue" value="@{whisperoccult} &{template:roll} {{namelength=@{namelength}}} {{button=y}} {{ReRoll=^{reroll}(~repeating_occultspec_tOccultSpecRoll)}} {{trait=@{occultSpecName} }} @{rolltOccult} @{unshakeTemplate}" />
	    						        <input class="sheet-speciality" type="text" name="attr_occultSpecName" title="@{repeating_occultSpec_$#_SpecName}" placeholder="Specialization" data-i18n-placeholder="specialization" />
	    						    </fieldset>
	    						</div>
	                        </div>
							<!-- Performance -->
	                        <input class="sheet-StaticSkill" type="checkbox" name="attr_staticPerformance" style='display:none;'/>
	                        <div class='sheet-basetrait sheet-staticPerformance' data-i18n-list-item="performance">
	                            <input class='sheet-deltabutton' type='hidden' name='attr_performance_delta' value='0' />
	                            <button class="sheet-skillbutton sheet-skillflexattbutton" type='roll' name='roll_tPerformanceRoll' title="@{tPerformanceRoll}" value='@{performanceRollValue}'> <span name="attr_performancename"></span> <span class='sheet-linkedAtt' data-i18n="spi-u">(SPI)</span></button>
	                            <input type="hidden" name="attr_performanceRollValue" value="@{whisperperformance} &{template:roll} {{namelength=@{namelength}}} {{button=y}} {{ReRoll=^{reroll}(~tPerformanceRoll)}} {{trait=@{performancename}}} @{rolltPerformance} @{setmods} @{showtraitmods} @{unshakeTemplate}" />
	                            <div class="sheet-skillRankContainer">
	                            	<div class="sheet-skillRankChild">
                                        <input class="sheet-useAlphaNum" type="checkbox" name="attr_useAlphaNum" value="1" />
	                            		<label data-i18n-title="performance-die-type-d4" class="sheet-skilldielabel"><input type="radio" name="attr_performance" class="sheet-traitradio" value="4" checked><span class="sheet-d4"></span><div class="sheet-d4a" data-i18n="d4"></div></label>
										<label data-i18n-title="performance-die-type-d6" class="sheet-skilldielabel"><input type="radio" name="attr_performance" class="sheet-traitradio" value="6"><span class="sheet-d6"></span><div class="sheet-d6a" data-i18n="d6"></div></label>
										<label data-i18n-title="performance-die-type-d8" class="sheet-skilldielabel"><input type="radio" name="attr_performance" class="sheet-traitradio" value="8"><span class="sheet-d8"></span><div class="sheet-d8a" data-i18n="d8"></div></label>
										<label data-i18n-title="performance-die-type-d10" class="sheet-skilldielabel"><input type="radio" name="attr_performance" class="sheet-traitradio" value="10"><span class="sheet-d10"></span><div class="sheet-d10a" data-i18n="d10"></div></label>
										<label data-i18n-title="performance-die-type-d12" class="sheet-skilldielabel"><input type="radio" name="attr_performance" class="sheet-traitradio" value="12"><span class="sheet-d12"></span><div class="sheet-d12a" data-i18n="d12"></div></label>
										<input type="hidden" class="sheet-traitradio" name="attr_performance" value="4" />
										<div class="sheet-d4Selected"><span class="sheet-d4"></span><div class="sheet-d4a" data-i18n="d4"></div></div>
		                            	<div class="sheet-d6Selected"><span class="sheet-d6"></span><div class="sheet-d6a" data-i18n="d6"></div></div>
		                            	<div class="sheet-d8Selected"><span class="sheet-d8"></span><div class="sheet-d8a" data-i18n="d8"></div></div>
		                            	<div class="sheet-d10Selected"><span class="sheet-d10"></span><div class="sheet-d10a" data-i18n="d10"></div></div>
		                            	<div class="sheet-d12Selected"><span class="sheet-d12"></span><div class="sheet-d12a" data-i18n="d12"></div></div>
	                            	</div>
	                            	+
	                            </div>
								<input class="sheet-otraitmod" type="number" name="attr_performancemod" title="@{PerformanceMod}" value="0" />
	                            <input class='sheet-moremods' type='checkbox' name='attr_showPerformanceRollMod' /><span>y</span>
	    						<div class='sheet-basetrait sheet-traitmodplus'>
	                                <input type='text' class='sheet-ModDesc' name='attr_performanceModType' placeholder='Modifier due to edges, hindrances, etc' data-i18n-placeholder="att-mod-description" />
	    						    +<input class="sheet-otraitmod" type="number" name="attr_PerformanceskillMod" title="@{PerformanceskillMod}" value="0" />
	                                <hr class="sheet-modsection">
	                                <input class='sheet-whispercheck' type='checkbox' value='/w gm' name='attr_whisperperformance' /> <span class='sheet-ModDesc' data-i18n="whisper-roll-to-gm">Whisper roll to GM</span><br />
	                                <select name="attr_performancewilddie" title="@{performancewilddie}" class="sheet-traitdie">
	                                    <option value="4" data-i18n="d4">d4</option>
	                                    <option value="6" selected data-i18n="d6">d6</option>
	                                    <option value="8" data-i18n="d8">d8</option>
	                                    <option value="10" data-i18n="d10">d10</option>
	                                    <option value="12" data-i18n="d12">d12</option>
	                                </select>
	                                <span data-i18n='wild-die'>Wild Die</span><input type='text' class='sheet-wildDieDesc' name='attr_performancewilddieinfo' placeholder='Standard Wild Die die type' data-i18n-placeholder="no-modifying-edges" /><br />
	                                <input class='sheet-otraitmod' style='border-bottom: 1px solid black;' type='number' name='attr_performance_delta' title='@{performance_delta}' value='0' /><label class='sheet-delta' data-i18n='die-step-delta'>steps boosted/lowered from base</label><input type='hidden' name='attr_performance_base' /><input type='hidden' name='attr_performancemod_base' />
	    						</div>
	    						<input type='hidden' name='attr_performance_rank' value='1d4!' />
	    						<input type='hidden' name='attr_performance_display' value='d4' />
	    						<input type='hidden' name='attr_rolltPerformance' value='{{name=@{character_name} }} {{skill_rank=@{performance_display} }} {{skill_roll=[[@{performance_rank} + @{PerformanceskillMod}+ @{ModSum}[Distracted, Wounds, Fatigue] + @{traitmods}]]}} {{mook=[[1d0+@{wdNum}]]}} {{wild_die=[[ 1d@{performancewilddie}! + @{performancemod} + @{PerformanceskillMod} + @{ModSum}[Distracted, Wounds, Fatigue] + @{traitmods}]]}} @{templateConditions} {{conviction=[[ [[@{conviction}]]d6! ]] }}' />
								<input type="hidden" name="attr_performancerollformula" value="@{performance_rank} + @{PerformanceskillMod}+ @{ModSumEnc}[Distracted, Wounds, Fatigue, Encumbrance] + @{traitmods}" />
								<input type="checkbox" class="sheet-useSkillSpec" name="attr_altRuleSkillSpec" style="display: none;" />
	    						<div class='sheet-SkillSpec'>
	    						    <fieldset class="repeating_performancespec">
	    						        <button class="sheet-skillbutton sheet-smallskillflexattbutton sheet-specbutton" type='roll' name='roll_tPerformanceSpecRoll' title="@{tPerformanceSpecRoll}" value='@{performanceSpecRollValue}'></button>
	    						        <input type="hidden" name="attr_performanceSpecRollValue" value="@{whisperperformance} &{template:roll} {{namelength=@{namelength}}} {{button=y}} {{ReRoll=^{reroll}(~tPerformanceSpecRoll)}} {{trait=@{performanceSpecName} }} @{rolltPerformance} @{unshakeTemplate}" />
	    						        <input class="sheet-speciality" type="text" name="attr_performanceSpecName" title="@{repeating_performanceSpec_$#_SpecName}" placeholder="Specialization" data-i18n-placeholder="specialization" />
	    						    </fieldset>
	    						</div>
	                        </div>
	                        <!-- Persuasion -->
	                        <input class="sheet-StaticSkill" type="checkbox" name="attr_staticPersuasion" style='display:none;'/>
	                        <div class='sheet-basetrait sheet-staticPersuasion' data-i18n-list-item="persuasion">
	                            <input class='sheet-deltabutton' type='hidden' name='attr_persuasion_delta' value='0' />
	                            <button class="sheet-skillbutton sheet-skillflexattbutton" type='roll' name='roll_tPersuasionRoll' title="@{tPersuasionRoll}" value='@{persuasionRollValue}'> <span name="attr_persuasionname"></span> <span class='sheet-linkedAtt' data-i18n="spi-u">(SPI)</span></button>
	                            <input type="hidden" name="attr_persuasionRollValue" value="@{whisperpersuasion} &{template:roll} {{namelength=@{namelength}}} {{button=y}} {{ReRoll=^{reroll}(~tPersuasionRoll)}} {{trait=@{persuasionname}}} @{rolltPersuasion} @{setmods} @{showtraitmods} @{unshakeTemplate}" />
	                            <div class="sheet-skillRankContainer">
	                            	<div class="sheet-skillRankChild">
                                        <input class="sheet-useAlphaNum" type="checkbox" name="attr_useAlphaNum" value="1" />
	                            		<label data-i18n-title="persuasion-die-type-d4" class="sheet-skilldielabel"><input type="radio" name="attr_persuasion" class="sheet-traitradio" value="4" checked><span class="sheet-d4"></span><div class="sheet-d4a" data-i18n="d4"></div></label>
										<label data-i18n-title="persuasion-die-type-d6" class="sheet-skilldielabel"><input type="radio" name="attr_persuasion" class="sheet-traitradio" value="6"><span class="sheet-d6"></span><div class="sheet-d6a" data-i18n="d6"></div></label>
										<label data-i18n-title="persuasion-die-type-d8" class="sheet-skilldielabel"><input type="radio" name="attr_persuasion" class="sheet-traitradio" value="8"><span class="sheet-d8"></span><div class="sheet-d8a" data-i18n="d8"></div></label>
										<label data-i18n-title="persuasion-die-type-d10" class="sheet-skilldielabel"><input type="radio" name="attr_persuasion" class="sheet-traitradio" value="10"><span class="sheet-d10"></span><div class="sheet-d10a" data-i18n="d10"></div></label>
										<label data-i18n-title="persuasion-die-type-d12" class="sheet-skilldielabel"><input type="radio" name="attr_persuasion" class="sheet-traitradio" value="12"><span class="sheet-d12"></span><div class="sheet-d12a" data-i18n="d12"></div></label>
										<input type="hidden" class="sheet-traitradio" name="attr_persuasion" value="4" />
										<div class="sheet-d4Selected"><span class="sheet-d4"></span><div class="sheet-d4a" data-i18n="d4"></div></div>
		                            	<div class="sheet-d6Selected"><span class="sheet-d6"></span><div class="sheet-d6a" data-i18n="d6"></div></div>
		                            	<div class="sheet-d8Selected"><span class="sheet-d8"></span><div class="sheet-d8a" data-i18n="d8"></div></div>
		                            	<div class="sheet-d10Selected"><span class="sheet-d10"></span><div class="sheet-d10a" data-i18n="d10"></div></div>
		                            	<div class="sheet-d12Selected"><span class="sheet-d12"></span><div class="sheet-d12a" data-i18n="d12"></div></div>
	                            	</div>
	                            	+
	                            </div>
								<input class="sheet-otraitmod" type="number" name="attr_persuasionmod" title="@{PersuasionMod}" value="0" />
	                            <input class='sheet-moremods' type='checkbox' name='attr_showPersuasionRollMod' /><span>y</span>
	    						<div class='sheet-basetrait sheet-traitmodplus'>
	                                <input type='text' class='sheet-ModDesc' name='attr_persuasionModType' placeholder='Modifier due to edges, hindrances, etc' data-i18n-placeholder="att-mod-description" />
	    						    +<input class="sheet-otraitmod" type="number" name="attr_PersuasionskillMod" title="@{PersuasionskillMod}" value="0" />
	                                <hr class="sheet-modsection">
	                                <input class='sheet-whispercheck' type='checkbox' value='/w gm' name='attr_whisperpersuasion' /> <span class='sheet-ModDesc' data-i18n="whisper-roll-to-gm">Whisper roll to GM</span><br />
	                                <select name="attr_persuasionwilddie" title="@{persuasionwilddie}" class="sheet-traitdie">
	                                    <option value="4" data-i18n="d4">d4</option>
	                                    <option value="6" selected data-i18n="d6">d6</option>
	                                    <option value="8" data-i18n="d8">d8</option>
	                                    <option value="10" data-i18n="d10">d10</option>
	                                    <option value="12" data-i18n="d12">d12</option>
	                                </select>
	                                <span data-i18n='wild-die'>Wild Die</span><input type='text' class='sheet-wildDieDesc' name='attr_persuasionwilddieinfo' placeholder='Standard Wild Die die type' data-i18n-placeholder="no-modifying-edges" /><br />
	                                <input class='sheet-otraitmod' style='border-bottom: 1px solid black;' type='number' name='attr_persuasion_delta' title='@{persuasion_delta}' value='0' /><label class='sheet-delta' data-i18n='die-step-delta'>steps boosted/lowered from base</label><input type='hidden' name='attr_persuasion_base' /><input type='hidden' name='attr_persuasionmod_base' />
	    						</div>
	    						<input type='hidden' name='attr_persuasion_rank' value='1d4!' />
	    						<input type='hidden' name='attr_persuasion_display' value='d4' />
	    						<input type='hidden' name='attr_rolltPersuasion' value='{{name=@{character_name} }} {{skill_rank=@{persuasion_display} }} {{skill_roll=[[@{persuasion_rank} + @{PersuasionskillMod}+ @{ModSum}[Distracted, Wounds, Fatigue] + @{traitmods}]]}} {{mook=[[1d0+@{wdNum}]]}} {{wild_die=[[ 1d@{persuasionwilddie}! + @{persuasionmod} + @{PersuasionskillMod} + @{ModSum}[Distracted, Wounds, Fatigue] + @{traitmods}]]}} @{templateConditions} {{conviction=[[ [[@{conviction}]]d6! ]] }}' />
	    						<input type="checkbox" class="sheet-useSkillSpec" name="attr_altRuleSkillSpec" style="display: none;" />
	    						<div class='sheet-SkillSpec'>
	    						    <fieldset class="repeating_persuasionspec">
	    						        <button class="sheet-skillbutton sheet-smallskillflexattbutton sheet-specbutton" type='roll' name='roll_tPersuasionSpecRoll' title="@{tPersuasionSpecRoll}" value='@{persuasionSpecRollValue}'></button>
	    						       <input type="hidden" name="attr_persuasionSpecRollValue" value="@{whisperpersuasion} &{template:roll} {{namelength=@{namelength}}} {{button=y}} {{ReRoll=^{reroll}(~repeating_persuasionspec_tPersuasionSpecRoll)}} {{trait=@{persuasionSpecName} }} @{rolltPersuasion} @{unshakeTemplate}" />
	    						       <input class="sheet-speciality" type="text" name="attr_persuasionSpecName" title="@{repeating_persuasionSpec_$#_SpecName}" placeholder="Specialization" data-i18n-placeholder="specialization" />
	    						    </fieldset>
	    						</div>
	                        </div>
	                        <!-- Piloting Skill -->
	                        <input class="sheet-StaticSkill" type="checkbox" name="attr_staticPiloting" style='display:none;'/>
	                        <div class='sheet-basetrait sheet-staticPiloting' data-i18n-list-item="piloting">
	                            <input class='sheet-deltabutton' type='hidden' name='attr_piloting_delta' value='0' />
	                            <button class="sheet-skillbutton sheet-skillflexattbutton" type='roll' name='roll_tPilotingRoll' title="@{tPilotingRoll}" value='@{pilotingRollValue}'> <span name="attr_pilotingname"></span> <span class='sheet-linkedAtt' data-i18n="agl-u">(AGL)</span></button>
	                            <input type="hidden" name="attr_pilotingRollValue" value="@{whisperpiloting} &{template:roll} {{namelength=@{namelength}}} {{button=y}} {{ReRoll=^{reroll}(~tPilotingRoll)}} {{trait=@{pilotingname}}} @{rolltPiloting} @{setmodsenc} @{showtraitmods} @{unshakeTemplate}" />
	                            <div class="sheet-skillRankContainer">
	                            	<div class="sheet-skillRankChild">
                                        <input class="sheet-useAlphaNum" type="checkbox" name="attr_useAlphaNum" value="1" />
	                            		<label data-i18n-title="piloting-die-type-d4" class="sheet-skilldielabel"><input type="radio" name="attr_piloting" class="sheet-traitradio" value="4" checked><span class="sheet-d4"></span><div class="sheet-d4a" data-i18n="d4"></div></label>
										<label data-i18n-title="piloting-die-type-d6" class="sheet-skilldielabel"><input type="radio" name="attr_piloting" class="sheet-traitradio" value="6"><span class="sheet-d6"></span><div class="sheet-d6a" data-i18n="d6"></div></label>
										<label data-i18n-title="piloting-die-type-d8" class="sheet-skilldielabel"><input type="radio" name="attr_piloting" class="sheet-traitradio" value="8"><span class="sheet-d8"></span><div class="sheet-d8a" data-i18n="d8"></div></label>
										<label data-i18n-title="piloting-die-type-d10" class="sheet-skilldielabel"><input type="radio" name="attr_piloting" class="sheet-traitradio" value="10"><span class="sheet-d10"></span><div class="sheet-d10a" data-i18n="d10"></div></label>
										<label data-i18n-title="piloting-die-type-d12" class="sheet-skilldielabel"><input type="radio" name="attr_piloting" class="sheet-traitradio" value="12"><span class="sheet-d12"></span><div class="sheet-d12a" data-i18n="d12"></div></label>
										<input type="hidden" class="sheet-traitradio" name="attr_piloting" value="4" />
										<div class="sheet-d4Selected"><span class="sheet-d4"></span><div class="sheet-d4a" data-i18n="d4"></div></div>
		                            	<div class="sheet-d6Selected"><span class="sheet-d6"></span><div class="sheet-d6a" data-i18n="d6"></div></div>
		                            	<div class="sheet-d8Selected"><span class="sheet-d8"></span><div class="sheet-d8a" data-i18n="d8"></div></div>
		                            	<div class="sheet-d10Selected"><span class="sheet-d10"></span><div class="sheet-d10a" data-i18n="d10"></div></div>
		                            	<div class="sheet-d12Selected"><span class="sheet-d12"></span><div class="sheet-d12a" data-i18n="d12"></div></div>
	                            	</div>
	                            	+
	                            </div>
								<input class="sheet-otraitmod" type="number" name="attr_pilotingmod" title="@{PilotingMod}" value="0" />
	                            <input class='sheet-moremods' type='checkbox' name='attr_showPilotingRollMod' /><span>y</span>
	    						<div class='sheet-basetrait sheet-traitmodplus'>
	                                <input type='text' class='sheet-ModDesc' name='attr_pilotingModType' placeholder='Modifier due to edges, hindrances, etc' data-i18n-placeholder="att-mod-description" />
	    						    +<input class="sheet-otraitmod" type="number" name="attr_PilotingskillMod" title="@{PilotingskillMod}" value="0" />
	                                <hr class="sheet-modsection">
	                                <input class='sheet-whispercheck' type='checkbox' value='/w gm' name='attr_whisperpiloting' /> <span class='sheet-ModDesc' data-i18n="whisper-roll-to-gm">Whisper roll to GM</span><br />
	                                <select name="attr_pilotingwilddie" title="@{pilotingwilddie}" class="sheet-traitdie">
	                                    <option value="4" data-i18n="d4">d4</option>
	                                    <option value="6" selected data-i18n="d6">d6</option>
	                                    <option value="8" data-i18n="d8">d8</option>
	                                    <option value="10" data-i18n="d10">d10</option>
	                                    <option value="12" data-i18n="d12">d12</option>
	                                </select>
	                                <span data-i18n='wild-die'>Wild Die</span><input type='text' class='sheet-wildDieDesc' name='attr_pilotingwilddieinfo' placeholder='Standard Wild Die die type' data-i18n-placeholder="no-modifying-edges" /><br />
	                                <input class='sheet-otraitmod' style='border-bottom: 1px solid black;' type='number' name='attr_piloting_delta' title='@{piloting_delta}' value='0' /><label class='sheet-delta' data-i18n='die-step-delta'>steps boosted/lowered from base</label><input type='hidden' name='attr_piloting_base' /><input type='hidden' name='attr_pilotingmod_base' />
	    						</div>
	    						<input type='hidden' name='attr_piloting_rank' value='1d4!' />
	    						<input type='hidden' name='attr_piloting_display' value='d4' />
	    						<input type='hidden' name='attr_rolltPiloting' value='{{name=@{character_name} }} {{skill_rank=@{piloting_display} }} {{skill_roll=[[@{piloting_rank} + @{PilotingskillMod}+ @{ModSumEnc}[Distracted, Wounds, Fatigue, Encumbrance] + @{traitmods}]]}} {{mook=[[1d0+@{wdNum}]]}} {{wild_die=[[ 1d@{pilotingwilddie}! + @{pilotingmod} + @{PilotingskillMod} + @{ModSumEnc}[Distracted, Wounds, Fatigue, Encumbrance] + @{traitmods}]]}} @{templateConditions} {{conviction=[[ [[@{conviction}]]d6! ]] }}' />
	    						<input type="checkbox" class="sheet-useSkillSpec" name="attr_altRuleSkillSpec" style="display: none;" />
	    						<div class='sheet-SkillSpec'>
	    						    <fieldset class="repeating_pilotingspec">
	    						        <button class="sheet-skillbutton sheet-smallskillflexattbutton sheet-specbutton" type='roll' name='roll_tPilotingSpecRoll' title="@{tPilotingSpecRoll}" value='@{pilotingSpecRollValue}'></button>
	    						        <input type="hidden" name="attr_pilotingSpecRollValue" value="@{whisperpiloting} &{template:roll} {{namelength=@{namelength}}} {{button=y}} {{ReRoll=^{reroll}(~repeating_pilotingspec_tPilotingSpecRoll)}} {{trait=@{pilotingSpecName} }} @{rolltPiloting} @{unshakeTemplate}" />
	    						        <input class="sheet-speciality" type="text" name="attr_pilotingSpecName" title="@{repeating_pilotingSpec_$#_SpecName}" placeholder="Specialization" data-i18n-placeholder="specialization" />
	    						    </fieldset>
	    						</div>
	                        </div>
	                        <!-- Psionics Skill -->
	                        <input class="sheet-StaticSkill" type="checkbox" name="attr_staticPsionics" style='display:none;'/>
	                        <div class='sheet-basetrait sheet-staticPsionics' data-i18n-list-item="psionics">
	                            <input class='sheet-deltabutton' type='hidden' name='attr_psionics_delta' value='0' />
	                            <button class="sheet-skillbutton sheet-skillflexattbutton" type='roll' name='roll_tPsionicsRoll' title="@{tPsionicsRoll}" value='@{psionicsRollValue}'> <span name="attr_psionicsname"></span> <span class='sheet-linkedAttSpan' name="attr_linkedpsionicsatt" data-i18n-dynamic></span></button>
	                            <input type="hidden" name="attr_psionicsRollValue" value="@{whisperpsionics} &{template:roll} {{namelength=@{namelength}}} {{button=y}} {{ReRoll=^{reroll}(~tPsionicsRoll)}} {{trait=@{psionicsname}}} @{rolltPsionics} @{linkedpsionicsattbutton} @{showtraitmods} @{unshakeTemplate}" />
	                            <div class="sheet-skillRankContainer">
	                            	<div class="sheet-skillRankChild">
                                        <input class="sheet-useAlphaNum" type="checkbox" name="attr_useAlphaNum" value="1" />
	                            		<label data-i18n-title="psionics-die-type-d4" class="sheet-skilldielabel"><input type="radio" name="attr_psionics" class="sheet-traitradio" value="4" checked><span class="sheet-d4"></span><div class="sheet-d4a" data-i18n="d4"></div></label>
										<label data-i18n-title="psionics-die-type-d6" class="sheet-skilldielabel"><input type="radio" name="attr_psionics" class="sheet-traitradio" value="6"><span class="sheet-d6"></span><div class="sheet-d6a" data-i18n="d6"></div></label>
										<label data-i18n-title="psionics-die-type-d8" class="sheet-skilldielabel"><input type="radio" name="attr_psionics" class="sheet-traitradio" value="8"><span class="sheet-d8"></span><div class="sheet-d8a" data-i18n="d8"></div></label>
										<label data-i18n-title="psionics-die-type-d10" class="sheet-skilldielabel"><input type="radio" name="attr_psionics" class="sheet-traitradio" value="10"><span class="sheet-d10"></span><div class="sheet-d10a" data-i18n="d10"></div></label>
										<label data-i18n-title="psionics-die-type-d12" class="sheet-skilldielabel"><input type="radio" name="attr_psionics" class="sheet-traitradio" value="12"><span class="sheet-d12"></span><div class="sheet-d12a" data-i18n="d12"></div></label>
										<input type="hidden" class="sheet-traitradio" name="attr_psionics" value="4" />
										<div class="sheet-d4Selected"><span class="sheet-d4"></span><div class="sheet-d4a" data-i18n="d4"></div></div>
		                            	<div class="sheet-d6Selected"><span class="sheet-d6"></span><div class="sheet-d6a" data-i18n="d6"></div></div>
		                            	<div class="sheet-d8Selected"><span class="sheet-d8"></span><div class="sheet-d8a" data-i18n="d8"></div></div>
		                            	<div class="sheet-d10Selected"><span class="sheet-d10"></span><div class="sheet-d10a" data-i18n="d10"></div></div>
		                            	<div class="sheet-d12Selected"><span class="sheet-d12"></span><div class="sheet-d12a" data-i18n="d12"></div></div>
	                            	</div>
	                            	+
	                            </div>
								<input class="sheet-otraitmod" type="number" name="attr_psionicsmod" title="@{PsionicsMod}" value="0" />
	                            <input class='sheet-moremods' type='checkbox' name='attr_showPsionicsRollMod' /><span>y</span>
	    						<div class='sheet-basetrait sheet-traitmodplus'>
	    						    <input type='text' class='sheet-ModDesc' name='attr_psionicsModType' placeholder='Modifier due to edges, hindrances, etc' data-i18n-placeholder="att-mod-description" />
	    						    +<input class="sheet-otraitmod" type="number" name="attr_PsionicsskillMod" title="@{PsionicsskillMod}" value="0" />
	    						    <span class="sheet-ModDesc" data-i18n="linked-attribute">Linked Attribute</span>
	    						    <select class="sheet-LinkedAttSelect" name="attr_linkedpsionicsatt">
	    						        <!-- <option value="agl-u" data-i18n="agility">Agility</option> -->
										<option value="sma-u" data-i18n="smarts" selected >Smarts</option>
										<option value="spi-u" data-i18n="spirit">Spirit</option>
										<!-- <option value="str-u" data-i18n="strength">Strength</option>
										<option value="vig-u" data-i18n="vigor">Vigor</option> -->
	    						    </select>
	    						    <input type='hidden' name='attr_linkedpsionicsattbutton' value="@{setmods}" />
	    						    <input type='hidden' name='attr_linkedpsionicsattformula' value="@{ModSum}[Distracted, Wounds, Fatigue]" />
	                                <hr class="sheet-modsection">
	                                <input class='sheet-whispercheck' type='checkbox' value='/w gm' name='attr_whisperpsionics' /> <span class='sheet-ModDesc' data-i18n="whisper-roll-to-gm">Whisper roll to GM</span><br />
	                                <select name="attr_psionicswilddie" title="@{psionicswilddie}" class="sheet-traitdie">
	                                    <option value="4" data-i18n="d4">d4</option>
	                                    <option value="6" selected data-i18n="d6">d6</option>
	                                    <option value="8" data-i18n="d8">d8</option>
	                                    <option value="10" data-i18n="d10">d10</option>
	                                    <option value="12" data-i18n="d12">d12</option>
	                                </select>
	                                <span data-i18n='wild-die'>Wild Die</span><input type='text' class='sheet-wildDieDesc' name='attr_psionicswilddieinfo' placeholder='Standard Wild Die die type' data-i18n-placeholder="no-modifying-edges" /><br />
	                                <input class='sheet-otraitmod' style='border-bottom: 1px solid black;' type='number' name='attr_psionics_delta' title='@{psionics_delta}' value='0' /><label class='sheet-delta' data-i18n='die-step-delta'>steps boosted/lowered from base</label><input type='hidden' name='attr_psionics_base' /><input type='hidden' name='attr_psionicsmod_base' />
	    						</div>
	    						<input type='hidden' name='attr_psionics_rank' value='1d4!' />
	    						<input type='hidden' name='attr_psionics_display' value='d4' />
	    						<input type='hidden' name='attr_rolltPsionics' value='{{name=@{character_name} }} {{skill_rank=@{psionics_display} }} {{skill_roll=[[@{psionics_rank} + @{PsionicsskillMod}+ @{linkedpsionicsattformula} + @{traitmods}]]}} {{mook=[[1d0+@{wdNum}]]}} {{wild_die=[[ 1d@{psionicswilddie}! + @{psionicsmod} + @{PsionicsskillMod} + @{linkedpsionicsattformula} + @{traitmods}]]}} @{templateConditions} {{conviction=[[ [[@{conviction}]]d6! ]] }}' />
								<input type="hidden" name="attr_psionicsrollformula" value="@{psionics_rank} + @{PsionicsskillMod}+ @{linkedpsionicsattformula} + @{traitmods}" />
	    						<input type="checkbox" class="sheet-useSkillSpec" name="attr_altRuleSkillSpec" style="display: none;" />
	    						<div class='sheet-SkillSpec'>
	    						    <fieldset class="repeating_psionicsspec">
	    						        <button class="sheet-skillbutton sheet-smallskillflexattbutton sheet-specbutton" type='roll' name='roll_tPsionicsSpecRoll' title="@{tPsionicsSpecRoll}" value='@{psionicsSpecRollValue}'></button>
	    						        <input type="hidden" name="attr_psionicsSpecRollValue" value="@{whisperpsionics} &{template:roll} {{namelength=@{namelength}}} {{button=y}} {{ReRoll=^{reroll}(~repeating_psionicsspec_tPsionicsSpecRoll)}} {{trait=@{psionicsSpecName} }} @{rolltPsionics} @{unshakeTemplate}" />
	    						        <input class="sheet-speciality" type="text" name="attr_psionicsSpecName" title="@{repeating_psionicsSpec_$#_SpecName}" placeholder="Specialization" data-i18n-placeholder="specialization" />
	    						    </fieldset>
	    						</div>
	                        </div>
	                        <!-- Repair Skill -->
	                        <input class="sheet-StaticSkill" type="checkbox" name="attr_staticRepair" style='display:none;'/>
	                        <div class='sheet-basetrait sheet-staticRepair' data-i18n-list-item="repair">
	                            <input class='sheet-deltabutton' type='hidden' name='attr_repair_delta' value='0' />
	                            <button class="sheet-skillbutton sheet-skillflexattbutton" type='roll' name='roll_tRepairRoll' title="@{tRepairRoll}" value='@{repairRollValue}'> <span name="attr_repairname"></span> <span class='sheet-linkedAtt' data-i18n="sma-u">(SMA)</span></button>
	                            <input type="hidden" name="attr_repairRollValue" value="@{whisperrepair} &{template:roll} {{namelength=@{namelength}}} {{button=y}} {{ReRoll=^{reroll}(~tRepairRoll)}} {{trait=@{repairname}}} @{rolltRepair} @{setmods} @{showtraitmods} @{unshakeTemplate}" />
	                            <div class="sheet-skillRankContainer">
	                            	<div class="sheet-skillRankChild">
                                        <input class="sheet-useAlphaNum" type="checkbox" name="attr_useAlphaNum" value="1" />
	                            		<label data-i18n-title="repair-die-type-d4" class="sheet-skilldielabel"><input type="radio" name="attr_repair" class="sheet-traitradio" value="4" checked><span class="sheet-d4"></span><div class="sheet-d4a" data-i18n="d4"></div></label>
										<label data-i18n-title="repair-die-type-d6" class="sheet-skilldielabel"><input type="radio" name="attr_repair" class="sheet-traitradio" value="6"><span class="sheet-d6"></span><div class="sheet-d6a" data-i18n="d6"></div></label>
										<label data-i18n-title="repair-die-type-d8" class="sheet-skilldielabel"><input type="radio" name="attr_repair" class="sheet-traitradio" value="8"><span class="sheet-d8"></span><div class="sheet-d8a" data-i18n="d8"></div></label>
										<label data-i18n-title="repair-die-type-d10" class="sheet-skilldielabel"><input type="radio" name="attr_repair" class="sheet-traitradio" value="10"><span class="sheet-d10"></span><div class="sheet-d10a" data-i18n="d10"></div></label>
										<label data-i18n-title="repair-die-type-d12" class="sheet-skilldielabel"><input type="radio" name="attr_repair" class="sheet-traitradio" value="12"><span class="sheet-d12"></span><div class="sheet-d12a" data-i18n="d12"></div></label>
										<input type="hidden" class="sheet-traitradio" name="attr_repair" value="4" />
										<div class="sheet-d4Selected"><span class="sheet-d4"></span><div class="sheet-d4a" data-i18n="d4"></div></div>
		                            	<div class="sheet-d6Selected"><span class="sheet-d6"></span><div class="sheet-d6a" data-i18n="d6"></div></div>
		                            	<div class="sheet-d8Selected"><span class="sheet-d8"></span><div class="sheet-d8a" data-i18n="d8"></div></div>
		                            	<div class="sheet-d10Selected"><span class="sheet-d10"></span><div class="sheet-d10a" data-i18n="d10"></div></div>
		                            	<div class="sheet-d12Selected"><span class="sheet-d12"></span><div class="sheet-d12a" data-i18n="d12"></div></div>
	                            	</div>
	                            	+
	                            </div>
								<input class="sheet-otraitmod" type="number" name="attr_repairmod" title="@{RepairMod}" value="0" />
	                            <input class='sheet-moremods' type='checkbox' name='attr_showRepairRollMod' /><span>y</span>
	    						<div class='sheet-basetrait sheet-traitmodplus'>
	                                <input type='text' class='sheet-ModDesc' name='attr_repairModType' placeholder='Modifier due to edges, hindrances, etc' data-i18n-placeholder="att-mod-description" />
	    						    +<input class="sheet-otraitmod" type="number" name="attr_RepairskillMod" title="@{RepairskillMod}" value="0" />
	                                <hr class="sheet-modsection">
	                                <input class='sheet-whispercheck' type='checkbox' value='/w gm' name='attr_whisperrepair' /> <span class='sheet-ModDesc' data-i18n="whisper-roll-to-gm">Whisper roll to GM</span><br />
	                                <select name="attr_repairwilddie" title="@{repairwilddie}" class="sheet-traitdie">
	                                    <option value="4" data-i18n="d4">d4</option>
	                                    <option value="6" selected data-i18n="d6">d6</option>
	                                    <option value="8" data-i18n="d8">d8</option>
	                                    <option value="10" data-i18n="d10">d10</option>
	                                    <option value="12" data-i18n="d12">d12</option>
	                                </select>
	                                <span data-i18n='wild-die'>Wild Die</span><input type='text' class='sheet-wildDieDesc' name='attr_repairwilddieinfo' placeholder='Standard Wild Die die type' data-i18n-placeholder="no-modifying-edges" /><br />
	                                <input class='sheet-otraitmod' style='border-bottom: 1px solid black;' type='number' name='attr_repair_delta' title='@{repair_delta}' value='0' /><label class='sheet-delta' data-i18n='die-step-delta'>steps boosted/lowered from base</label><input type='hidden' name='attr_repair_base' /><input type='hidden' name='attr_repairmod_base' />
	    						</div>
	    						<input type='hidden' name='attr_repair_rank' value='1d4!' />
	    						<input type='hidden' name='attr_repair_display' value='d4' />
	    						<input type='hidden' name='attr_rolltRepair' value='{{name=@{character_name} }} {{skill_rank=@{repair_display} }} {{skill_roll=[[@{repair_rank} + @{RepairskillMod}+ @{ModSum}[Distracted, Wounds, Fatigue] + @{traitmods}]]}} {{mook=[[1d0+@{wdNum}]]}} {{wild_die=[[ 1d@{repairwilddie}! + @{repairmod} + @{RepairskillMod} + @{ModSum}[Distracted, Wounds, Fatigue] + @{traitmods}]]}} @{templateConditions} {{conviction=[[ [[@{conviction}]]d6! ]] }}' />
	    						<input type="checkbox" class="sheet-useSkillSpec" name="attr_altRuleSkillSpec" style="display: none;" />
	    						<div class='sheet-SkillSpec'>
	    						    <fieldset class="repeating_repairspec">
	    						        <button class="sheet-skillbutton sheet-smallskillflexattbutton sheet-specbutton" type='roll' name='roll_tRepairSpecRoll' title="@{tRepairSpecRoll}" value='@{repairSpecRollValue}'></button>
	    						        <input type="hidden" name="attr_repairSpecRollValue" value="@{whisperrepair} &{template:roll} {{namelength=@{namelength}}} {{button=y}} {{ReRoll=^{reroll}(~repeating_repairspec_tRepairSpecRoll)}} {{trait=@{repairSpecName} }} @{rolltRepair} @{unshakeTemplate}" />
	    						        <input class="sheet-speciality" type="text" name="attr_repairSpecName" title="@{repeating_repairSpec_$#_SpecName}" placeholder="Specialization" data-i18n-placeholder="specialization" />
	    						    </fieldset>
	    						</div>
	                        </div>
							<!-- Research -->
	                        <input class="sheet-StaticSkill" type="checkbox" name="attr_staticResearch" style='display:none;'/>
	                        <div class='sheet-basetrait sheet-staticResearch' data-i18n-list-item="research">
	                            <input class='sheet-deltabutton' type='hidden' name='attr_research_delta' value='0' />
	                            <button class="sheet-skillbutton sheet-skillflexattbutton" type='roll' name='roll_tResearchRoll' title="@{tResearchRoll}" value='@{researchRollValue}'> <span name="attr_researchname"></span> <span class='sheet-linkedAtt' data-i18n="sma-u">(SMA)</span></button>
	                            <input type="hidden" name="attr_researchRollValue" value="@{whisperresearch} &{template:roll} {{namelength=@{namelength}}} {{button=y}} {{ReRoll=^{reroll}(~tResearchRoll)}} {{trait=@{researchname}}} @{rolltResearch} @{setmods} @{showtraitmods} @{unshakeTemplate}" />
	                            <div class="sheet-skillRankContainer">
	                            	<div class="sheet-skillRankChild">
                                        <input class="sheet-useAlphaNum" type="checkbox" name="attr_useAlphaNum" value="1" />
	                            		<label data-i18n-title="research-die-type-d4" class="sheet-skilldielabel"><input type="radio" name="attr_research" class="sheet-traitradio" value="4" checked><span class="sheet-d4"></span><div class="sheet-d4a" data-i18n="d4"></div></label>
										<label data-i18n-title="research-die-type-d6" class="sheet-skilldielabel"><input type="radio" name="attr_research" class="sheet-traitradio" value="6"><span class="sheet-d6"></span><div class="sheet-d6a" data-i18n="d6"></div></label>
										<label data-i18n-title="research-die-type-d8" class="sheet-skilldielabel"><input type="radio" name="attr_research" class="sheet-traitradio" value="8"><span class="sheet-d8"></span><div class="sheet-d8a" data-i18n="d8"></div></label>
										<label data-i18n-title="research-die-type-d10" class="sheet-skilldielabel"><input type="radio" name="attr_research" class="sheet-traitradio" value="10"><span class="sheet-d10"></span><div class="sheet-d10a" data-i18n="d10"></div></label>
										<label data-i18n-title="research-die-type-d12" class="sheet-skilldielabel"><input type="radio" name="attr_research" class="sheet-traitradio" value="12"><span class="sheet-d12"></span><div class="sheet-d12a" data-i18n="d12"></div></label>
										<input type="hidden" class="sheet-traitradio" name="attr_research" value="4" />
										<div class="sheet-d4Selected"><span class="sheet-d4"></span><div class="sheet-d4a" data-i18n="d4"></div></div>
		                            	<div class="sheet-d6Selected"><span class="sheet-d6"></span><div class="sheet-d6a" data-i18n="d6"></div></div>
		                            	<div class="sheet-d8Selected"><span class="sheet-d8"></span><div class="sheet-d8a" data-i18n="d8"></div></div>
		                            	<div class="sheet-d10Selected"><span class="sheet-d10"></span><div class="sheet-d10a" data-i18n="d10"></div></div>
		                            	<div class="sheet-d12Selected"><span class="sheet-d12"></span><div class="sheet-d12a" data-i18n="d12"></div></div>
	                            	</div>
	                            	+
	                            </div>
								<input class="sheet-otraitmod" type="number" name="attr_researchmod" title="@{ResearchMod}" value="0" />
	                            <input class='sheet-moremods' type='checkbox' name='attr_showResearchRollMod' /><span>y</span>
	    						<div class='sheet-basetrait sheet-traitmodplus'>
	                                <input type='text' class='sheet-ModDesc' name='attr_researchModType' placeholder='Modifier due to edges, hindrances, etc' data-i18n-placeholder="att-mod-description" />
	    						    +<input class="sheet-otraitmod" type="number" name="attr_ResearchskillMod" title="@{ResearchskillMod}" value="0" />
	                                <hr class="sheet-modsection">
	                                <input class='sheet-whispercheck' type='checkbox' value='/w gm' name='attr_whisperresearch' /> <span class='sheet-ModDesc' data-i18n="whisper-roll-to-gm">Whisper roll to GM</span><br />
	                                <select name="attr_researchwilddie" title="@{researchwilddie}" class="sheet-traitdie">
	                                    <option value="4" data-i18n="d4">d4</option>
	                                    <option value="6" selected data-i18n="d6">d6</option>
	                                    <option value="8" data-i18n="d8">d8</option>
	                                    <option value="10" data-i18n="d10">d10</option>
	                                    <option value="12" data-i18n="d12">d12</option>
	                                </select>
	                                <span data-i18n='wild-die'>Wild Die</span><input type='text' class='sheet-wildDieDesc' name='attr_researchwilddieinfo' placeholder='Standard Wild Die die type' data-i18n-placeholder="no-modifying-edges" /><br />
	                                <input class='sheet-otraitmod' style='border-bottom: 1px solid black;' type='number' name='attr_research_delta' title='@{research_delta}' value='0' /><label class='sheet-delta' data-i18n='die-step-delta'>steps boosted/lowered from base</label><input type='hidden' name='attr_research_base' /><input type='hidden' name='attr_researchmod_base' />
	    						</div>
	    						<input type='hidden' name='attr_research_rank' value='1d4!' />
	    						<input type='hidden' name='attr_research_display' value='d4' />
	    						<input type='hidden' name='attr_rolltResearch' value='{{name=@{character_name} }} {{skill_rank=@{research_display} }} {{skill_roll=[[@{research_rank} + @{ResearchskillMod}+ @{ModSum}[Distracted, Wounds, Fatigue] + @{traitmods}]]}} {{mook=[[1d0+@{wdNum}]]}} {{wild_die=[[ 1d@{researchwilddie}! + @{researchmod} + @{ResearchskillMod} + @{ModSum}[Distracted, Wounds, Fatigue] + @{traitmods}]]}} @{templateConditions} {{conviction=[[ [[@{conviction}]]d6! ]] }}' />
	    						<input type="checkbox" class="sheet-useSkillSpec" name="attr_altRuleSkillSpec" style="display: none;" />
	    						<div class='sheet-SkillSpec'>
	    						    <fieldset class="repeating_researchspec">
	    						        <button class="sheet-skillbutton sheet-smallskillflexattbutton sheet-specbutton" type='roll' name='roll_tResearchSpecRoll' title="@{tResearchSpecRoll}" value='@{researchSpecRollValue}'></button>
	    						        <input type="hidden" name="attr_researchSpecRollValue" value="@{whisperresearch} &{template:roll} {{namelength=@{namelength}}} {{button=y}} {{ReRoll=^{reroll}(~repeating_researchspec_tResearchSpecRoll)}} {{trait=@{researchSpecName} }} @{rolltResearch} @{unshakeTemplate}" />
	    						        <input class="sheet-speciality" type="text" name="attr_researchSpecName" title="@{repeating_researchSpec_$#_SpecName}" placeholder="Specialization" data-i18n-placeholder="specialization" />
	    						    </fieldset>
	    						</div>
	                        </div>
	                        <!-- Riding (Agility) -->
	                        <input class="sheet-StaticSkill" type="checkbox" name="attr_staticRiding" style='display:none;'/>
	                        <div class='sheet-basetrait sheet-staticRiding' data-i18n-list-item="riding">
	                            <input class='sheet-deltabutton' type='hidden' name='attr_riding_delta' value='0' />
	                            <button class="sheet-skillbutton sheet-skillflexattbutton" type='roll' name='roll_tRidingRoll' title="@{tRidingRoll}" value='@{ridingRollValue}'> <span name="attr_ridingname"></span> <span class='sheet-linkedAtt' data-i18n="agl-u">(AGL)</span></button>
	                            <input type="hidden" name="attr_ridingRollValue" value="@{whisperriding} &{template:roll} {{namelength=@{namelength}}} {{button=y}} {{ReRoll=^{reroll}(~tRidingRoll)}} {{trait=@{ridingname}}} @{rolltRiding} @{setmodsenc} @{showtraitmods} @{unshakeTemplate}" />
	                            <div class="sheet-skillRankContainer">
	                            	<div class="sheet-skillRankChild">
                                        <input class="sheet-useAlphaNum" type="checkbox" name="attr_useAlphaNum" value="1" />
	                            		<label data-i18n-title="riding-die-type-d4" class="sheet-skilldielabel"><input type="radio" name="attr_riding" class="sheet-traitradio" value="4" checked><span class="sheet-d4"></span><div class="sheet-d4a" data-i18n="d4"></div></label>
										<label data-i18n-title="riding-die-type-d6" class="sheet-skilldielabel"><input type="radio" name="attr_riding" class="sheet-traitradio" value="6"><span class="sheet-d6"></span><div class="sheet-d6a" data-i18n="d6"></div></label>
										<label data-i18n-title="riding-die-type-d8" class="sheet-skilldielabel"><input type="radio" name="attr_riding" class="sheet-traitradio" value="8"><span class="sheet-d8"></span><div class="sheet-d8a" data-i18n="d8"></div></label>
										<label data-i18n-title="riding-die-type-d10" class="sheet-skilldielabel"><input type="radio" name="attr_riding" class="sheet-traitradio" value="10"><span class="sheet-d10"></span><div class="sheet-d10a" data-i18n="d10"></div></label>
										<label data-i18n-title="riding-die-type-d12" class="sheet-skilldielabel"><input type="radio" name="attr_riding" class="sheet-traitradio" value="12"><span class="sheet-d12"></span><div class="sheet-d12a" data-i18n="d12"></div></label>
										<input type="hidden" class="sheet-traitradio" name="attr_riding" value="4" />
										<div class="sheet-d4Selected"><span class="sheet-d4"></span><div class="sheet-d4a" data-i18n="d4"></div></div>
		                            	<div class="sheet-d6Selected"><span class="sheet-d6"></span><div class="sheet-d6a" data-i18n="d6"></div></div>
		                            	<div class="sheet-d8Selected"><span class="sheet-d8"></span><div class="sheet-d8a" data-i18n="d8"></div></div>
		                            	<div class="sheet-d10Selected"><span class="sheet-d10"></span><div class="sheet-d10a" data-i18n="d10"></div></div>
		                            	<div class="sheet-d12Selected"><span class="sheet-d12"></span><div class="sheet-d12a" data-i18n="d12"></div></div>
	                            	</div>
	                            	+
	                            </div>
								<input class="sheet-otraitmod" type="number" name="attr_ridingmod" title="@{RidingMod}" value="0" />
	                            <input class='sheet-moremods' type='checkbox' name='attr_showRidingRollMod' /><span>y</span>
	    						<div class='sheet-basetrait sheet-traitmodplus'>
	                                <input type='text' class='sheet-ModDesc' name='attr_ridingModType' placeholder='Modifier due to edges, hindrances, etc' data-i18n-placeholder="att-mod-description" />
	    						    +<input class="sheet-otraitmod" type="number" name="attr_RidingskillMod" title="@{RidingskillMod}" value="0" />
	                                <hr class="sheet-modsection">
	                                <input class='sheet-whispercheck' type='checkbox' value='/w gm' name='attr_whisperriding' /> <span class='sheet-ModDesc' data-i18n="whisper-roll-to-gm">Whisper roll to GM</span><br />
	                                <select name="attr_ridingwilddie" title="@{ridingwilddie}" class="sheet-traitdie">
	                                    <option value="4" data-i18n="d4">d4</option>
	                                    <option value="6" selected data-i18n="d6">d6</option>
	                                    <option value="8" data-i18n="d8">d8</option>
	                                    <option value="10" data-i18n="d10">d10</option>
	                                    <option value="12" data-i18n="d12">d12</option>
	                                </select>
	                                <span data-i18n='wild-die'>Wild Die</span><input type='text' class='sheet-wildDieDesc' name='attr_ridingwilddieinfo' placeholder='Standard Wild Die die type' data-i18n-placeholder="no-modifying-edges" /><br />
	                                <input class='sheet-otraitmod' style='border-bottom: 1px solid black;' type='number' name='attr_riding_delta' title='@{riding_delta}' value='0' /><label class='sheet-delta' data-i18n='die-step-delta'>steps boosted/lowered from base</label><input type='hidden' name='attr_riding_base' /><input type='hidden' name='attr_ridingmod_base' />
	    						</div>
	    						<input type='hidden' name='attr_riding_rank' value='1d4!' />
	    						<input type='hidden' name='attr_riding_display' value='d4' />
	    						<input type='hidden' name='attr_rolltRiding' value='{{name=@{character_name} }} {{skill_rank=@{riding_display} }} {{skill_roll=[[@{riding_rank} + @{RidingskillMod}+ @{ModSumEnc}[Distracted, Wounds, Fatigue, Encumbrance] + @{traitmods}]]}} {{mook=[[1d0+@{wdNum}]]}} {{wild_die=[[ 1d@{ridingwilddie}! + @{ridingmod} + @{RidingskillMod} + @{ModSumEnc}[Distracted, Wounds, Fatigue, Encumbrance] + @{traitmods}]]}} @{templateConditions} {{conviction=[[ [[@{conviction}]]d6! ]] }}' />
	    						<input type="checkbox" class="sheet-useSkillSpec" name="attr_altRuleSkillSpec" style="display: none;" />
	    						<div class='sheet-SkillSpec'>
	    						    <fieldset class="repeating_ridingspec">
	    						        <button class="sheet-skillbutton sheet-smallskillflexattbutton sheet-specbutton" type='roll' name='roll_tRidingSpecRoll' title="@{tRidingSpecRoll}" value='@{ridingSpecRollValue}'></button>
	    						        <input type="hidden" name="attr_ridingSpecRollValue" value="@{whisperriding} &{template:roll} {{namelength=@{namelength}}} {{button=y}} {{ReRoll=^{reroll}(~repeating_ridingspec_tRidingSpecRoll)}} {{trait=@{ridingSpecName} }} @{rolltRiding} @{unshakeTemplate}" />
	    						        <input class="sheet-speciality" type="text" name="attr_ridingSpecName" title="@{repeating_ridingSpec_$#_SpecName}" placeholder="Specialization" data-i18n-placeholder="specialization" />
	    						    </fieldset>
	    						</div>
	                        </div>
							<!-- Science -->
	                        <input class="sheet-StaticSkill" type="checkbox" name="attr_staticScience" style='display:none;'/>
	                        <div class='sheet-basetrait sheet-staticScience' data-i18n-list-item="science">
	                            <input class='sheet-deltabutton' type='hidden' name='attr_science_delta' value='0' />
	                            <button class="sheet-skillbutton sheet-skillflexattbutton" type='roll' name='roll_tScienceRoll' title="@{tScienceRoll}" value='@{scienceRollValue}'> <span name="attr_sciencename"></span> <span class='sheet-linkedAtt' data-i18n="sma-u">(SMA)</span></button>
	                            <input type="hidden" name="attr_scienceRollValue" value="@{whisperscience} &{template:roll} {{namelength=@{namelength}}} {{button=y}} {{ReRoll=^{reroll}(~tScienceRoll)}} {{trait=@{sciencename}}} @{rolltScience} @{setmods} @{showtraitmods} @{unshakeTemplate}" />
	                            <div class="sheet-skillRankContainer">
	                            	<div class="sheet-skillRankChild">
                                        <input class="sheet-useAlphaNum" type="checkbox" name="attr_useAlphaNum" value="1" />
	                            		<label data-i18n-title="science-die-type-d4" class="sheet-skilldielabel"><input type="radio" name="attr_science" class="sheet-traitradio" value="4" checked><span class="sheet-d4"></span><div class="sheet-d4a" data-i18n="d4"></div></label>
										<label data-i18n-title="science-die-type-d6" class="sheet-skilldielabel"><input type="radio" name="attr_science" class="sheet-traitradio" value="6"><span class="sheet-d6"></span><div class="sheet-d6a" data-i18n="d6"></div></label>
										<label data-i18n-title="science-die-type-d8" class="sheet-skilldielabel"><input type="radio" name="attr_science" class="sheet-traitradio" value="8"><span class="sheet-d8"></span><div class="sheet-d8a" data-i18n="d8"></div></label>
										<label data-i18n-title="science-die-type-d10" class="sheet-skilldielabel"><input type="radio" name="attr_science" class="sheet-traitradio" value="10"><span class="sheet-d10"></span><div class="sheet-d10a" data-i18n="d10"></div></label>
										<label data-i18n-title="science-die-type-d12" class="sheet-skilldielabel"><input type="radio" name="attr_science" class="sheet-traitradio" value="12"><span class="sheet-d12"></span><div class="sheet-d12a" data-i18n="d12"></div></label>
										<input type="hidden" class="sheet-traitradio" name="attr_science" value="4" />
										<div class="sheet-d4Selected"><span class="sheet-d4"></span><div class="sheet-d4a" data-i18n="d4"></div></div>
		                            	<div class="sheet-d6Selected"><span class="sheet-d6"></span><div class="sheet-d6a" data-i18n="d6"></div></div>
		                            	<div class="sheet-d8Selected"><span class="sheet-d8"></span><div class="sheet-d8a" data-i18n="d8"></div></div>
		                            	<div class="sheet-d10Selected"><span class="sheet-d10"></span><div class="sheet-d10a" data-i18n="d10"></div></div>
		                            	<div class="sheet-d12Selected"><span class="sheet-d12"></span><div class="sheet-d12a" data-i18n="d12"></div></div>
	                            	</div>
	                            	+
	                            </div>
								<input class="sheet-otraitmod" type="number" name="attr_sciencemod" title="@{ScienceMod}" value="0" />
	                            <input class='sheet-moremods' type='checkbox' name='attr_showScienceRollMod' /><span>y</span>
	    						<div class='sheet-basetrait sheet-traitmodplus'>
	                                <input type='text' class='sheet-ModDesc' name='attr_scienceModType' placeholder='Modifier due to edges, hindrances, etc' data-i18n-placeholder="att-mod-description" />
	    						    +<input class="sheet-otraitmod" type="number" name="attr_ScienceskillMod" title="@{ScienceskillMod}" value="0" />
	                                <hr class="sheet-modsection">
	                                <input class='sheet-whispercheck' type='checkbox' value='/w gm' name='attr_whisperscience' /> <span class='sheet-ModDesc' data-i18n="whisper-roll-to-gm">Whisper roll to GM</span><br />
	                                <select name="attr_sciencewilddie" title="@{sciencewilddie}" class="sheet-traitdie">
	                                    <option value="4" data-i18n="d4">d4</option>
	                                    <option value="6" selected data-i18n="d6">d6</option>
	                                    <option value="8" data-i18n="d8">d8</option>
	                                    <option value="10" data-i18n="d10">d10</option>
	                                    <option value="12" data-i18n="d12">d12</option>
	                                </select>
	                                <span data-i18n='wild-die'>Wild Die</span><input type='text' class='sheet-wildDieDesc' name='attr_sciencewilddieinfo' placeholder='Standard Wild Die die type' data-i18n-placeholder="no-modifying-edges" /><br />
	                                <input class='sheet-otraitmod' style='border-bottom: 1px solid black;' type='number' name='attr_science_delta' title='@{science_delta}' value='0' /><label class='sheet-delta' data-i18n='die-step-delta'>steps boosted/lowered from base</label><input type='hidden' name='attr_science_base' /><input type='hidden' name='attr_sciencemod_base' />
	    						</div>
	    						<input type='hidden' name='attr_science_rank' value='1d4!' />
	    						<input type='hidden' name='attr_science_display' value='d4' />
	    						<input type='hidden' name='attr_rolltScience' value='{{name=@{character_name} }} {{skill_rank=@{science_display} }} {{skill_roll=[[@{science_rank} + @{ScienceskillMod}+ @{ModSum}[Distracted, Wounds, Fatigue] + @{traitmods}]]}} {{mook=[[1d0+@{wdNum}]]}} {{wild_die=[[ 1d@{sciencewilddie}! + @{sciencemod} + @{ScienceskillMod} + @{ModSum}[Distracted, Wounds, Fatigue] + @{traitmods}]]}} @{templateConditions} {{conviction=[[ [[@{conviction}]]d6! ]] }}' />
	    						<input type="checkbox" class="sheet-useSkillSpec" name="attr_altRuleSkillSpec" style="display: none;" />
	    						<div class='sheet-SkillSpec'>
	    						    <fieldset class="repeating_sciencespec">
	    						        <button class="sheet-skillbutton sheet-smallskillflexattbutton sheet-specbutton" type='roll' name='roll_tScienceSpecRoll' title="@{tScienceSpecRoll}" value='@{scienceSpecRollValu}'></button>
	    						        <input type="hidden" name="attr_scienceSpecRollValue" value="@{whisperscience} &{template:roll} {{namelength=@{namelength}}} {{button=y}} {{ReRoll=^{reroll}(~repeating_sciencespec_tScienceSpecRoll)}} {{trait=@{scienceSpecName} }} @{rolltScience} @{unshakeTemplate}" />
	    						        <input class="sheet-speciality" type="text" name="attr_scienceSpecName" title="@{repeating_scienceSpec_$#_SpecName}" placeholder="Specialization" data-i18n-placeholder="specialization" />
	    						    </fieldset>
	    						</div>
	                        </div>
	                        <!-- Shooting SKill (Agility) -->
	                        <input class="sheet-StaticSkill" type="checkbox" name="attr_staticShooting" style='display:none;'/>
	                        <div class='sheet-basetrait sheet-staticShooting' data-i18n-list-item="shooting">
	                            <input class='sheet-deltabutton' type='hidden' name='attr_shooting_delta' value='0' />
	                            <button class="sheet-skillbutton sheet-skillflexattbutton" type='roll' name='roll_tShootingRoll' title="@{tShootingRoll}" value='@{shootingRollValue} {{skill_roll=[[ @{shootingSkillRollFormula} ]]}} {{wild_die=[[ @{shootingWildDieFormula} ]]}}'> <span name="attr_shootingname"></span> <span class='sheet-linkedAtt' data-i18n="agl-u">(AGL)</span></button>
	                            <input type="hidden" name="attr_shootingRollValue" value="@{whispershooting} &{template:roll} {{namelength=@{namelength}}} {{button=y}} {{ReRoll=^{reroll}(~tShootingRoll)}} {{trait=@{shootingname}}} @{rolltShooting} @{setmodsenc} @{showtraitmods} @{unshakeTemplate}" />
	                            <div class="sheet-skillRankContainer">
	                            	<div class="sheet-skillRankChild">
                                        <input class="sheet-useAlphaNum" type="checkbox" name="attr_useAlphaNum" value="1" />
	                            		<label data-i18n-title="shooting-die-type-d4" class="sheet-skilldielabel"><input type="radio" name="attr_shooting" class="sheet-traitradio" value="4" checked><span class="sheet-d4"></span><div class="sheet-d4a" data-i18n="d4"></div></label>
										<label data-i18n-title="shooting-die-type-d6" class="sheet-skilldielabel"><input type="radio" name="attr_shooting" class="sheet-traitradio" value="6"><span class="sheet-d6"></span><div class="sheet-d6a" data-i18n="d6"></div></label>
										<label data-i18n-title="shooting-die-type-d8" class="sheet-skilldielabel"><input type="radio" name="attr_shooting" class="sheet-traitradio" value="8"><span class="sheet-d8"></span><div class="sheet-d8a" data-i18n="d8"></div></label>
										<label data-i18n-title="shooting-die-type-d10" class="sheet-skilldielabel"><input type="radio" name="attr_shooting" class="sheet-traitradio" value="10"><span class="sheet-d10"></span><div class="sheet-d10a" data-i18n="d10"></div></label>
										<label data-i18n-title="shooting-die-type-d12" class="sheet-skilldielabel"><input type="radio" name="attr_shooting" class="sheet-traitradio" value="12"><span class="sheet-d12"></span><div class="sheet-d12a" data-i18n="d12"></div></label>
										<input type="hidden" class="sheet-traitradio" name="attr_shooting" value="4" />
										<div class="sheet-d4Selected"><span class="sheet-d4"></span><div class="sheet-d4a" data-i18n="d4"></div></div>
		                            	<div class="sheet-d6Selected"><span class="sheet-d6"></span><div class="sheet-d6a" data-i18n="d6"></div></div>
		                            	<div class="sheet-d8Selected"><span class="sheet-d8"></span><div class="sheet-d8a" data-i18n="d8"></div></div>
		                            	<div class="sheet-d10Selected"><span class="sheet-d10"></span><div class="sheet-d10a" data-i18n="d10"></div></div>
		                            	<div class="sheet-d12Selected"><span class="sheet-d12"></span><div class="sheet-d12a" data-i18n="d12"></div></div>
	                            	</div>
	                            	+
	                            </div>
								<input class="sheet-otraitmod" type="number" name="attr_shootingmod" title="@{ShootingMod}" value="0" />
	                            <input class='sheet-moremods' type='checkbox' name='attr_showShootingRollMod' /><span>y</span>
	    						<div class='sheet-basetrait sheet-traitmodplus'>
	                                <input type='text' class='sheet-ModDesc' name='attr_shootingModType' placeholder='Modifier due to edges, hindrances, etc' data-i18n-placeholder="att-mod-description" />
	    						    +<input class="sheet-otraitmod" type="number" name="attr_ShootingskillMod" title="@{ShootingskillMod}" value="0" />
	                                <hr class="sheet-modsection">
	                                <input class='sheet-whispercheck' type='checkbox' value='/w gm' name='attr_whispershooting' /> <span class='sheet-ModDesc' data-i18n="whisper-roll-to-gm">Whisper roll to GM</span><br />
	                                <select name="attr_shootingwilddie" title="@{shootingwilddie}" class="sheet-traitdie">
	                                    <option value="4" data-i18n="d4">d4</option>
	                                    <option value="6" selected data-i18n="d6">d6</option>
	                                    <option value="8" data-i18n="d8">d8</option>
	                                    <option value="10" data-i18n="d10">d10</option>
	                                    <option value="12" data-i18n="d12">d12</option>
	                                </select>
	                                <span data-i18n='wild-die'>Wild Die</span><input type='text' class='sheet-wildDieDesc' name='attr_shootingwilddieinfo' placeholder='Standard Wild Die die type' data-i18n-placeholder="no-modifying-edges" /><br />
	                                <input class='sheet-otraitmod' style='border-bottom: 1px solid black;' type='number' name='attr_shooting_delta' title='@{shooting_delta}' value='0' /><label class='sheet-delta' data-i18n='die-step-delta'>steps boosted/lowered from base</label><input type='hidden' name='attr_shooting_base' /><input type='hidden' name='attr_shootingmod_base' />
	    						</div>
	    						<input type='hidden' name='attr_shooting_rank' value='1d4!' />
	    						<input type='hidden' name='attr_shooting_display' value='d4' />
                                <input type='hidden' name='attr_shootingSkillRollFormula' value='@{shooting_rank} + @{ShootingskillMod}+ @{ModSumEnc}[Distracted, Wounds, Fatigue, Encumbrance] + @{traitmods}' />
                                <input type='hidden' name='attr_shootingWildDieFormula' value='1d@{shootingwilddie}! + @{shootingmod} + @{ShootingskillMod} + @{ModSumEnc}[Distracted, Wounds, Fatigue, Encumbrance] + @{traitmods}' />
	    						<input type='hidden' name='attr_rolltShooting' value='{{name=@{character_name} }} {{skill_rank=@{shooting_display} }} {{mook=[[1d0+@{wdNum}]]}} @{templateConditions} {{conviction=[[ [[@{conviction}]]d6! ]] }}' />
								<!--<input type="hidden" name="attr_shootingrollformula" value="@{shooting_rank} + @{ShootingskillMod}+ @{ModSumEnc}[Distracted, Wounds, Fatigue, Encumbrance] + @{traitmods}" />-->
	    						<input type="checkbox" class="sheet-useSkillSpec" name="attr_altRuleSkillSpec" style="display: none;" />
	    						<div class='sheet-SkillSpec'>
	    						    <fieldset class="repeating_shootingspec">
	    						        <button class="sheet-skillbutton sheet-smallskillflexattbutton sheet-specbutton" type='roll' name='roll_tShootingSpecRoll' title="@{tShootingSpecRoll}" value='@{shootingSpecRollValue} {{skill_roll=[[ @{shootingSkillRollFormula} ]]}} {{wild_die=[[ @{shootingWildDieFormula} ]]}}'></button>
	    						        <input type="hidden" name="attr_shootingSpecRollValue" value="@{whispershooting} &{template:roll} {{namelength=@{namelength}}} {{button=y}} {{ReRoll=^{reroll}(~repeating_shootingspec_tShootingSpecRoll)}} {{trait=@{shootingSpecName} }} @{rolltShooting} @{unshakeTemplate}" />
	    						        <input class="sheet-speciality" type="text" name="attr_shootingSpecName" title="@{repeating_shootingSpec_$#_SpecName}" placeholder="Specialization" data-i18n-placeholder="specialization" />
	    						    </fieldset>
	    						</div>
	                        </div>
	                        <!-- Spellcasting (TBD) -->
	                        <input class="sheet-StaticSkill" type="checkbox" name="attr_staticSpellcasting" style='display:none;'/>
	                        <div class='sheet-basetrait sheet-staticSpellcasting' data-i18n-list-item="spellcasting">
	                            <input class='sheet-deltabutton' type='hidden' name='attr_spellcasting_delta' value='0' />
	                            <button class="sheet-skillbutton sheet-skillflexattbutton" type='roll' name='roll_tSpellcastingRoll' title="@{tSpellcastingRoll}" value='@{spellcastingRollValue}'> <span name="attr_spellcastingname"></span> <span class='sheet-linkedAttSpan' name="attr_linkedspellcastingatt" data-i18n-dynamic></span></button>
								<input type="hidden" name="attr_spellcastingRollValue" value="@{whisperspellcasting} &{template:roll} {{namelength=@{namelength}}} {{button=y}} {{ReRoll=^{reroll}(~tSpellcastingRoll)}} {{trait=@{spellcastingname}}} @{rolltSpellcasting} @{LinkedSpellcastingAttbutton} @{showtraitmods} @{unshakeTemplate}" />
								<div class="sheet-skillRankContainer">
	                            	<div class="sheet-skillRankChild">
                                        <input class="sheet-useAlphaNum" type="checkbox" name="attr_useAlphaNum" value="1" />
	                            		<label data-i18n-title="spellcasting-die-type-d4" class="sheet-skilldielabel"><input type="radio" name="attr_spellcasting" class="sheet-traitradio" value="4" checked><span class="sheet-d4"></span><div class="sheet-d4a" data-i18n="d4"></div></label>
										<label data-i18n-title="spellcasting-die-type-d6" class="sheet-skilldielabel"><input type="radio" name="attr_spellcasting" class="sheet-traitradio" value="6"><span class="sheet-d6"></span><div class="sheet-d6a" data-i18n="d6"></div></label>
										<label data-i18n-title="spellcasting-die-type-d8" class="sheet-skilldielabel"><input type="radio" name="attr_spellcasting" class="sheet-traitradio" value="8"><span class="sheet-d8"></span><div class="sheet-d8a" data-i18n="d8"></div></label>
										<label data-i18n-title="spellcasting-die-type-d10" class="sheet-skilldielabel"><input type="radio" name="attr_spellcasting" class="sheet-traitradio" value="10"><span class="sheet-d10"></span><div class="sheet-d10a" data-i18n="d10"></div></label>
										<label data-i18n-title="spellcasting-die-type-d12" class="sheet-skilldielabel"><input type="radio" name="attr_spellcasting" class="sheet-traitradio" value="12"><span class="sheet-d12"></span><div class="sheet-d12a" data-i18n="d12"></div></label>
										<input type="hidden" class="sheet-traitradio" name="attr_spellcasting" value="4" />
										<div class="sheet-d4Selected"><span class="sheet-d4"></span><div class="sheet-d4a" data-i18n="d4"></div></div>
		                            	<div class="sheet-d6Selected"><span class="sheet-d6"></span><div class="sheet-d6a" data-i18n="d6"></div></div>
		                            	<div class="sheet-d8Selected"><span class="sheet-d8"></span><div class="sheet-d8a" data-i18n="d8"></div></div>
		                            	<div class="sheet-d10Selected"><span class="sheet-d10"></span><div class="sheet-d10a" data-i18n="d10"></div></div>
		                            	<div class="sheet-d12Selected"><span class="sheet-d12"></span><div class="sheet-d12a" data-i18n="d12"></div></div>
	                            	</div>
	                            	+
	                            </div>
								<input class="sheet-otraitmod" type="number" name="attr_spellcastingmod" title="@{SpellcastingMod}" value="0" />
	                            <input class='sheet-moremods' type='checkbox' name='attr_showSpellcastingRollMod' /><span>y</span>
	    						<div class='sheet-basetrait sheet-traitmodplus'>
	    						    <input type='text' class='sheet-ModDesc' name='attr_spellcastingModType' placeholder='Modifier due to edges, hindrances, etc' data-i18n-placeholder="att-mod-description" />
	    						    +<input class="sheet-otraitmod" type="number" name="attr_SpellcastingskillMod" title="@{SpellcastingskillMod}" value="0" />
	    						    <span class="sheet-ModDesc" data-i18n="linked-attribute">Linked Attribute</span>
	    						    <select class="sheet-LinkedAttSelect" name="attr_LinkedSpellcastingAtt">
	    						        <option value="agl-u" data-i18n="agility">Agility</option>
										<option value="sma-u" selected data-i18n="smarts">Smarts</option>
										<option value="spi-u" data-i18n="spirit">Spirit</option>
										<option value="str-u" data-i18n="strength">Strength</option>
										<option value="vig-u" data-i18n="vigor">Vigor</option>
	    						    </select>
	    						    <input type='hidden' name='attr_LinkedSpellcastingAttbutton' value="@{setmods}" />
	    						    <input type='hidden' name='attr_LinkedSpellcastingAttformula' value="@{ModSum}[Distracted, Wounds, Fatigue]" />
	                                <hr class="sheet-modsection">
	                                <input class='sheet-whispercheck' type='checkbox' value='/w gm' name='attr_whisperspellcasting' /> <span class='sheet-ModDesc' data-i18n="whisper-roll-to-gm">Whisper roll to GM</span><br />
	                                <select name="attr_spellcastingwilddie" title="@{spellcastingwilddie}" class="sheet-traitdie">
	                                    <option value="4" data-i18n="d4">d4</option>
	                                    <option value="6" selected data-i18n="d6">d6</option>
	                                    <option value="8" data-i18n="d8">d8</option>
	                                    <option value="10" data-i18n="d10">d10</option>
	                                    <option value="12" data-i18n="d12">d12</option>
	                                </select>
	                                <span data-i18n='wild-die'>Wild Die</span><input type='text' class='sheet-wildDieDesc' name='attr_spellcastingwilddieinfo' placeholder='Standard Wild Die die type' data-i18n-placeholder="no-modifying-edges" /><br />
	                                <input class='sheet-otraitmod' style='border-bottom: 1px solid black;' type='number' name='attr_spellcasting_delta' title='@{spellcasting_delta}' value='0' /><label class='sheet-delta' data-i18n='die-step-delta'>steps boosted/lowered from base</label><input type='hidden' name='attr_spellcasting_base' /><input type='hidden' name='attr_spellcastingmod_base' />
	    						</div>
	    						<input type='hidden' name='attr_spellcasting_rank' value='1d4!' />
	    						<input type='hidden' name='attr_spellcasting_display' value='d4' />
	    						<input type='hidden' name='attr_rolltSpellcasting' value='{{name=@{character_name} }} {{skill_rank=@{spellcasting_display} }} {{skill_roll=[[@{spellcasting_rank} + @{SpellcastingskillMod}+ @{LinkedSpellcastingAttformula} + @{traitmods}]]}} {{mook=[[1d0+@{wdNum}]]}} {{wild_die=[[ 1d@{spellcastingwilddie}! + @{spellcastingmod} + @{SpellcastingskillMod} + @{LinkedSpellcastingAttformula} + @{traitmods}]]}} @{templateConditions} {{conviction=[[ [[@{conviction}]]d6! ]] }}' />
								<input type="hidden" name="attr_spellcastingrollformula" value="@{spellcasting_rank} + @{SpellcastingskillMod}+ @{LinkedSpellcastingAttformula} + @{traitmods}" />
	    						<input type="checkbox" class="sheet-useSkillSpec" name="attr_altRuleSkillSpec" style="display: none;" />
	    						<div class='sheet-SkillSpec'>
	    						    <fieldset class="repeating_spellcastingspec">
	    						        <button class="sheet-skillbutton sheet-smallskillflexattbutton sheet-specbutton" type='roll' name='roll_tSpellcastingSpecRoll' title="@{tSpellcastingSpecRoll}" value='@{spellcastingSpecRollValue}'></button>
	    						        <input type="hidden" name="attr_spellcastingSpecRollValue" value="@{whisperspellcasting} &{template:roll} {{namelength=@{namelength}}} {{button=y}} {{ReRoll=^{reroll}(~repeating_spellcastingspec_tSpellcastingSpecRoll)}} {{trait=@{spellcastingSpecName} }} @{rolltSpellcasting} @{unshakeTemplate}" />
	    						        <input class="sheet-speciality" type="text" name="attr_spellcastingSpecName" title="@{repeating_spellcastingSpec_$#_SpecName}" placeholder="Specialization" data-i18n-placeholder="specialization" />
	    						    </fieldset>
	    						</div>
	                        </div>
	                        <!-- Stealth Skill (Agility) -->
	                        <input class="sheet-StaticSkill" type="checkbox" name="attr_staticStealth" style='display:none;'/>
	                        <div class='sheet-basetrait sheet-staticStealth' data-i18n-list-item="stealth">
	                            <input class='sheet-deltabutton' type='hidden' name='attr_stealth_delta' value='0' />
	                            <button class="sheet-skillbutton sheet-skillflexattbutton" type='roll' name='roll_tStealthRoll' title="@{tStealthRoll}" value='@{stealthRollValue}'> <span name="attr_stealthname"></span> <span class='sheet-linkedAtt' data-i18n="agl-u">(AGL)</span></button>
	                            <input type="hidden" name="attr_stealthRollValue" value="@{whisperstealth} &{template:roll} {{namelength=@{namelength}}} {{button=y}} {{ReRoll=^{reroll}(~tStealthRoll)}} {{trait=@{stealthname}}} @{rolltStealth} @{setmodsenc} @{showtraitmods} @{unshakeTemplate}" />
	                            <div class="sheet-skillRankContainer">
	                            	<div class="sheet-skillRankChild">
                                        <input class="sheet-useAlphaNum" type="checkbox" name="attr_useAlphaNum" value="1" />
	                            		<label data-i18n-title="stealth-die-type-d4" class="sheet-skilldielabel"><input type="radio" name="attr_stealth" class="sheet-traitradio" value="4" checked><span class="sheet-d4"></span><div class="sheet-d4a" data-i18n="d4"></div></label>
										<label data-i18n-title="stealth-die-type-d6" class="sheet-skilldielabel"><input type="radio" name="attr_stealth" class="sheet-traitradio" value="6"><span class="sheet-d6"></span><div class="sheet-d6a" data-i18n="d6"></div></label>
										<label data-i18n-title="stealth-die-type-d8" class="sheet-skilldielabel"><input type="radio" name="attr_stealth" class="sheet-traitradio" value="8"><span class="sheet-d8"></span><div class="sheet-d8a" data-i18n="d8"></div></label>
										<label data-i18n-title="stealth-die-type-d10" class="sheet-skilldielabel"><input type="radio" name="attr_stealth" class="sheet-traitradio" value="10"><span class="sheet-d10"></span><div class="sheet-d10a" data-i18n="d10"></div></label>
										<label data-i18n-title="stealth-die-type-d12" class="sheet-skilldielabel"><input type="radio" name="attr_stealth" class="sheet-traitradio" value="12"><span class="sheet-d12"></span><div class="sheet-d12a" data-i18n="d12"></div></label>
										<input type="hidden" class="sheet-traitradio" name="attr_stealth" value="4" />
										<div class="sheet-d4Selected"><span class="sheet-d4"></span><div class="sheet-d4a" data-i18n="d4"></div></div>
		                            	<div class="sheet-d6Selected"><span class="sheet-d6"></span><div class="sheet-d6a" data-i18n="d6"></div></div>
		                            	<div class="sheet-d8Selected"><span class="sheet-d8"></span><div class="sheet-d8a" data-i18n="d8"></div></div>
		                            	<div class="sheet-d10Selected"><span class="sheet-d10"></span><div class="sheet-d10a" data-i18n="d10"></div></div>
		                            	<div class="sheet-d12Selected"><span class="sheet-d12"></span><div class="sheet-d12a" data-i18n="d12"></div></div>
	                            	</div>
	                            	+
	                            </div>
								<input class="sheet-otraitmod" type="number" name="attr_stealthmod" title="@{StealthMod}" value="0" />
	                            <input class='sheet-moremods' type='checkbox' name='attr_showStealthRollMod' /><span>y</span>
	    						<div class='sheet-basetrait sheet-traitmodplus'>
	                                <input type='text' class='sheet-ModDesc' name='attr_stealthModType' placeholder='Modifier due to edges, hindrances, etc' data-i18n-placeholder="att-mod-description" />
	    						    +<input class="sheet-otraitmod" type="number" name="attr_StealthskillMod" title="@{StealthskillMod}" value="0" />
	                                <hr class="sheet-modsection">
	                                <input class='sheet-whispercheck' type='checkbox' value='/w gm' name='attr_whisperstealth' /> <span class='sheet-ModDesc' data-i18n="whisper-roll-to-gm">Whisper roll to GM</span><br />
	                                <select name="attr_stealthwilddie" title="@{stealthwilddie}" class="sheet-traitdie">
	                                    <option value="4" data-i18n="d4">d4</option>
	                                    <option value="6" selected data-i18n="d6">d6</option>
	                                    <option value="8" data-i18n="d8">d8</option>
	                                    <option value="10" data-i18n="d10">d10</option>
	                                    <option value="12" data-i18n="d12">d12</option>
	                                </select>
	                                <span data-i18n='wild-die'>Wild Die</span><input type='text' class='sheet-wildDieDesc' name='attr_stealthwilddieinfo' placeholder='Standard Wild Die die type' data-i18n-placeholder="no-modifying-edges" /><br />
	                                <input class='sheet-otraitmod' style='border-bottom: 1px solid black;' type='number' name='attr_stealth_delta' title='@{stealth_delta}' value='0' /><label class='sheet-delta' data-i18n='die-step-delta'>steps boosted/lowered from base</label><input type='hidden' name='attr_stealth_base' /><input type='hidden' name='attr_stealthmod_base' />
	    						</div>
	    						<input type='hidden' name='attr_stealth_rank' value='1d4!' />
	    						<input type='hidden' name='attr_stealth_display' value='d4' />
	    						<input type='hidden' name='attr_rolltStealth' value='{{name=@{character_name} }} {{skill_rank=@{stealth_display} }} {{skill_roll=[[@{stealth_rank} + @{StealthskillMod}+ @{ModSumEnc}[Distracted, Wounds, Fatigue] + @{traitmods}]]}} {{mook=[[1d0+@{wdNum}]]}} {{wild_die=[[ 1d@{stealthwilddie}! + @{stealthmod} + @{StealthskillMod} + @{ModSumEnc}[Distracted, Wounds, Fatigue] + @{traitmods}]]}} @{templateConditions} {{conviction=[[ [[@{conviction}]]d6! ]] }}' />
	    						<input type="checkbox" class="sheet-useSkillSpec" name="attr_altRuleSkillSpec" style="display: none;" />
	    						<div class='sheet-SkillSpec'>
	    						    <fieldset class="repeating_stealthspec">
	    						        <button class="sheet-skillbutton sheet-smallskillflexattbutton sheet-specbutton" type='roll' name='roll_tStealthSpecRoll' title="@{tStealthSpecRoll}" value='@{stealthSpecRollValue}'></button>
	    						        <input type="hidden" name="attr_stealthSpecRollValue" value="@{whisperstealth} &{template:roll} {{namelength=@{namelength}}} {{button=y}} {{ReRoll=^{reroll}(~repeating_stealthspec_tStealthSpecRoll)}} {{trait=@{stealthSpecName} }} @{rolltStealth} @{unshakeTemplate}" />
	    						        <input class="sheet-speciality" type="text" name="attr_stealthSpecName" title="@{repeating_stealthSpec_$#_SpecName}" placeholder="Specialization" data-i18n-placeholder="specialization" />
	    						    </fieldset>
	    						</div>
	                        </div>
	                        <!-- Survival skill (Smarts) -->
	                        <input class="sheet-StaticSkill" type="checkbox" name="attr_staticSurvival" style='display:none;'/>
	                        <div class='sheet-basetrait sheet-staticSurvival' data-i18n-list-item="survival">
	                            <input class='sheet-deltabutton' type='hidden' name='attr_survival_delta' value='0' />
	                            <button class="sheet-skillbutton sheet-skillflexattbutton" type='roll' name='roll_tSurvivalRoll' title="@{tSurvivalRoll}" value='@{survivalRollValue}'> <span name="attr_survivalname"></span> <span class='sheet-linkedAtt' data-i18n="sma-u">(SMA)</span></button>
	                            <input type="hidden" name="attr_survivalRollValue" value="@{whispersurvival} &{template:roll} {{namelength=@{namelength}}} {{button=y}} {{ReRoll=^{reroll}(~tSurvivalRoll)}} {{trait=@{survivalname}}} @{rolltSurvival} @{setmods} @{showtraitmods} @{unshakeTemplate}" />
	                            <div class="sheet-skillRankContainer">
	                            	<div class="sheet-skillRankChild">
                                        <input class="sheet-useAlphaNum" type="checkbox" name="attr_useAlphaNum" value="1" />
	                            		<label data-i18n-title="survival-die-type-d4" class="sheet-skilldielabel"><input type="radio" name="attr_survival" class="sheet-traitradio" value="4" checked><span class="sheet-d4"></span><div class="sheet-d4a" data-i18n="d4"></div></label>
										<label data-i18n-title="survival-die-type-d6" class="sheet-skilldielabel"><input type="radio" name="attr_survival" class="sheet-traitradio" value="6"><span class="sheet-d6"></span><div class="sheet-d6a" data-i18n="d6"></div></label>
										<label data-i18n-title="survival-die-type-d8" class="sheet-skilldielabel"><input type="radio" name="attr_survival" class="sheet-traitradio" value="8"><span class="sheet-d8"></span><div class="sheet-d8a" data-i18n="d8"></div></label>
										<label data-i18n-title="survival-die-type-d10" class="sheet-skilldielabel"><input type="radio" name="attr_survival" class="sheet-traitradio" value="10"><span class="sheet-d10"></span><div class="sheet-d10a" data-i18n="d10"></div></label>
										<label data-i18n-title="survival-die-type-d12" class="sheet-skilldielabel"><input type="radio" name="attr_survival" class="sheet-traitradio" value="12"><span class="sheet-d12"></span><div class="sheet-d12a" data-i18n="d12"></div></label>
										<input type="hidden" class="sheet-traitradio" name="attr_survival" value="4" />
										<div class="sheet-d4Selected"><span class="sheet-d4"></span><div class="sheet-d4a" data-i18n="d4"></div></div>
		                            	<div class="sheet-d6Selected"><span class="sheet-d6"></span><div class="sheet-d6a" data-i18n="d6"></div></div>
		                            	<div class="sheet-d8Selected"><span class="sheet-d8"></span><div class="sheet-d8a" data-i18n="d8"></div></div>
		                            	<div class="sheet-d10Selected"><span class="sheet-d10"></span><div class="sheet-d10a" data-i18n="d10"></div></div>
		                            	<div class="sheet-d12Selected"><span class="sheet-d12"></span><div class="sheet-d12a" data-i18n="d12"></div></div>
	                            	</div>
	                            	+
	                            </div>
								<input class="sheet-otraitmod" type="number" name="attr_survivalmod" title="@{SurvivalMod}" value="0" />
	                            <input class='sheet-moremods' type='checkbox' name='attr_showSurvivalRollMod' /><span>y</span>
	    						<div class='sheet-basetrait sheet-traitmodplus'>
	                                <input type='text' class='sheet-ModDesc' name='attr_survivalModType' placeholder='Modifier due to edges, hindrances, etc' data-i18n-placeholder="att-mod-description" />
	    						    +<input class="sheet-otraitmod" type="number" name="attr_SurvivalskillMod" title="@{SurvivalskillMod}" value="0" />
	                                <hr class="sheet-modsection">
	                                <input class='sheet-whispercheck' type='checkbox' value='/w gm' name='attr_whispersurvival' /> <span class='sheet-ModDesc' data-i18n="whisper-roll-to-gm">Whisper roll to GM</span><br />
	                                <select name="attr_survivalwilddie" title="@{survivalwilddie}" class="sheet-traitdie">
	                                    <option value="4" data-i18n="d4">d4</option>
	                                    <option value="6" selected data-i18n="d6">d6</option>
	                                    <option value="8" data-i18n="d8">d8</option>
	                                    <option value="10" data-i18n="d10">d10</option>
	                                    <option value="12" data-i18n="d12">d12</option>
	                                </select>
	                                <span data-i18n='wild-die'>Wild Die</span><input type='text' class='sheet-wildDieDesc' name='attr_survivalwilddieinfo' placeholder='Standard Wild Die die type' data-i18n-placeholder="no-modifying-edges" /><br />
	                                <input class='sheet-otraitmod' style='border-bottom: 1px solid black;' type='number' name='attr_survival_delta' title='@{survival_delta}' value='0' /><label class='sheet-delta' data-i18n='die-step-delta'>steps boosted/lowered from base</label><input type='hidden' name='attr_survival_base' /><input type='hidden' name='attr_survivalmod_base' />
	    						</div>
	    						<input type='hidden' name='attr_survival_rank' value='1d4!' />
	    						<input type='hidden' name='attr_survival_display' value='d4' />
	    						<input type='hidden' name='attr_rolltSurvival' value='{{name=@{character_name} }} {{skill_rank=@{survival_display} }} {{skill_roll=[[@{survival_rank} + @{SurvivalskillMod}+ @{ModSum}[Distracted, Wounds, Fatigue] + @{traitmods}]]}} {{mook=[[1d0+@{wdNum}]]}} {{wild_die=[[ 1d@{survivalwilddie}! + @{survivalmod} + @{SurvivalskillMod} + @{ModSum}[Distracted, Wounds, Fatigue] + @{traitmods}]]}} @{templateConditions} {{conviction=[[ [[@{conviction}]]d6! ]] }}' />
	    						<input type="checkbox" class="sheet-useSkillSpec" name="attr_altRuleSkillSpec" style="display: none;" />
	    						<div class='sheet-SkillSpec'>
	    						    <fieldset class="repeating_survivalspec">
	    						        <button class="sheet-skillbutton sheet-smallskillflexattbutton sheet-specbutton" type='roll' name='roll_tSurvivalSpecRoll' title="@{tSurvivalSpecRoll}" value='@{survivalSpecRollValue}'></button>
	    						        <input type="hidden" name="attr_survivalSpecRollValue" value="@{whispersurvival} &{template:roll} {{namelength=@{namelength}}} {{button=y}} {{ReRoll=^{reroll}(~repeating_survivalspec_tSurvivalSpecRoll)}} {{trait=@{survivalSpecName} }} @{rolltSurvival} @{unshakeTemplate}" />
	    						        <input class="sheet-speciality" type="text" name="attr_survivalSpecName" title="@{repeating_survivalSpec_$#_SpecName}" placeholder="Specialization" data-i18n-placeholder="specialization" />
	    						    </fieldset>
	    						</div>
	                        </div>
	                        <!-- Taunt skill (Smarts) -->
	                        <input class="sheet-StaticSkill" type="checkbox" name="attr_staticTaunt" style='display:none;'/>
	                        <div class='sheet-basetrait sheet-staticTaunt' data-i18n-list-item="taunt">
	                            <input class='sheet-deltabutton' type='hidden' name='attr_taunt_delta' value='0' />
	                            <button class="sheet-skillbutton sheet-skillflexattbutton" type='roll' name='roll_tTauntRoll' title="@{tTauntRoll}" value='@{tauntRollValue}'> <span name="attr_tauntname"></span> <span class='sheet-linkedAtt' data-i18n="sma-u">(SMA)</span></button>
	                            <input type="hidden" name="attr_tauntRollValue" value="@{whispertaunt} &{template:roll} {{namelength=@{namelength}}} {{button=y}} {{ReRoll=^{reroll}(~tTauntRoll)}} {{trait=@{tauntname}}} @{rolltTaunt} @{setmods} @{showtraitmods} @{unshakeTemplate}" />
	                            <div class="sheet-skillRankContainer">
	                            	<div class="sheet-skillRankChild">
                                        <input class="sheet-useAlphaNum" type="checkbox" name="attr_useAlphaNum" value="1" />
	                            		<label data-i18n-title="taunt-die-type-d4" class="sheet-skilldielabel"><input type="radio" name="attr_taunt" class="sheet-traitradio" value="4" checked><span class="sheet-d4"></span><div class="sheet-d4a" data-i18n="d4"></div></label>
										<label data-i18n-title="taunt-die-type-d6" class="sheet-skilldielabel"><input type="radio" name="attr_taunt" class="sheet-traitradio" value="6"><span class="sheet-d6"></span><div class="sheet-d6a" data-i18n="d6"></div></label>
										<label data-i18n-title="taunt-die-type-d8" class="sheet-skilldielabel"><input type="radio" name="attr_taunt" class="sheet-traitradio" value="8"><span class="sheet-d8"></span><div class="sheet-d8a" data-i18n="d8"></div></label>
										<label data-i18n-title="taunt-die-type-d10" class="sheet-skilldielabel"><input type="radio" name="attr_taunt" class="sheet-traitradio" value="10"><span class="sheet-d10"></span><div class="sheet-d10a" data-i18n="d10"></div></label>
										<label data-i18n-title="taunt-die-type-d12" class="sheet-skilldielabel"><input type="radio" name="attr_taunt" class="sheet-traitradio" value="12"><span class="sheet-d12"></span><div class="sheet-d12a" data-i18n="d12"></div></label>
										<input type="hidden" class="sheet-traitradio" name="attr_taunt" value="4" />
										<div class="sheet-d4Selected"><span class="sheet-d4"></span><div class="sheet-d4a" data-i18n="d4"></div></div>
		                            	<div class="sheet-d6Selected"><span class="sheet-d6"></span><div class="sheet-d6a" data-i18n="d6"></div></div>
		                            	<div class="sheet-d8Selected"><span class="sheet-d8"></span><div class="sheet-d8a" data-i18n="d8"></div></div>
		                            	<div class="sheet-d10Selected"><span class="sheet-d10"></span><div class="sheet-d10a" data-i18n="d10"></div></div>
		                            	<div class="sheet-d12Selected"><span class="sheet-d12"></span><div class="sheet-d12a" data-i18n="d12"></div></div>
	                            	</div>
	                            	+
	                            </div>
								<input class="sheet-otraitmod" type="number" name="attr_tauntmod" title="@{TauntMod}" value="0" />
	                            <input class='sheet-moremods' type='checkbox' name='attr_showTauntRollMod' /><span>y</span>
	    						<div class='sheet-basetrait sheet-traitmodplus'>
	                                <input type='text' class='sheet-ModDesc' name='attr_tauntModType' placeholder='Modifier due to edges, hindrances, etc' data-i18n-placeholder="att-mod-description" />
	    						    +<input class="sheet-otraitmod" type="number" name="attr_TauntskillMod" title="@{TauntskillMod}" value="0" />
	                                <hr class="sheet-modsection">
	                                <input class='sheet-whispercheck' type='checkbox' value='/w gm' name='attr_whispertaunt' /> <span class='sheet-ModDesc' data-i18n="whisper-roll-to-gm">Whisper roll to GM</span><br />
	                                <select name="attr_tauntwilddie" title="@{tauntwilddie}" class="sheet-traitdie">
	                                    <option value="4" data-i18n="d4">d4</option>
	                                    <option value="6" selected data-i18n="d6">d6</option>
	                                    <option value="8" data-i18n="d8">d8</option>
	                                    <option value="10" data-i18n="d10">d10</option>
	                                    <option value="12" data-i18n="d12">d12</option>
	                                </select>
	                                <span data-i18n='wild-die'>Wild Die</span><input type='text' class='sheet-wildDieDesc' name='attr_tauntwilddieinfo' placeholder='Standard Wild Die die type' data-i18n-placeholder="no-modifying-edges" /><br />
	                                <input class='sheet-otraitmod' style='border-bottom: 1px solid black;' type='number' name='attr_taunt_delta' title='@{taunt_delta}' value='0' /><label class='sheet-delta' data-i18n='die-step-delta'>steps boosted/lowered from base</label><input type='hidden' name='attr_taunt_base' /><input type='hidden' name='attr_tauntmod_base' />
	                                <hr class="sheet-modsection">
	    						    <br />
	    						</div>
	    						<input type='hidden' name='attr_taunt_rank' value='1d4!' />
	    						<input type='hidden' name='attr_taunt_display' value='d4' />
	    						<input type='hidden' name='attr_rolltTaunt' value='{{name=@{character_name} }} {{skill_rank=@{taunt_display} }} {{skill_roll=[[@{taunt_rank} + @{TauntskillMod}+ @{ModSum}[Distracted, Wounds, Fatigue] + @{traitmods}]]}} {{mook=[[1d0+@{wdNum}]]}} {{wild_die=[[ 1d@{tauntwilddie}! + @{tauntmod} + @{TauntskillMod} + @{ModSum}[Distracted, Wounds, Fatigue] + @{traitmods}]]}} @{templateConditions} {{conviction=[[ [[@{conviction}]]d6! ]] }}' />
	    						<input type="checkbox" class="sheet-useSkillSpec" name="attr_altRuleSkillSpec" style="display: none;" />
	    						<div class='sheet-SkillSpec'>
	    						    <fieldset class="repeating_tauntspec">
	    						        <button class="sheet-skillbutton sheet-smallskillflexattbutton sheet-specbutton" type='roll' name='roll_tTauntSpecRoll' title="@{tTauntSpecRoll}" value='@{tauntSpecRollValue}'></button>
	    						        <input type="hidden" name="attr_tauntSpecRollValue" value="@{whispertaunt} &{template:roll} {{namelength=@{namelength}}} {{button=y}} {{ReRoll=^{reroll}(~repeating_tauntspec_tTauntSpecRoll)}} {{trait=@{tauntSpecName} }} @{rolltTaunt} @{unshakeTemplate}" />
	    						        <input class="sheet-speciality" type="text" name="attr_tauntSpecName" title="@{repeating_tauntSpec_$#_SpecName}" placeholder="Specialization" data-i18n-placeholder="specialization" />
	    						    </fieldset>
	    						</div>
	                        </div>
							<!-- Thievery -->
	                        <input class="sheet-StaticSkill" type="checkbox" name="attr_staticThievery" style='display:none;'/>
	                        <div class='sheet-basetrait sheet-staticThievery' data-i18n-list-item="thievery">
	                            <input class='sheet-deltabutton' type='hidden' name='attr_thievery_delta' value='0' />
	                            <button class="sheet-skillbutton sheet-skillflexattbutton" type='roll' name='roll_tThieveryRoll' title="@{tThieveryRoll}" value='@{thieveryRollValue}'> <span name="attr_thieveryname"></span> <span class='sheet-linkedAtt' data-i18n="agl-u">(AGL)</span></button>
	                            <input type="hidden" name="attr_thieveryRollValue" value="@{whisperthievery} &{template:roll} {{namelength=@{namelength}}} {{button=y}} {{ReRoll=^{reroll}(~tThieveryRoll)}} {{trait=@{thieveryname}}} @{rolltThievery} @{setmodsenc} @{showtraitmods} @{unshakeTemplate}" />
	                            <div class="sheet-skillRankContainer">
	                            	<div class="sheet-skillRankChild">
                                        <input class="sheet-useAlphaNum" type="checkbox" name="attr_useAlphaNum" value="1" />
	                            		<label data-i18n-title="thievery-die-type-d4" class="sheet-skilldielabel"><input type="radio" name="attr_thievery" class="sheet-traitradio" value="4" checked><span class="sheet-d4"></span><div class="sheet-d4a" data-i18n="d4"></div></label>
										<label data-i18n-title="thievery-die-type-d6" class="sheet-skilldielabel"><input type="radio" name="attr_thievery" class="sheet-traitradio" value="6"><span class="sheet-d6"></span><div class="sheet-d6a" data-i18n="d6"></div></label>
										<label data-i18n-title="thievery-die-type-d8" class="sheet-skilldielabel"><input type="radio" name="attr_thievery" class="sheet-traitradio" value="8"><span class="sheet-d8"></span><div class="sheet-d8a" data-i18n="d8"></div></label>
										<label data-i18n-title="thievery-die-type-d10" class="sheet-skilldielabel"><input type="radio" name="attr_thievery" class="sheet-traitradio" value="10"><span class="sheet-d10"></span><div class="sheet-d10a" data-i18n="d10"></div></label>
										<label data-i18n-title="thievery-die-type-d12" class="sheet-skilldielabel"><input type="radio" name="attr_thievery" class="sheet-traitradio" value="12"><span class="sheet-d12"></span><div class="sheet-d12a" data-i18n="d12"></div></label>
										<input type="hidden" class="sheet-traitradio" name="attr_thievery" value="4" />
										<div class="sheet-d4Selected"><span class="sheet-d4"></span><div class="sheet-d4a" data-i18n="d4"></div></div>
		                            	<div class="sheet-d6Selected"><span class="sheet-d6"></span><div class="sheet-d6a" data-i18n="d6"></div></div>
		                            	<div class="sheet-d8Selected"><span class="sheet-d8"></span><div class="sheet-d8a" data-i18n="d8"></div></div>
		                            	<div class="sheet-d10Selected"><span class="sheet-d10"></span><div class="sheet-d10a" data-i18n="d10"></div></div>
		                            	<div class="sheet-d12Selected"><span class="sheet-d12"></span><div class="sheet-d12a" data-i18n="d12"></div></div>
	                            	</div>
	                            	+
	                            </div>
								<input class="sheet-otraitmod" type="number" name="attr_thieverymod" title="@{ThieveryMod}" value="0" />
	                            <input class='sheet-moremods' type='checkbox' name='attr_showThieveryRollMod' /><span>y</span>
	    						<div class='sheet-basetrait sheet-traitmodplus'>
	                                <input type='text' class='sheet-ModDesc' name='attr_thieveryModType' placeholder='Modifier due to edges, hindrances, etc' data-i18n-placeholder="att-mod-description" />
	    						    +<input class="sheet-otraitmod" type="number" name="attr_ThieveryskillMod" title="@{ThieveryskillMod}" value="0" />
	                                <hr class="sheet-modsection">
	                                <input class='sheet-whispercheck' type='checkbox' value='/w gm' name='attr_whisperthievery' /> <span class='sheet-ModDesc' data-i18n="whisper-roll-to-gm">Whisper roll to GM</span><br />
	                                <select name="attr_thieverywilddie" title="@{thieverywilddie}" class="sheet-traitdie">
	                                    <option value="4" data-i18n="d4">d4</option>
	                                    <option value="6" selected data-i18n="d6">d6</option>
	                                    <option value="8" data-i18n="d8">d8</option>
	                                    <option value="10" data-i18n="d10">d10</option>
	                                    <option value="12" data-i18n="d12">d12</option>
	                                </select>
	                                <span data-i18n='wild-die'>Wild Die</span><input type='text' class='sheet-wildDieDesc' name='attr_thieverywilddieinfo' placeholder='Standard Wild Die die type' data-i18n-placeholder="no-modifying-edges" /><br />
	                                <input class='sheet-otraitmod' style='border-bottom: 1px solid black;' type='number' name='attr_thievery_delta' title='@{thievery_delta}' value='0' /><label class='sheet-delta' data-i18n='die-step-delta'>steps boosted/lowered from base</label><input type='hidden' name='attr_thievery_base' /><input type='hidden' name='attr_thieverymod_base' />
	    						</div>
	    						<input type='hidden' name='attr_thievery_rank' value='1d4!' />
	    						<input type='hidden' name='attr_thievery_display' value='d4' />
	    						<input type='hidden' name='attr_rolltThievery' value='{{name=@{character_name} }} {{skill_rank=@{thievery_display} }} {{skill_roll=[[@{thievery_rank} + @{ThieveryskillMod}+ @{ModSumEnc}[Distracted, Wounds, Fatigue, Encumbrance] + @{traitmods}]]}} {{mook=[[1d0+@{wdNum}]]}} {{wild_die=[[ 1d@{thieverywilddie}! + @{thieverymod} + @{ThieveryskillMod} + @{ModSumEnc}[Distracted, Wounds, Fatigue, Encumbrance] + @{traitmods}]]}} @{templateConditions} {{conviction=[[ [[@{conviction}]]d6! ]] }}' />
	    						<input type="checkbox" class="sheet-useSkillSpec" name="attr_altRuleSkillSpec" style="display: none;" />
	    						<div class='sheet-SkillSpec'>
	    						    <fieldset class="repeating_thieveryspec">
	    						        <button class="sheet-skillbutton sheet-smallskillflexattbutton sheet-specbutton" type='roll' name='roll_tThieverySpecRoll' title="@{tThieverySpecRoll}" value='@{thieverySpecRollValue}'></button>
	    						        <input type="hidden" name="attr_thieverySpecRollValue" value="@{whisperthievery} &{template:roll} {{namelength=@{namelength}}} {{button=y}} {{ReRoll=^{reroll}(~repeating_thieveryspec_tThieverySpecRoll)}} {{trait=@{thieverySpecName} }} @{rolltThievery} @{unshakeTemplate}" />
	    						        <input class="sheet-speciality" type="text" name="attr_thieverySpecName" title="@{repeating_thieverySpec_$#_SpecName}" placeholder="Specialization" data-i18n-placeholder="specialization" />
	    						    </fieldset>
	    						</div>
	                        </div>
	                        <!-- Weird Science (TBD) -->
	                        <input class="sheet-StaticSkill" type="checkbox" name="attr_staticWeirdScience" style='display:none;'/>
	                        <div class='sheet-basetrait sheet-staticWeirdScience' data-i18n-list-item="weird-science">
	                            <input class='sheet-deltabutton' type='hidden' name='attr_weirdscience_delta' value='0' />
	                            <button class="sheet-skillbutton sheet-skillflexattbutton" type='roll' name='roll_tWeirdScienceRoll' title="@{tWeirdScienceRoll}" value='@{weirdscienceRollValue} {{skill_roll=[[ @{weirdscienceSkillRollFormula} ]]}} {{wild_die=[[ @{weirdscienceWildDieFormula} ]]}}'> <span name="attr_weirdsciencename"></span> <span class='sheet-linkedAttSpan' name="attr_linkedweirdscienceatt" data-i18n-dynamic></span></button>
								<input type="hidden" name="attr_weirdscienceRollValue" value="@{whisperweirdscience} &{template:roll} {{namelength=@{namelength}}} {{button=y}} {{ReRoll=^{reroll}(~tWeirdScienceRoll)}} {{trait=@{weirdsciencename}}} @{rolltWeirdScience} @{linkedweirdscienceattbutton} @{showtraitmods} @{unshakeTemplate}" />
								<div class="sheet-skillRankContainer">
	                            	<div class="sheet-skillRankChild">
                                        <input class="sheet-useAlphaNum" type="checkbox" name="attr_useAlphaNum" value="1" />
	                            		<label data-i18n-title="weirdscience-die-type-d4" class="sheet-skilldielabel"><input type="radio" name="attr_weirdscience" class="sheet-traitradio" value="4" checked><span class="sheet-d4"></span><div class="sheet-d4a" data-i18n="d4"></div></label>
										<label data-i18n-title="weirdscience-die-type-d6" class="sheet-skilldielabel"><input type="radio" name="attr_weirdscience" class="sheet-traitradio" value="6"><span class="sheet-d6"></span><div class="sheet-d6a" data-i18n="d6"></div></label>
										<label data-i18n-title="weirdscience-die-type-d8" class="sheet-skilldielabel"><input type="radio" name="attr_weirdscience" class="sheet-traitradio" value="8"><span class="sheet-d8"></span><div class="sheet-d8a" data-i18n="d8"></div></label>
										<label data-i18n-title="weirdscience-die-type-d10" class="sheet-skilldielabel"><input type="radio" name="attr_weirdscience" class="sheet-traitradio" value="10"><span class="sheet-d10"></span><div class="sheet-d10a" data-i18n="d10"></div></label>
										<label data-i18n-title="weirdscience-die-type-d12" class="sheet-skilldielabel"><input type="radio" name="attr_weirdscience" class="sheet-traitradio" value="12"><span class="sheet-d12"></span><div class="sheet-d12a" data-i18n="d12"></div></label>
										<input type="hidden" class="sheet-traitradio" name="attr_weirdscience" value="4" />
										<div class="sheet-d4Selected"><span class="sheet-d4"></span><div class="sheet-d4a" data-i18n="d4"></div></div>
		                            	<div class="sheet-d6Selected"><span class="sheet-d6"></span><div class="sheet-d6a" data-i18n="d6"></div></div>
		                            	<div class="sheet-d8Selected"><span class="sheet-d8"></span><div class="sheet-d8a" data-i18n="d8"></div></div>
		                            	<div class="sheet-d10Selected"><span class="sheet-d10"></span><div class="sheet-d10a" data-i18n="d10"></div></div>
		                            	<div class="sheet-d12Selected"><span class="sheet-d12"></span><div class="sheet-d12a" data-i18n="d12"></div></div>
	                            	</div>
	                            	+
	                            </div>
								<input class="sheet-otraitmod" type="number" name="attr_weirdsciencemod" title="@{WeirdScienceMod}" value="0" />
	                            <input class='sheet-moremods' type='checkbox' name='attr_showWeirdScienceRollMod' /><span>y</span>
	    						<div class='sheet-basetrait sheet-traitmodplus'>
	    						    <input type='text' class='sheet-ModDesc' name='attr_weirdscienceModType' placeholder='Modifier due to edges, hindrances, etc' data-i18n-placeholder="att-mod-description" />
	    						    +<input class="sheet-otraitmod" type="number" name="attr_WeirdScienceskillMod" title="@{WeirdScienceskillMod}" value="0" />
	    						    <span class="sheet-ModDesc" data-i18n="linked-attribute">Linked Attribute</span>
	    						    <select class="sheet-LinkedAttSelect" name="attr_linkedweirdscienceatt">
	    						        <option value="agl-u" data-i18n="agility">Agility</option>
										<option value="sma-u" selected data-i18n="smarts">Smarts</option>
										<option value="spi-u" data-i18n="spirit">Spirit</option>
										<option value="str-u" data-i18n="strength">Strength</option>
										<option value="vig-u" data-i18n="vigor">Vigor</option>
	    						    </select>
	    						    <input type='hidden' name='attr_linkedweirdscienceattbutton' value='@{setmods}' />
	    						    <input type='hidden' name='attr_linkedweirdscienceattformula' value='@{ModSum}[Distracted, Wounds, Fatigue]' />
	                                <hr class="sheet-modsection">
	                                <input class='sheet-whispercheck' type='checkbox' value='/w gm' name='attr_whisperweirdscience' /> <span class='sheet-ModDesc' data-i18n="whisper-roll-to-gm">Whisper roll to GM</span><br />
	                                <select name="attr_weirdsciencewilddie" title="@{weirdsciencewilddie}" class="sheet-traitdie">
	                                    <option value="4" data-i18n="d4">d4</option>
	                                    <option value="6" selected data-i18n="d6">d6</option>
	                                    <option value="8" data-i18n="d8">d8</option>
	                                    <option value="10" data-i18n="d10">d10</option>
	                                    <option value="12" data-i18n="d12">d12</option>
	                                </select>
	                                <span data-i18n='wild-die'>Wild Die</span><input type='text' class='sheet-wildDieDesc' name='attr_weirdsciencewilddieinfo' placeholder='Standard Wild Die die type' data-i18n-placeholder="no-modifying-edges" /><br />
	                                <input class='sheet-otraitmod' style='border-bottom: 1px solid black;' type='number' name='attr_weirdscience_delta' title='@{weirdscience_delta}' value='0' /><label class='sheet-delta' data-i18n='die-step-delta'>steps boosted/lowered from base</label><input type='hidden' name='attr_weirdscience_base' /><input type='hidden' name='attr_weirdsciencemod_base' />
	    						</div>
	    						<input type='hidden' name='attr_weirdscience_rank' value='1d4!' />
	    						<input type='hidden' name='attr_weirdscience_display' value='d4' />
                                <input type='hidden' name='attr_weirdscienceSkillRollFormula' value='@{weirdscience_rank} + @{WeirdScienceskillMod}+ @{linkedweirdscienceattformula} + @{traitmods}' />
                                <input type='hidden' name='attr_weirdscienceWildDieFormula' value='1d@{weirdsciencewilddie}! + @{weirdsciencemod} + @{WeirdScienceskillMod} + @{linkedweirdscienceattformula} + @{traitmods}' />
	    						<input type='hidden' name='attr_rolltWeirdScience' value='{{name=@{character_name} }} {{skill_rank=@{weirdscience_display} }} {{mook=[[1d0+@{wdNum}]]}} @{templateConditions} {{conviction=[[ [[@{conviction}]]d6! ]] }}' />
								<!--<input type="hidden" name="attr_weirdsciencerollformula" value="@{weirdscience_rank} + @{WeirdScienceskillMod}+ @{linkedweirdscienceattformula} + @{traitmods}" />-->
	    						<input type="checkbox" class="sheet-useSkillSpec" name="attr_altRuleSkillSpec" style="display: none;" />
	    						<div class='sheet-SkillSpec'>
	    						    <fieldset class="repeating_weirdsciencespec">
	    						        <button class="sheet-skillbutton sheet-smallskillflexattbutton sheet-specbutton sheet-specbutton" type='roll' name='roll_tWeirdScienceSpecRoll' title="@{tWeirdScienceSpecRoll}" value='@{weirdscienceSpecRollValue} {{skill_roll=[[ @{weirdscienceSkillRollFormula} ]]}} {{wild_die=[[ @{weirdscienceWildDieFormula} ]]}}'></button>
	    						        <input type="hidden" name="attr_weirdscienceSpecRollValue" value="@{whisperweirdscience} &{template:roll} {{namelength=@{namelength}}} {{button=y}} {{ReRoll=^{reroll}(~tWeirdScienceSpecRoll)}} {{trait=@{weirdscienceSpecName} }} @{rolltWeirdScience} @{unshakeTemplate}" />
	    						        <input class="sheet-speciality" type="text" name="attr_weirdscienceSpecName" title="@{repeating_weirdscienceSpec_$#_SpecName}" placeholder="Specialization" data-i18n-placeholder="specialization" />
	    						    </fieldset>
	    						</div>
	                        </div>
	                        <!-- Knowledge/Other -->
	                        <input class="sheet-StaticSkill" type="checkbox" name="attr_staticKnowledgeOther" style='display: none;' />
	                        <div class='sheet-base sheet-staticOther' data-i18n-list-item="knowledge-other">
                                <input class="sheet-useAlphaNum" type="checkbox" name="attr_useAlphaNum" value="1" />
	                            <fieldset class="repeating_skills">
	                                <div class='sheet-basetrait sheet-otherSkillDiv'>
	                                    <input class='sheet-deltabutton' type='hidden' name='attr_skillnamerank_delta' value='0' />
	                                    <!-- <button class="sheet-skillbutton sheet-smallskillflexattbutton" type='roll' name='roll_tSkillRoll' value='@{whisperskillname} &{template:roll} {{namelength=@{namelength}}} {{button=y}} {{ReRoll=^{reroll}(~tSkillRoll)}} {{trait=@{SkillName}}} @{rolltSkill} @{linkedotherattscorebutton} @{showtraitmods}'></button> -->
	                                    <button class="sheet-skillbutton sheet-skillflexattbutton" type='roll' name='roll_tSkillRoll' value='@{customskillRollValue}'> <span name="attr_custSkillName"></span> <span class='sheet-linkedAttSpan' name="attr_linkedotherattscore" data-i18n-dynamic></span></button>
	                                    <input type="hidden" name="attr_customskillRollValue" value="@{whisperskillname} &{template:roll} {{namelength=@{namelength}}} {{button=y}} {{ReRoll=^{reroll}(~repeating_skills_tSkillRoll)}} {{trait=@{custSkillName}}} @{rolltSkill} @{linkedotherattscorebutton} @{showtraitmods} @{unshakeTemplate}" />
	                                    <div class="sheet-skillRankContainer">
		                            	    <div class="sheet-skillRankChild">
			                            		<label data-i18n-title="knowledgeother-die-type-d4" class="sheet-skilldielabel"><input type="radio" name="attr_skillnamerank" class="sheet-traitradio" value="4" checked><span class="sheet-d4"></span><div class="sheet-d4a" data-i18n="d4"></div></label>
												<label data-i18n-title="knowledgeother-die-type-d6" class="sheet-skilldielabel"><input type="radio" name="attr_skillnamerank" class="sheet-traitradio" value="6"><span class="sheet-d6"></span><div class="sheet-d6a" data-i18n="d6"></div></label>
												<label data-i18n-title="knowledgeother-die-type-d8" class="sheet-skilldielabel"><input type="radio" name="attr_skillnamerank" class="sheet-traitradio" value="8"><span class="sheet-d8"></span><div class="sheet-d8a" data-i18n="d8"></div></label>
												<label data-i18n-title="knowledgeother-die-type-d10" class="sheet-skilldielabel"><input type="radio" name="attr_skillnamerank" class="sheet-traitradio" value="10"><span class="sheet-d10"></span><div class="sheet-d10a" data-i18n="d10"></div></label>
												<label data-i18n-title="knowledgeother-die-type-d12" class="sheet-skilldielabel"><input type="radio" name="attr_skillnamerank" class="sheet-traitradio" value="12"><span class="sheet-d12"></span><div class="sheet-d12a" data-i18n="d12"></div></label>
												<input type="hidden" class="sheet-traitradio" name="attr_skillnamerank" value="4" />
                                                <div class="sheet-d4Selected"><span class="sheet-d4"></span><div class="sheet-d4a" data-i18n="d4"></div></div>
        		                            	<div class="sheet-d6Selected"><span class="sheet-d6"></span><div class="sheet-d6a" data-i18n="d6"></div></div>
        		                            	<div class="sheet-d8Selected"><span class="sheet-d8"></span><div class="sheet-d8a" data-i18n="d8"></div></div>
        		                            	<div class="sheet-d10Selected"><span class="sheet-d10"></span><div class="sheet-d10a" data-i18n="d10"></div></div>
        		                            	<div class="sheet-d12Selected"><span class="sheet-d12"></span><div class="sheet-d12a" data-i18n="d12"></div></div>
			                            	</div>
			                            	+
			                            </div>
	        							<input class="sheet-otraitmod" style="margin-left: .5px;" type="number" name="attr_skillnamerankmod" title="@{repeating_skills_$#_skillnamerankmod}" value="0" />
	                                    <input class='sheet-moremods' type='checkbox' name='attr_showOtherRollMod' checked /><span>y</span>
	            						<div class='sheet-basetrait sheet-traitmodplus'>
	            						    <!--<label><input type="checkbox" name="attr_SkillEncumbrance" value="1" />
	    						            <span class='sheet-ModDesc' data-i18n="apply-encumbrance">Apply Encumbrance</span></label><br />-->
	            						    <input type='text' class='sheet-ModDesc' name='attr_otherModType' placeholder='Modifier due to edges, hindrances, etc' data-i18n-placeholder="att-mod-description" />
	            						    +<input class="sheet-otraitmod" type="number" name="attr_SkillMod" value="0" />
	            						    <span class="sheet-ModDesc" data-i18n="skill-name">Skill Name</span>
	            						    <input type="text" name="attr_custSkillName" value="Skill" maxlength="25" />
	            						    <span class="sheet-ModDesc" data-i18n="linked-attribute">Linked Attribute</span>
	            						    <select class="sheet-LinkedAttSelect" name="attr_linkedotherattscore"> <!-- Sets the attribute to be used above in the linkedAtt div-->
	            						        <option value="agl-u" data-i18n="agility">Agility</option>
	        									<option value="sma-u" selected data-i18n="smarts">Smarts</option>
	        									<option value="spi-u" data-i18n="spirit">Spirit</option>
	        									<option value="str-u" data-i18n="strength">Strength</option>
	        									<option value="vig-u" data-i18n="vigor">Vigor</option>
	            						    </select>
	            						    <input type='hidden' name='attr_linkedotherattscorebutton' value='@{setmods}' />
	            						    <input type='hidden' name='attr_linkedotherattscoreformula' value='@{ModSum}[Distracted, Wounds, Fatigue]' />
	                                        <hr class="sheet-modsection">
	                                        <input class='sheet-whispercheck' type='checkbox' value='/w gm' name='attr_whisperskillname' /> <span class='sheet-ModDesc' data-i18n="whisper-roll-to-gm">Whisper roll to GM</span><br />
	                                        <select name="attr_skillnamewilddie" title="@{skillnamewilddie}" class="sheet-traitdie">
	                                            <option value="4" data-i18n="d4">d4</option>
	                                            <option value="6" selected data-i18n="d6">d6</option>
	                                            <option value="8" data-i18n="d8">d8</option>
	                                            <option value="10" data-i18n="d10">d10</option>
	                                            <option value="12" data-i18n="d12">d12</option>
	                                        </select>
	                                        <span data-i18n='wild-die'>Wild Die</span><input type='text' class='sheet-wildDieDesc' name='attr_skillnamewilddieinfo' placeholder='Standard Wild Die die type' data-i18n-placeholder="no-modifying-edges" /><br />
	                                        <input class='sheet-otraitmod' style='border-bottom: 1px solid black;' type='number' name='attr_skillnamerank_delta' title='@{repeating_skills_$#_skillnamerank_delta}' value='0' /><label class='sheet-delta' data-i18n='die-step-delta'>steps boosted/lowered from base</label><input type='hidden' name='attr_skillnamerank_base' /><input type='hidden' name='attr_skillnamerankmod_base' />
	            						</div>
	            						<input type='hidden' name='attr_skillnamerank_rank' value='1d4!' />
	            						<input type='hidden' name='attr_skillnamerank_display' value='d4' />
	            						<input type='hidden' name='attr_rolltSkill' value='{{name=@{character_name} }} {{skill_rank=@{skillnamerank_display} }} {{skill_roll=[[@{skillnamerank_rank} + @{SkillMod}+ @{linkedotherattscoreformula} + @{traitmods} ]]}} {{mook=[[1d0+@{wdNum}]]}} {{wild_die=[[ 1d@{skillnamewilddie}! + @{skillnamerankmod} + @{SkillMod} + @{linkedotherattscoreformula} + @{traitmods} ]]}} {{ttmod=@{ttmod}}} {{wounds=-@{woundsMod} }} {{fatigue=-@{fatigue}}} @{templateConditions} {{conviction=[[ [[@{conviction}]]d6! ]] }}' />
	                                </div>
	                            </fieldset>
	                        </div>
	                    </div>
	                </div><!-- End Skills -->
    				<!-- Collapsed Skills -->
    				<div class='sheet-collapsedSectionView'>
                    	<input class="sheet-useSkillSpecMini" type="checkbox" name="attr_altRuleSkillSpec" />
                    	<input class="sheet-staticAcademics" type="checkbox" name="attr_staticAcademics" />
						<input class="sheet-staticAthletics" type="checkbox" name="attr_staticAthletics" />
						<input class="sheet-staticBattle" type="checkbox" name="attr_staticBattle" />
						<input class="sheet-staticBoating" type="checkbox" name="attr_staticBoating" />
						<input class="sheet-staticCommonKnowledge" type="checkbox" name="attr_staticCommonKnowledge" />
						<input class="sheet-staticDriving" type="checkbox" name="attr_staticDriving" />
						<input class="sheet-staticElectronics" type="checkbox" name="attr_staticElectronics" />
						<input class="sheet-staticFaith" type="checkbox" name="attr_staticFaith" />
                        <input class="sheet-staticFighting" type="checkbox" name="attr_staticFighting" />
						<input class="sheet-staticFocus" type="checkbox" name="attr_staticFocus" />
						<input class="sheet-staticGambling" type="checkbox" name="attr_staticGambling" />
						<input class="sheet-staticHacking" type="checkbox" name="attr_staticHacking" />
						<input class="sheet-staticHealing" type="checkbox" name="attr_staticHealing" />
						<input class="sheet-staticIntimidation" type="checkbox" name="attr_staticIntimidation" />
						<input class="sheet-staticLanguage" type="checkbox" name="attr_staticLanguage" />
						<input class="sheet-staticNotice" type="checkbox" name="attr_staticNotice" />
						<input class="sheet-staticOccult" type="checkbox" name="attr_staticOccult" />
						<input class="sheet-staticPerformance" type="checkbox" name="attr_staticPerformance" />
						<input class="sheet-staticPersuasion" type="checkbox" name="attr_staticPersuasion" />
						<input class="sheet-staticPiloting" type="checkbox" name="attr_staticPiloting" />
						<input class="sheet-staticPsionics" type="checkbox" name="attr_staticPsionics" />
						<input class="sheet-staticRepair" type="checkbox" name="attr_staticRepair" />
						<input class="sheet-staticResearch" type="checkbox" name="attr_staticResearch" />
						<input class="sheet-staticRiding" type="checkbox" name="attr_staticRiding" />
						<input class="sheet-staticScience" type="checkbox" name="attr_staticScience" />
						<input class="sheet-staticShooting" type="checkbox" name="attr_staticShooting" />
						<input class="sheet-staticSpellcasting" type="checkbox" name="attr_staticSpellcasting" />
						<input class="sheet-staticStealth" type="checkbox" name="attr_staticStealth" />
						<input class="sheet-staticSurvival" type="checkbox" name="attr_staticSurvival" />
						<input class="sheet-staticTaunt" type="checkbox" name="attr_staticTaunt" />
						<input class="sheet-staticThievery" type="checkbox" name="attr_staticThievery" />
						<input class="sheet-staticWeirdScience" type="checkbox" name="attr_staticWeirdScience" />
						<input class="sheet-staticKnowledgeOther" type="checkbox" name="attr_staticKnowledgeOther" />
						<!-- Begin Buttons -->
						<button class="sheet-traitbutton sheet-miniButton" type='roll' name='roll_tUnskilledRoll' title="@{tUnskilledRoll}" value='@{whisperunskilled} &{template:roll} {{namelength=@{namelength}}} @{rolltUnskilled} {{skill_roll=[[ @{unskilledSkillRollFormula} ]]}} {{wild_die=[[ @{unskilledWildDieFormula} ]]}} @{unskilledencumbrancebutton} @{showtraitmods} @{unshakeTemplate} {{button=y}} {{ReRoll=^{reroll}(~tUnskilledRoll)}}'> <span data-i18n="unskilled-d4-2">Unskilled (d4-2)</span></button>
                        <!-- sheet-unskilledbutton sheet-traitflexattbutton -->
						<span class="sheet-academics">
							<button class="sheet-traitbutton sheet-miniButton" type='roll' name='roll_tAcademicsRoll' title="@{tAcademicsRoll}" value="@{academicsRollValue}"> <span name='attr_academicsname'></span> (<span name="attr_academics_display"></span>)</button>
						</span>
						<span class="sheet-SkillSpecMini sheet-academics">
							<fieldset class="repeating_academicsspec">
								<button class="sheet-traitbutton sheet-miniButton" type='roll' name='roll_tAcademicsSpecRoll' title="@{tAcademicsSpecRoll}" value='@{academicsSpecRollValue}'> <span name="attr_academicsSpecName"></span></button>
								<input type="hidden" name="attr_academicsSpecName" />
								<input type="hidden" name="attr_academicsSpecRollValue" />
							</fieldset>
						</span>

						<span class="sheet-athletics">
							<button class="sheet-traitbutton sheet-miniButton" type='roll' name='roll_tAthleticsRoll' title="@{tAthleticsRoll}" value='@{athleticsRollValue} {{skill_roll=[[ @{athleticsSkillRollFormula} ]]}} {{wild_die=[[ @{athleticsWildDieFormula} ]]}}'> <span name="attr_athleticsname"></span> (<span name="attr_athletics_display"></span>)</button>
						</span>
						<span class="sheet-SkillSpecMini sheet-athletics">
							<fieldset class="repeating_athleticsspec">
						 		<button class="sheet-traitbutton sheet-miniButton" type='roll' name='roll_tAthleticsSpecRoll' title="@{tAthleticsSpecRoll}" value='@{athleticsSpecRollValue} {{skill_roll=[[ @{athleticsSkillRollFormula} ]]}} {{wild_die=[[ @{athleticsWildDieFormula} ]]}}'> <span name="attr_athleticsSpecName"></button>
						 		<input class="sheet-speciality" type="hidden" name="attr_athleticsSpecName" />
							</fieldset>
						</span>

						<span class="sheet-battle">
							<button class="sheet-traitbutton sheet-miniButton" type='roll' name='roll_tBattleRoll' title="@{tBattleRoll}" value='@{battleRollValue}'> <span name="attr_battlename"></span> (<span name="attr_battle_display"></span>)</button>
						</span>
						<span class="sheet-SkillSpecMini sheet-battle">
							<fieldset class="repeating_battlespec">
						 		<input type="hidden" name="attr_battleSpecRollValue" />
						 		<button class="sheet-traitbutton sheet-miniButton" type='roll' name='roll_tBattleSpecRoll' value='@{battleSpecRollValue}'><span name="attr_battleSpecName"></span> (<span name="attr_battle_display"></span>)</button>
						 		<input type="hidden" name="attr_battleSpecName" />
							</fieldset>
						</span>

						<span class="sheet-boating">
							<button class="sheet-traitbutton sheet-miniButton" type='roll' name='roll_tBoatingRoll' title="@{tBoatingRoll}" value='@{boatingRollValue}'> <span name="attr_boatingname"></span> (<span name="attr_boating_display"></span>)</button>
						</span>
						<span class="sheet-SkillSpecMini sheet-boating">
							<fieldset class="repeating_boatingspec">
						 		<button class="sheet-traitbutton sheet-miniButton" type='roll' name='roll_tBoatingSpecRoll' title="@{tBoatingSpecRoll}" value='@{boatingSpecRollValue}'><span name="attr_boatingSpecName"></span> (<span name="attr_boating_display"></span>)</button>
						 		<input class="sheet-speciality" type="hidden" name="attr_boatingSpecName" />
							</fieldset>
						</span>

						<span class="sheet-commonknowledge">
							<button class="sheet-traitbutton sheet-miniButton" type='roll' name='roll_tCommonKnowledgeRoll' title="@{tCommonKnowledgeRoll}" value='@{commonknowledgeRollValue}'> <span name="attr_commonknowledgename"></span> (<span name="attr_commonknowledge_display"></span>)</button>
						</span>
						<span class="sheet-SkillSpecMini sheet-commonknowledge">
							<fieldset class="repeating_commonknowledgespec">
						 		<button class="sheet-traitbutton sheet-miniButton" type='roll' name='roll_tCommonKnowledgeSpecRoll' title="@{tCommonKnowledgeSpecRoll}" value='@{commonknowledgeSpecRollValue}'><span name="attr_commonknowledgeSpecName"></span> (<span name="attr_commonknowledge_display"></span>)</button>
						 		<input class="sheet-speciality" type="hidden" name="attr_commonknowledgeSpecName" />
							</fieldset>
						</span>

						<span class="sheet-driving">
							<button class="sheet-traitbutton sheet-miniButton" type='roll' name='roll_tDrivingRoll' title="@{tDrivingRoll}" value='@{drivingRollValue}'> <span name="attr_drivingname"></span> (<span name="attr_driving_display"></span>)</button>
						</span>
						<span class="sheet-SkillSpecMini sheet-driving">
							<fieldset class="repeating_drivingspec">
						 		<button class="sheet-traitbutton sheet-miniButton" type='roll' name='roll_tDrivingSpecRoll' title="@{tDrivingSpecRoll}" value='@{drivingSpecRollValue}'><span name="attr_drivingSpecName"></span> (<span name="attr_driving_display"></span>)</button>
						 		<input class="sheet-speciality" type="hidden" name="attr_drivingSpecName" />
							</fieldset>
						</span>

						<span class="sheet-electronics">
							<button class="sheet-traitbutton sheet-miniButton" type='roll' name='roll_tElectronicsRoll' title="@{tElectronicsRoll}" value='@{electronicsRollValue}'> <span name="attr_electronicsname"></span> (<span name="attr_electronics_display"></span>)</button>
						</span>
						<span class="sheet-SkillSpecMini sheet-electronics">
							<fieldset class="repeating_electronicsspec">
						 		<button class="sheet-traitbutton sheet-miniButton" type='roll' name='roll_tElectronicsSpecRoll' title="@{tElectronicsSpecRoll}" value='@{repeating_electronicsspec_electroncisSpecRollValue}'><span name="attr_electronicsSpecName"></span> (<span name="attr_electronics_display"></span>)</button>
						 		<input class="sheet-speciality" type="hidden" name="attr_electronicsSpecName" />
							</fieldset>
						</span>

						<span class="sheet-faith">
							<button class="sheet-traitbutton sheet-miniButton" type='roll' name='roll_tFaithRoll' title="@{tFaithRoll}" value='@{faithRollValue}'> <span name="attr_faithname"></span> (<span name="attr_faith_display"></span>)</button>
						</span>
						<span class="sheet-SkillSpecMini sheet-faith">
							<fieldset class="repeating_faithspec">
						 		<button class="sheet-traitbutton sheet-miniButton" type='roll' name='roll_tFaithSpecRoll' title="@{tFaithSpecRoll}" value='@{faithSpecRollValue}'></button>
						 		<input class="sheet-speciality" type="hidden" name="attr_faithSpecName" />
							</fieldset>
						</span>

						<span class="sheet-fighting">
							<button class="sheet-traitbutton sheet-miniButton" type='roll' name='roll_tFightingRoll' title="@{tFightingRoll}" value='@{fightingRollValue} {{skill_roll=[[ @{fightingSkillRollFormula} ]]}} {{wild_die=[[ @{fightingWildDieFormula} ]]}}'> <span name='attr_fightingname'></span> (<span name="attr_fighting_display"></span>)</button>
						</span>
						<span class="sheet-SkillSpecMini sheet-fighting">
							<fieldset class="repeating_fightingspec">
						 		<button class="sheet-traitbutton sheet-miniButton" type='roll' name='roll_tFightingSpecRoll' title="@{tFightingSpecRoll}" value='@{fightingSpecRollValue} {{skill_roll=[[ @{fightingSkillRollFormula} ]]}} {{wild_die=[[ @{fightingWildDieFormula} ]]}}'></button>
						 		<input class="sheet-speciality" type="hidden" name="attr_fightingSpecName" />
							</fieldset>
						</span>

						<span class="sheet-focus">
							<button class="sheet-traitbutton sheet-miniButton" type='roll' name='roll_tFocusRoll' title="@{tFocusRoll}" value='@{focusRollValue}'> <span name="attr_focusname"></span> (<span name="attr_focus_display"></span>)</button>
						</span>
						<span class="sheet-SkillSpecMini sheet-focus">
							<fieldset class="repeating_focusspec">
						 		<button class="sheet-traitbutton sheet-miniButton" type='roll' name='roll_tFocusSpecRoll' title="@{tFocusSpecRoll}" value='@{focusSpecRollValue}'></button>
						 		<input class="sheet-speciality" type="hidden" name="attr_focusSpecName" />
							</fieldset>
						</span>

						<span class="sheet-gambling">
							<button class="sheet-traitbutton sheet-miniButton" type='roll' name='roll_tGamblingRoll' title="@{tGamblingRoll}" value='@{gamblingRollValue}'> <span name="attr_gamblingname"></span> (<span name="attr_gambling_display"></span>)</button>
						</span>
						<span class="sheet-SkillSpecMini sheet-gambling">
							<fieldset class="repeating_gamblingspec">
						 		<button class="sheet-traitbutton sheet-miniButton" type='roll' name='roll_tGamblingSpecRoll' title="@{tGamblingSpecRoll}" value='@{gamblingSpecRollValue}'></button>
						 		<input class="sheet-speciality" type="hidden" name="attr_gamblingSpecName" />
							</fieldset>
						</span>

						<span class="sheet-hacking">
							<button class="sheet-traitbutton sheet-miniButton" type='roll' name='roll_tHackingRoll' title="@{tHackingRoll}" value='@{hackingRollValue}'> <span name="attr_hackingname"></span> (<span name="attr_hacking_display"></span>)</button>
						</span>
						<span class="sheet-SkillSpecMini sheet-hacking">
							<fieldset class="repeating_hackingspec">
						 		<button class="sheet-traitbutton sheet-miniButton" type='roll' name='roll_tHackingSpecRoll' title="@{tHackingSpecRoll}" value='@{hackingSpecRollValue}'></button>
						 		<input class="sheet-speciality" type="hidden" name="attr_hackingSpecName" />
							</fieldset>
						</span>

						<span class="sheet-healing">
							<button class="sheet-traitbutton sheet-miniButton" type='roll' name='roll_tHealingRoll' title="@{tHealingRoll}" value='@{healingRollValue} &{template:roll} {{namelength=@{namelength}}} {{button=y}} {{ReRoll=^{reroll}(~tHealingRoll)}} {{trait=@{healingname}}} @{rolltHealing} @{setmods} @{showtraitmods} @{unshakeTemplate}'> <span name="attr_healingname"></span> (<span name="attr_healing_display"></span>)</button>
						</span>
						<span class="sheet-SkillSpecMini sheet-healing">
							<fieldset class="repeating_healingspec">
						 		<button class="sheet-traitbutton sheet-miniButton" type='roll' name='roll_tHealingSpecRoll' title="@{tHealingSpecRoll}" value='@{healingSpecRollValue}'></button>
						 		<input class="sheet-speciality" type="hidden" name="attr_healingSpecName" />
							</fieldset>
						</span>

						<span class="sheet-intimidation">
							<button class="sheet-traitbutton sheet-miniButton" type='roll' name='roll_tIntimidationRoll' title="@{tIntimidationRoll}" value='@{intimidationRollValue}'> <span name="attr_intimidationname"></span> (<span name="attr_intimidation_display"></span>)</button>
						</span>
						<span class="sheet-SkillSpecMini sheet-intimidation">
							<fieldset class="repeating_intimidationspec">
						 		<button class="sheet-traitbutton sheet-miniButton" type='roll' name='roll_tIntimidationSpecRoll' title="@{tIntimidationSpecRoll}" value='@{intimidationSpecRollValue}'></button>
						 		<input class="sheet-speciality" type="hidden" name="attr_intimidationSpecName" />
							</fieldset>
						</span>

						<span class="sheet-language">
							<button class="sheet-traitbutton sheet-miniButton" type='roll' name='roll_tLanguageRoll' title="@{tLanguageRoll}" value='@{languageRollValue}'> <span name="attr_native-languagename"></span> (<span name="attr_language_display"></span>)</button>
						</span>
						<span class="sheet-SkillSpecMini sheet-language">
							<fieldset class="repeating_languagespec">
						 		<button class="sheet-traitbutton sheet-miniButton" type='roll' name='roll_tLanguageSpecRoll' title="@{tLanguageSpecRoll}" value='@{languageSpecRollValue}'></button>
						 		<input class="sheet-speciality" type="hidden" name="attr_languageSpecName" />
							</fieldset>
						</span>

						<span class="sheet-notice">
							<button class="sheet-traitbutton sheet-miniButton" type='roll' name='roll_tNoticeRoll' title="@{tNoticeRoll}" value='@{noticeRollValue}'> <span name="attr_noticename"></span> (<span name="attr_notice_display"></span>)</button>
						</span>
						<span class="sheet-SkillSpecMini sheet-notice">
							<fieldset class="repeating_noticespec">
						 		<button class="sheet-traitbutton sheet-miniButton" type='roll' name='roll_tNoticeSpecRoll' title="@{tNoticeSpecRoll}" value='@{noticeSpecRollValue}'></button>
						 		<input class="sheet-speciality" type="hidden" name="attr_noticeSpecName" />
							</fieldset>
						</span>

						<span class="sheet-occult">
							<button class="sheet-traitbutton sheet-miniButton" type='roll' name='roll_tOccultRoll' title="@{tOccultRoll}" value='@{occultRollValue}'> <span name="attr_occultname"></span> (<span name="attr_occult_display"></span>)</button>
						</span>
						<span class="sheet-SkillSpecMini sheet-occult">
							<fieldset class="repeating_occultspec">
						 		<button class="sheet-traitbutton sheet-miniButton" type='roll' name='roll_tOccultSpecRoll' title="@{tOccultSpecRoll}" value='@{occultSpecRollValue}'></button>
						 		<input class="sheet-speciality" type="hidden" name="attr_occultSpecName" />
							</fieldset>
						</span>

						<span class="sheet-performance">
							<button class="sheet-traitbutton sheet-miniButton" type='roll' name='roll_tPerformanceRoll' title="@{tPerformanceRoll}" value='@{performanceRollValue}'> <span name="attr_performancename"></span> (<span name="attr_performance_display"></span>)</button>
						</span>
						<span class="sheet-SkillSpecMini sheet-performance">
							<fieldset class="repeating_performancespec">
						 		<button class="sheet-traitbutton sheet-miniButton" type='roll' name='roll_tPerformanceSpecRoll' title="@{tPerformanceSpecRoll}" value='@{performanceSpecRollValue}'></button>
						 		<input class="sheet-speciality" type="hidden" name="attr_performanceSpecName" />
							</fieldset>
						</span>

						<span class="sheet-persuasion">
							<button class="sheet-traitbutton sheet-miniButton" type='roll' name='roll_tPersuasionRoll' title="@{tPersuasionRoll}" value='@{persuasionRollValue}'> <span name="attr_persuasionname"></span> (<span name="attr_persuasion_display"></span>)</button>
						</span>
						<span class="sheet-SkillSpecMini sheet-persuasion">
							<fieldset class="repeating_persuasionspec">
						 		<button class="sheet-traitbutton sheet-miniButton" type='roll' name='roll_tPersuasionSpecRoll' title="@{tPersuasionSpecRoll}" value='@{persuasionSpecRollValue}'></button>
						 		<input class="sheet-speciality" type="hidden" name="attr_persuasionSpecName" />
							</fieldset>
						</span>

						<span class="sheet-piloting">
							<button class="sheet-traitbutton sheet-miniButton" type='roll' name='roll_tPilotingRoll' title="@{tPilotingRoll}" value='@{pilotingRollValue}'> <span name="attr_pilotingname"></span> (<span name="attr_piloting_display"></span>)</button>
						</span>
						<span class="sheet-SkillSpecMini sheet-piloting">
							<fieldset class="repeating_pilotingspec">
						 		<button class="sheet-traitbutton sheet-miniButton" type='roll' name='roll_tPilotingSpecRoll' title="@{tPilotingSpecRoll}" value='@{pilotingSpecRollValue}'></button>
						 		<input class="sheet-speciality" type="hidden" name="attr_pilotingSpecName" />
							</fieldset>
						</span>

						<span class="sheet-psionics">
							<button class="sheet-traitbutton sheet-miniButton" type='roll' name='roll_tPsionicsRoll' title="@{tPsionicsRoll}" value='@{psionicsRollValue}'> <span name="attr_psionicsname"></span> (<span name="attr_psionics_display"></span>)</button>
						</span>
						<span class="sheet-SkillSpecMini sheet-psionics">
							<fieldset class="repeating_psionicsspec">
						 		<button class="sheet-traitbutton sheet-miniButton" type='roll' name='roll_tPsionicsSpecRoll' title="@{tPsionicsSpecRoll}" value='@{psionicsSpecRollValue}'></button>
						 		<input class="sheet-speciality" type="hidden" name="attr_psionicsSpecName" />
							</fieldset>
						</span>

						<span class="sheet-repair">
							<button class="sheet-traitbutton sheet-miniButton" type='roll' name='roll_tRepairRoll' title="@{tRepairRoll}" value='@{repairRollValue}'> <span name="attr_repairname"></span> (<span name="attr_repair_display"></span>)</button>
						</span>
						<span class="sheet-SkillSpecMini sheet-repair">
							<fieldset class="repeating_repairspec">
						 		<button class="sheet-traitbutton sheet-miniButton" type='roll' name='roll_tRepairSpecRoll' title="@{tRepairSpecRoll}" value='@{repairSpecRollValue}'></button>
						 		<input class="sheet-speciality" type="hidden" name="attr_repairSpecName"  />
							</fieldset>
						</span>

						<span class="sheet-research">
							<button class="sheet-traitbutton sheet-miniButton" type='roll' name='roll_tResearchRoll' title="@{tResearchRoll}" value='@{researchRollValue}'> <span name="attr_researchname"></span> (<span name="attr_research_display"></span>)</button>
						</span>
						<span class="sheet-SkillSpecMini sheet-research">
							<fieldset class="repeating_researchspec">
						 		<button class="sheet-traitbutton sheet-miniButton" type='roll' name='roll_tResearchSpecRoll' title="@{tResearchSpecRoll}" value='@{researchSpecRollValue}'></button>
						 		<input class="sheet-speciality" type="hidden" name="attr_researchSpecName" />
							</fieldset>
						</span>

						<span class="sheet-riding">
							<button class="sheet-traitbutton sheet-miniButton" type='roll' name='roll_tRidingRoll' title="@{tRidingRoll}" value='@{ridingRollValue}'> <span name="attr_ridingname"></span> (<span name="attr_riding_display"></span>)</button>
						</span>
						<span class="sheet-SkillSpecMini sheet-riding">
							<fieldset class="repeating_ridingspec">
						 		<button class="sheet-traitbutton sheet-miniButton" type='roll' name='roll_tRidingSpecRoll' title="@{tRidingSpecRoll}" value='@{ridingSpecRollValue}'></button>
						 		<input class="sheet-speciality" type="hidden" name="attr_ridingSpecName" />
							</fieldset>
						</span>

						<span class="sheet-science">
							<button class="sheet-traitbutton sheet-miniButton" type='roll' name='roll_tScienceRoll' title="@{tScienceRoll}" value='@{scienceRollValue}'> <span name="attr_sciencename"></span> (<span name="attr_science_display"></span>)</button>
						</span>
						<span class="sheet-SkillSpecMini sheet-science">
							<fieldset class="repeating_sciencespec">
						 		<button class="sheet-traitbutton sheet-miniButton" type='roll' name='roll_tScienceSpecRoll' title="@{tScienceSpecRoll}" value='@{scienceSpecRollValue}'></button>
						 		<input class="sheet-speciality" type="hidden" name="attr_scienceSpecName" />
							</fieldset>
						</span>

						<span class="sheet-shooting">
							<button class="sheet-traitbutton sheet-miniButton" type='roll' name='roll_tShootingRoll' title="@{tShootingRoll}" value='@{shootingRollValue} {{skill_roll=[[ @{shootingSkillRollFormula} ]]}} {{wild_die=[[ @{shootingWildDieFormula} ]]}}'> <span name="attr_shootingname"></span> (<span name="attr_shooting_display"></span>)</button>
						</span>
						<span class="sheet-SkillSpecMini sheet-shooting">
							<fieldset class="repeating_shootingspec">
						 		<button class="sheet-traitbutton sheet-miniButton" type='roll' name='roll_tShootingSpecRoll' title="@{tShootingSpecRoll}" value='@{shootingSpecRollValue} {{skill_roll=[[ @{shootingSkillRollFormula} ]]}} {{wild_die=[[ @{shootingWildDieFormula} ]]}}'></button>
						 		<input class="sheet-speciality" type="hidden" name="attr_shootingSpecName" />
							</fieldset>
						</span>

						<span class="sheet-spellcasting">
							<button class="sheet-traitbutton sheet-miniButton" type='roll' name='roll_tSpellcastingRoll' title="@{tSpellcastingRoll}" value='@{spellcastingRollValue}'> <span name="attr_spellcastingname"></span> (<span name="attr_spellcasting_display"></span>)</button>
						</span>
						<span class="sheet-SkillSpecMini sheet-spellcasting">
							<fieldset class="repeating_spellcastingspec">
						 		<button class="sheet-traitbutton sheet-miniButton" type='roll' name='roll_tSpellcastingSpecRoll' title="@{tSpellcastingSpecRoll}" value='@{spellcastingSpecRollValue}'></button>
						 		<input class="sheet-speciality" type="hidden" name="attr_spellcastingSpecName" />
							</fieldset>
						</span>

						<span class="sheet-stealth">
							<button class="sheet-traitbutton sheet-miniButton" type='roll' name='roll_tStealthRoll' title="@{tStealthRoll}" value='@{stealthRollValue}'> <span name="attr_stealthname"></span> (<span name="attr_stealth_display"></span>)</button>
						</span>
						<span class="sheet-SkillSpecMini sheet-stealth">
							<fieldset class="repeating_stealthspec">
						 		<button class="sheet-traitbutton sheet-miniButton" type='roll' name='roll_tStealthSpecRoll' title="@{tStealthSpecRoll}" value='@{stealthSpecRollValue}'></button>
						 		<input class="sheet-speciality" type="hidden" name="attr_stealthSpecName" />
							</fieldset>
						</span>

						<span class="sheet-survival">
							<button class="sheet-traitbutton sheet-miniButton" type='roll' name='roll_tSurvivalRoll' title="@{tSurvivalRoll}" value='@{survivalRollValue}'> <span name="attr_survivalname"></span> (<span name="attr_survival_display"></span>)</button>
						</span>
						<span class="sheet-SkillSpecMini sheet-survival">
							<fieldset class="repeating_survivalspec">
						 		<button class="sheet-traitbutton sheet-miniButton" type='roll' name='roll_tSurvivalSpecRoll' title="@{tSurvivalSpecRoll}" value='@{survivalSpecRollValue}'></button>
						 		<input class="sheet-speciality" type="hidden" name="attr_survivalSpecName" />
							</fieldset>
						</span>

						<span class="sheet-taunt">
							<button class="sheet-traitbutton sheet-miniButton" type='roll' name='roll_tTauntRoll' title="@{tTauntRoll}" value='@{tauntRollValue}'> <span name="attr_tauntname"></span> (<span name="attr_taunt_display"></span>)</button>
						</span>
						<span class="sheet-SkillSpecMini sheet-taunt">
							<fieldset class="repeating_tauntspec">
						 		<button class="sheet-traitbutton sheet-miniButton" type='roll' name='roll_tTauntSpecRoll' title="@{tTauntSpecRoll}" value='@{tauntSpecRollValue}'></button>
						 		<input class="sheet-speciality" type="hidden" name="attr_tauntSpecName" />
							</fieldset>
						</span>

						<span class="sheet-thievery">
							<button class="sheet-traitbutton sheet-miniButton" type='roll' name='roll_tThieveryRoll' title="@{tThieveryRoll}" value='@{thieveryRollValue}'> <span name="attr_thieveryname"></span> (<span name="attr_thievery_display"></span>)</button>
						</span>
						<span class="sheet-SkillSpecMini sheet-thievery">
							<fieldset class="repeating_thieveryspec">
						 		<button class="sheet-traitbutton sheet-miniButton" type='roll' name='roll_tThieverySpecRoll' title="@{tThieverySpecRoll}" value='@{thieverySpecRollValue}'></button>
						 		<input class="sheet-speciality" type="hidden" name="attr_thieverySpecName" />
							</fieldset>
						</span>

						<span class="sheet-weirdscience">
							<button class="sheet-traitbutton sheet-miniButton" type='roll' name='roll_tWeirdScienceRoll' title="@{tWeirdScienceRoll}" value='@{weirdscienceRollValue} {{skill_roll=[[ @{weirdscienceSkillRollFormula} ]]}} {{wild_die=[[ @{weirdscienceWildDieFormula} ]]}}'> <span name="attr_weirdsciencename"></span> (<span name="attr_weirdscience_display"></span>)</button>
						</span>
						<span class="sheet-SkillSpecMini sheet-weirdscience">
							<fieldset class="repeating_weirdsciencespec">
                                <button class="sheet-skillbutton sheet-skillflexattbutton" type='roll' name='roll_tWeirdScienceRoll' title="@{tWeirdScienceRoll}" value='@{weirdscienceRollValue} {{skill_roll=[[ @{weirdscienceSkillRollFormula} ]]}} {{wild_die=[[ @{weirdscienceWildDieFormula} ]]}}'>
						 		<input class="sheet-speciality" type="hidden" name="attr_weirdscienceSpecName" />
							</fieldset>
						</span>

						<span class="sheet-knowledgeother">
							<fieldset class="repeating_skills">
								<button class="sheet-traitbutton sheet-miniButton" type='roll' name='roll_tSkillRoll2' value='@{customskillRollValue}'> <span name="attr_custSkillName"></span> (<span name="attr_skillnamerank_display"></span>)</button>
                                <!--<button class="sheet-hiddenButton" type='roll' name='roll_tSkillRoll' value='@{customskillRollValue}'> <span name="attr_custSkillName"></span> <span class='sheet-linkedAttSpan' name="attr_linkedotherattscore" data-i18n-dynamic></span></button>-->
                                <input type='hidden' name='attr_skillnamerank_delta' value='0' />
                                <input type="hidden" name="attr_customskillRollValue" value="@{whisperskillname} &{template:roll} {{namelength=@{namelength}}} {{button=y}} {{ReRoll=^{reroll}(~repeating_skills_tSkillRoll)}} {{trait=@{custSkillName}}} @{rolltSkill} @{linkedotherattscorebutton} @{showtraitmods} @{unshakeTemplate}" />
                                <input type="hidden" name="attr_skillnamerank" value="4" />
                                <input type="hidden" name="attr_skillnamerankmod" value="0" />
                                <input type='hidden' name='attr_otherModType' />
                                <input type="hidden" name="attr_SkillMod" value="0" />
                                <input type='hidden' value='/w gm' name='attr_whisperskillname' />
                                <input type="hidden" name="attr_custSkillName" value="Skill" maxlength="25" />
                                <input type='hidden' name='attr_linkedotherattscore' value="sma-u" />
                                <input type='hidden' name='attr_rolltSkill' value='{{name=@{character_name} }} {{skill_rank=@{skillnamerank_display} }} {{skill_roll=[[@{skillnamerank_rank} + @{SkillMod}+ @{linkedotherattscoreformula} + @{traitmods} ]]}} {{mook=[[1d0+@{wdNum}]]}} {{wild_die=[[ 1d@{skillnamewilddie}! + @{skillnamerankmod} + @{SkillMod} + @{linkedotherattscoreformula} + @{traitmods} ]]}} {{ttmod=@{ttmod}}} {{wounds=-@{woundsMod} }} {{fatigue=-@{fatigue}}} @{templateConditions} {{conviction=[[ [[@{conviction}]]d6! ]] }}' />
                                <input type='hidden' name='attr_linkedotherattscorebutton' value='@{setmods}' />
	            				<input type='hidden' name='attr_linkedotherattscoreformula' value='@{ModSum}[Distracted, Wounds, Fatigue]' />
                                <input type='hidden' name="attr_skillnamewilddie" value="6" />
                                <input type='hidden' name='attr_skillnamerank_rank' value='1d4!' />
	            				<input type='hidden' name='attr_skillnamerank_display' value='d4' />
							</fieldset>
						</span>
                    </div>
    				<!-- End Collapsed Skills -->

    				<!-- Collapsed Weapons -->
    				<div class='sheet-collapsedSectionView'>
                    	<h1 class="sheet-groupHeader" data-i18n="weapons">Weapons</h1>
                    	<fieldset class="repeating_weapons">
                    		<span class="sheet-weaponsMini">
								<input type='checkbox' class='sheet-isCarriedMini' name='attr_weaponcarried' />
								<button type='roll' class="sheet-traitbutton sheet-miniButton" name='roll_tWeapon' value="@{weaponroll}"><input type="hidden" name="attr_weaponbutton" class="sheet-weaponbutton" value="1" /><span class="sheet-buttonand sheet-miniView">⚔️ </span><span class="sheet-buttondo sheet-miniView">&#x1f5e1;</span><span class="sheet-buttonma sheet-miniView">⚔️🗡️</span> <span name='attr_weapon'></span> (<span name="attr_weapondamage"></span>)</button>
								<input type='hidden' class='sheet-weaponItem sheet-weapon' name='attr_weapon' />
								<input type='hidden' name="attr_weapondamage" value='Str+1d4' />
								<input type="hidden" class='sheet-showmultiattack' name="attr_showmulti" value="0" />
                                <!-- Trademark Weapon Fields -->
                                <input type="hidden" name="attr_weaponAttackBonusReason" />
                                <input type="hidden" name="attr_weaponAttackBonus" value="0" />
                                <!-- Skill Formulae -->
                                <input type="hidden" name="attr_weaponUnskilledFormula" value="@{unskilledSkillRollFormula}" />
                                <input type="hidden" name="attr_weaponUnskilledWildDieFormula" value="@{unskilledWildDieFormula}" />

                                <input type="hidden" name="attr_weaponFightingFormula" value="@{fightingSkillRollFormula}" />
                                <input type="hidden" name="attr_weaponFightingWildDieFormula" value="@{fightingWildDieFormula}" />

                                <input type="hidden" name="attr_weaponAthleticsFormula" value="@{athleticsSkillRollFormula}" />
                                <input type="hidden" name="attr_weaponAthleticsWildDieFormula" value="@{athleticsWildDieFormula}" />

                                <input type="hidden" name="attr_weaponShootingFormula" value="@{shootingSkillRollFormula}" />
                                <input type="hidden" name="attr_weaponShootingWildDieFormula" value="@{shootingWildDieFormula}" />

                                <input type="hidden" name="attr_weaponWeirdScienceFormula" value="@{weirdscienceSkillRollFormula}" />
                                <input type="hidden" name="attr_weaponWeirdScienceWildDieFormula" value="@{weirdscienceWildDieFormula}" />
								<!-- Hidden Fields for the roll button(s), etc -->
								<input type='hidden' name='attr_weaponroll' value='@{damageOnly}' />
								<input type='hidden' name='attr_skillNDamage' value="@{whisperweapon} &{template:roll} {{namelength=@{namelength}}} {{trait=Fighting}} {{source=@{weapon}}} @{rolltFighting} {{skill_roll=&{noerror} [[ @{fightingSkillRollFormula} ]]}} {{wild_die=[[ @{fightingWildDieFormula} ]]}} @{unshakeTemplate} {{button=y}} {{ReRoll=^{reroll}(~repeating_weapons_tWeapon) }} {{DmgRoll=^{roll-damage}(~repeating_weapons_dmg) }} @{multiattack}" /> <!--Used for Skill and Damage roll -->
								<input type="hidden" name='attr_multiattack' value='0' /> <!-- Used for Multiattack -->
								<input type='hidden' name='attr_damageOnly' value='@{dmgTemplate}' /> <!-- Used for Damage Only -->
								<!-- Build the Damage Roll Template Info -->
								<input type='hidden' name='attr_weapondmg' value="@{strength_rank}+1d4!" /> <!-- the damage formula -->
								<input type='hidden' name='attr_weaponsbonusdmg' value='@{vbonusdamage}' /> <!-- This will either equal @{vbonusdamage} (the default) or @{weaponsbdt} -->
								<input type='hidden' name='attr_weaponsbonusDie' value='{{bonus_die=[[@{weaponsbonusdmg}!]]}}' />
								<!-- how to call a button roll: ^{reroll-damage}(~repeating_weapons_dmg) -->
								<input type='hidden' name='attr_dmgTemplate' value='@{whisperweapon} &{template:damage} {{namelength=@{namelength}}} {{name=@{character_name}}} {{source=@{weapon} }} {{dmg_rank=@{weapondamage}}} {{dmg_roll=[[@{weapondmg} + @{damagemods}]]}} @{weaponsbonusDie} {{showap=[[1d0+@{weaponap}]]}} {{ap=@{weaponap}}} {{notes=@{weaponnotes}}} {{button=y}} {{DmgRoll=^{reroll-damage}(~repeating_weapons_dmg) }} @{gritty} {{GrittyRoll=[Roll Injury](~repeating_weapons_grittyroll)}} {{conviction=[[ [[@{conviction}]]d6! ]] }}' />
								<input type='checkbox' value='/w gm' name='attr_whisperweapon' class="sheet-hiddenInput" />
								<input type="hidden" name='attr_weaponap' />
                                <input type="hidden" name='attr_weaponsbdt' value="d6" />
								<textarea name='attr_weaponnotes' class='sheet-hiddenInput'></textarea>
							</span>
						</fieldset>
                    </div>
    				<!-- End Collapsed Weapons -->

    				<!-- Collapsed Spells -->
    				<input type="checkbox" class="sheet-hideArcanum sheet-hiddenInput" name="attr_ArcanumTab">
    				<div class='sheet-collapsedSectionView sheet-arcanum'>
                    	<h1 class="sheet-groupHeader"><span name="attr_powerlabelplural"></span></h1>
                    	<fieldset class='repeating_spells'>
                    		<span class="sheet-spellsMini">
								<button class="sheet-traitbutton sheet-miniButton" type='roll' name='roll_tPower' value="@{spellroll}"><input type="hidden" name="attr_spellbutton" class="sheet-spellbutton" value="1" /><span class="sheet-buttonand">⚔️</span><span class="sheet-buttondo">&#x1f5e1;</span><span class="sheet-buttonsk">&#x1f64c;</span> <span name="attr_power"></span></button>
								<input type='hidden' name='attr_power' />
								<input type='hidden' name='attr_pp' />
								<input type='hidden' name='attr_spellroll' value='@{spelldamageOnly}' />
								<input type='hidden' name='attr_spellskillNDamage' /> <!--Used for Skill and Damage roll -->
								<input type='hidden' name='attr_spelldamageOnly' value='@{spelldmgTemplate}' /> <!-- Used for Damage Only -->
								<input type='hidden' name='attr_skillOnly' value='@{skTemplate}' /> <!-- Used for Damage Only -->
								<textarea name="attr_trappings" class='sheet-hiddenInput'></textarea>
								<textarea name='attr_spellnotes' class='sheet-hiddenInput'></textarea>
								<input type='checkbox' value='/w gm' name='attr_whisperspell' class='sheet-hiddenInput' />
								<input type="checkbox" name="attr_shownotes" value="{{notes=@{spellnotes}}}" class='sheet-hiddenInput' />
								<input type='hidden' name='attr_spelldmgTemplate' value='@{whisperspell} &{template:damage} {{namelength=@{namelength}}} {{name=@{character_name}}} {{source=@{power} }} {{trappings=@{trappings}}} {{dmg_rank=@{powerdamage}}} {{dmg_roll=[[@{spelldmg} + @{damagemods}]]}} @{spellsbonusDie} @{dmgshownotes} {{button=y}} {{DmgRoll=^{reroll-damage}(~repeating_spells_spelldmg) }} @{gritty} {{GrittyRoll=[Roll Injury](~repeating_spells_spellgrittyroll)}} {{conviction=[[ [[@{conviction}]]d6! ]] }}' />
								<input type='hidden' name='attr_spelldmg' /> <!-- the damage formula -->
                                <!-- Skill Formulae -->
                                <input type="hidden" name="attr_spellWeirdScienceFormula" value="@{weirdscienceSkillRollFormula}" />
                                <input type="hidden" name="attr_spellWeirdScienceWildDieFormula" value="@{weirdscienceWildDieFormula}" />

                                <input type="hidden" placeholder="Trademark Weapon" data-i18n-placeholder="trademark-weapon" name="attr_spellAttackBonusReason" value="Placeholder" />
                                <input type="hidden" name="attr_spellAttackBonus" value="0" />
                                <!-- End Skill Formulae -->
								<input type='hidden' name='attr_spellsbonusdmg' value='@{vbonusdamage}' />
								<input type='hidden' name='attr_spellsbonusDie' value='{{bonus_die=[[@{spellsbonusdmg}!]]}}' />
								<input type='hidden' name='attr_skTemplate' value='1d6!' />
								<input type='hidden' name='attr_dmgshownotes' value='{{notes=@{spellnotes}}}' />
								<input type='hidden' name='attr_powerdamage' />
                                <input type="hidden" name='attr_spellsbdt' value="d6" />
							</span>
						</fieldset>
                    </div>
    				<!-- End Collapsed Spells -->
                </div>

                <div class='sheet-center'>
                	<div class='sheet-base sheet-charDemoStart'>
                        <label class="sheet-wclabel"><div class="sheet-wciContainer"><input class="sheet-isWC" type="checkbox" name="attr_is_npc" value="1" /><span name="attr_WCI"></span></div></label> <input type='hidden' name='attr_namelength' value='0' /><input class='sheet-basicinputext sheet-basicCharName' type="text" title="@{character_name}" name="attr_character_name" /><label class="sheet-basicinfolableleft sheet-basicCharNameLabel" data-i18n="character-name">Name</label>
                    </div>
                    <div class='sheet-base'>
						<input class='sheet-basicinputext sheet-race' type="text" title="@{race}" name="attr_race" /> <input class='sheet-basicinputext sheet-gender' type="text" title="@{gender}" name="attr_gender" />
						<label class="sheet-basicinfolableleft sheet-race" data-i18n="race">Race</label> <label class="sheet-basicinfolableleft sheet-gender" data-i18n="gender">Gender</label>
                    </div>
                    <div class='sheet-base'>
                    	<div class="sheet-characterAge">
                    		<input class='sheet-basicinputext' type="text" title="@{age}" name="attr_age" />
                    		<label class="sheet-basicinfolableleft sheet-characterAge" data-i18n="age">Age</label>
                    	</div>
                    	<div class="sheet-characterHeight">
                    		<input class='sheet-basicinputext' type="text" title="@{character_height}" name="attr_character_height" />
                    		<label class="sheet-basicinfolableleft sheet-characterHeight" data-i18n="character-height">height</label>
                    	</div>
                    	<div class="sheet-characterWeight">
                    		<input class='sheet-basicinputext' type="text" title="@{character_weight}" name="attr_character_weight" />
                    		<label class="sheet-basicinfolableleft sheet-characterWeight" data-i18n="weight">Weight</label>
                    	</div>
                    	<div class="sheet-characterSize">
                    		<input class='sheet-basicinputext' type="number" title="@{size}" name="attr_size" value="0" />
                    		<input type="hidden" name="attr_sizecategory" value="normal" />
                    		<input type="number" name="attr_sizecur" title="@{sizecur}" style="display:none;" value="0" readonly />
                    		<label class="sheet-basicinfolableleft" data-i18n-title="size-category"><span data-i18n="size"></span>: <span data-i18n-dynamic name='attr_sizecategory'></span></label>
                    	</div>
						<!-- <input class='sheet-basicinputext sheet-characterAge' type="text" title="@{age}" name="attr_age" /> <input class='sheet-basicinputext sheet-characterHeight' type="text" title="@{character_height}" name="attr_character_height" /> <input class='sheet-basicinputext sheet-characterWeight' type="text" title="@{character_weight}" name="attr_character_weight" />
						<label class="sheet-basicinfolableleft sheet-characterAge" data-i18n="age">Age</label> <label class="sheet-basicinfolableleft sheet-characterHeight" data-i18n="height">height</label> <label class="sheet-basicinfolableleft sheet-characterWeight" data-i18n="weight">Weight</label> -->
					</div>
					<div class='sheet-base'>
						<div class="sheet-advances">
                            <input class="sheet-manuallySetAdvance" type="checkbox" name="attr_setadvance" value="1" />
							<input class="sheet-autoAdvance" type="number" name="attr_xp" title="@{xp}" readonly style="text-align: center;"/>
                            <input class="sheet-manualAdvance" type="number" name="attr_manualAdvance" title="@{manualAdvance}" style="text-align: center;"/>
							<label class='sheet-advancesLabel' data-i18n="advances">Advances</label>
						</div>
	                	<div class="sheet-characterRank">
	                		<select class='sheet-rank' name='attr_rank' title="@{rank}" value='novice' readonly>
								<option value='1' data-i18n="novice">Novice</option>
								<option value='2' data-i18n="seasoned">Seasoned</option>
								<option value='3' data-i18n="veteran">Veteran</option>
								<option value='4' data-i18n="heroic">Heroic</option>
								<option value='5' data-i18n="legendary">Legendary</option>
							</select>
							<label class='sheet-rankLabel' data-i18n="rank">Rank</label>
	                	</div>
	                	<div class="sheet-conviction">
	                		<!-- <input class='sheet-useConviction' type='checkbox' name='attr_useConviction' style="display: none" /> -->
							<input class="sheet-hasconviction" type="checkbox" value="1" name="attr_conviction" /><span class="sheet-convictiontoken"></span>
							<label class="sheet-labelConviction" data-i18n="conviction"></label>
						</div>
					</div>
    				<!-- Conditions used to be here -->
					<div class="sheet-parryPaceToughness">
						<!-- Pace -->
						<div class="sheet-base sheet-characterPace">
							<div class="sheet-imageContainer">
								<img class="sheet-statCircle" src="https://raw.githubusercontent.com/finderski/SWT/master/redCircle1.png" />
								<input type="hidden" name="attr_paceCur" title="@{paceCur}" class="sheet-derivedStat" value="6" readonly />
								<input class='sheet-moremods' type='checkbox' name='attr_showPaceMod'  style='display: none;' />
								<button type="action" name="act_paceCur" class="sheet-curPaceButton"><span name="attr_paceCur"></span> <span class="sheet-cog sheet-shiftLeft">y</span></button>
							</div>
							<button class="sheet-traitbutton sheet-deriveflexbutton sheet-paceButton" type='roll' name='roll_RunningRoll' title="@{RunningRoll}" value='&{template:emote} {{name=@{character_name}}} {{does=^{running-text-before-number} [[@{paceCur}+@{runningDie}]] ^{running-text-after-number} }}'> <span data-i18n="pace">Pace</span></button>
						</div>
						<!-- Parry -->
						<div class="sheet-base sheet-characterParry">
							<div class="sheet-imageContainer">
								<img class="sheet-statCircle" src="https://raw.githubusercontent.com/finderski/SWT/master/redCircle2.png" />
								<input type="hidden" name="attr_parryCur" title="@{parryCur}" class="sheet-derivedStat" readonly />
								<button type="action" name="act_parryCur" class="sheet-curParryButton"><span name="attr_parryCur"></span></button>
							</div>
							<input class='sheet-moremods' type='checkbox' name='attr_showParryMod'  style='display: none;' />
        					<button class="sheet-traitbutton sheet-deriveflexbutton sheet-parryLabelButton" type='action' name='act_parryButton'><span data-i18n="parry">Parry</span> <span class="sheet-cog sheet-shiftLeft">y</span></button>
        					<!-- <label class="sheet-parryScoreLabel" data-i18n="parry">Parry</label> -->
						</div>
						<!-- Toughness -->
						<div class="sheet-base sheet-characterToughness">
							<div class="sheet-imageContainer">
								<img class="sheet-statCircle" src="https://raw.githubusercontent.com/finderski/SWT/master/redCircle3.png" />
								<input type="hidden" name="attr_toughnesscur" title="@{toughnesscur}" class="sheet-derivedStat" readonly />
								<button type="action" name="act_toughnessCur" class="sheet-curToughnessButton"><span name="attr_toughnesscur"></span> (<span name="attr_toughnessArmor"></span>)</button>
							</div>
							<input class='sheet-moremods' type='checkbox' name='attr_showToughnessMod'  style='display: none;' />
        					<button class="sheet-traitbutton sheet-deriveflexbutton sheet-toughnessLabelButton" type='action' name='act_toughnessButton'><span data-i18n="toughness">Toughness</span> <span class="sheet-cog sheet-shiftLeft">y</span></button>
						</div>
					</div>

					<!-- Pace Config -->
					<input class='sheet-moremods' type='checkbox' name='attr_showPaceMod'  style='display: none;' />
    				<div class='sheet-basetrait sheet-pacemodplus'>
    					<h4 class="sheet-configHeader" data-i18n="pace-configuration">Pace Configuration</h4>
    					<label class="sheet-paceLabel" data-i18n="base">Base:</label> <input type="number" name="attr_pace" title="@{pace}" class="sheet-derivedStat sheet-paceInput" value="6" />
    					<input type="text" class="sheet-paceLabelInput" data-i18n-placeholder="edge-hindrance-modifier-abbr" name="attr_paceModReason" /> <input type="number" name="attr_paceMod" title="@{paceMod}" class="sheet-derivedStat sheet-paceInput sheet-inputLabel" value="0" />
    					<input class="sheet-showPaceWounds" type="hidden" name="attr_woundsMod" value="0" />
    					<label class="sheet-paceLabel sheet-paceWounds" data-i18n="reduced-by-wounds">Reduced by Wounds:</label><div class="sheet-paceWounds sheet-inlineDiv">—<span name="attr_woundsMod"></span></div>
    					<label class="sheet-paceLabel" data-i18n="running-die-type">Running Die type:</label>
    					<select name='attr_runningDie' title="@{runningDie}" class="sheet-paceDietype">
					        <option value='1d4' data-i18n="d4">d4</option>
					        <option value='1d6' selected data-i18n="d6">d6</option>
					        <option value='1d8' data-i18n="d8">d8</option>
					        <option value='1d10' data-i18n="d10">d10</option>
					        <option value='1d12' data-i18n="d12">d12</option>
					    </select>
    				</div>
					<!-- Parry Config -->
					<input class='sheet-moremods' type='checkbox' name='attr_showParryMod'  style='display: none;' />
					<div class='sheet-basetrait sheet-parrymodplus'>
    					<h4 class="sheet-configHeader" data-i18n="parry-configuration">Parry Configuration</h4>
    					<label class="sheet-parryLabel" data-i18n="base">Base:</label> <input type="number" name="attr_parry" title="@{parry}" class="sheet-derivedStat sheet-parryInput" />
                        <label class="sheet-parryLabel" data-i18n="shield">Shield:</label> <input type="number" name="attr_shieldparry" value="0" title="@{shieldparry}" class="sheet-derivedStat sheet-parryInput" readonly />
    					<input type="text" class="sheet-parryLabelInput" data-i18n-placeholder="edge-hindrance-modifier-abbr" name="attr_parryModReason" /> <input type="number" name="attr_parryMod" title="@{parryMod}" class="sheet-derivedStat sheet-parryInput sheet-inputLabel" value="0" />
    				</div>
					<!-- Toughness Config -->
					<input class='sheet-moremods' type='checkbox' name='attr_showToughnessMod'  style='display: none;' />
					<div class='sheet-basetrait sheet-toughnessmodplus'>
    					<h4 class="sheet-configHeader" data-i18n="toughness-configuration">Toughness Configuration</h4>
    					<label class="sheet-toughnessLabel" data-i18n="base">Base:</label> <input type="number" name="attr_toughness" title="@{toughness}" class="sheet-derivedStat sheet-toughnessInput" readonly />
    					<label class="sheet-toughnessLabel" data-i18n="size">Size:</label> <div class="sheet-sizeInfo"><span name="attr_sizecur"></span></div>
    					<input type="text" class="sheet-toughnessLabelInput" data-i18n-placeholder="edge-hindrance-modifier-abbr" name="attr_toughnessModReason" /> <input type="number" name="attr_tufnessMod" title="@{tufnessMod}" class="sheet-derivedStat sheet-toughnessInput sheet-inputLabel" value="0" />
    					<label class="sheet-toughnessLabel" data-i18n="armor">Armor:</label> <input type="number" name="attr_toughnessArmor" title="@{toughnessArmor}" class="sheet-derivedStat sheet-toughnessInput" value="0" />
    				</div>
    				<!-- Additional Derived Stats -->
    				<input class='sheet-showadditional' type='checkbox' name='attr_showadditionalderived' />
    				<h1 class='sheet-groupHeader sheet-additionalDerived' data-i18n="additional-derived-stats">Additional Derived Stats</h1>
					<!-- <input type="checkbox" class="sheet-hideAtts" name="attr_hideCoreDerived" /><span class="sheet-showhide"></span> -->
					<div class='sheet-base sheet-corederived sheet-additionalDerived'>
					    <div class="sheet-basederived sheet-derivedHeaderRow">
					        <div class="sheet-derivelabel" data-i18n="stat-abbr">Stat</div>
					        <div class="sheet-derivebase" data-i18n="base">Base</div>
					        <div class="sheet-derivemod" data-i18n="modifier-abbr">Mod</div>
					        <div class="sheet-derivecurrent" data-i18n="current">Current</div>
					        <div class="sheet-derivemisc" data-i18n="maximum-abbr">Max</div>
					    </div>
					    <hr class="sheet-derivedhr" style="border: .45px dashed silver; margin: 2px 0px 2px 0px;"  />
					    <!-- First Custom Derived Stat -->
					    <div class="sheet-basederived">
					        <div class="sheet-derivelabel"><input type="text" name="attr_derivedFirstName" title="@{derivedFirstName}" class="sheet-derivedStateName" value="Custom" data-i18n-placeholder="derived-stat-name" /></div>
					        <div class="sheet-derivebase"><input type="number" name="attr_derivedFirstBase" title="@{derivedFirstBase}" class="sheet-derivedStat" value="0" /></div>
							<div class="sheet-derivemod"><input type="number" name="attr_derivedFirstMod" title="@{derivedFirstMod}" class="sheet-derivedStat" value="0" /></div>
							<div class="sheet-derivecurrent"><input type="number" name="attr_derivedFirstCurrent" title="@{derivedFirstCurrent}" class="sheet-derivedStat" value="0" /></div>
							<div class="sheet-derivemisc"><input type="number" name="attr_derivedFirstMax" title="@{derivedFirstMax}" class="sheet-derivedStat" value="0" /></div>
					    </div>
					    <!-- Repeating Derived Stats -->
					    <fieldset class="repeating_derivedstats">
					    	<div class="sheet-basederived">
    					        <div class="sheet-derivelabel"><input type="text" name="attr_derivedName" title="@{derivedName}" class="sheet-derivedStateName" data-i18n-placeholder="derived-stat-name" /></div>
    					        <div class="sheet-derivebase"><input type="number" name="attr_derivedBase" title="@{derivedBase}" class="sheet-derivedStat" value="0" /></div>
    							<div class="sheet-derivemod"><input type="number" name="attr_derivedMod" title="@{derivedMod}" class="sheet-derivedStat" value="0" /></div>
    							<div class="sheet-derivecurrent"><input type="number" name="attr_derivedCurrent" title="@{derivedCurrent}" class="sheet-derivedStat" value="0" /></div>
    							<div class="sheet-derivemisc"><input type="number" name="attr_derivedMax" title="@{derivedMax}" class="sheet-derivedStat" value="0" /></div>
    					    </div>
					    </fieldset>
					</div>
    				<!-- End Add'l Derived Stats -->
    				<!-- Load, Money, and Gear -->
    				<hr class="sheet-mischr" />
					<!-- Miscellaneous -->
					<!-- <h4 class='sheet-sectionHeading' data-i18n="miscellaneous">Miscellaneous</h4>
					<input type="checkbox" class="sheet-hideMisc" name="attr_hideCoreMisc" /><span class="sheet-showhide"></span> -->
					<input class="sheet-useLoad" type="checkbox" name="attr_useLoad" style="display:none;" />
					<div class='sheet-base sheet-miscderived sheet-loadstuff'>
					    <div class="sheet-basederived sheet-loadstuff" style='font-weight: bold; font-size: .75em; margin-top: 5px; margin-bottom: -3px;'>
					        <div class="sheet-derivelabel sheet-loadstuff">&nbsp;</div>
					        <div class="sheet-derivebase" data-i18n="modifier-abbr">Mod</div>
					        <div class="sheet-derivemod" data-i18n="limit">Limit</div>
					        <div class="sheet-derivecurrent" data-i18n="carried">Carried</div>
					        <div class="sheet-derivemisc" data-i18n="penalty">Penalty</div>
					    </div>
					    <!-- Encumbrance -->
						<input class="sheet-useLoad" type="checkbox" name="attr_useLoad" style="display:none;" />
					    <div class="sheet-basederived sheet-loadstuff">
					        <div class="sheet-derivelabel" data-i18n="load">Load</div>
					        <div class="sheet-derivebase"><input type="number" class="sheet-derivedStat" name="attr_loadlimitmod" style="text-align:center;" title="@{loadlimitmod}" value="0"/></div>
							<div class="sheet-derivemod"><input type="number" class="sheet-derivedStat" name="attr_loadlimit" title="@{loadlimit}" readonly /></div>
							<div class="sheet-derivecurrent"><input type="number" class="sheet-derivedStat" name="attr_totalloadcarried" title="@{totalloadcarried}" readonly /></div>
							<div class="sheet-derivemisc"><input type="number" class="sheet-derivedStat" name="attr_encumbrance" title="@{encumbrance}" value="0" readonly /></div>
					    </div>
					    <input class='sheet-loadmods sheet-showLoadConfig' type='checkbox' name='attr_showLoadconfig' /><span>y</span>
    					<div class='sheet-loadconfig sheet-basetrait'>
                            <label class="sheet-left30 sheet-normallabel"><input type="checkbox" name="attr_usekg" value="kg" /> <span data-i18n="use-kg">Use Kg instead of Pounds</span></label>
    					    <select name="attr_encumbrancerules" title="@{encumbrancerules}">
    							<option value="0" title="@{encumberancerules}" data-i18n="ignore-encumbrance" selected >Ignore Encumbrance</option>
    							<option value="1" title="@{encumberancerules}" data-i18n="use-savage-worlds-adventure-edition-abbr-u-encumbrance">Use SWADE Encumbrance</option>
    							<!-- <option value="2" title="@{encumberancerules}" data-i18n="use-savage-worlds-explorers-edition-abbru-u-encumbrance">Use SWEX Encumbrance</option> -->
    						</select>
    						<input type='hidden' name='attr_encumbrancerules' class="sheet-encrules" value="0" />
    						<div class="sheet-swadeenc">
    						    <span data-i18n="dice-singular-type-delta">Die Type Delta</span>: <input type="number" class="sheet-modifier" name="attr_loadlimitdietypedelta" title="@{loadlimitmultiplier}" value="0"/>
    						</div>
						</div>
					</div>
					<input type="hidden" name="attr_ttmod" value="0">
					<input type="hidden" name="attr_dmgmod" value="0">
					<input type="hidden" name="attr_ModSum" value="0"> <!-- ttmod-woundsMod-fatigue -->
					<input type="hidden" name="attr_ModSumEnc" value="0"> <!-- ttmod-woundsMod-fatigue+encumbrance -->
                    <input type="hidden" name="attr_armorMinStrMod" value="0" /> <!-- Modifier to Armor Min Strength not being met -->
                    <!-- Consumables -->
                    <input type="hidden" name="attr_useconsumables" value="0" class="sheet-useConsumeables" />
                    <div class="sheet-showconsumables">
                        <h1 class="sheet-groupHeader" data-i18n="consumables">Consumables</h1>
                        <fieldset class="repeating_consumables">
                            <div class="sheet-basederived">
                                <!-- Label -->
								<div class="sheet-derivelabel sheet-consumables">
                                    <button class="sheet-traitbutton sheet-smallskillflexattbutton sheet-consumablesbutton" type='roll' name='roll_ConsumbalesRoll' value="@{rollconsumables}"></button>
                                    <input class="sheet-derivedlabelinput sheet-consumableInput" type="text" name="attr_consumable" placeholder="Consumable" data-i18n-placeholder="consumable" />
                                    <input type="hidden" name="attr_consumablesmod" value="0" />
                                </div>
								<!-- Consumable Field -->
								<select class='sheet-derivebaseplus' name="attr_consumablestock">
									<option value="d0" data-i18n="empty">Empty</option>
									<option value="d4">d4</option>
									<option value="d6" selected>d6</option>
									<option value="d8">d8</option>
									<option value="d10">d10</option>
									<option value="d12">d12</option>
								</select>
								<input type='hidden' name='attr_rollconsumables' value='&{template:consumables} {{name=@{character_name} }} {{consumable=@{consumable}}} {{roll=[[1@{consumablestock} + @{consumablesmod} + @{traitmods}]]}}' />
                            </div>
                        </fieldset>
					</div>
					<!-- Gear -->
					<h1 class="sheet-groupHeader" data-i18n="gear">Gear</h1>
					<div class='sheet-base sheet-miscderived'>
    					<!-- Money -->
						<input type="checkbox" class="sheet-usewealth" name="attr_usewealth" style="display: none;" />
    					<input type="checkbox" class="sheet-useLankhmar" name="attr_50fPo8Clams" value="0" style="display: none;"/>
    					<!-- <div class="sheet-basederived sheet-lankhmar" style='font-weight: bold; font-size: .75em; margin-top: 5px; margin-bottom: -3px;'>
					        <div class="sheet-derivelabel">&nbsp;</div>
					        <div class="sheet-derivebase" data-i18n="iron-tiks">Tiks</div>
					        <div class="sheet-derivemod" data-i18n="bronze-agols">Agols</div>
					        <div class="sheet-derivecurrent" data-i18n="silver-smerduks">Smerduks</div>
					        <div class="sheet-derivemisc" data-i18n="gold-rilks">Rilks</div>
					    </div> -->
					    <div class="sheet-basederived sheet-nonwealth">
					        <input type="hidden" class="sheet-usePieces" value="0" name="attr_50fPo8Clams" />
					        <!-- Labels -->
					        <div class="sheet-derivelabel sheet-money" data-i18n="money">Money</div>
					        <!-- <div class='sheet-derivelabel sheet-PofE' data-i18n="pieces-of-eight">Pieces of Eight</div>
					        <div class="sheet-derivelabel sheet-Clams" data-i18n="money-clams">Clams</div> -->
					        <div class="sheet-derivelabel sheet-Credits" data-i18n="money-credits">Credits</div>
					        <!-- <div class="sheet-derivelabel sheet-Livre" data-i18n="livre">Livre</div> -->
					        <!-- Money Fields -->
					        <div class="sheet-derivebase"><input class="sheet-derivedStat sheet-moneyfield" type="number" step="any" name="attr_money" title="@{money}" value="0" /></div>
							<!-- <div class="sheet-derivemod sheet-lankhmar"><input type="number" step="any" name="attr_bagols" title="@{bagols}" class="sheet-derivedStat" value="0" /></div>
							<div class="sheet-derivecurrent sheet-lankhmar"><input type="number" step="any" name="attr_ssmerduks" title="@{ssmerduks}" class="sheet-derivedStat" value="0" /></div>
							<div class="sheet-derivemisc sheet-lankhmar"><input type="number" step="any" name="attr_grilks" title="@{grilks}" class="sheet-derivedStat" value="0" /></div> -->
					    </div>
						<div class="sheet-basederived sheet-usewealth">
							<!-- Label -->
							<div class="sheet-derivelabel sheet-wealth"><button class="sheet-traitbutton sheet-deriveflexbutton" type='roll' name='roll_WealthRoll' value="@{rollwealth}" data-i18n="wealth">&nbsp;Wealth</button></div>
							<!-- Wealth Field -->
							<select class='sheet-derivebaseplus' name="attr_wealth">
								<option value="d0" data-i18n="broke">Broke</option>
								<option value="d4" data-i18n="d4">d4</option>
								<option value="d6" selected data-i18n="d6">d6</option>
								<option value="d8" data-i18n="d8">d8</option>
								<option value="d10" data-i18n="d10">d10</option>
								<option value="d12" data-i18n="d12">d12</option>
							</select>
                            <input type="checkbox" class="sheet-useWealthMod" name="attr_useWealthMod" value="1" style="display: none;" />
                            <div class="sheet-derivebaseplus sheet-wealthmod">
                                + <input type='number' name='attr_wealthmod' value="0" style="text-align: center;" />
                            </div>
							<input type='hidden' name='attr_rollwealth' value="&{template:roll} {{namelength=@{namelength}}} {{name=@{character_name} }} {{trait=^{wealth}}} {{skill_rank=@{wealth} }} {{skill_roll=[[1@{wealth}! + @{wealthmod} + @{traitmods}]]}} {{mook=[[1d0+@{wdNum}]]}} {{wild_die=[[ 1d@{wealthwilddie}! + @{wealthmod}[wealth mod] + @{traitmods}]]}}" />
						</div>
    					<!-- End Money -->
    				</div>
					<div class="sheet-gear">
						<h4 class="sheet-item" data-i18n="item">Item</h4>
						<h4 class="sheet-itemqty" data-i18n="quantity-abbr">Qty</h4>
						<h4 class="sheet-itemweight" data-i18n="weight-abbr">Wt</h4>
						<h4 class="sheet-itemcarried" data-i18n="carried">Carried</h4>
				        <fieldset class="repeating_gear">
				        	<div class="sheet-base sheet-hindranceNedge sheet-gearList">
								<input type="text" class="sheet-standard sheet-item" placeholder="Item" name="attr_item" title="@{repeating_gear_$#_item}" />
								<input type="number" class="sheet-standard sheet-itemqty" value="1" data-i18n-title="quantity" name="attr_itemqty" />
								<input type="number" class="sheet-itemweight" data-i18n-placeholder="weight" placeholder="weight" step="any" name="attr_itemWeight" title="@{repeating_gear_$#_itemWeight}" />
								<div class='sheet-itemcarried'><label class="sheet-gearCarriedLabel"><input type='checkbox' class='sheet-gearitemCarried sheet-gearisCarried' name='attr_itemcarried' /><span class="sheet-gearisCarriedIcon"></span></label></div>
								<input type='hidden' name='attr_totalItemWeight' value='0' />
								<input class='sheet-moremods' type='checkbox' name='attr_showGearDesc' /><span>y</span>
	    						<div class='sheet-basetrait sheet-traitmodplus'>
	    						    <textarea name='attr_geardescription' title="@{repeating_gear_$#_itemdescription}" placeholder="Details" data-i18n-placeholder="details"></textarea>
	    						</div>
	    					</div>
						</fieldset>
						<!-- <input class="sheet-useLoad" type="checkbox" name="attr_useLoad" style="display:none;" checked /> -->
						<div class='sheet-gearTotalWeight sheet-loadstuff'><!-- Set up the Total Weight Carried box -->
							<h4 class="sheet-gearweight"><span data-i18n="total-gear-weight-carried">Total Gear Weight Carried</span>:</h4>
							<input type="number" class='sheet-gearitemweight' name="attr_geartotalweightcarried" title="@{geartotalweightcarried}" value="0" readonly />
						</div>
					</div>
    				<!-- End Load, Money, and Gear -->
                </div>

                <div class='sheet-right sheet-logoblock'>
                    <input class="sheet-showLogo" type="hidden" value="SavageWorlds" name="attr_logo" />
                	<img class="sheet-logo" src="https://raw.githubusercontent.com/finderski/SWT/master/PEG_LOGO_White.png" />
                	<img class="sheet-logo sheet-SWADE" src="http://www.geeksville.us/roll20/SW_Logo_AE.png" />
                    <img class="sheet-logo sheet-Deadlands" src="http://www.geeksville.us/roll20/Deadlands.png" />
                    <input type='hidden' name='wilddie' value='6' />
                    <div class='sheet-condionsnew'>
                    	<!-- Conditions -->
        				<input type="checkbox" class="sheet-showconditions" name="attr_showconditions" style="display: none" checked />
        				<div class='sheet-conditions'>
						    <div class="sheet-distracted">
								<label class="sheet-conditionlabel">
									<input class="sheet-isdistracted" type="checkbox" value="-2" name="attr_distracted" /><span class="sheet-uhoh"></span>
									<span class="sheet-conditionspan" data-i18n="distracted">Distracted</span>
								</label>
						    </div>
						    <div class="sheet-vulnerable">
								<label class="sheet-conditionlabel">
									<input class="sheet-isvulnerable" type="checkbox" value="-2" name="attr_vulnerable" /><span class="sheet-uhoh"></span>
									<span class="sheet-conditionspan" data-i18n="vulnerable">Vulnerable</span>
								</label>
						    </div>
						    <div class="sheet-stunned">
								<label class="sheet-conditionlabel">
									<input class="sheet-isstunned" type="checkbox" value="-2" name="attr_stunned" /><span class="sheet-uhoh"></span>
									<span class="sheet-conditionspan" data-i18n="stunned">Stunned</span>
								</label>
						    </div>
						</div>
						<!-- End Conditions -->
						<div class="sheet-health">
                    		<!-- Wounds -->
							<div class="sheet-basetrait sheet-characterWounds">
								<input class="sheet-standardHealth" type="number" name="attr_wounds" title="@{wounds}" value="0"/> || <input class="sheet-standardHealth" type="number" name="attr_wounds_max" title="@{wounds_max}" value="3" />
								<input class='sheet-showWoundmodCheck' type='checkbox' name='attr_showWoundmods' style="display: none;" />
								<input type='hidden' name='attr_woundsMod' value="0" />
								<button class="sheet-traitbutton sheet-deriveflexbutton sheet-woundLabelButton" type='action' name='act_woundButton'><span data-i18n="wounds">Wounds</span> <span class="sheet-cog">y</span></button>
							</div>
							<!-- Shaken & Incapacitated -->
							<div class="sheet-base sheet-characterShakenInc">
								<div class='sheet-shakenbox' title="Shaken" data-i18n-title="shaken">
								    <input class="sheet-shaken" type='checkbox' name='attr_isShaken' value="1" /><span>!</span>
								    <span class='sheet-shakeninfo' data-i18n="shaken">Shaken</span>
								</div>
								<div class='sheet-incbox' title="Incapcitated" data-i18n-title="incapacitated">
								    <input class="sheet-inc" type='checkbox' name='attr_isinc' /><span>Y</span>
								    <span class='sheet-incinfo' data-i18n="incapacitated-abbr">Inc</span>
								</div>
							</div>
							<!-- Fatigue -->
							<div class="sheet-base sheet-characterFatigue">
								<input class="sheet-standardHealth" type="number" name="attr_fatigue" title="@{fatigue}" value="0"/> || <input class="sheet-standardHealth" type="number" name="attr_fatigue_max" title="@{fatigue_max}" value="2" />
								<input class='sheet-showFatiguemodCheck' type='checkbox' name='attr_showFatiguemods' style="display: none;" />
								<input type='hidden' name='attr_fatigueMod' value="0" />
								<button class="sheet-traitbutton sheet-deriveflexbutton sheet-fatigueLabelButton" type='action' name='act_fatigueButton'><span data-i18n="fatigue">Fatigue</span> <span class="sheet-cog">y</span></button>
							</div>
                    	</div>
                    	<!-- Wound Config -->
						<input type='checkbox' class="sheet-showWoundmod" name='attr_showWoundmods' style="display: none;" />
        				<div class='sheet-basetrait sheet-woundmod'>
        					<h4 class="sheet-configHeader" data-i18n="wounds-configuration">Wounds Configuration</h4>
        					<div class="sheet-nerves">
						        <label class="sheet-healthlabel" data-i18n="reduce" data-i18n-title="reduce-wound-penalty">Reduce</label>: <input class="sheet-standardHealthInfo" type="text" name="attr_reducereason" data-i18n-title="edges-abilities-that-reduce-wound-penalties" data-i18n-placeholder="edges-or-abilities" /> <input class="sheet-standardHealthMod" type="number" data-i18n-title="amount-to-reduce-penalty-by" name="attr_reducewoundsby" value="0" /><br />
						        <label class="sheet-healthlabel" data-i18n="increase" data-i18n-title="increase-wound-penalty">Increase</label>: <input class="sheet-standardHealthInfo" type="text" name="attr_increasereason" data-i18n-title="edges-abilities-that-increase-wound-penalties" data-i18n-placeholder="edges-or-abilities" /> <input class="sheet-standardHealthMod" type="number" data-i18n-title="amount-to-increase-penalty-by" name="attr_increasewoundsby" value="0" /><br />
						        <label class="sheet-healthlabel" data-i18n="maximum" data-i18n-title="maximum-wound-penalty">Maximum</label>: <input class="sheet-standardHealthInfo" type="text" name="attr_maxreason" data-i18n-title="edges-abilities-that-cap-maximum-wound-penalties" data-i18n-placeholder="edges-or-abilities" /> <input class="sheet-standardHealthMod" type="number" data-i18n-title="maximum-wound-penalty-suffered" name="attr_maxwoundmods" value="-3" />
						    </div>
        				</div>
        				<!-- Fatigue Config -->
						<input type='checkbox' class="sheet-showFatiguemod" name='attr_showFatiguemods' style="display: none;" />
        				<div class='sheet-basetrait sheet-fatiguemod'>
        					<h4 class="sheet-configHeader" data-i18n="fatigue-configuration">Fatigue Configuration</h4>
        					<div class="sheet-nerves">
						        <label class="sheet-healthlabel" data-i18n="reduce" data-i18n-title="reduce-fatigue-penalty">Reduce</label>: <input class="sheet-standardHealthInfo" type="text" name="attr_fatiguereducereason" data-i18n-title="edges-abilities-that-reduce-fatigue-penalties" data-i18n-placeholder="edges-or-abilities" /> <input class="sheet-standardHealthMod" type="number" data-i18n-title="amount-to-reduce-penalty-by" name="attr_reducefatigueby" value="0" /><br />
						        <label class="sheet-healthlabel" data-i18n="increase" data-i18n-title="increase-fatigue-penalty">Increase</label>: <input class="sheet-standardHealthInfo" type="text" name="attr_fatigueincreasereason" data-i18n-title="edges-abilities-that-increase-fatigue-penalties" data-i18n-placeholder="edges-or-abilities" /> <input class="sheet-standardHealthMod" type="number" data-i18n-title="amount-to-increase-penalty-by" name="attr_increasefatigueby" value="0" /><br />
						        <label class="sheet-healthlabel" data-i18n="maximum" data-i18n-title="maximum-fatigue-penalty">Maximum</label>: <input class="sheet-standardHealthInfo" type="text" name="attr_fatiguemaxreason" data-i18n-title="edges-abilities-that-cap-maximum-fatigue-penalties" data-i18n-placeholder="edges-or-abilities" /> <input class="sheet-standardHealthMod" type="number" data-i18n-title="maximum-fatigue-penalty-suffered" name="attr_maxfatiguemods" value="-2" />
						    </div>
        				</div>
        				<!-- Soak and Unshake Buttons -->
        				<div class="sheet-recovery">
							<!-- Unshake Button -->
							<input class="sheet-useunshakebutton" type="checkbox" name="attr_showunshake" style="display:none;" checked />
							<div class="sheet-basetrait sheet-unshakebutton">
								<button class="sheet-traitbutton sheet-skillflexattbutton sheet-unshake" type='roll' name='roll_unshakeroll' title="@{unshakeroll}" value='@{whisperunshake} &{template:unshake} @{rolltunshake} {{mook=[[1d0+@{wdNum}]]}}'> <span data-i18n="unshake">Unshake</span></button>
								<input class='sheet-recoverymods' type='checkbox' name='attr_showunshakerollmod' /><span>y</span>
								<div class='sheet-basetrait sheet-unshakemodplus'>
                                    <label class="sheet-whisperGM"><input class='sheet-whispercheck' type='checkbox' value='/w gm' name='attr_whisperunshake' /> <span class='sheet-ModDesc' data-i18n="whisper-to-gm">Whisper to GM</span></label>
                                    <input type="text" class="sheet-shortLabelInput" data-i18n-placeholder="standard-wild-die-type" name="attr_unshakewilddieinfo" />
                                    <select name="attr_unshakewilddie" title="@{unshakewilddie}" class="sheet-traitdie">
                                        <option value="4" data-i18n="d4">d4</option>
                                        <option value="6" selected data-i18n="d6">d6</option>
                                        <option value="8" data-i18n="d8">d8</option>
                                        <option value="10" data-i18n="d10">d10</option>
                                        <option value="12" data-i18n="d12">d12</option>
                                    </select>
                                    <!-- <input type='text' class='sheet-ModDesc' name='attr_unshakewilddieinfo' placeholder='Standard Wild Die die type' data-i18n-placeholder="standard-wild-die-type" /><br />
                                    <hr class="sheet-modsection"> -->
									<input type='text' class='sheet-shortLabelInput' name='attr_unshakemodtype' placeholder='Modifier due to edges, hindrances, etc' data-i18n-placeholder="att-mod-description" />
									+<input class="sheet-otraitmod" type="number" name="attr_unshakemod" title="@{unshakemod}" value="0" /><br />
								</div>
								<input type='hidden' name='attr_rolltunshake' value='{{name=@{character_name} }} {{skill_roll=[[@{spirit_rank} [Spirit] + @{sprollMod} + @{unshakemod} [@{unshakemodtype}] + @{ModSum}[Wounds, Fatigue, Distracted] + @{traitmods}]]}} {{mook=[[1d0+@{wdNum}]]}} {{wild_die=[[ 1d@{unshakewilddie}! [Wild Die] + @{spiritmod} + @{sprollMod} + @{unshakemod} [@{unshakemodtype}] + @{ModSum}[Wounds, Fatigue, Distracted] + @{traitmods}]]}}' />
							</div>
							<!-- Soak Button -->
							<input class="sheet-usesoakbutton" type="checkbox" name="attr_showsoak" style="display:none;" checked />
							<div class="sheet-basetrait sheet-soakbutton">
								<button class="sheet-traitbutton sheet-skillflexattbutton sheet-soak" type='roll' name='roll_soakroll' title="@{soakroll}" value='@{whispersoak} &{template:roll} {{namelength=@{namelength}}} @{rolltSoak} @{setmods} @{showtraitmods}'> <span data-i18n="soak">Soak</span></button>
								<input class='sheet-recoverymods' type='checkbox' name='attr_showsoakrollmod' /><span>y</span>
								<div class='sheet-basetrait sheet-soakmodplus'>
                                    <label class="sheet-whisperGM"><input class='sheet-whispercheck' type='checkbox' value='/w gm' name='attr_whispersoak' /> <span class='sheet-ModDesc' data-i18n="whisper-to-gm">Whisper to GM</span></label>
                                    <input type='text' class='sheet-shortLabelInput' name='attr_soakwilddieinfo' placeholder='Standard Wild Die die type' data-i18n-placeholder="standard-wild-die-type" /><br />
                                    <select name="attr_soakwilddie" title="@{soakwilddie}" class="sheet-traitdie">
                                        <option value="4" data-i18n="d4">d4</option>
                                        <option value="6" selected data-i18n="d6">d6</option>
                                        <option value="8" data-i18n="d8">d8</option>
                                        <option value="10" data-i18n="d10">d10</option>
                                        <option value="12" data-i18n="d12">d12</option>
                                    </select>
									<input type='text' class='sheet-shortLabelInput' name='attr_soakmodtype' placeholder='Modifier due to edges, hindrances, etc' data-i18n-placeholder="att-mod-description" />
									+<input class="sheet-otraitmod" type="number" name="attr_soakmod" title="@{soakmod}" value="0" /><br />
								</div>
								<input type='hidden' name='attr_rolltSoak' value='{{name=@{character_name} }} {{trait=^{soak}}} {{skill_rank=@{vigor_display}+@{soakmod} }} {{skill_roll=[[@{vigor_rank} [Vigor] + @{virollMod} + @{soakmod} [@{soakmodtype}] + @{ModSum}[Wounds, Fatigue, Distracted] + @{traitmods}]]}} {{mook=[[1d0+@{wdNum}]]}} {{wild_die=[[ 1d@{soakwilddie}! [Wild Die] + @{vigormod} + @{virollMod} + @{soakmod} [@{soakmodtype}] + @{ModSum}[Wounds, Fatigue, Distracted] + @{traitmods}]]}}' />
							</div> <!-- End Soak Button -->
						</div>
						<!-- End Recover Section -->
						<!-- Hindrances and Edges -->
                        <input type="hidden" name="attr_hideHindrances" class="sheet-hideHindrances" value="0" />
                        <input type="hidden" name="attr_hindranceCount" class="sheet-hindranceCount" value="0" />
						<h1 class='sheet-groupHeader' data-i18n="hindrances">Hindrances</h1>
                        <!-- <input type="checkbox" class="sheet-hideHindrances" name="attr_hideHindrances" /><span class="sheet-showhide"></span> -->
                        <div class='sheet-base sheet-hindrances'>
                        	<input class="sheet-showMiniDisplay" type="checkbox" name="attr_miniDisplay" value="1" />
                            <fieldset class="repeating_hindrances">
                                <div class="sheet-base sheet-hindranceNedge">
                                    <input type='checkbox' name='attr_whisperDeets' class="sheet-whispercheck" value="/w gm " style="display: none;" />
                                    <button type='roll' class="sheet-hindranceOutput" name='roll_tHindrance' value="@{whisperDeets} &{template:info} {{name=@{character_name}}} {{type=Hindrance}} {{item=@{hindrance}}} {{description=@{hindrancedescription}}}"><span class="sheet-whispericon"> </span><span class="sheet-hindranceName" name="attr_hindrance"></span><span class="sheet-hindranceComma">&nbsp;&nbsp;</span></button>
                                    <input class="sheet-hinfield" type="text" name="attr_hindrance" data-i18n-placeholder="hindrance" data-i18n-title="hindrance" />
                                    <input class="sheet-hintype" type="text" name="attr_hindranceType" data-i18n-title="hindrance-type" data-i18n-placeholder="type" />
                                    <input class='sheet-moremods' type='checkbox' name='attr_showHindraceDesc' checked /><span>y</span>
            						<div class='sheet-basetrait sheet-traitmodplus'>
            						    <input type='checkbox' name='attr_whisperDeets' value="/w gm " /> <span data-i18n="whisper-hindrance">Whisper Hindrance Description</span>
            						    <textarea name='attr_hindrancedescription' title="@{repeating_hindrances_$#_hindrancedescription}" placeholder="Hindrance description/details" data-i18n-placeholder="hindrance-desc"></textarea>
            						</div>
                                </div>
                            </fieldset>
                        </div>
                        <hr class="sheet-seperator" />
                        <input type="hidden" name="attr_edgeCount" class="sheet-edgeCount" value="0" />
                        <h1 class='sheet-groupHeader' data-i18n="edges-and-advances">Edges & Advances</h1>
                        <!-- <input type="checkbox" class="sheet-hideEdges" name="attr_hideEdges" /><span class="sheet-showhide"></span> -->
                        <div class='sheet-base sheet-edges'>
                        	<input class="sheet-showMiniDisplay" type="checkbox" name="attr_miniDisplay" value="1" />
                            <fieldset class="repeating_edges">
                                <div class="sheet-base sheet-hindranceNedge">
                                    <input type='checkbox' name='attr_whisperEdgeDeets' class="sheet-whispercheck" style='display: none;' value="/w gm " />
                                    <button type='roll' class="sheet-edgeOutput" name='roll_tEdge' value="@{whisperEdgeDeets} &{template:info} {{name=@{character_name}}} {{type=^{edge}}} {{item=@{edge}}} {{description=@{edgedescription}}}"><span class="sheet-whispericon"> </span><span class="sheet-hindranceName" name="attr_edge"></span><span class="sheet-hindranceComma">&nbsp;&nbsp;</span></button>
                                    <input class="sheet-edgefield" type="text" name="attr_edge" data-i18n-title="edge" />
                                    <input class='sheet-moremods' type='checkbox' name='attr_showEdgeDesc' checked /><span>y</span>
            						<div class='sheet-basetrait sheet-traitmodplus'>
            						    <input type='checkbox' name='attr_whisperEdgeDeets' value="/w gm " /> <span data-i18n="whisper-edge">Whisper Edge Description</span><br />
            						    <div class="sheet-base sheet-edgeTypeLabel"><span data-i18n="edge-acquired-from">Edge Acquired From</span></div> <!--<input type="text" name="attr_tookat" data-i18n-title="edge-type" style='border: none; border-bottom: 1px solid black; text-align: center; width:75px;'/>-->
            						    <select name="attr_tookat" class="sheet-edgeTypeDropdown">
            						    	<option value="Racial" data-i18n="racial">Racial</option>
            						    	<option value="Creation" data-i18n="creation">Creaction</option>
            						    	<option value="Advance" selected data-i18n="advance">Advance</option>
            						    	<option value="GM" data-i18n="gm-fiat-slash-other">GM Fiat/Other</option>
            						    </select>
            						    <textarea name='attr_edgedescription' title="@{repeating_edges_$#_edgedescription}" placeholder="Edge description/details" data-i18n-placeholder="edge-desc"></textarea>
            						</div>
                                </div>
                            </fieldset>
                        </div>
						<!-- End Hindrances and Edges -->
						<!-- Start Special Abilities -->
                        <input type="hidden" name="attr_specialAbilitiesCount" class="sheet-specialAbilitiesCount" value="0" />
						<input class="sheet-showSpecAbilities" type="hidden" value="0" name="attr_showSpecAbilities" />
						<hr class="sheet-seperator sheet-specAbilities" />
                        <h1 class='sheet-groupHeader sheet-specAbilities' data-i18n="special-abilities">Special Abilities</h1>
                        <div class='sheet-base sheet-specAbilities'>
                        	<input class="sheet-showMiniDisplay" type="checkbox" name="attr_miniDisplay" value="1" />
                            <fieldset class="repeating_specialabilities">
                                <div class="sheet-base sheet-hindranceNedge">
                                    <input class="sheet-whispercheck" style="display: none;" type='checkbox' name='attr_whisperSpecAbilityDeets' value="/w gm " />
                                    <button type='roll' class="sheet-edgeOutput" name='roll_tSpecAbilities' value="@{whisperSpecAbilityDeets} &{template:info} {{name=@{character_name}}} {{type=^{special-ability}}} {{item=@{specialability}}} {{description=@{specialabilitydescription}}}"><span class="sheet-whispericon"> </span><span class="sheet-hindranceName" name="attr_specialability"></span><span class="sheet-hindranceComma">&nbsp;&nbsp;</span></button>
                                    <input class="sheet-edgefield" type="text" name="attr_specialability" data-i18n-title="special-ability" data-i18n-placeholder="special-ability" />
                                    <input class='sheet-moremods' type='checkbox' name='attr_showSpecAbilityDesc' checked /><span>y</span>
            						<div class='sheet-basetrait sheet-traitmodplus'>
            						    <input type='checkbox' name='attr_whisperSpecAbilityDeets' value="/w gm " /> <span data-i18n="whisper-special-ability-description">Whisper Special Ability Description</span><br />
            						    <textarea name='attr_specialabilitydescription' title="@{repeating_specialabilities_$#_specialabilitydescription}" data-i18n-placeholder="special-ability-description"></textarea>
            						</div>
                                </div>
                            </fieldset>
                        </div>
                    </div>
                </div>

                <!--Tri-columns for Abilities and the such-->
                <div class='sheet-left'>
                    <!-- Skills used to be here -->
                </div>
                <div class='sheet-center'>
					<!-- Derived Stats -->
					<!-- <input type='checkbox' class='sheet-dstats' style="display: none;" name='attr_showDerived' value="1" /> -->
					<!-- <hr class="sheet-block-separator" /> -->
                </div>
                <div class='sheet-right'>
                    <!-- Can get rid of this probably... -->
                </div>
                <input class="sheet-showMiniDisplay" type="checkbox" name="attr_miniDisplay" value="1">
                <div class='sheet-base sheet-bottomHalf'>
                    <input type="checkbox" class="sheet-hideWeapons" name="attr_hideWeapons" /><span class="sheet-showNhide"></span>
					<h1 class="sheet-groupHeader sheet-weaponsSection" data-i18n="weapons">Weapons</h1>
					<div class="sheet-weapons">
						<span class="sheet-weaponHeader sheet-weaponItem sheet-button">&nbsp;</span>
					    <span class="sheet-weaponHeader sheet-weaponItem sheet-weapon" data-i18n="weapon">Weapon</span>
						<span class="sheet-weaponHeader sheet-weaponItem sheet-range" data-i18n="range">Range</span>
						<span class="sheet-weaponHeader sheet-weaponItem sheet-damage" data-i18n="damage">Damage</span>
						<span class="sheet-weaponHeader sheet-weaponItem sheet-weaponap" data-i18n="armor-piercing-abbr-u">AP</span>
						<span class="sheet-weaponHeader sheet-weaponItem sheet-rof" data-i18n="rate-of-fire-abbr">ROF</span>
						<span class="sheet-weaponHeader sheet-weaponItem sheet-shots" data-i18n="number-of-shots-shortened">Shots</span>
						<span class="sheet-weaponHeader sheet-weaponItem sheet-weaponweight" data-i18n="weight-abbr">Wt</span>
						<span class="sheet-weaponHeader sheet-weaponItem sheet-weaponcarried" data-i18n="carried">Carried</span>
						<hr class="sheet-weaponItem sheet-hr" />
						<input type='hidden' name='attr_vbonusdamage' value='1d6' />
						<input class="sheet-vdamage" type="checkbox" name="attr_RaiseHBRule" value="2" checked />
						<input class="sheet-AthleticsStaticSkill sheet-hiddenButton" type="checkbox" name="attr_staticAthletics" />
						<input class="sheet-ShootingStaticSkill sheet-hiddenButton" type="checkbox" name="attr_staticShooting" />
						<input class="sheet-WSStaticSkill sheet-hiddenButton" type="checkbox" name="attr_staticWeirdScience" />
						<fieldset class="repeating_weapons" style="width: 100%;">
						    <!--<div class='sheet-weaponitem'>-->
						    <div class='sheet-weapons'>
    						    <button type='roll' class="sheet-weaponItem sheet-button" name='roll_tWeapon' value="@{weaponroll}"><input type="hidden" name="attr_weaponbutton" class="sheet-weaponbutton" value="1" /><span class="sheet-buttonand" data-i18n="attack-and-damage-abbr">Atk+Dmg</span><span class="sheet-buttondo" data-i18n="damage">Damage</span><span class="sheet-buttonma" data-i18n="multi-attack-and-damage-abbr">Atk<sup>x</sup>+Dmg</span></button>
    						    <button type='roll' class='sheet-hiddenButton' name='roll_dmg' value='@{damageOnly}'></button>
    						    <button type='roll' class='sheet-hiddenButton' name='roll_weaponsbonusDamage' value='&{template:bonusDamage} {{dieType=@{weaponsbdt}}} {{bonusDamage=[[@{vbonusdamage}!]]}}'></button>
    						    <input type='text' class='sheet-weaponItem sheet-weapon' name='attr_weapon' title="@{repeating_weapons_$#_weapon}" data-i18n-placeholder="weapon" placeholder="Weapon" />
    						    <input type='text' class='sheet-weaponItem sheet-range' name='attr_range' title="@{repeating_weapons_$#_range}" data-i18n-placeholder="range" placeholder="Range" />
								<button type="action" name="act_wdamage" class="sheet-weaponItem sheet-damage sheet-invisbutton"><span name="attr_weapondamage"></span></button>
								<input type='hidden' name="attr_weapondamage" value='Str+1d4' />
								<input type="number" class='sheet-weaponItem sheet-weaponap' name='attr_weaponap' title="@{repeating_weapons_$#_weaponap}" />
    						    <input type='number' class='sheet-weaponItem sheet-rof' name='attr_rof' title="@{repeating_weapons_$#_rof}" data-i18n-placeholder="rate-of-fire-abbr" placeholder="ROF" />
                                <div class="sheet-weaponItem sheet-shots">
    						        <input type='number' class="sheet-weaponshots" name='attr_shots' title="@{repeating_weapons_$#_shots}" /> of <input type='number' class="sheet-weaponshots" name='attr_shots_max' title="@{repeating_weapons_$#_shots_max}" />
                                </div>
    						    <input type='number' class='sheet-weaponItem sheet-weaponweight' step="any" name='attr_weaponweight' title="@{repeating_weapons_$#_weaponweight}" data-i18n-placeholder="weight-abbr" placeholder="Wt" />
    						    <div class='sheet-weaponItem sheet-weaponcarried'><input type='checkbox' class='sheet-itemCarried sheet-isCarried' name='attr_weaponcarried' title="@{repeating_weapons_$#_weaponcarried}" /><span class="sheet-isCarriedIcon"></span></div>
    						    <input class='sheet-moreweapon' type='checkbox' name='attr_showweaponconfig' checked /><span>y</span>
    						    <textarea name='attr_weaponnotes' class='sheet-weaponItem sheet-weaponnotes' title="@{repeating_weapons_$#_weaponnotes}" data-i18n-placeholder="notes" placeholder="Notes"></textarea>
    						    <div class="sheet-weaponconfig">
                                    <label class="sheet-configlabels sheet-configcheckbox"><input type='checkbox' value='/w gm' name='attr_whisperweapon' title="@{repeating_weapons_$#_whisperweapon}" /> <span data-i18n="whisper-roll-to-gm">Whisper roll to GM</span></label><br />
        						    <label class="sheet-configlabels" data-i18n="minimum-strength">Minimum Strength</label>
                                    <input type='hidden' name='attr_minstrength' value='4' />
        						    <select name="attr_weaponminstrength" title="@{repeating_weapons_$#_minstrength}" class="sheet-dtype">
										<option value="0" data-i18n="not-applicable-abbr-u">N/A</option>
										<option value="4" data-i18n="d4" selected>d4</option>
										<option value="6" data-i18n="d6">d6</option>
										<option value="8" data-i18n="d8">d8</option>
										<option value="10" data-i18n="d10">d10</option>
										<option value="12" data-i18n="d12">d12</option>
									</select><br />
        						    <label class="sheet-configlabels" data-i18n="button-behavior">Button Behavior</label>
									<input class='sheet-showmultiattack' type="hidden" name="attr_showmulti" value="0" />
        						    <select name="attr_weaponbutton" title="@{repeating_weapons_$#_weaponbutton}" class="sheet-weaponbutton">
            							<option value="0" data-i18n="attack-and-damage-abbr">Atk + Dmg</option>
            							<option value="1" data-i18n="damage-only" selected>Damage Only</option>
										<option class="sheet-multiattack" value="2" data-i18n="multi-attack-and-damage-abbr">Atk^+Dmg</option>
            						</select>
            						<input type="hidden" name="attr_weaponbutton" class="sheet-weaponbutton" />
            						<div class='sheet-weaponskill'>
            						    <label class="sheet-configlabels" data-i18n="skill">Skill</label>
                                        <div class="sheet-container">
                                            <div class="sheet-child">
                                                <label class="sheet-ddmenu"><input type="radio" class="sheet-select-radio sheet-fighting" name="attr_weaponskill" title="@{repeating_weapons_$#_weaponskill}" value="fighting" checked="checked" />&nbsp;<span name='attr_rfightingname'></span></label>
                                                <label class="sheet-ddmenu sheet-athletics"><input type="radio" class="sheet-select-radio sheet-athletics" name="attr_weaponskill" title="@{repeating_weapons_$#_weaponskill}" value="athletics" />&nbsp;<span name='attr_rathleticsname'></span></label>
                                                <label class="sheet-ddmenu sheet-shooting"><input type="radio" class="sheet-select-radio sheet-shooting" name="attr_weaponskill" title="@{repeating_weapons_$#_weaponskill}" value="shooting" />&nbsp;<span name='attr_rshootingname'></span></label>
												<label class="sheet-ddmenu"><input type="radio" class="sheet-select-radio sheet-unskilled" name="attr_weaponskill" title="@{repeating_weapons_$#_weaponskill}" value="unskilled" />&nbsp;<span data-i18n='unskilled'>Unskilled</span></label>
												<label class="sheet-ddmenu sheet-weirdscience"><input type="radio" class="sheet-select-radio sheet-weirdscience" name="attr_weaponskill" title="@{repeating_weapons_$#_weaponskill}" value="weirdscience" />&nbsp;<span name='attr_rweirdsciencename'></span></label>
                                                <input type="hidden" class="sheet-select-radio" name="attr_weaponskill" value="fighting" />
                                                <div class="sheet-fighting"><span name='attr_rfightingname'></span></div>
                                                <div class="sheet-athletics"><span name='attr_rathleticsname'></span></div>
                                                <div class="sheet-shooting"><span name='attr_rshootingname'></span></div>
												<div class="sheet-unskilled"><span data-i18n='unskilled'>Unskilled</span></div>
												<div class="sheet-weirdscience"><span name='attr_rweirdsciencename'></span></div>
                                            </div>
                                        </div>
                                        <label class="sheet-configlabels" data-i18n="skill-modifier">Skill Modifier</label>(<input type="text" placeholder="Trademark Weapon" data-i18n-placeholder="trademark-weapon" name="attr_weaponAttackBonusReason" />) <input type="number" name="attr_weaponAttackBonus" value="0" />
            						</div>
            						<div class='sheet-weapondamage'>
										<input type="checkbox" class="sheet-highlight" name="attr_highlightdamage" value="1" style="display: none;" />
            						    <label class='sheet-configlabels' data-i18n="damage">Damage</label>
            						    <select class='sheet-weaponatt' name="attr_damageatt" title="@{repeating_weapons_$#_damageatt}" >
                							<option value="na" data-i18n="not-applicable-abbr-u">N/A</option>
                							<option value="strength" data-i18n="strength" selected>Strength</option>
                							<option value="agility" data-i18n="agility">Agility</option>
                							<option value="smarts" data-i18n="smarts">Smarts</option>
                							<option value="spirit" data-i18n="spirit">Spirit</option>
                							<option value="vigor" data-i18n="vigor">Vigor</option>
                						</select>
                						+
                						<input type="number" class="sheet-weaponnum" name="attr_dmgnumdice" title="@{repeating_weapons_$#_dmgnumdice}" style="text-align: right;" value="1" />
										<select name="attr_dmgdietype" title="@{repeating_weapons_$#_dmgdietype}" class="sheet-dtype">
        									<option value="d4!" data-i18n="d4">d4</option>
        									<option value="d6!" data-i18n="d6">d6</option>
        									<option value="d8!" data-i18n="d8">d8</option>
        									<option value="d10!" data-i18n="d10">d10</option>
        									<option value="d12!" data-i18n="d12">d12</option>
        									<option value="d20!" data-i18n="d20">d20</option>
        								 </select>
        								 +
        								 <input type="text" class="sheet-weaponnum" name="attr_dmgbonusnum" title="@{repeating_weapons_$#_dmgbonusnum}" />
            						</div>
									<div class="sheet-vbonusdamage">
										<label class='sheet-configlabels' data-i18n="bonus-damage-die-type">Bonus Damage Die Type</label>
										<select name="attr_weaponsbdt" title="@{repeating_weapons_$#_weaponsbdt}" class="sheet-dtype">
        									<option value="d4" data-i18n="d4">d4</option>
        									<option value="d6" selected data-i18n="d6">d6</option>
        									<option value="d8" data-i18n="d8">d8</option>
        									<option value="d10" data-i18n="d10">d10</option>
        									<option value="d12" data-i18n="d12">d12</option>
        									<option value="d20" data-i18n="d20">d20</option>
        								 </select>
									</div>
    						    </div>
                                <!-- Skill Formulae -->
                                <input type="hidden" name="attr_weaponUnskilledFormula" value="@{unskilledSkillRollFormula}" />
                                <input type="hidden" name="attr_weaponUnskilledWildDieFormula" value="@{unskilledWildDieFormula}" />

                                <input type="hidden" name="attr_weaponFightingFormula" value="@{fightingSkillRollFormula}" />
                                <input type="hidden" name="attr_weaponFightingWildDieFormula" value="@{fightingWildDieFormula}" />

                                <input type="hidden" name="attr_weaponAthleticsFormula" value="@{athleticsSkillRollFormula}" />
                                <input type="hidden" name="attr_weaponAthleticsWildDieFormula" value="@{athleticsWildDieFormula}" />

                                <input type="hidden" name="attr_weaponShootingFormula" value="@{shootingSkillRollFormula}" />
                                <input type="hidden" name="attr_weaponShootingWildDieFormula" value="@{shootingWildDieFormula}" />

                                <input type="hidden" name="attr_weaponWeirdScienceFormula" value="@{weirdscienceSkillRollFormula}" />
                                <input type="hidden" name="attr_weaponWeirdScienceWildDieFormula" value="@{weirdscienceWildDieFormula}" />
								<!-- Hidden Fields for the roll button(s), etc -->
								<input type='hidden' name='attr_weaponroll' value='@{damageOnly}' />
								<input type='hidden' name='attr_skillNDamage' value="@{whisperweapon} &{template:roll} {{namelength=@{namelength}}} {{trait=Fighting}} {{source=@{weapon}}} @{rolltFighting} {{skill_roll=&{noerror} [[ @{weaponFightingFormula} ]]}} {{wild_die=[[ @{weaponFightingWildDieFormula} ]]}} @{unshakeTemplate} {{button=y}} {{ReRoll=^{reroll}(~repeating_weapons_tWeapon) }} {{DmgRoll=^{roll-damage}(~repeating_weapons_dmg) }} @{multiattack}" /> <!--Used for Skill and Damage roll -->
								<input type="hidden" name='attr_multiattack' value='0' /> <!-- Used for Multiattack -->
								<input type='hidden' name='attr_damageOnly' value='@{dmgTemplate}' /> <!-- Used for Damage Only -->
								<!-- Build the Damage Roll Template Info -->
								<input type='hidden' name='attr_weapondmg' value="@{strength_rank}+1d4!" /> <!-- the damage formula -->
								<input type='hidden' name='attr_weaponsbonusdmg' value='@{vbonusdamage}' /> <!-- This will either equal @{vbonusdamage} (the default) or @{weaponsbdt} -->
                                <!-- <input type='hidden' name='attr_weaponsbonusDie' value='{{bonus_die=[[@{weaponsbdt}!]]}}' /> -->
								<input type='hidden' name='attr_weaponsbonusDie' value='{{bonus_die=[[@{weaponsbonusdmg}!]]}}' />
								<!-- how to call a button roll: ^{reroll-damage}(~repeating_weapons_dmg) -->
								<input type='hidden' name='attr_dmgTemplate' value='@{whisperweapon} &{template:damage} {{namelength=@{namelength}}} {{name=@{character_name}}} {{source=@{weapon} }} {{dmg_rank=@{weapondamage}}} {{dmg_roll=[[@{weapondmg} + @{damagemods}]]}} @{weaponsbonusDie} {{showap=[[1d0+@{weaponap}]]}} {{ap=@{weaponap}}} {{notes=@{weaponnotes}}} {{button=y}} {{DmgRoll=^{reroll-damage}(~repeating_weapons_dmg) }} @{gritty} {{GrittyRoll=[Roll Injury](~repeating_weapons_grittyroll)}} {{conviction=[[ [[@{conviction}]]d6! ]] }}' />
                                <button type='roll' style='display: none;' name='roll_grittyroll' value='&{template:gritty} {{name=Injury Result}} {{result=[[1t[@{injurytablename}]]]}}'></button>
    				        </div>
						</fieldset>
						<!-- <input class="sheet-useLoad" type="checkbox" name="attr_useLoad" style="display:none;" checked /> -->
						<div class='sheet-weaponTotalWeight sheet-loadstuff' style="margin-left: 504px;"><!-- Set up the Total Weight Carried box -->
							<div class='sheet-col' style='width:200px; text-align:right;'> <!-- Protection (240px)-->
								<h4 class="sheet-weight"><span data-i18n="total-weapon-weight-carried">Total Weapon Weight Carried</span>:</h4>
							</div>
							<div class='sheet-col' style='width:60px;'> <!-- Weight (60px)-->
								<input type="number" style="width:65px;" class='sheet-weaponweight' name="attr_weapontotalweightcarried" title="@{weapontotalweightcarried}" value="0" readonly />
							</div>
						</div>
					</div> <!-- End Weapons -->
					<hr class="sheet-sectionSeperator" />
                    <!-- ------------- -->
                    <!-- Power Section -->
                    <!-- ------------- -->
					<input type="checkbox" class="sheet-hideArcanum" name="attr_ArcanumTab" style="display: none;">
					<div class="sheet-arcanum">
					    <input type="checkbox" class="sheet-hidePowers" name="attr_hidepowers" /><span class="sheet-showNhide"></span>
    					<h1 class="sheet-groupHeader sheet-powerSection"><span name="attr_powerlabelplural"></span></h1>
                        <div class="sheet-buttonright">
                            <input type="hidden" name="attr_powerconfigindicator" value="x" />
                            <button type="action" name='act_powersectionconfig' class="sheet-configbutton"><span name="attr_powerconfigindicator"></span></button>
                        </div>
                        <!-- Powers Section Config window -->
                        <input type="checkbox" class="sheet-showpowerconfig" name="attr_showpowersectionconfig" value="show" style="display:none;" />
                        <div class="sheet-powerconfig">
                            <label class="sheet-powerconfiglabel"><span data-i18n="ab-section-header">Section Header: </span><input type="text" name="attr_powerlabelplural" value="Powers" /></label>
                            <label class="sheet-powerconfiglabel"><span data-i18n="ab-column-header">Column Header: </span><input type="text" name="attr_powerlabelsingular" value="Power" /></label>
                            <label class="sheet-powerconfiglabel"><span data-i18n="ab-pp">Power Points Abbreviation: </span><input type="text" name="attr_ppabbr" value="PP" maxlength="8" /></label>
                            <hr />
                            <input type="hidden" class="sheet-showmultipleabs" name="attr_numberofabs" value="1" />
                            <label class="sheet-powerconfiglabel sheet-label1"><span data-i18n="ab-name">Arcane Background: </span><input type="text" name="attr_ablabel" value="AB 1" maxlength="25" /></label>
                            <label class="sheet-powerconfiglabel sheet-label1"><span data-i18n="ab-pp-name">Power Points Label: </span><input type="text" name="attr_ppelabel" value="Power Points" maxlength="30" /></label>
                            <label class="sheet-powerconfiglabel sheet-label2"><span data-i18n="ab-color-indicator">Arcane Background Indicator:</span>
                                <div class="sheet-container">
                                    <div class="sheet-child2">
                                        <label class="sheet-abmenu sheet-white"><input type="radio" class="sheet-select-radio sheet-white" name="attr_ab1color" value="white" checked="checked" />&nbsp;</label>
                                        <label class="sheet-abmenu sheet-red"><input type="radio" class="sheet-select-radio sheet-red" name="attr_ab1color" value="red" />&nbsp;</label>
                                        <label class="sheet-abmenu sheet-blue"><input type="radio" class="sheet-select-radio sheet-blue" name="attr_ab1color" value="blue" />&nbsp;</label>
                                        <label class="sheet-abmenu sheet-green"><input type="radio" class="sheet-select-radio sheet-green" name="attr_ab1color" value="green" />&nbsp;</label>
                                        <label class="sheet-abmenu sheet-purple"><input type="radio" class="sheet-select-radio sheet-purple" name="attr_ab1color" value="purple" />&nbsp;</label>
                                        <input type="hidden" class="sheet-select-radio" name="attr_ab1color" value="white" />
                                        <div class="sheet-white">&nbsp;</div>
                                        <div class="sheet-red">&nbsp;</div>
                                        <div class="sheet-blue">&nbsp;</div>
                                        <div class="sheet-green">&nbsp;</div>
                                        <div class="sheet-purple">&nbsp;</div>
                                    </div>
                                </div>
                            </label>
                            <hr class="sheet-label2" />
                            <label class="sheet-powerconfiglabel sheet-label2"><span data-i18n="ab-name">Arcane Background: </span><input type="text" name="attr_ablabel2" value="AB 2" maxlength="25" /></label>
                            <label class="sheet-powerconfiglabel sheet-label2"><span data-i18n="ab-pp-name">Power Points Label: </span><input type="text" name="attr_pplabel2" value="Power Points" maxlength="30" /></label>
                            <label class="sheet-powerconfiglabel sheet-label2"><span data-i18n="ab-color-indicator">Arcane Background Indicator:</span>
                                <div class="sheet-container">
                                    <div class="sheet-child2">
                                        <label class="sheet-abmenu sheet-white"><input type="radio" class="sheet-select-radio sheet-white" name="attr_ab2color" value="white" />&nbsp;</label>
                                        <label class="sheet-abmenu sheet-red"><input type="radio" class="sheet-select-radio sheet-red" name="attr_ab2color" value="red" checked="checked" />&nbsp;</label>
                                        <label class="sheet-abmenu sheet-blue"><input type="radio" class="sheet-select-radio sheet-blue" name="attr_ab2color" value="blue" />&nbsp;</label>
                                        <label class="sheet-abmenu sheet-green"><input type="radio" class="sheet-select-radio sheet-green" name="attr_ab2color" value="green" />&nbsp;</label>
                                        <label class="sheet-abmenu sheet-purple"><input type="radio" class="sheet-select-radio sheet-purple" name="attr_ab2color" value="purple" />&nbsp;</label>
                                        <input type="hidden" class="sheet-select-radio" name="attr_ab2color" value="red" />
                                        <div class="sheet-white">&nbsp;</div>
                                        <div class="sheet-red">&nbsp;</div>
                                        <div class="sheet-blue">&nbsp;</div>
                                        <div class="sheet-green">&nbsp;</div>
                                        <div class="sheet-purple">&nbsp;</div>
                                    </div>
                                </div>
                            </label>
                            <hr class="sheet-label3" />
                            <label class="sheet-powerconfiglabel sheet-label3"><span data-i18n="ab-name">Arcane Background: </span><input type="text" name="attr_ablabel3" value="AB 3" maxlength="25" /></label>
                            <label class="sheet-powerconfiglabel sheet-label3"><span data-i18n="ab-pp-name">Power Points Label: </span><input type="text" name="attr_pplabel3" value="Power Points" maxlength="30" /></label>
                            <label class="sheet-powerconfiglabel sheet-label3"><span data-i18n="ab-color-indicator">Arcane Background Indicator:</span>
                                <div class="sheet-container">
                                    <div class="sheet-child2">
                                        <label class="sheet-abmenu sheet-white"><input type="radio" class="sheet-select-radio sheet-white" name="attr_ab3color" value="white" />&nbsp;</label>
                                        <label class="sheet-abmenu sheet-red"><input type="radio" class="sheet-select-radio sheet-red" name="attr_ab3color" value="red" />&nbsp;</label>
                                        <label class="sheet-abmenu sheet-blue"><input type="radio" class="sheet-select-radio sheet-blue" name="attr_ab3color" value="blue" checked="checked" />&nbsp;</label>
                                        <label class="sheet-abmenu sheet-green"><input type="radio" class="sheet-select-radio sheet-green" name="attr_ab3color" value="green" />&nbsp;</label>
                                        <label class="sheet-abmenu sheet-purple"><input type="radio" class="sheet-select-radio sheet-purple" name="attr_ab3color" value="purple" />&nbsp;</label>
                                        <input type="hidden" class="sheet-select-radio" name="attr_ab3color" value="blue" />
                                        <div class="sheet-white">&nbsp;</div>
                                        <div class="sheet-red">&nbsp;</div>
                                        <div class="sheet-blue">&nbsp;</div>
                                        <div class="sheet-green">&nbsp;</div>
                                        <div class="sheet-purple">&nbsp;</div>
                                    </div>
                                </div>
                            </label>
                            <hr class="sheet-label4" />
                            <label class="sheet-powerconfiglabel sheet-label4"><span data-i18n="ab-name">Arcane Background: </span><input type="text" name="attr_ablabel4" value="AB 4" maxlength="25" /></label>
                            <label class="sheet-powerconfiglabel sheet-label4"><span data-i18n="ab-pp-name">Power Points Label: </span><input type="text" name="attr_pplabel4" value="Power Points" maxlength="30" /></label>
                            <label class="sheet-powerconfiglabel sheet-label4"><span data-i18n="ab-color-indicator">Arcane Background Indicator:</span>
                                <div class="sheet-container">
                                    <div class="sheet-child2">
                                        <label class="sheet-abmenu sheet-white"><input type="radio" class="sheet-select-radio sheet-white" name="attr_ab4color" value="white" />&nbsp;</label>
                                        <label class="sheet-abmenu sheet-red"><input type="radio" class="sheet-select-radio sheet-red" name="attr_ab4color" value="red" />&nbsp;</label>
                                        <label class="sheet-abmenu sheet-blue"><input type="radio" class="sheet-select-radio sheet-blue" name="attr_ab4color" value="blue" />&nbsp;</label>
                                        <label class="sheet-abmenu sheet-green"><input type="radio" class="sheet-select-radio sheet-green" name="attr_ab4color" value="green" checked="checked" />&nbsp;</label>
                                        <label class="sheet-abmenu sheet-purple"><input type="radio" class="sheet-select-radio sheet-purple" name="attr_ab4color" value="purple" />&nbsp;</label>
                                        <input type="hidden" class="sheet-select-radio" name="attr_ab4color" value="green" />
                                        <div class="sheet-white">&nbsp;</div>
                                        <div class="sheet-red">&nbsp;</div>
                                        <div class="sheet-blue">&nbsp;</div>
                                        <div class="sheet-green">&nbsp;</div>
                                        <div class="sheet-purple">&nbsp;</div>
                                    </div>
                                </div>
                            </label>
                            <hr class="sheet-label5" />
                            <label class="sheet-powerconfiglabel sheet-label5"><span data-i18n="ab-name">Arcane Background: </span><input type="text" name="attr_ablabel5" value="AB 5" maxlength="25" /></label>
                            <label class="sheet-powerconfiglabel sheet-label5"><span data-i18n="ab-pp-name">Power Points Label: </span><input type="text" name="attr_pplabel5" value="Power Points" maxlength="30" /></label>
                            <label class="sheet-powerconfiglabel sheet-label5"><span data-i18n="ab-color-indicator">Arcane Background Indicator:</span>
                                <div class="sheet-container">
                                    <div class="sheet-child2">
                                        <label class="sheet-abmenu sheet-white"><input type="radio" class="sheet-select-radio sheet-white" name="attr_ab5color" value="white" />&nbsp;</label>
                                        <label class="sheet-abmenu sheet-red"><input type="radio" class="sheet-select-radio sheet-red" name="attr_ab5color" value="red" />&nbsp;</label>
                                        <label class="sheet-abmenu sheet-blue"><input type="radio" class="sheet-select-radio sheet-blue" name="attr_ab5color" value="blue" />&nbsp;</label>
                                        <label class="sheet-abmenu sheet-green"><input type="radio" class="sheet-select-radio sheet-green" name="attr_ab5color" value="green" />&nbsp;</label>
                                        <label class="sheet-abmenu sheet-purple"><input type="radio" class="sheet-select-radio sheet-purple" name="attr_ab5color" value="purple" checked="checked" />&nbsp;</label>
                                        <input type="hidden" class="sheet-select-radio" name="attr_ab5color" value="purple" />
                                        <div class="sheet-white">&nbsp;</div>
                                        <div class="sheet-red">&nbsp;</div>
                                        <div class="sheet-blue">&nbsp;</div>
                                        <div class="sheet-green">&nbsp;</div>
                                        <div class="sheet-purple">&nbsp;</div>
                                    </div>
                                </div>
                            </label>
                            <button type="action" class="sheet-addab" name="act_addab">+</button><button type="action" class="sheet-removeab" name="act_removeab">#</button>
                        </div>
                        <!-- End Section Config Window -->
    					<div class="sheet-arcane">
    					    <input type="checkbox" class="sheet-NoPP" name="attr_NoPPRule" style="display: none;" />
                            <div class="sheet-powerpoints">
                                <input type="hidden" class="sheet-showmultipleabs" name="attr_numberofabs" value="1" />
                                <input type="hidden" class="sheet-abcolor" name="attr_ab1color" value="white" />
                                <div class="sheet-ppcontainer">
                                    <label class="sheet-ablabel"><span name='attr_ablabel'></span></label>
                                    <div class="sheet-ppfields">
                                        <input class="sheet-ppvalue" type="number" name="attr_PowerPoints" title="@{PowerPoints}" value="0"  />
                                        <span data-i18n="of">&nbsp;of&nbsp;</span>
                                        <input class="sheet-ppvalue" type="number" name="attr_PowerPoints_max" title="@{PowerPoints_max}" value="0" />
                                    </div>
                                    <label class="sheet-abpplabel"><span name='attr_ppelabel'></span></label>
                                </div>
                                <input type="hidden" class="sheet-abcolor" name="attr_ab2color" value="red" />
                                <div class="sheet-ppcontainer sheet-label2">
                                    <label class="sheet-ablabel"><span name='attr_ablabel2'></span></label>
                                    <div class="sheet-ppfields">
                                        <input class="sheet-ppvalue" type="number" name="attr_powerpoints2" title="@{powerpoints2}" value="0"  />
                                        <span data-i18n="of">&nbsp;of&nbsp;</span>
                                        <input class="sheet-ppvalue" type="number" name="attr_powerpoints2_max" title="@{powerpoints2_max}" value="0" />
                                    </div>
                                    <label class="sheet-abpplabel"><span name='attr_pplabel2'></span></label>
                                </div>
                                <input type="hidden" class="sheet-abcolor" name="attr_ab3color" value="blue" />
                                <div class="sheet-ppcontainer sheet-label3">
                                    <label class="sheet-ablabel"><span name='attr_ablabel3'></span></label>
                                    <div class="sheet-ppfields">
                                        <input class="sheet-ppvalue" type="number" name="attr_powerpoints3" title="@{powerpoints3}" value="0"  />
                                        <span data-i18n="of">&nbsp;of&nbsp;</span>
                                        <input class="sheet-ppvalue" type="number" name="attr_powerpoints3_max" title="@{powerpoints3_max}" value="0" />
                                    </div>
                                    <label class="sheet-abpplabel"><span name='attr_pplabel3'></span></label>
                                </div>
                                <input type="hidden" class="sheet-abcolor" name="attr_ab4color" value="green" />
                                <div class="sheet-ppcontainer sheet-label4">
                                    <label class="sheet-ablabel"><span name='attr_ablabel4'></span></label>
                                    <div class="sheet-ppfields">
                                        <input class="sheet-ppvalue" type="number" name="attr_powerpoints4" title="@{powerpoints4}" value="0"  />
                                        <span data-i18n="of">&nbsp;of&nbsp;</span>
                                        <input class="sheet-ppvalue" type="number" name="attr_powerpoints4_max" title="@{powerpoints4_max}" value="0" />
                                    </div>
                                    <label class="sheet-abpplabel"><span name='attr_pplabel4'></span></label>
                                </div>
                                <input type="hidden" class="sheet-abcolor" name="attr_ab5color" value="purple" />
                                <div class="sheet-ppcontainer sheet-label5">
                                    <label class="sheet-ablabel"><span name='attr_ablabel5'></span></label>
                                    <div class="sheet-ppfields">
                                        <input class="sheet-ppvalue" type="number" name="attr_powerpoints5" title="@{powerpoints5}" value="0"  />
                                        <span data-i18n="of">&nbsp;of&nbsp;</span>
                                        <input class="sheet-ppvalue" type="number" name="attr_powerpoints5_max" title="@{powerpoints5_max}" value="0" />
                                    </div>
                                    <label class="sheet-abpplabel"><span name='attr_pplabel5'></span></label>
                                </div>
    					    </div>
    					    <div class='sheet-powerrow' style="align-items: flex-end; margin-bottom: 20px; border-bottom: 1px solid silver; overflow: hidden;">
								<h4 class="sheet-repeatingHeader sheet-spellOutput">&nbsp;</h4>
								<h4 class="sheet-repeatingHeader sheet-powerbutton">&nbsp;</h4>
        					    <h4 class="sheet-repeatingHeader sheet-power"><span name="attr_powerlabelsingular"></span></h4>
        					    <h4 class="sheet-repeatingHeader sheet-pp"><span name="attr_ppabbr"></span></h4>
        					    <h4 class="sheet-repeatingHeader sheet-powerrange" data-i18n="range">Range</h4>
        					    <h4 class="sheet-repeatingHeader sheet-powerdamage" data-i18n="damage">Damage</h4>
        					    <h4 class="sheet-repeatingHeader sheet-duration" data-i18n="duration">Duration</h4>
        					    <h4 class="sheet-repeatingHeader sheet-invested"><span name="attr_ppabbr"></span> <span data-18n="invested">Invested</span></h4>
    					    </div>
							<input class="sheet-vdamage" type="checkbox" name="attr_RaiseHBRule" value="2" checked />
                            <input type="hidden" class="sheet-showmultipleabs" name="attr_numberofabs" value="1" />
                            <input class="sheet-AthleticsStaticSkill sheet-hiddenButton" type="checkbox" name="attr_staticAthletics" />
							<input class="WSStaticSkill sheet-hiddenButton" type="checkbox" name="attr_staticWeirdScience" />
							<input class="FaithStaticSkill sheet-hiddenButton" type="checkbox" name="attr_staticFaith" />
							<input class="FocusStaticSkill sheet-hiddenButton" type="checkbox" name="attr_staticFocus" />
							<input class="PerformanceStaticSkill sheet-hiddenButton" type="checkbox" name="attr_staticPerformance" />
							<input class="PsionicsStaticSkill sheet-hiddenButton" type="checkbox" name="attr_staticPsionics" />
							<input class="SpellcastingStaticSkill sheet-hiddenButton" type="checkbox" name="attr_staticSpellcasting" />
    					    <input type="hidden" class="sheet-ab1color" name="attr_ab1color" value="white" />
							<input type="hidden" class="sheet-ab2color" name="attr_ab2color" value="red" />
							<input type="hidden" class="sheet-ab3color" name="attr_ab3color" value="blue" />
							<input type="hidden" class="sheet-ab4color" name="attr_ab4color" value="green" />
							<input type="hidden" class="sheet-ab5color" name="attr_ab5color" value="purple" />
    					    <fieldset class='repeating_spells'>
                                <input type="hidden" name="attr_ablabsinit" value="0" />
                                <input type="hidden" class="sheet-powercolor" name="attr_powercolor" value="white" />
                                <div class='sheet-fullrow'>
	    					        <div class='sheet-powerrow'>
										<div class="sheet-spellOutput">
											<button type="roll" name="roll_spellinfo" class="sheet-hindranceOutput" value="&{template:info} {{name=@{character_name}}} {{item=@{power}}} {{trappings=@{trappings}}} {{Notes=@{spellnotes}}}">w</button>
										</div>
	    					            <div class="sheet-powerbutton">
	    					                <button class="sheet-powerbutton sheet-actualpowerbutton" type='roll' name='roll_tPower' value="@{spellroll}"><input type="hidden" name="attr_spellbutton" class="sheet-spellbutton" value="1" /><span class="sheet-buttonand" data-i18n="attack-and-damage-abbr">Atk+Dmg</span><span class="sheet-buttondo" data-18n="damage">Damage</span><span class="sheet-buttonsk" data-18n="skill">Cast</span></button>
	    					                <button type='roll' class='sheet-hiddenButton' name='roll_spelldmg' value='@{spelldamageOnly}'></button>
	    					                <button type='roll' class='sheet-hiddenButton' name='roll_spellsbonusDamage' value='&{template:info} {{name=Bonus Damage}} {{item=@{spellsbdt}}} {{description=[[@{spellsbonusdmg}!]]}}'></button>
	    					            </div>
	        					        <div class="sheet-power">
	        					            <input class='sheet-power' type='text' name='attr_power' title="@{repeating_spells_$#_power}" data-i18n-placeholder='power' placeholder="Power" />
	        					        </div>
	        					        <div class='sheet-pp'>
	        					            <input class='sheet-pp' type='text' name='attr_pp' title="@{repeating_spells_$#_pp}" data-i18n-placeholder='power-point-abbr-u' placeholder="PP" />
	        					        </div>
	        					        <div class="sheet-powerrange">
	        					            <input class='sheet-powerrange' type='text' name='attr_powerrange' title="@{repeating_spells_$#_powerrange}" data-i18n-placeholder='range' placeholder="Range" />
	        					        </div>
	        					        <div class="sheet-powerdamage">
	        					            <input type='hidden' name='attr_powerdamage' />
											<button type="action" name="act_sdamage" class="sheet-powerdamage sheet-invisbutton"><span name="attr_powerdamage"></span>&nbsp;</button>
	        					        </div>
	        					        <div class="sheet-duration">
	        					            <input class='sheet-duration' type='text' name='attr_powerduration' title="@{repeating_spells_$#_powerduration}" data-i18n-placeholder='duration' placeholder="Duration" />
	        					        </div>
	        					        <div class="sheet-invested">
	        					            <input class='sheet-invested' type='text' name='attr_ppinvested' title="@{repeating_spells_$#_ppinvested}" data-i18n-placeholder='power-point-abbr-u-invested' placeholder="PP Invested" />
	        					        </div>
	    					        </div>
									<input class='sheet-morespell' type='checkbox' name='attr_showspellconfig' checked /><span>y</span>
									<textarea name="attr_trappings" class='sheet-spelltrappings' title="@{repeating_spells_$#_spelltrappings}" data-i18n-placeholder="trappings" placeholder="Trappings"></textarea>
									<textarea name='attr_spellnotes' class='sheet-spellnotes' title="@{repeating_spells_$#_spellnotes}" data-i18n-placeholder="notes" placeholder="Notes"></textarea>
									<div class="sheet-spellconfig">
                                        <div class="sheet-showabindicatorselection">
                                            <label class="sheet-powerconfiglabel sheet-label1">Arcane Background Indicator:
                                                <input type="hidden" name="attr_rptablabel" value="AB 1" />
                                                <input type="hidden" name="attr_rptab1color" value="white" />
                                                <input type="hidden" name="attr_rptablabel2" value="AB 2" />
                                                <input type="hidden" name="attr_rptab2color" value="red" />
                                                <input type="hidden" name="attr_rptablabel3" value="AB 3" />
                                                <input type="hidden" name="attr_rptab3color" value="blue" />
                                                <input type="hidden" name="attr_rptablabel4" value="AB 4" />
                                                <input type="hidden" name="attr_rptab4color" value="green" />
                                                <input type="hidden" name="attr_rptablabel5" value="AB 5" />
                                                <input type="hidden" name="attr_rptab5color" value="purple" />
                                                <div class="sheet-container">
                                                    <div class="sheet-child3">
                                                        <label class="sheet-abmenu sheet-ab1"><input type="radio" class="sheet-select-radio sheet-ab1" name="attr_powergroup" value="ab1" checked="checked" /><span class="sheet-powerdisplay" name="attr_rptablabel"></span></label>
                                                        <label class="sheet-abmenu sheet-ab2"><input type="radio" class="sheet-select-radio sheet-ab2" name="attr_powergroup" value="ab2" /><span class="sheet-powerdisplay" name="attr_rptablabel2"></span></label>
                                                        <label class="sheet-abmenu sheet-ab3"><input type="radio" class="sheet-select-radio sheet-ab3" name="attr_powergroup" value="ab3" /><span class="sheet-powerdisplay" name="attr_rptablabel3"></span></label>
                                                        <label class="sheet-abmenu sheet-ab4"><input type="radio" class="sheet-select-radio sheet-ab4" name="attr_powergroup" value="ab4" /><span class="sheet-powerdisplay" name="attr_rptablabel4"></span></label>
                                                        <label class="sheet-abmenu sheet-ab5"><input type="radio" class="sheet-select-radio sheet-ab5" name="attr_powergroup" value="ab5" /><span class="sheet-powerdisplay" name="attr_rptablabel5"></span></label>
                                                        <input type="hidden" class="sheet-select-radio" name="attr_powergroup" value="ab1" />
                                                        <div class="sheet-ab1"><span name="attr_rptablabel"></span></div>
                                                        <div class="sheet-ab2"><span name="attr_rptablabel2"></span></div>
                                                        <div class="sheet-ab3"><span name="attr_rptablabel3"></span></div>
                                                        <div class="sheet-ab4"><span name="attr_rptablabel4"></span></div>
                                                        <div class="sheet-ab5"><span name="attr_rptablabel5"></span></div>
                                                    </div>
                                                </div>
                                            </label>
                                        </div>
                                        <label class="sheet-configlabels sheet-configcheckbox"><input type='checkbox' value='/w gm' name='attr_whisperspell' title="@{repeating_spells_$#_whisperspell}" /> <span data-i18n="whisper-roll-to-gm">Whisper roll to GM</span></label><br />
                                        <label class="sheet-configlabels sheet-configcheckbox"><input type="checkbox" name="attr_shownotes" value="{{notes=@{spellnotes}}}" /> <span data-i18n="show-notes-with-roll">Show notes with roll</span></label>
                                        <hr class="sheet-modsection">
										<label class="sheet-configlabels" data-i18n="button-behavior">Button Behavior</label>
										<select name="attr_spellbutton" title="@{repeating_spells_$#_spellbutton}" class="sheet-spellbutton">
											<option value="2" data-i18n="skill-only">Skill Only</option>
											<option value="0" data-i18n="attack-and-damage-abbr">Atk + Dmg</option>
											<option value="1" data-i18n="damage-only" selected>Damage Only</option>
										</select>
										<input class="sheet-spellbutton" type="hidden" name="attr_spellbutton" value="1" />
										<div class='sheet-spellskill'>
											<label class="sheet-configlabels" data-i18n="skill">Skill</label>
                                            <div class="sheet-container">
                                                <div class="sheet-child">
                                                    <label class="sheet-ddmenu sheet-athletics"><input type="radio" class="sheet-select-radio sheet-athletics" name="attr_spellskill" title="@{repeating_spells_$#_spellskill}" value="athletics" /> <span name='attr_sathleticsname'></span></label>
                                                    <label class="sheet-ddmenu sheet-faith"><input type="radio" class="sheet-select-radio sheet-faith" name="attr_spellskill" title="@{repeating_spells_$#_spellskill}" value="faith" /> <span name='attr_sfaithname'></span></label>
                                                    <label class="sheet-ddmenu sheet-focus"><input type="radio" class="sheet-select-radio sheet-focus" name="attr_spellskill" title="@{repeating_spells_$#_spellskill}" value="focus" /> <span name='attr_sfocusname'></span></label>
                                                    <label class="sheet-ddmenu sheet-performance"><input type="radio" class="sheet-select-radio sheet-performance" name="attr_spellskill" title="@{repeating_spells_$#_spellskill}" value="performance" /> <span name='attr_sperformancename'></span></label>
    												<label class="sheet-ddmenu sheet-psionics"><input type="radio" class="sheet-select-radio sheet-psionics" name="attr_spellskill" title="@{repeating_spells_$#_spellskill}" value="psionics" /> <span name='attr_spsionicsname'></span></label>
                                                    <label class="sheet-ddmenu sheet-spellcasting"><input type="radio" class="sheet-select-radio sheet-spellcasting" name="attr_spellskill" title="@{repeating_spells_$#_spellskill}" value="spellcasting" /> <span name='attr_sspellcastingname'></span></label>
                                                    <label class="sheet-ddmenu sheet-weirdscience"><input type="radio" class="sheet-select-radio sheet-weirdscience" name="attr_spellskill" title="@{repeating_spells_$#_spellskill}" value="weirdscience" /> <span name='attr_sweirdsciencename'></span></label>
    												<label class="sheet-ddmenu"><input type="radio" class="sheet-select-radio sheet-unskilled" name="attr_spellskill" title="@{repeating_spells_$#_spellskill}" value="unskilled" checked /> <span data-i18n='unskilled'>Unskilled</span></label>
                                                    <input type="hidden" class="sheet-select-radio sheet-" name="attr_spellskill" value="unskilled" />
                                                    <div class="sheet-athletics"><span name='attr_sathleticsname'></span></div>
                                                    <div class="sheet-faith"><span name='attr_sfaithname'></span></div>
                                                    <div class="sheet-focus"><span name='attr_sfocusname'></span></div>
    												<div class="sheet-performance"><span name='attr_sperformancename'></span></div>
                                                    <div class="sheet-psionics"><span name='attr_spsionicsname'></span></div>
                                                    <div class="sheet-spellcasting"><span name='attr_sspellcastingname'></span></div>
                                                    <div class="sheet-weirdscience"><span name='attr_sweirdsciencename'></span></div>
    												<div class="sheet-unskilled"><span data-i18n='unskilled'>Unskilled</span></div>
                                                </div>
                                            </div>
										</div>
										<div class='sheet-spelldamage'>
											<input type="checkbox" name="attr_shighlightdamage" class="sheet-highlight" value="1" style="display:none;" />
											<label class='sheet-configlabels' data-i18n="damage">Damage</label>
											<select class='sheet-spellatt' name="attr_spelldamageatt" title="@{repeating_spells_$#_spelldamageatt}">
												<option value="na" data-i18n="not-applicable-abbr-u" selected>N/A</option>
												<option value="strength" data-i18n="strength">Strength</option>
												<option value="agility" data-i18n="agility">Agility</option>
												<option value="smarts" data-i18n="smarts">Smarts</option>
												<option value="spirit" data-i18n="spirit">Spirit</option>
												<option value="vigor" data-i18n="vigor">Vigor</option>
											</select>
											+
											<input type="number" class="sheet-spellnum" name="attr_spelldmgnumdice" title="@{repeating_spells_$#_spelldmgnumdice}" style="text-align: right;" value="2" />
											<select name="attr_spelldmgdietype" title="@{repeating_spells_$#_spelldmgdietype}" class="sheet-dtype">
												<option value="d4!" data-i18n="d4">d4</option>
												<option value="d6!" selected data-i18n="d6">d6</option>
												<option value="d8!" data-i18n="d8">d8</option>
												<option value="d10!" data-i18n="d10">d10</option>
												<option value="d12!" data-i18n="d12">d12</option>
												<option value="d20!" data-i18n="d20">d20</option>
											 </select>
											 +
											 <input type="text" class="sheet-spellnum" name="attr_spelldmgbonusnum" title="@{repeating_spells_$#_spelldmgbonusnum}" value="0" />
										</div>
										<div class="sheet-vbonusdamage">
											<label class='sheet-configlabels' data-i18n="bonus-damage-die-type">Bonus Damage Die Type</label>
											<select name="attr_spellsbdt" title="@{repeating_spells_$#_spellsbdt}" class="sheet-dtype">
												<option value="d4" data-i18n="d4">d4</option>
												<option value="d6" selected data-i18n="d6">d6</option>
												<option value="d8" data-i18n="d8">d8</option>
												<option value="d10" data-i18n="d10">d10</option>
												<option value="d12" data-i18n="d12">d12</option>
												<option value="d20" data-i18n="d20">d20</option>
											 </select>
										</div>
										<!-- Hidden Fields for the roll button(s), etc -->
										<input type='hidden' name='attr_spellroll' value='@{spelldamageOnly}' />
										<input type='hidden' name='attr_spellskillNDamage' /> <!--Used for Skill and Damage roll -->
										<input type='hidden' name='attr_spelldamageOnly' value='@{spelldmgTemplate}' /> <!-- Used for Damage Only -->
										<input type='hidden' name='attr_skillOnly' value='@{skTemplate}' /> <!-- Used for Damage Only -->

                                        <!-- Skill Formulae -->
                                        <input type="hidden" name="attr_spellWeirdScienceFormula" value="@{weirdscienceSkillRollFormula}" />
                                        <input type="hidden" name="attr_spellWeirdScienceWildDieFormula" value="@{weirdscienceWildDieFormula}" />

                                        <input type="hidden" placeholder="Trademark Weapon" data-i18n-placeholder="trademark-weapon" name="attr_spellAttackBonusReason" value="Placeholder" />
                                        <input type="hidden" name="attr_spellAttackBonus" value="0" />
										<!-- Build the Damage Roll Template Info -->
										<input type='hidden' name='attr_spelldmg' /> <!-- the damage formula -->
										<input type='hidden' name='attr_spellsbonusdmg' value='@{vbonusdamage}' />
										<input type='hidden' name='attr_spellsbonusDie' value='{{bonus_die=[[@{spellsbonusdmg}!]]}}' />
										<input type='text' style='display: none;' name='attr_spelldmgTemplate' value='@{whisperspell} &{template:damage} {{namelength=@{namelength}}} {{name=@{character_name}}} {{source=@{power} }} {{trappings=@{trappings}}} {{dmg_rank=@{powerdamage}}} {{dmg_roll=[[@{spelldmg} + @{damagemods}]]}} @{spellsbonusDie} @{dmgshownotes} {{button=y}} {{DmgRoll=^{reroll-damage}(~repeating_spells_spelldmg) }} @{gritty} {{GrittyRoll=[Roll Injury](~repeating_spells_spellgrittyroll)}} {{conviction=[[ [[@{conviction}]]d6! ]] }}' />
										<input type='hidden' name='attr_skTemplate' value='1d6!' />
										<input type='hidden' name='attr_dmgshownotes' value='{{notes=@{spellnotes}}}' />
                                        <button type='roll' style='display: none;' name='roll_spellgrittyroll' value='&{template:gritty} {{name=Injury Result}} {{result=[[1t[@{injurytablename}]]]}}'></button>
									</div>
									<input class='sheet-spellconfigb' type='checkbox' name='attr_showspellconfig' style="display:none;" checked />
								</div>
    					    </fieldset>
    					</div><!-- End Powers -->
    					<hr class="sheet-sectionSeperator" />
					</div>
				</div>
				<div class="sheet-base sheet-bottomArmorAndShields">
					<!-- ----------- -->
					<!-- -- Armor -- -->
					<!-- ----------- -->
                    <div class="sheet-armorHalf">
                        <input type="checkbox" class="sheet-hideArmor" name="attr_hideArmor" /><span class="sheet-showNhide"></span>
    					<h1 class="sheet-groupHeader sheet-armorSection" data-i18n="armor">Armor</h1>
    					<div class="sheet-armor">
    					    <h4 class="sheet-repeatingHeader sheet-armorWorn" data-i18n="worn">Worn</h4>
    						<h4 class="sheet-repeatingHeader sheet-armorType" style="text-align: left;" data-i18n="armor-type">Armor Type</h4>
    						<!-- <h4 class="sheet-repeatingHeader sheet-armorMinStr" data-i18n="minimum-strength-abbr">Min. Str.</h4> -->
    						<h4 class="sheet-repeatingHeader sheet-armorProtected" data-i18n="area-protected">Area Protected</h4>
    						<h4 class="sheet-repeatingHeader sheet-armorProtection" data-i18n="armor">Armor</h4> <!-- Used to be Protection -->
    						<!-- <h4 class="sheet-armorStacks" data-i18n="protection-stacks">Stacks</h4> -->
    						<h4 class="sheet-repeatingHeader sheet-armorWeight" data-i18n="weight">Weight</h4>
    						<h4 class="sheet-repeatingHeader sheet-armorCarried" data-i18n="carried">Carried</h4>
    						<!--<h4 class="sheet-repeatingHeader" data-i18n="description-notes">Description/Notes</h4>-->
    						<fieldset class="repeating_armor">
    						    <div class="sheet-armorWornContainer"><input class="sheet-armorWorn sheet-isWorn" type="checkbox" name="attr_armorWorn" value="1" checked /><span class="sheet-isWornIcon"></span></div>
    							<input class="sheet-armorType" type="text" name="attr_ArmorType" title="@{repeating_armor_$#_ArmorType}" data-i18n-placeholder="leather" placeholder="Leather" />
                                <!-- <input type='hidden' name='attr_minstrength' value="4" /> -->
                                <!-- <select class="sheet-armorMinStr sheet-dtype" name="attr_armorminstrength" title="@{repeating_weapons_$#_minstrength}">
    								<option value="0" data-i18n="not-applicable-abbr-u">N/A</option>
    								<option value="4" data-i18n="d4" selected>d4</option>
    								<option value="6" data-i18n="d6">d6</option>
    								<option value="8" data-i18n="d8">d8</option>
    								<option value="10" data-i18n="d10">d10</option>
    								<option value="12" data-i18n="d12">d12</option>
    							</select> -->
    							<select class="sheet-armorProtected" name="attr_AreaProtected" style="text-align-last: center;">
                					<option value="1" data-i18n="head"> Head</option>
                					<option value="2" data-i18n="torso" selected>Torso</option>
                					<option value="3" data-i18n="torso-plus-arms">Torso+Arms</option>
                					<option value="4" data-i18n="torso-plus-legs">Torso+Legs</option>
                					<option value="5" data-i18n="torso-plus-arms-plus-legs">Torso+Arms+Legs</option>
                					<option value="6" data-i18n="arms">Arms</option>
                					<option value="7" data-i18n="legs">Legs</option>
                					<option value="8" data-i18n="full-body">Full Body</option>
                				</select>
    							<input class="sheet-armorProtection" type="number" name="attr_ArmorTypeProtection" title="@{repeating_armor_$#_ArmorTypeProtection}" placeholder="1" />
    							<!-- <select class="sheet-armorStacks" style="margin-left: -5px;" name="attr_armorstack">
    							    <option Value="0" data-i18n="no" selected>No</option>
    							    <option value=".5">50%</option>
    							    <option value="1">100%</option>
    							</select> -->
    							<input class="sheet-armorWeight" style="width:50px;" type="number" step="any" name="attr_ArmorTypeWeight" title="@{repeating_armor_$#_ArmorTypeWeight}" />
    							<div class="sheet-armorCarriedContainer"><input class="sheet-armorCarried sheet-armorisCarried" type="checkbox" name="attr_ArmorCarried" title="@{repeating_armor_$#_ArmorCarried}" checked /><span class="sheet-armorisCarriedIcon"></span></div>
                                <label class="sheet-morearmor"><input class='sheet-showarmorconfig' type='checkbox' name='attr_showarmorconfig' checked /><span>y</span></label>
                                <input class='sheet-hiddenInput sheet-showarmorconfig' type='checkbox' name='attr_showarmorconfig' checked />
                                <textarea class="sheet-armorDesc" name="attr_ArmorNotes" title="@{repeating_armor_$#_ArmorNotes}" placeholder="Description/Notes" data-i18n-placeholder="description-notes"></textarea>
                                <div class="sheet-armorconfig">
                                    <!--Stacking-->
                                    <p>
                                        <h4 class="sheet-armorStacks armorConfigHeader" data-i18n="protection-stacks">Stacks</h4>
                                        <select class="sheet-armorStacks" style="margin-left: -5px;" name="attr_armorstack">
            							    <option Value="0" data-i18n="no" selected>No</option>
            							    <option value=".5">50%</option>
            							    <option value="1">100%</option>
            							</select>
                                    </p>

                                    <!-- Min Strength -->
                                    <p>
                                        <h4 class="sheet-armorConfigHeader sheet-armorMinStr" data-i18n="minimum-strength-abbr">Min. Str.</h4>
                                        <input type='hidden' name='attr_minstrength' value="4" />
                                        <select class="sheet-armorMinStr sheet-dtype" name="attr_armorminstrength" title="@{repeating_weapons_$#_minstrength}">
            								<option value="0" data-i18n="not-applicable-abbr-u">N/A</option>
            								<option value="4" data-i18n="d4" selected>d4</option>
            								<option value="6" data-i18n="d6">d6</option>
            								<option value="8" data-i18n="d8">d8</option>
            								<option value="10" data-i18n="d10">d10</option>
            								<option value="12" data-i18n="d12">d12</option>
            							</select>
                                    </p>
                                </div>
    						</fieldset>
    						<!-- <input class="sheet-useLoad" type="checkbox" name="attr_useLoad" style="display:none;" checked /> -->
    						<div class='sheet-armorTotalWeight sheet-loadstuff'><!-- Set up the Total Weight Carried box -->
    							<h4 class="sheet-armorweight"><span data-i18n="total-armor-weight-carried">Total Armor Weight Carried</span>:</h4>
    							<input type="number" name="attr_armortotalweightcarried" title="@{armortotalweightcarried}" class="sheet-armorWeight" value="0" readonly />
    						</div>
    					</div><!-- End Armor -->
                    </div>
                    <!-- ------------- -->
					<!-- -- Shields -- -->
					<!-- ------------- -->
                    <div class="sheet-shieldHalf">
                        <input type="checkbox" class="sheet-hideShields" name="attr_hideShield" /><span class="sheet-showNhide"></span>
    					<h1 class="sheet-groupHeader sheet-shieldSection" data-i18n="shields">Shields</h1>
                        <div class="sheet-shield">
    					    <h4 class="sheet-repeatingHeader sheet-shieldWorn" data-i18n="worn">Worn</h4>
    						<h4 class="sheet-repeatingHeader sheet-shieldType" style="text-align: left;" data-i18n="shield-type">Shield Type</h4>
    						<!-- <h4 class="sheet-repeatingHeader sheet-armorMinStr" data-i18n="minimum-strength-abbr">Min. Str.</h4> -->
    						<h4 class="sheet-repeatingHeader sheet-shieldParry" data-i18n="parry">Parry</h4>
    						<h4 class="sheet-repeatingHeader sheet-shieldCover" data-i18n="cover">Cover</h4> <!-- Used to be Protection -->
    						<!-- <h4 class="sheet-armorStacks" data-i18n="protection-stacks">Stacks</h4> -->
    						<h4 class="sheet-repeatingHeader sheet-shieldWeight" data-i18n="weight">Weight</h4>
    						<!-- <h4 class="sheet-repeatingHeader sheet-shieldCarried" data-i18n="carried">Carried</h4> -->
    						<!--<h4 class="sheet-repeatingHeader" data-i18n="description-notes">Description/Notes</h4>-->
    						<fieldset class="repeating_shields">
    						    <div class="sheet-shieldWornContainer"><input class="sheet-shieldWorn sheet-isWorn" type="checkbox" name="attr_shieldWorn" value="1" checked /><span class="sheet-isWornIcon"></span></div>
    							<input class="sheet-shieldType" type="text" name="attr_ShieldType" title="@{repeating_shields_$#_ShieldType}" />
                                <input class="sheet-shieldParry" type="number" name="attr_ShieldParry" title="@{repeating_shields_$#_ShieldParry}" />
    							<input class="sheet-shieldCover" type="number" name="attr_ShieldCover" title="@{repeating_shields_$#_Cover}" placeholder="1" />
    							<input class="sheet-shieldWeight" type="number" step="any" name="attr_ShieldTypeWeight" title="@{repeating_shields_$#_ShieldTypeWeight}" />
    							<!-- <div class="sheet-shieldCarriedContainer"><input class="sheet-shieldCarried sheet-shieldisCarried" type="checkbox" name="attr_ShieldCarried" title="@{repeating_shields_$#_ShieldCarried}" checked /><span class="sheet-armorisCarriedIcon"></span></div> -->
                                <label class="sheet-moreshields"><input class='sheet-showshieldconfig' type='checkbox' name='attr_showshieldconfig' checked /><span>y</span></label>
                                <input class='sheet-hiddenInput sheet-showshieldconfig' type='checkbox' name='attr_showshieldconfig' checked />
                                <textarea class="sheet-shieldDesc" name="attr_ShieldNotes" title="@{repeating_shields_$#_ShieldNotes}" placeholder="Description/Notes" data-i18n-placeholder="description-notes"></textarea>
                                <div class="sheet-shieldconfig">
                                    <!-- Min Strength -->
                                    <p>
                                        <h4 class="sheet-armorConfigHeader sheet-armorMinStr" data-i18n="minimum-strength-abbr">Min. Str.</h4>
                                        <input type='hidden' name='attr_shieldminstrength' value="4" />
                                        <select class="sheet-shieldMinStr sheet-dtype" name="attr_shieldminstrength" title="@{repeating_shields_$#_shieldminstrength}">
            								<option value="0" data-i18n="not-applicable-abbr-u">N/A</option>
            								<option value="4" data-i18n="d4" selected>d4</option>
            								<option value="6" data-i18n="d6">d6</option>
            								<option value="8" data-i18n="d8">d8</option>
            								<option value="10" data-i18n="d10">d10</option>
            								<option value="12" data-i18n="d12">d12</option>
            							</select>
                                    </p>
                                </div>
    						</fieldset>
    						<!-- <input class="sheet-useLoad" type="checkbox" name="attr_useLoad" style="display:none;" checked /> -->
    					</div>
                        <div class='sheet-shieldTotalWeight sheet-loadstuff'><!-- Set up the Total Weight Carried box -->
                            <h4 class="sheet-shieldweight"><span data-i18n="total-shield-weight-carried">Total Shield Weight Carried</span>:</h4>
                            <input type="number" name="attr_shieldtotalweightcarried" title="@{shieldtotalweightcarried}" class="sheet-shieldWeight" value="0" readonly />
                        </div>
                    </div> <!-- End Shields -->
                </div>
            </div>
            <div class='sheet-notes'>
            	<!-- Physical Appearance/History/Orgin of Powers -->
				<div class="sheet-BGDesc sheet-standardDiv">
					<h2 class="sheet-CharacterHistory sheet-groupHeader" data-i18n="physical-appearance-personal-history">Physical Appearance + Personal History</h2>
					<textarea class="sheet-standardTextArea" name='attr_physdescription'></textarea>
				</div>
				<!-- End Physical Appearance, etc. -->

                <!-- Permanent Injuries -->
                <input type="checkbox" class="sheet-useInjuries" name="attr_permInjuries" style="display: none;" />
				<div class="sheet-Injuries sheet-standardDiv">
					<h1 class="sheet-groupHeader" data-i18n="permanent-injuries">Permanent Injuries</h1>
					<textarea class="sheet-standardTextArea" name='attr_injuries'></textarea>
				</div>
				<!-- End Permanent Injuries -->

				<!-- Worst Nightmare -->
    			<input type="checkbox" class="sheet-useWorstNightmare" name="attr_worstNightmare" style="width: 15px; display: none;" />
				<div class="sheet-WorstNightmare sheet-standardDiv">
					<h1 class="sheet-groupHeader" data-i18n="worst-nightmare">Worst Nightmare</h1>
					<textarea class="sheet-standardTextArea" name='attr_nightmare'></textarea>
				</div>
				<!-- End Worst Nightmare -->

    			<!-- Quest Log -->
    			<input type='checkbox' class='useQuestLog' name="attr_questlog" style="display:none;" />
    			<div class="sheet-QuestLog sheet-standardDiv">
    			    <div class="sheet-showhidebox">
					    <input type="checkbox" class="sheet-hideQL" name="attr_hideQL" /><span class="sheet-showQL"></span>
					</div>
					<h1 class="sheet-groupHeader sheet-questlogHeader" data-i18n="quest-log">Quest Log</h1>
					<input type="checkbox" class="sheet-hideQL" name="attr_hideQL" style="display:none;" />
					<div class="sheet-QL">
					    <h3 class="sheet-qlItem sheet-title">Title</h3>
					    <h3 class="sheet-qlItem sheet-boss">Boss</h3>
					    <h3 class="sheet-qlItem sheet-goal">Goal</h3>
					    <h3 class="sheet-qlItem sheet-qlComplete" style="text-align:center;">Done</h3>
					    <fieldset class="repeating_quests">
					        <div class="sheet-QL">
					            <input class="sheet-qlItem sheet-title" type="text" data-i18n-placeholder="quest-title" placeholder="Quest Title" name="attr_Quest" />
        						<input class="sheet-qlItem sheet-boss" data-i18n-placeholder="who-hired-you" placeholder="Who Hired You?" type="text" name="attr_QuestBoss" />
        						<input class="sheet-qlItem sheet-goal" type="text" data-i18n-placeholder="whats-the-goal-of-the-quest" placeholder="What's the goal of the quest?" name="attr_QuestGoal" />
        						<div class="sheet-qlItem sheet-qlComplete">
        						    <input type="checkbox" class='sheet-goalDone' name="attr_QuestComplete" /><span class="sheet-goalCheck"></span>
        						</div>
        						<textarea class="sheet-qlItem sheet-qlNotes" data-i18n-placeholder="notes-about-the-quest" placeholder="Notes about the quest..." name="attr_questLog"></textarea>
					        </div>
					    </fieldset>
					</div>
    			</div>

    			<!-- Notes -->
                <div class="sheet-flexdiv">
                    <div class="sheet-charnotes">
    					<h1 class="sheet-groupHeader" data-i18n="notes">Notes</h1>
    					<textarea name="attr_CharNotes" class="sheet-standardTextArea" title="@{CharNotes}"></textarea>
                    </div>
                </div>
            </div>
            <!-- -------------- -->
            <!-- Start Vehicles -->
            <!-- -------------- -->
            <div class='sheet-vehicles'>
    			<!-- Start Robot Armor -->
                <input class="sheet-useRobotArmor" type="checkbox" name="attr_RobotArmor" style="display: none;" />
    			<div class="sheet-ship-RobotArmor">
    			    <!-- <input type="checkbox" class="sheet-hideShip" name="attr_is_robotarmor" /><span class="sheet-showShip"></span> -->
			        <h1 class="sheet-groupHeader"><input type="text" class="sheet-headerInput" name="attr_vehicletype" data-i18n-placeholder="vehicle-type" /></h1>
			        <div class="sheet-ship">
			            <div class="sheet-shipMainSection">
			                <div class="sheet-shipMainColumn1">
			                    <div class="sheet-shipMainItem">
			                         <label class="sheet-shipMainLabel" data-i18n="wounds">Wounds:</label>
			                         <input type="number" class="sheet-shipWound" name="attr_vehiclewounds" />&nbsp;<span data-i18n="of">of</span>&nbsp;<input type="number" class="sheet-shipWound" name="attr_vehiclewounds_max" value="3" />
			                         <div class='sheet-vehicle-incbox' title="Incapcitated" data-i18n-title="incapacitated">
									    <label class='sheet-vehicle-incbox'><input class="sheet-vehicle-inc" type='checkbox' name='attr_vehicleisinc' /><div>&nbsp;</div></label>
									    <!-- <span class='sheet-incinfo' data-i18n="incapacitated-abbr">Inc</span> -->
									</div>
			                    </div>
			                    <div class="sheet-shipMainSubColumn">
			                    	<div class="sheet-vehicleStatContainer">
			                    		<div class="sheet-vehicleSizeBox">
					                    	<input type="number" class="sheet-shipMainStatsInput" name="attr_vehiclesize" />
					                    </div>
					                    <label class="sheet-shipMainStatLabel" data-i18n="size">Size:</label>
			                    	</div>
			                    	<div class="sheet-vehicleStatContainer">
			                    		<div class="sheet-vehicleHandlingBox">
					                    	<input type="number" class="sheet-shipMainStatsInput" name="attr_vehiclehandling" />
					                    </div>
					                    <label class="sheet-shipMainStatLabel" data-i18n="handling">Handling:</label>
			                    	</div>
				                    <div class="sheet-vehicleStatContainer">
			                    		<div class="sheet-vehicleTopSpeedBox">
					                    	<input type="number" class="sheet-shipMainStatsInput" name="attr_vehicletopspeed" />
					                    </div>
					                    <label class="sheet-shipMainStatLabel" data-i18n="top-speed">Top Speed (MPH):</label>
			                    	</div>
			                    	<div class="sheet-vehicleStatContainer">
			                    		<div class="sheet-vehicleToughnessBox">
					                    	<input type="text" class="sheet-shipMainStatsInput" name="attr_vehicletoughness" />
					                    </div>
					                    <label class="sheet-shipMainStatLabel" data-i18n="toughness">Toughness:</label>
			                    	</div>
			                    	<div class="sheet-vehicleStatContainer">
			                    		<div class="sheet-vehicleCrewBox">
					                    	<input type="number" class="sheet-shipMainStatsInput" name="attr_vehiclecrew" />
					                    </div>
					                    <label class="sheet-shipMainStatLabel" data-i18n="crew">Crew:</label>
			                    	</div>
			                    </div>
			                </div> <!-- End Column 1 -->
			                <div class="sheet-shipMainColumn2">
					            <h4 class="sheet-subsectionHeader sheet-panotesheader" data-i18n="cargo">Cargo</h4>
								<textarea class='sheet-vtext sheet-panotes' name="attr_vehiclecargo"></textarea>
			                    <!-- <img class='sheet-paimg' src='http://www.geeksville.us/roll20/RobotArmor.png'> -->
			                </div> <!-- End Column 2 -->
			                <div class="sheet-shipMainColumn3">
					            <h4 class="sheet-subsectionHeader sheet-panotesheader" data-i18n="notes-and-upgrades">Notes and Upgrades</h4>
								<textarea class='sheet-vtext sheet-panotes' name="attr_vehiclenotes"></textarea>
								<!-- RA Strength -->
								<!-- <div class='sheet-basetrait' style="border-bottom: none;">
                                    <input class='sheet-deltabutton' type='hidden' name='attr_rastrength_delta' value='0' />
									<button class="sheet-traitbutton sheet-traitflexattbutton" type='roll' name='roll_tRAStrengthRoll' value='@{whisperrastrenth} &{template:roll} {{namelength=@{namelength}}} @{rolltRAStrength} @{setmodsenc} @{showtraitmods}' data-i18n="strength"> Strength</button>
									<span><select name="attr_rastrength" class="sheet-traitdie" value="4">
										<option value="4">d4</option>
										<option value="6">d6</option>
										<option value="8" data-i18n="d8">d8</option>
										<option value="10" data-i18n="d10">d10</option>
										<option value="12" data-i18n="d12">d12</option>
									</select>+</span>
									<input class="sheet-otraitmod" type="number" name="attr_rastrengthmod" value="0" />
									<input class='sheet-moremods' type='checkbox' name='attr_showraStMod' /><span>y</span>
									<div class='sheet-basetrait sheet-traitmodplus'>
                                        <hr class="sheet-modsection">
                                        <input class='sheet-whispercheck' type='checkbox' value='/w gm' name='attr_whisperrastrenth' /> <span class='sheet-ModDesc' data-i18n="whisper-roll-to-gm">Whisper roll to GM</span><br />
                                        <select name="attr_rastrengthwilddie" title="@{rastrengthwilddie}" class="sheet-traitdie">
                                            <option value="4">d4</option>
                                            <option value="6" selected>d6</option>
                                            <option value="8" data-i18n="d8">d8</option>
                                            <option value="10" data-i18n="d10">d10</option>
                                            <option value="12" data-i18n="d12">d12</option>
                                        </select>
                                        <input type='text' class='sheet-ModDesc' name='attr_rastrengthwilddieinfo' placeholder='Standard Wild Die die type' data-i18n-placeholder="standard-wild-die-type" /><br />
                                        <hr class="sheet-modsection">
										<input type='text' class='sheet-ModDesc' name='attr_rastModType' placeholder='Modifier due to edges, hindrances, etc' data-i18n-placeholder="att-mod-description" />
										+<input class="sheet-otraitmod" type="number" name="attr_rastrollmod" value="0" /><br />
                                        <label class='sheet-delta' data-i18n='die-step-delta'>steps boosted/lowered from base</label><input class='sheet-otraitmod' style='border-bottom: 1px solid black;' type='number' name='attr_rastrength_delta' title='@{rastrength_delta}' value='0' /><input type='hidden' name='attr_rastrength_base' /><input type='hidden' name='attr_rastrengthmod_base' />
									</div>
									<input type='hidden' name='attr_rastrength_rank' value='1d4!' />
									<input type='hidden' name='attr_rastrength_display' value='1d4' />
									<input type='hidden' name='attr_rolltRAStrength' value='{{name=@{character_name} }} {{trait=Strength}} {{skill_rank=@{rastrength_display} }} {{skill_roll=[[@{rastrength_rank} + @{rastrollmod}+ @{ModSumEnc}[Wounds, Fatigue, Encumbrance, Distracted] + @{traitmods}]]}} {{mook=[[1d0+@{wdNum}]]}} {{wild_die=[[ 1d@{rastrengthwilddie}! + @{rastrengthmod} + @{rastrollmod} + @{ModSumEnc}[Wounds, Fatigue, Encumbrance, Distracted] + @{traitmods}]]}}' />
								</div> -->
			                </div> <!-- End Column 3 -->
			            </div>
			            <div class="sheet-shipArmaments">
			                <!-- <input type="checkbox" class="sheet-hideshiprepeating" name="attr_hidesshipweapons" /><span class="sheet-showshipweapons"></span> -->
			                <h1 class="sheet-groupHeader" data-i18n="armaments">Armaments</h1>
			                <div class="sheet-shipWeapons">
    			                <h4 class="sheet-weaponItem sheet-shipbutton">&nbsp;</h4>
    			                <h4 class="sheet-weaponItem sheet-shipweapon" data-i18n="weapon">Weapon</h4>
    			                <h4 class="sheet-weaponItem sheet-shiprange" data-i18n="range">Range</h4>
    			                <h4 class="sheet-weaponItem sheet-shiprof" data-i18n="rate-of-fire-abbr">ROF</h4>
    			                <h4 class="sheet-weaponItem sheet-shipdamage" data-i18n="damage">Damage</h4>
                                <h4 class="sheet-weaponItom sheet-shipAP" data-i18n="armor-piercing-abbr">AP</h4>
    			                <h4 class="sheet-weaponItem sheet-shipplacement" data-i18n="placement">Placement</h4>
    			                <fieldset class='repeating_shipweapons'>
    			                    <div class="sheet-shipWeapons">
    			                        <button class='sheet-weaponItem sheet-shipbutton' type='roll' name='roll_tShipWeaponDamage' value='@{rolltShipWeaponDamageFormula}'></button>
    			                        <input type="text" class="sheet-weaponItem sheet-shipweapon" name="attr_ShipWeaponType" data-i18n-placeholder="weapon"  placeholder="Weapon" />
										<input type="text" class="sheet-weaponItem sheet-shiprange" name="attr_ShipWeaponRange" data-i18n-placeholder="range"  placeholder="Range" />
										<input type="number" class="sheet-weaponItem sheet-shiprof" name="attr_ShipWeaponRoF" data-i18n-placeholder="rate-of-fire-abbr" placeholder="RoF" />
										<div class="sheet-weaponItem sheet-shipdamage">
										    <input type="number" name="attr_NoDmgDice" class="sheet-short" value="2" />
    										<select name="attr_DmgType" class="dtype">
    											<option value="d4!" data-i18n="d4">d4</option>
    											<option value="d6!" data-i18n="d6">d6</option>
    											<option value="d8!" data-i18n="d8">d8</option>
    											<option value="d10!" data-i18n="d10">d10</option>
    											<option value="d12!" data-i18n="d12">d12</option>
    										</select>+<input class="sheet-shipDamageMod" type="text" name="attr_DmgMod" value="0" />
										</div>
                                        <input type="number" class="sheet-weaonItem sheet-weaponAP" name="attr_ShipWeaponAP" value="0" />
										<input type="text" class="sheet-weaponItem sheet-shipplacement" name="attr_ShipWeaponPlacement" data-i18n-placeholder="placement" placeholder="Placement" />
										<textarea class="sheet-weaponItem sheet-shipweaponnotes" name="attr_ShipWeaponNotes"></textarea>
									</div>
									<input type='hidden' name='attr_rolltShipWeaponDamageFormula' value="&{template:damage} {{namelength=@{namelength}}} {{name=@{vehicletype}}} {{source=@{ShipWeaponType}}} {{dmg_rank=@{NoDmgDice}@{DmgType}+@{DmgMod}}} {{dmg_roll=@{ShipWeaponDamage}}} {{bonus_die=[[@{vbonusdamage}]]}} {{notes=@{ShipWeaponNotes}}}" />
									<input type="hidden" name="attr_ShipWeaponDamage" value="[[@{NoDmgDice}@{DmgType}+@{DmgMod} + @{damagemods}]]" />
    			                </fieldset>
    			            </div>
    			            <!-- Crew & Passengers -->
			            </div>
			        </div>
    			</div>
    			<!-- End Robot Armor -->
            </div>
            <!-- End Vehicles -->
            <!-- -------------------- -->
            <!-- Start Combat Options -->
            <!-- -------------------- -->
            <div class='sheet-combatOptions'>
            	<!-- placeholder-->
            	<h1 class="sheet-groupHeader" data-i18n="combat-options-and-situational-rules">Combat Options & Situational Rules</h1>
            	<div class="sheet-combatOptionDetails">
	            	<div class="sheet-combatoptionItem">
	            		<span class="sheet-optionLabel" data-i18n="aim">Aim</span>: <span class="sheet-optionDescription" data-i18n="aim-description">Ignore up to 4 points of penalties from Range, Cover, Called Shot, Scale, or Speed; or add +2 to the roll. Character may not move or take other actions.</span>
	            	</div>
	            	<div class="sheet-combatoptionItem">
	            		<span class="sheet-optionLabel" data-i18n="area-of-effect">Area of Effect</span>: <span class="sheet-optionDescription" data-i18n="area-of-effect-desciption">Targets touching template suffer damage. Treat cover as Armor. Missed attack rolls may deviate.</span>
						<ul>
							<li><span class="sheet-optionSubLabel" data-i18n="without-miniatures-abbr">Without Minis</span>: <span class="sheet-optionDescription" data-i18n="without-miniatures-description">SBT affects 2 targets, MBT or Cone 3, LBT 4.</span></li>
						</ul>
					</div>
	            	<div class="sheet-combatoptionItem">
	            		<span class="sheet-optionLabel" data-i18n="bound-and-entangled">Bound & Entangled</span>: <span class="sheet-optionDescription" data-i18n="bound-and-entangled-description">Entangled characters can’t move and are Distracted until free. Bound characters are also Vulnerable, and cannot take physical actions other than trying to break free.</span>
						<ul>
							<li><span class="sheet-optionSubLabel" data-i18n="breaking-free">Breaking Free</span>: <span class="sheet-optionDescription" data-i18n="breaking-free-description">Victim makes Athletics (or Str–2) roll as an action (an opposed roll if held by a foe). Success improves Bound to Entangled, or Entangled to free. A raise frees the victim. Either may roll Str–2 instead.</span>
					</div>
	            	<div class="sheet-combatoptionItem">
	            		<span class="sheet-optionLabel" data-i18n="breaking-things">Breaking Things</span>: <span class="sheet-optionDescription" data-i18n="breaking-things-description">See Obstacle Hardness Table; Stationary items are Parry 2. No bonus damage or Aces are possible.</span>
					</div>
					<div class="sheet-combatoptionItem">
						<span class="sheet-optionLabel" data-i18n="called-shots">Called Shots</span>: <span class="sheet-optionDescription" data-i18n="called-shots-description">Limb is −2 / Hand –4 and may disarm. Head or vitals is −4 and +4 Damage.</span>
					</div>
					<div class="sheet-combatoptionItem">
						<span class="sheet-optionLabel" data-i18n="cover">Cover</span>: <span class="sheet-optionDescription" data-i18n="cover-description">Light −2, Medium −4, Heavy −6, Near Total −8.</span>
						<ul>
							<li><span class="sheet-optionSubLabel" data-i18n="obstacles">Obstacles</span>: <span class="sheet-optionDescription" data-i18n="obstacles-description">Obstacles add to Armor if attack misses by cover penalty. Sample values: heavy glass, doors (+2), sheet metal, heavy car door (+4), oak door, cinder block wall (+6), brick wall (+8), stone wall, tree (+10).</span></li>
						</ul>
					</div>
					<div class="sheet-combatoptionItem">
						<span class="sheet-optionLabel" data-i18n="defend">Defend</span>: <span class="sheet-optionDescription" data-i18n="defend-description">+4 Parry. Takes entire turn and character may not run.</span>
					</div>
					<div class="sheet-combatoptionItem">
						<span class="sheet-optionLabel" data-i18n="disarm">Disarm</span>: <span class="sheet-optionDescription" data-i18n="disarm-description">Called shot to limb or weapon. If weapon, roll as object and target must make a Str roll ≥ than the damage or drop it. If a limb, a Shaken or Wounded defender must make a Str roll at –2 (limb) or (–4) hand or drop the item.</span>
					</div>
					<div class="sheet-combatoptionItem">
						<span class="sheet-optionLabel" data-i18n="distracted">Distracted</span>: <span class="sheet-optionDescription" data-i18n="distracted-description">–2 to all Trait rolls until the end of the character’s next turn.</span>
					</div>
					<div class="sheet-combatoptionItem">
						<span class="sheet-optionLabel" data-i18n="the-drop">The Drop</span>: <span class="sheet-optionDescription" data-i18n="the-drop-description">+4 to attack and damage if target is defenseless. If Shaken or Wounded, victim must make a Vigor roll (at –2 versus attacks to the head) or be KO’ed.</span>
					</div>
					<div class="sheet-combatoptionItem">
						<span class="sheet-optionLabel" data-i18n="evasion">Evasion</span>: <span class="sheet-optionDescription" data-i18n="evasion-description">Characters may avoid attacks that specifically say they may be evaded, by making an Agility roll at –2.</span>
					</div>
					<div class="sheet-combatoptionItem">
						<span class="sheet-optionLabel" data-i18n="fatigue">Fatigue</span>: <span class="sheet-optionDescription" data-i18n="fatigue-description">–1 to all actions (–2 if Exhausted). Fatigue improves one level every hour unless the source says otherwise. Incapacitated victims fall unconscious for 2d6 hours.</span>
					</div>
					<div class="sheet-combatoptionItem">
						<span class="sheet-optionLabel" data-i18n="finishing-move">Finishing Move</span>: <span class="sheet-optionDescription" data-i18n="finishing-move-description">Instant kill to helpless foe with a lethal weapon.</span>
					</div>
					<div class="sheet-combatoptionItem">
						<span class="sheet-optionLabel" data-i18n="free-attacks">Free Attacks</span>: <span class="sheet-optionDescription" data-i18n="free-attacks-description">The character gets to make an attack with no special maneuvers or optional combat Edges such as Frenzy or Sweep.</span>
					</div>
					<div class="sheet-combatoptionItem">
						<span class="sheet-optionLabel" data-i18n="ganging-up">Ganging Up</span>: <span class="sheet-optionDescription" data-i18n="ganging-up-description">+1 Fighting per additional adjacent attacker to a maximum of +4.</span>
					</div>
					<div class="sheet-combatoptionItem">
						<span class="sheet-optionLabel" data-i18n="grappling">Grappling</span>: <span class="sheet-optionDescription" data-i18n="grappling-description">If the attacker succeeds at an opposed Athletics roll, the victim is Entangled if successful, or Bound with a raise and the grappler is also Vulnerable.<br /><br/>
						Characters can't grapple creatures more than two sizes larger than themselves.</span>
						<ul>
							<li><span class="sheet-optionSubLabel" data-i18n="crush">Crush</span>: <span class="sheet-optionDescription" data-i18n="crush-description">Once grappled, the attacker may take an action to make an opposed Strength roll, causing his Strength in damage if successful (those with the Bite Special Ability may bite instead).</span></li>
						</ul>
					</div>
					<div class="sheet-combatoptionItem">
						<span class="sheet-optionLabel" data-i18n="hold">Hold</span>: <span class="sheet-optionDescription" data-i18n="hold-description">The character “Holds” her Action Card to go later in the current or later round. She loses her Hold status if Shaken or Stunned. She may interrupt foe’s actions with an opposed Athletics roll.</span>
					</div>
					<div class="sheet-combatoptionItem">
						<span class="sheet-optionLabel" data-i18n="illumination">Illumination</span>: <span class="sheet-optionDescription" data-i18n="illumination-description">Dim –2; Dark –4; Pitch Darkness –6.</span>
					</div>
					<div class="sheet-combatoptionItem">
						<span class="sheet-optionLabel" data-i18n="improvised-weapons">Improvised Weapons</span>: <span class="sheet-optionDescription" data-i18n="improvised-weapons-description">–2 to attacks.</span>
						<ul>
							<li><span class="sheet-optionSubLabel" data-i18n="light">Light</span>: <span class="sheet-optionDescription" data-i18n="light-description">Range 3/6/12, Damage Str+d4, Min Str d4;</span></li>
							<li><span class="sheet-optionSubLabel" data-i18n="medium">Medium</span>: <span class="sheet-optionDescription" data-i18n="medium-description">Range 2/4/8, Damage Str+d6, Min Str d6;</span></li>
							<li><span class="sheet-optionSubLabel" data-i18n="heavy">Heavy</span>: <span class="sheet-optionDescription" data-i18n="heavy-description">Range 1/2/4, Damage Str+d8, Min Str d8</span></li>
						</ul>
					</div>
					<div class="sheet-combatoptionItem">
						<span class="sheet-optionLabel" data-i18n="innocent-bystanders">Innocent Bystanders</span>: <span class="sheet-optionDescription" data-i18n="innocent-bystanders-description">Missed Athletics (throwing) / Shooting rolls with a 1 (1 or 2 for shotgun or automatic fire) on the skill die hits a random adjacent target.</span>
					</div>
					<div class="sheet-combatoptionItem">
						<span class="sheet-optionLabel" data-i18n="mounted-combat">Mounted Combat</span>: <span class="sheet-optionDescription" data-i18n="mounted-combat-description">Mount and rider act on same Action Card; Rider attacks with lower of Fighting or Riding; Shooting incurs –2 Unstable Platform penalty; Charging is +4 Damage but requires 6′′ of straight movement.</span>
					</div>
					<div class="sheet-combatoptionItem">
						<span class="sheet-optionLabel" data-i18n="multi-actions">Multi-Actions</span>: <span class="sheet-optionDescription" data-i18n="multi-actions-description">Subtract 2 from all actions for each additional action attempted beyond the first (maximum of 3).</span>
					</div>
					<div class="sheet-combatoptionItem">
						<span class="sheet-optionLabel" data-i18n="natural-weapons">Natural Weapons</span>: <span class="sheet-optionDescription" data-i18n="natural-weapons-description">Creatures with fangs, claws, horns, etc, are considered armed. Bite can be performed while grappling, claws add +2 to Athletics (climbing), and horns add +4 damage if the creature Runs at least 5′′.</span>
					</div>
					<div class="sheet-combatoptionItem">
						<span class="sheet-optionLabel" data-i18n="nonlethal-damage">Nonlethal Damage</span>: <span class="sheet-optionDescription" data-i18n="nonlethal-damage-description">Declare prior to making an attack roll; Targets are knocked out for 1d6 hours instead of potentially killed when Incapacitated. Edged weapons suffer −1 to attack rolls.</span>
					</div>
					<div class="sheet-combatoptionItem">
						<span class="sheet-optionLabel" data-i18n="off-hand-attack">Off Hand Attack</span>: <span class="sheet-optionDescription" data-i18n="off-hand-attack-description">−2 to attack rolls with off hand.</span>
					</div>
					<div class="sheet-combatoptionItem">
						<span class="sheet-optionLabel" data-i18n="prone">Prone</span>: <span class="sheet-optionDescription" data-i18n="prone-description">Medium Cover from ranged attacks 3′′ or greater; −2 Fighting and −2 Parry. Standing cost 2” of movement.</span>
					</div>
					<div class="sheet-combatoptionItem">
						<span class="sheet-optionLabel" data-i18n="push">Push</span>: <span class="sheet-optionDescription" data-i18n="push-description">Attacker and defender make opposed Strength rolls (+2 if attacker moved more than 2′′). Defender is knocked back 1′′ (2′′ with raise). Pushed victims make Athletics test (−2 if Pushed with raise) or be knocked prone. Both add their shield’s Parry bonus.</span>
					</div>
					<div class="sheet-combatoptionItem">
						<span class="sheet-optionLabel" data-i18n="range">Range</span>: <span class="sheet-optionDescription" data-i18n="range-description">Short 0, Medium −2, Long −4, Extreme –8.</span>
					</div>
					<div class="sheet-combatoptionItem">
						<span class="sheet-optionLabel" data-i18n="ranged-attacks-in-melee">Ranged Attacks in Melee</span>: <span class="sheet-optionDescription" data-i18n="ranged-attacks-in-melee-description">Attacker may use power or weapon no larger than a pistol; Target Number is defender’s Parry.</span>
					</div>
					<div class="sheet-combatoptionItem">
						<span class="sheet-optionLabel" data-i18n="readying-weapons">Readying Weapons</span>: <span class="sheet-optionDescription" data-i18n="readying-weapons-description">May ready up to two easily available items per turn as a free action. Additional items are actions.</span>
					</div>
					<div class="sheet-combatoptionItem">
						<span class="sheet-optionLabel" data-i18n="recoil">Recoil</span>: <span class="sheet-optionDescription" data-i18n="recoil-description">−2 Shooting if RoF is 2 or higher.</span>
					</div>
					<div class="sheet-combatoptionItem">
						<span class="sheet-optionLabel" data-i18n="reload">Reload</span>: <span class="sheet-optionDescription" data-i18n="reload-description">Nocking arrow or loading sling stone is a free action once per action. Loading bolts, clips, magazine, or single bullets is an action.</span>
					</div>
					<div class="sheet-combatoptionItem">
						<span class="sheet-optionLabel" data-i18n="shotguns">Shotguns</span>: <span class="sheet-optionDescription" data-i18n="shotguns-description">+2 to Shooting. Damage is 3d6 at Short Range, 2d6 at Medium, and 1d6 at Long.</span>
					</div>
					<div class="sheet-combatoptionItem">
						<span class="sheet-optionLabel" data-i18n="size-scale">Size/Scale</span>: <span class="sheet-optionDescription" data-i18n="size-scale-description">Tiny –6, Very Small –4, Small –2, Large +2, Huge +4, Gargantuan +6. Add difference vs larger targets; Subtract difference against smaller targets.</span>
					</div>
					<div class="sheet-combatoptionItem">
						<span class="sheet-optionLabel" data-i18n="speed">Speed</span>: <span class="sheet-optionDescription" data-i18n="speed-description">–1 (60 MPH+), –2 (120 MPH+), –4 (240 MPH+), –6 (Mach 1+), –8 (Mach 2+), –10 (near light speed)</span>
					</div>
					<div class="sheet-combatoptionItem">
						<span class="sheet-optionLabel" data-i18n="stunned">Stunned</span>: <span class="sheet-optionDescription" data-i18n="stunned-description">Victims are Distracted until they recover, fall prone, can’t move or take actions, don’t count toward the Gang Up bonus, and are subject to the Drop.</span>
					</div>
					<div class="sheet-combatoptionItem">
						<span class="sheet-optionLabel" data-i18n="support">Support</span>: <span class="sheet-optionDescription" data-i18n="support-description">Character describes using a skill in some way that helps an ally and adds +1 to his total with success and +2 with a raise. Critical Failure subtracts 2.</span>
					</div>
					<div class="sheet-combatoptionItem">
						<span class="sheet-optionLabel" data-i18n="suppressive-fire">Suppressive Fire</span>: <span class="sheet-optionDescription" data-i18n="suppressive-fire-description">Attacker places Medium Blast Template and makes Shooting roll. Each target hit by the attack total is Distracted, or hit for damage with a raise (up to the weapon’s Rate of Fire).</span>
					</div>
					<div class="sheet-combatoptionItem">
						<span class="sheet-optionLabel" data-i18n="surprise">Surprise</span>: <span class="sheet-optionDescription" data-i18n="surprise-description">Ambushers start on Hold, victims make Notice roll or get no Action Card on first round.</span>
					</div>
					<div class="sheet-combatoptionItem">
						<span class="sheet-optionLabel" data-i18n="tests"> Tests</span>: <span class="sheet-optionDescription" data-i18n="tests-description">Describe action and make opposed skill test versus foe’s linked attribute. If successful, foe is Distracted or Vulnerable (attacker’s choice), and Shaken with a raise.</span>
					</div>
					<div class="sheet-combatoptionItem">
						<span class="sheet-optionLabel" data-i18n="touch-attack">Touch Attack</span>: <span class="sheet-optionDescription" data-i18n="touch-attack-description">+2 to Fighting roll.</span>
					</div>
					<div class="sheet-combatoptionItem">
						<span class="sheet-optionLabel" data-i18n="two-weapons">Two Weapons</span>: <span class="sheet-optionDescription" data-i18n="two-weapons-description">+1 to Fighting if foe has a single weapon, no shield, or is unarmed.</span>
					</div>
					<div class="sheet-combatoptionItem">
						<span class="sheet-optionLabel" data-i18n="unstable-platform">Unstable Platform</span>: <span class="sheet-optionDescription" data-i18n="unstable-platform-description">−2 Shooting from a moving vehicle, animal, or other unstable surface.</span>
					</div>
					<div class="sheet-combatoptionItem">
						<span class="sheet-optionLabel" data-i18n="vulnerable">Vulnerable</span>: <span class="sheet-optionDescription" data-i18n="vulnerable-description">Actions against the character are made at +2 until the end of their next turn. (Does not stack with The Drop.)</span>
					</div>
					<div class="sheet-combatoptionItem">
						<span class="sheet-optionLabel" data-i18n="wild-attack">Wild Attack</span>: <span class="sheet-optionDescription" data-i18n="wild-attack-description">+2 Fighting, +2 Damage, but Vulnerable until the end of the attacker’s next turn.</span>
					</div>
					<div class="sheet-combatoptionItem">
						<span class="sheet-optionLabel" data-i18n="withdrawing-from-combat">Withdrawing from Combat</span>: <span class="sheet-optionDescription" data-i18n="withdrawing-from-combat-description">Adjacent foes get one free attack at retreating character as long as they are not Shaken or Stunned.</span>
					</div>
            	</div>
            </div>
            <!-- End Combat Options -->
            <div class='sheet-config'> <!--Configuration Tab-->
        		<!--                           -->
    			<!-- BEGIN CONFIGURATION STUFF -->
    			<!--                           -->
    			<div class='sheet-configSection'>
    			    <input type="checkbox" class="sheet-hideSRM" name="attr_hideSRM" /><span class="sheet-showSRM"></span>
    			    <h3 class='sheet-configSectionTitle' data-i18n="setting-rules">Setting Rules</h3>
    			    <input type='checkbox' class="sheet-usegritty" name='attr_gritty' value="{{getgritty=gritty}}" style="display: none;" />
    			    <div class="sheet-srmconfig">
    				    <label class="sheet-srmItem" data-i18n-title="additional-derived-stats"><input type='checkbox' name='attr_showadditionalderived' /> <span data-i18n="additional-derived-stats">Additional Derived Stats</span></label>
    				    <label class="sheet-srmItem" data-i18n-title="power-pointless"><input type="checkbox" class="sheet-NoPP" name="attr_NoPPRule" /> <span data-i18n="no-power-points">No Power Points</span></label>
                        <label class="sheet-srmItem" data-i18n-title="gritty-damage"><input type='checkbox' class="sheet-usegritty" name='attr_gritty' value="{{getgritty=gritty}}" /> <span data-i18n="use-gritty-damage">Use Gritty Damage</span></label>
                        <input type='checkbox' class="sheet-usegritty" name='attr_gritty' value="{{getgritty=gritty}}" style="display: none;" />
                        <label class="sheet-srmItem sheet-injurytable" data-i18n-title="injury-table-name">Injury Table Name: <input type='text' class="sheet-injury" name="attr_injurytablename" /></label>
                        <label class="sheet-srmItem"><input type="checkbox" class="sheet-useCharisma" name="attr_paceignoreswounds" /> <span data-i18n="pace-ignores-wounds">Pace Ignores Wounds</span></label>
						<input type="checkbox" class="sheet-usexp" name="attr_usexp" value="1" style="display: none;" checked />
    				    <label class="sheet-srmItem" data-i18n-title="variable-bonus-damage-die"><input type="checkbox" class="sheet-useRaiseHB" name="attr_RaiseHBRule" value="1" /> <span data-i18n="variable-bonus-damage-raise-based">Variable Bonus Damage (Raise based)</span></label>
						<input type="checkbox" class="sheet-hiddenInput" name="attr_RaiseHBRule" value="2" checked />
						<label class="sheet-srmItem"><input type="checkbox" name="attr_usewealth" /> <span data-i18n="use-the-wealth-system">Use the Wealth System</span></label>
                        <input class="sheet-optional sheet-usewealth" type="checkbox" name="attr_usewealth" />
                        <div class="sheet-srmItem sheet-showwealthwilddie">
                            <select name="attr_wealthwilddie" title="@{wealthwilddie}" class="sheet-traitdie">
                                <option value="4" data-i18n="d4">d4</option>
                                <option value="6" selected data-i18n="d6">d6</option>
                                <option value="8" data-i18n="d8">d8</option>
                                <option value="10" data-i18n="d10">d10</option>
                                <option value="12" data-i18n="d12">d12</option>
                            </select>
                            <input type='text' class='sheet-ModDesc' name='attr_wealthwilddieinfo' placeholder='Wealth Wild Die die type' data-i18n-placeholder="wealth-wild-die-type" />
                        </div>
						<label class="sheet-srmItem sheet-usewealthmod"><input type="checkbox" name="attr_useWealthMod" value="1" />&nbsp;<span data-i18n="use-wealth-modifier-field">Use the Wealth Modifier field</span></label>
                        <!-- <label class="sheet-srmItem" data-i18n-title="smooth-dice"><input type="checkbox" name="attr_smooth_dice" value=1>&nbsp;<span data--i18n="smooth-dice">Smooth Dice</span></label> -->
    			    </div>
    			</div>
    			<div class='sheet-configSection'>
    			    <input type="checkbox" class="sheet-hideOST" name="attr_hideOST" /><span class="sheet-showOST"></span>
    			    <h3 class='sheet-configSectionTitle' data-i18n="other-sheet-tweaks">Other Sheet Tweaks</h3>
    			    <div class="sheet-miscconfig">
						<select name="attr_atkxconfig" title="May need to change your ROF for changes to take affect.">
							<option value="0" selected data-i18n="attack-abbr-roll-query-sorted-high-to-low">Atk^ roll query sorted High to Low</option>
							<option value="1" data-i18n="attack-abbr-roll-query-sorted-low-to-high">Atk^ roll query sorted Low to High</option>
							<option value="2" data-i18n="attack-abbr-always-roll-max-no-roll-query">Atk^ always roll max (no roll query)</option>
						</select>
                        <label class='sheet-miscItem'><input type="checkbox" name="attr_useAlphaNum" value="1" /> <span data-i18n="use-alphanumeric-for-traits">Use Alphanumeric lables for Trait Ranks (instead of dice icons)</span></label>
                        <label class='sheet-miscItem'><input type="checkbox" class="sheet-attsatdsix" name="attr_attsatdsix" value="1" style="width: 15px;"> <span data-i18n="attributes-start-at-d6">Attributes start at d6</span></label>
                        <!-- <label class='sheet-miscItem'><input type="checkbox" class="sheet-fightingUnskilled" name="attr_fightingunskilled" value="1" style="width: 15px;"> <span data-i18n="start-fighting-as-unskilled">Start Fighting as Unskilled</span></label> -->
                        <label class='sheet-miscItem'><input type="checkbox" name="attr_showFear" value="1" checked /> <span data-i18n="show-fear-roll-button">Show Fear Roll Button</span></label>
                        <label class='sheet-miscItem'><input type="checkbox" class="sheet-autorollbonusdmg" name="attr_autorollbonusdmg" value="1" checked> <span data-i18n="auto-roll-bonus-damage">Auto-roll bonus damage</span></label>
    			        <label class='sheet-miscItem'><input type="checkbox" class="sheet-hideArcanum" name="attr_ArcanumTab" style="width: 15px;"> <span data-i18n="hide-powers-section">Hide Powers Section</span></label>
    			        <label class='sheet-miscItem'><input type="checkbox" name="attr_promptmods" title="Wounds, Fatigue, Distracted, and Encumbrance are not part of Misc. Modifiers and are accounted for automatically" /> <span data-i18n="prompt-modifiers-text">Prompt for Misc. Modifiers</span></label>
						<label class='sheet-miscItem'><input type="checkbox" name="attr_useBGPhysicalDesc" checked /> <span data-i18n="show-background-description">Show Background and Description</span></label>
						<label class='sheet-miscItem'><input type="checkbox" name="attr_useLoad" /> <span data-i18n="show-load-and-encumbrance">Show Load and Encumberance</span></label>
                        <label class="sheet-miscItem" data-i18n-title="manually-set-rank"><input type="checkbox" name="attr_setrank" /> <span data-i18n="manually-set-rank">Manually set Rank</span></label>
                        <label class="sheet-miscItem" data-i18n-title="manually-set-advances"><input type="checkbox" name="attr_setadvance" value="1" /> <span data-i18n="manually-set-advances">Manually set Advances</span></label>
        			    <label class='sheet-miscItem'><input type="checkbox" name="attr_showmods" checked /> <span data-i18n="show-modifiers">Show Modifiers For Trait Rolls</span></label>
        			    <!-- Hidden Fields to set whether to show mods in the Roll Template or not -->
    					<input type="hidden" name="attr_setmods" value="{{mods=[[1d0+@{absmod}+abs(@{traitmods}) ]] }}" />
    					<input type="hidden" name="attr_setmodsenc" value="{{mods=[[1d0+@{absmodenc}+abs(@{traitmods}) ]] }} {{showenc=[[1d0+@{encumbrance}]]}} {{encumbrance=@{encumbrance}}}" />
    					<input type="hidden" name="attr_setdmgmods" value="{{mods=[[1d0+[[abs(@{damagemods})]] ]] }}" />
    					<!-- Hidden Fields to set the rest of the Roll Template Information -->
    					<input type="hidden" name="attr_showtraitmods" value="{{showtt=[[1d0+@{traitmods}]]}} {{ttmod=@{traitmods}}} {{showwounds=[[1d0+@{woundsMod}]]}} {{wounds=-@{woundsMod} }} {{showfatigue=[[1d0+@{fatigue}]]}} {{fatigue=-@{fatigueMod}}} {{showdistracted=[[1d0+@{distracted}]]}} {{distracted=@{distracted}}}" />
    					<input type="hidden" name="attr_showdmgmods" value="{{showdmg=[[1d0+@{damagemods}]]}} {{ttmod=@{traitmods}}}" />
    					<!-- Hidden Fields to make Dice Rolling easier -->
    					<input type="hidden" name="attr_traitmods" value="@{ttmod}" />
    					<input type="hidden" name="attr_damagemods" value="@{dmgmod}" />
    					<!-- Absolute Values of all the different Modifier fields -->
    					<input type="hidden" name="attr_absmod" value="0" />
    					<input type="hidden" name="attr_absmodenc" value="0" />
    					<!-- End Hidden Fields -->
						<label class="sheet-miscItem"><input type='checkbox' class='sheet-useQuestLog' name="attr_questlog" /> <span data-i18n="show-quest-log">Show Quest Log</span></label>
                        <!-- <label class="sheet-miscItem"><input type="checkbox" class="sheet-usesize" name="attr_useSize" value="1" />&nbsp;<span data-i18n="show-size-fields">Show Size fields</span></label> -->
						<label class="sheet-miscItem"><input type="checkbox" class="sheet-usesoakbutton" name="attr_showsoak" checked /> <span data-i18n="show-soak-button">Show Soak Button</span></label>
						<label class="sheet-miscItem"><input type="checkbox" class="sheet-showSpecAbilities" name="attr_showSpecAbilities" value="1" /> <span data-i18n="show-special-abilities">Show Special Abilities</span></label>
						<label class="sheet-miscItem"><input type="checkbox" class="sheet-useunshakebutton" name="attr_showunshake" checked /> <span data-i18n="show-unshake-button">Show Unshake Button</span></label>
						<label class="sheet-miscItem"><input type="checkbox" class="sheet-showVehicles sheet-useVehicles" name="attr_vehicle" style="width: 15px;"> <span data-i18n="show-the-vehicles-tab">Show the Vehicles Tab</span></label>
        			    <input type="checkbox" class="sheet-showVehicles" name="attr_vehicle" style="display: none;" />
        			    <!-- <label class="sheet-miscItem sheet-vehicleTypes"><input class="sheet-useSailingShips" type="checkbox" name="attr_sailingShip" /> <span data-i18n="show-sailing-ship">Show Sailing Ship</span></label>
        			    <label class="sheet-miscItem sheet-vehicleTypes"><input class="sheet-useFlyingShips" type="checkbox" name="attr_flyingShip" /> <span data-i18n="show-flying-ship">Show Flying Ship</span></label>
        			    <label class="sheet-miscItem sheet-vehicleTypes"><input class="sheet-useGroundVehicle" type="checkbox" name="attr_groundVehicle" /> <span data-i18n="show-ground-vehicle">Show Ground Vehicle</span></label>
        			    <label class="sheet-miscItem sheet-vehicleTypes"><input class="sheet-usePowerArmor" type="checkbox" name="attr_PowerArmor" /> <span data-i18n="show-power-armor">Show Power Armor</span></label>
        			    <label class="sheet-miscItem sheet-vehicleTypes"><input class="sheet-useRobotArmor" type="checkbox" name="attr_RobotArmor" /> <span data-i18n="show-robot-armor">Show Robot Armor</span></label>
        			    <label class="sheet-miscItem sheet-vehicleTypes"><input class="sheet-useWalker" type="checkbox" name="attr_Walker" /> <span data-i18n="show-walker">Show Walker</span></label> -->
                        <label class="sheet-miscItem"><input type="checkbox" name="attr_whisperstatblock" value="/w gm" checked /> <span data-i18n="whisper-stat-block">Whisper Stat Block</span></label>
                        <input type='hidden' name='attr_whisperall' />
                        <label class='sheet-miscItem'>
            			    <span data-i18n="wild-card-icon">Wild Card Icon</span>: <input type='text' class="sheet-wci" name='attr_WCI' maxlength="2" value="✪" />
            			</label>
                        <label class="sheet-miscItem">
                            <span data-i18n="logo-to-show">Logo to show</span>
                            <select class="sheet-gamelogo" name="attr_logo" title="@{logo}">
                                <option value="SavageWorlds" data-i18n="savage-worlds" checked>Savage Worlds</option>
                                <option value="Deadlands" data-i18n="deadlands">Deadlands</option>
                            </select>
                        </label>
            			<label class="sheet-miscItem"><button type="roll" class="sheet-APIOutput" name="roll_apifield" value="!deal-init --help">i</button><span data-i18n="api-initiative-edge">API Iniative Edges</span> <input class="sheet-standard" style='width: 150px;' type="text" title="@{InitEdges}" name="attr_InitEdges"/></label>
                        <label class='sheet-miscItem'>
                            <span data-i18n="token-url"></span>: <input type='text' name='attr_tokenURL' />
                        </label>
                        <label class='sheet-miscItem'>
                            <span data-i18n="avatar-url"></span>: <input type='text' name='attr_avatarURL' />
                        </label>
    			    </div>
    			</div>
                <div class='sheet-configSection'>
    			    <input type="checkbox" class="sheet-hideCSN" name="attr_hideCSN" /><span class="sheet-showCSN"></span>
    			    <h3 class='sheet-configSectionTitle' data-i18n="change-slash-modify-skill-names">Change Skill Names</h3>
    			    <div class="sheet-csnconfig">
						<!--Fighting--><div class="sheet-csnItem"><label class="sheet-csnLabel" data-i18n="fighting">Fighting</label> = <input type="text" class="sheet-csnInput" name="attr_fightingname" value="" /></div>
						<!--Academics--><div class="sheet-csnItem"><label class="sheet-csnLabel" data-i18n="academics">Academics</label> = <input type="text" class="sheet-csnInput" name="attr_academicsname" value="" /></div>
						<!--Athletics--><div class="sheet-csnItem"><label class="sheet-csnLabel" data-i18n="athletics">Athletics</label> = <input type="text" class="sheet-csnInput" name="attr_athleticsname" value="" /></div>
						<!--Battle--><div class="sheet-csnItem"><label class="sheet-csnLabel" data-i18n="battle">Battle</label> = <input type="text" class="sheet-csnInput" name="attr_battlename" value="" /></div>
						<!--Boating--><div class="sheet-csnItem"><label class="sheet-csnLabel" data-i18n="boating">Boating</label> = <input type="text" class="sheet-csnInput" name="attr_boatingname" value="" /></div>
						<!--Common Knowledge--><div class="sheet-csnItem"><label class="sheet-csnLabel" data-i18n="commonknowledge">Common Knowledge</label> = <input type="text" class="sheet-csnInput" name="attr_commonknowledgename" value="" /></div>
						<!--Driving--><div class="sheet-csnItem"><label class="sheet-csnLabel" data-i18n="driving">Driving</label> = <input type="text" class="sheet-csnInput" name="attr_drivingname" value="" /></div>
						<!--Electronics--><div class="sheet-csnItem"><label class="sheet-csnLabel" data-i18n="electronics">Electronics</label> = <input type="text" class="sheet-csnInput" name="attr_electronicsname" value="" /></div>
						<!--Faith--><div class="sheet-csnItem"><label class="sheet-csnLabel" data-i18n="faith">Faith</label> = <input type="text" class="sheet-csnInput" name="attr_faithname" value="" /></div>
						<!--Focus--><div class="sheet-csnItem"><label class="sheet-csnLabel" data-i18n="focus">Focus</label> = <input type="text" class="sheet-csnInput" name="attr_focusname" value="" /></div>
						<!--Gambling--><div class="sheet-csnItem"><label class="sheet-csnLabel" data-i18n="gambling">Gambling</label> = <input type="text" class="sheet-csnInput" name="attr_gamblingname" value="" /></div>
						<!--Guts--><!-- <div class="sheet-csnItem"><label class="sheet-csnLabel" data-i18n="guts">Guts</label> = <input type="text" class="sheet-csnInput" name="attr_gutsname" value="" /></div> -->
						<!--Hacking--><div class="sheet-csnItem"><label class="sheet-csnLabel" data-i18n="hacking">Hacking</label> = <input type="text" class="sheet-csnInput" name="attr_hackingname" value="" /></div>
						<!--Healing--><div class="sheet-csnItem"><label class="sheet-csnLabel" data-i18n="healing">Healing</label> = <input type="text" class="sheet-csnInput" name="attr_healingname" value="" /></div>
						<!--Intimidation--><div class="sheet-csnItem"><label class="sheet-csnLabel" data-i18n="intimidation">Intimidation</label> = <input type="text" class="sheet-csnInput" name="attr_intimidationname" value="" /></div>
						<!--Native Language--><div class="sheet-csnItem"><label class="sheet-csnLabel" data-i18n="native-language">Native Language</label> = <input type="text" class="sheet-csnInput" name="attr_native-languagename" value="" /></div>
						<!--Notice--><div class="sheet-csnItem"><label class="sheet-csnLabel" data-i18n="notice">Notice</label> = <input type="text" class="sheet-csnInput" name="attr_noticename" value="" /></div>
						<!--Occult--><div class="sheet-csnItem"><label class="sheet-csnLabel" data-i18n="occult">Occult</label> = <input type="text" class="sheet-csnInput" name="attr_occultname" value="" /></div>
						<!--Performance--><div class="sheet-csnItem"><label class="sheet-csnLabel" data-i18n="performance">Performance</label> = <input type="text" class="sheet-csnInput" name="attr_performancename" value="" /></div>
						<!--Persuasion--><div class="sheet-csnItem"><label class="sheet-csnLabel" data-i18n="persuasion">Persuasion</label> = <input type="text" class="sheet-csnInput" name="attr_persuasionname" value="" /></div>
						<!--Piloting--><div class="sheet-csnItem"><label class="sheet-csnLabel" data-i18n="piloting">Piloting</label> = <input type="text" class="sheet-csnInput" name="attr_pilotingname" value="" /></div>
						<!--Psionics--><div class="sheet-csnItem"><label class="sheet-csnLabel" data-i18n="psionics">Psionics</label> = <input type="text" class="sheet-csnInput" name="attr_psionicsname" value="" /></div>
						<!--Repair--><div class="sheet-csnItem"><label class="sheet-csnLabel" data-i18n="repair">Repair</label> = <input type="text" class="sheet-csnInput" name="attr_repairname" value="" /></div>
						<!--Research--><div class="sheet-csnItem"><label class="sheet-csnLabel" data-i18n="research">Research</label> = <input type="text" class="sheet-csnInput" name="attr_researchname" value="" /></div>
						<!--Riding--><div class="sheet-csnItem"><label class="sheet-csnLabel" data-i18n="riding">Riding</label> = <input type="text" class="sheet-csnInput" name="attr_ridingname" value="" /></div>
						<!--Science--><div class="sheet-csnItem"><label class="sheet-csnLabel" data-i18n="science">Science</label> = <input type="text" class="sheet-csnInput" name="attr_sciencename" value="" /></div>
						<!--Shooting--><div class="sheet-csnItem"><label class="sheet-csnLabel" data-i18n="shooting">Shooting</label> = <input type="text" class="sheet-csnInput" name="attr_shootingname" value="" /></div>
						<!--Spellcasting--><div class="sheet-csnItem"><label class="sheet-csnLabel" data-i18n="spellcasting">Spellcasting</label> = <input type="text" class="sheet-csnInput" name="attr_spellcastingname" value="" /></div>
						<!--Stealth--><div class="sheet-csnItem"><label class="sheet-csnLabel" data-i18n="stealth">Stealth</label> = <input type="text" class="sheet-csnInput" name="attr_stealthname" value="" /></div>
						<!--Survival--><div class="sheet-csnItem"><label class="sheet-csnLabel" data-i18n="survival">Survival</label> = <input type="text" class="sheet-csnInput" name="attr_survivalname" value="" /></div>
						<!--Taunt--><div class="sheet-csnItem"><label class="sheet-csnLabel" data-i18n="taunt">Taunt</label> = <input type="text" class="sheet-csnInput" name="attr_tauntname" value="" /></div>
						<!--Thievery--><div class="sheet-csnItem"><label class="sheet-csnLabel" data-i18n="thievery">Thievery</label> = <input type="text" class="sheet-csnInput" name="attr_thieveryname" value="" /></div>
						<!--Weird Science--><div class="sheet-csnItem"><label class="sheet-csnLabel" data-i18n="weird-science">Weird Science</label> = <input type="text" class="sheet-csnInput" name="attr_weirdsciencename" value="" /></div>
    			    </div>
    			</div>
    			<div class="sheet-configSection">
    				<h3 class="sheet-configSectionTitle">JSON Importer</h3>
            		<textarea name="attr_jsonImport" data-i18n-placeholder="savaged-us-json-format"></textarea>
            	</div>
    		</div>
    		<!--                     -->
			<!-- BEGIN RELEASE NOTES -->
			<!--                     -->
			<div class="sheet-release">
				<h1 class='sheet-groupHeader sheet-documentationHeader' data-i18n="release-notes">Release Notes</h1>
                <!-- Release 1.00.11 -->
                <label class="sheet-rowlabel">
			        <input type='checkbox' class='sheet-releasenotes' name='attr_releasenotes10011' value='1' /><span class='sheet-releasenotes'> <h4 class="sheet-rnversion"><span data-i18n="version">Version</span> 1.00.11</h4></span>
				</label>
                <input type='checkbox' class='sheet-releasenotes' style='display: none;' name='attr_releasenotes10011' value='1' />
				<div class='sheet-releasenotes'>
					<h2 class='sheet-releaseNotesSubHeader' data-i18n="bug-fix-release">Bug Fix Release</h2>
                    <p data-i18n="bug-fix-release-info">
						This release focuses on Bug Fixes
					</p>
                    <h2 class='sheet-releaseNotesSubHeader' data-i18n="bugs-fixed">Bugs Fixed</h2>
                    <ul class="sheet-releaseNotesList">
						<li><span class="sheet-black" data-i18n="avatar-url-for-compendium-macro">Fixed the issue of the missing avatar URL for the target-pic macro included with the the Savage Worlds Core Rules Bundle Compendium.</span></li>
                        <li><span class="sheet-black" data-i18n="agility-linked-skills-not-applying-encumbrance-penalty">Fixed an issue where some Agility linked skills (and all Agility-linked custom skills) weren't applying the encumbrance penalty.</span></li>
                    </ul>
					<h2 class='sheet-releaseNotesSubHeader' data-i18n="things-to-be-aware-of">Things to be aware of</h2>
					<ul class="sheet-releaseNotesList">
                        <li><span class='sheet-black' data-i18n="pace-encumbrance-bug">Pace currently doesn't take into account penalties due to encumbrance; this is being worked on and will be corrected soon.</span></li>
						<li><span class='sheet-black' data-i18n="condensed-view-and-skill-specialization">The condensed view of the character sheet has problems if you are using skill specialization. In most situations it should be fine, however, you may experience odd display issues if specializations are used.</span></li>
					</ul>
				</div>
                <!-- Release 1.00.10 -->
                <label class="sheet-rowlabel">
			        <input type='checkbox' class='sheet-releasenotes' name='attr_releasenotes10010' value='1' /><span class='sheet-releasenotes'> <h4 class="sheet-rnversion"><span data-i18n="version">Version</span> 1.00.10</h4></span>
				</label>
                <input type='checkbox' class='sheet-releasenotes' style='display: none;' name='attr_releasenotes10010' value='1' />
				<div class='sheet-releasenotes'>
					<h2 class='sheet-releaseNotesSubHeader' data-i18n="minor-release">Minor Release</h2>
					<p data-i18n="minor-release-info">
						This release focuses on Minor Enhancements and Bug Fixes
					</p>
                    <h2 class='sheet-releaseNotesSubHeader' data-i18n="enhancements">Enhancements</h2>
					<ul class="sheet-releaseNotesList">
						<li><span class="sheet-black" data-i18n="support-for-shields">Added support for shields.</span></li>
                        <li><span class="sheet-black" data-i18n="compendium-support">Support for Compendium drag and drop</span></li>
					</ul>
                    <!--<h2 class='sheet-releaseNotesSubHeader' data-i18n="bugs-fixed">Bugs Fixed</h2>
                    <ul class="sheet-releaseNotesList">
						<li><span class="sheet-black" data-i18n="special-abilities-in-stat-block-macro-button">TBD</span></li>
                    </ul>-->
					<h2 class='sheet-releaseNotesSubHeader' data-i18n="planned-enhancements">Planned Enhancements</h2>
					<ul class='sheet-releaseNotesList'>
                        <li><span class='sheet-black' data-i18n="min-strength-enhancement">Take into account minimium strength for Armor and weapons and have modifiers automatically apply to the roll.</span></li>
						<li><span class='sheet-black' data-i18n="multiple-vehicles">Ability to have multiple vehicles.</span></li>
						<li><span class='sheet-black' data-i18n="character-update-via-json">Ability to update character progession via the JSON importer</span></li>
					</ul>
					<h2 class='sheet-releaseNotesSubHeader' data-i18n="things-to-be-aware-of">Things to be aware of</h2>
					<ul class="sheet-releaseNotesList">
                        <li><span class='sheet-black' data-i18n="encumbrance-bug">Invetigating a bug where encumbrance isn't accurately applied to Agility-linked skills (except for Fighting); in some cases, the penalty shows in the list of modifiers, though it wasn't applied to the roll.</span></li>
						<li><span class='sheet-black' data-i18n="condensed-view-and-skill-specialization">The condensed view of the character sheet has problems if you are using skill specialization. In most situations it should be fine, however, you may experience odd display issues if specializations are used.</span></li>
					</ul>
				</div>
                <!-- Release 1.00.08 -->
                <label class="sheet-rowlabel">
			        <input type='checkbox' class='sheet-releasenotes' name='attr_releasenotes10008' value='1' /><span class='sheet-releasenotes'> <h4 class="sheet-rnversion"><span data-i18n="version">Version</span> 1.00.08</h4></span>
				</label>
                <input type='checkbox' class='sheet-releasenotes' style='display: none;' name='attr_releasenotes10008' value='1' />
				<div class='sheet-releasenotes'>
					<h2 class='sheet-releaseNotesSubHeader' data-i18n="minor-release">Minor Release</h2>
					<p data-i18n="minor-release-info">
						This release focuses on Minor Enhancements and Bug Fixes
					</p>
                    <h2 class='sheet-releaseNotesSubHeader' data-i18n="enhancements">Enhancements</h2>
					<ul class="sheet-releaseNotesList">
						<li><span class="sheet-black" data-i18n="token-image-url">Added an input box to capture the token image URL so it can be used in macros and the such.</span></li>
                        <li><span class="sheet-black" data-i18n="roll-template-font-improvements">Updated to the roll templates to better accomodate long names.</span></li>
                        <li><span class="sheet-black" data-i18n="variable-base-damage-dice-weapons">Entering a negative number in the base damage dice for weapons will prompt for how many dice to roll (e.g. -3 in the base damage dice will ask how many dice to roll with 3-1 being the options).</span></li>
                        <li><span class="sheet-black" data-i18n="kg-support-for-encumbrance">The encumbrance section has been updated to include the ability to calcuate based on kilograms instead of pounds.</span></li>
					</ul>
                    <h2 class='sheet-releaseNotesSubHeader' data-i18n="bugs-fixed">Bugs Fixed</h2>
                    <ul class="sheet-releaseNotesList">
						<li><span class="sheet-black" data-i18n="special-abilities-in-stat-block-macro-button">The statblock macro button has been updated to include the output of items in the Special Abilities section of the character sheet.</span></li>
                        <li><span class="sheet-black" data-i18n="custom-derived-stats-in-stat-block-macro-button">The statblock macro button has been updated to include the output of custom derived stats.</span></li>
                        <li><span class="sheet-black" data-i18n="custom-skill-rolls-in-statblock-view-fixed">Custom skill rolls were broken when trying to roll from the condensed/statblock view of the character sheet; this has been corrected.</span></li>
                    </ul>
					<h2 class='sheet-releaseNotesSubHeader' data-i18n="planned-enhancements">Planned Enhancements</h2>
					<ul class='sheet-releaseNotesList'>
                        <li><span class='sheet-black' data-i18n="min-strength-enhancement">Take into account minimium strength for Armor and weapons and have modifiers automatically apply to the roll.</span></li>
						<li><span class='sheet-black' data-i18n="multiple-vehicles">Ability to have multiple vehicles.</span></li>
						<li><span class='sheet-black' data-i18n="character-update-via-json">Ability to update character progession via the JSON importer</span></li>
					</ul>
					<h2 class='sheet-releaseNotesSubHeader' data-i18n="things-to-be-aware-of">Things to be aware of</h2>
					<ul class="sheet-releaseNotesList">
						<li><span class='sheet-black' data-i18n="condensed-view-and-skill-specialization">The condensed view of the character sheet has problems if you are using skill specialization. In most situations it should be fine, however, you may experience odd display issues if specializations are used.</span></li>
					</ul>
				</div>
                <!-- Release 1.007 -->
                <label class="sheet-rowlabel">
			        <input type='checkbox' class='sheet-releasenotes' name='attr_releasenotes10007' value='1' /><span class='sheet-releasenotes'> <h4 class="sheet-rnversion"><span data-i18n="version">Version</span> 1.00.07</h4></span>
				</label>
				<input type='checkbox' class='sheet-releasenotes' style='display: none;' name='attr_releasenotes10007' value='1' />
				<div class='sheet-releasenotes'>
					<h2 class='sheet-releaseNotesSubHeader' data-i18n="bug-fix-release">Bug Fix Release</h2>
					<p data-i18n="bug-fix-release-info">
						This release focuses on Bug Fixes
					</p>
                    <h2 class='sheet-releaseNotesSubHeader' data-i18n="bugs-fixed">Bugs Fixed</h2>
                    <ul class="sheet-releaseNotesList">
						<li><span class="sheet-black" data-i18n="weird-science-not-rolling">When attempting to roll Weird Science from the Power's section, the roll was empty; this has been fixed.</span></li>
                    </ul>
					<h2 class='sheet-releaseNotesSubHeader' data-i18n="planned-enhancements">Planned Enhancements</h2>
					<ul class='sheet-releaseNotesList'>
						<li><span class='sheet-black' data-i18n="variable-base-damage">Support for variable base damage for things such as Shotguns</span></li>
						<li><span class='sheet-black' data-i18n="multiple-vehicles">Ability to have multiple vehicles.</span></li>
						<li><span class='sheet-black' data-i18n="character-update-via-json">Ability to update character progession via the JSON importer</span></li>
					</ul>
					<h2 class='sheet-releaseNotesSubHeader' data-i18n="things-to-be-aware-of">Things to be aware of</h2>
					<ul class="sheet-releaseNotesList">
						<li><span class='sheet-black' data-i18n="condensed-view-and-skill-specialization">The condensed view of the character sheet has problems if you are using skill specialization. In most situations it should be fine, however, you may experience odd display issues if specializations are used.</span></li>
						<li><span class='sheet-black' data-i18n="statblock-to-chat-log">The stat block to chat output currently doesn't support custom/additional Derived Stats, or the Special Abilities container.</span></li>
					</ul>
				</div>
                <!-- Release 1.00.06 -->
				<label class="sheet-rowlabel">
			        <input type='checkbox' class='sheet-releasenotes' name='attr_releasenotes10006' value='1' /><span class='sheet-releasenotes'> <h4 class="sheet-rnversion"><span data-i18n="version">Version</span> 1.00.06</h4></span>
				</label>
				<input type='checkbox' class='sheet-releasenotes' style='display: none;' name='attr_releasenotes10006' value='1' />
				<div class='sheet-releasenotes'>
					<h2 class='sheet-releaseNotesSubHeader' data-i18n="minor-release">Minor Release</h2>
					<p data-i18n="minor-release-info">
						This release focuses on Bug Fixes and minor enhancements.
					</p>
                    <h2 class='sheet-releaseNotesSubHeader' data-i18n="enhancements">enhancements</h2>
					<ul class="sheet-releaseNotesList">
						<li><span class="sheet-black" data-i18n="conviction-rolls">When the conviction icon is checked, all Trait and Damage rolls will include a row for Conviction with the d6 roll. This is not automatically added to the roll totals, so you will need to add that yourself.</span></li>
					</ul>
                    <h2 class='sheet-releaseNotesSubHeader' data-i18n="bugs-fixed">Bugs Fixed</h2>
                    <ul class="sheet-releaseNotesList">
						<li><span class="sheet-black" data-i18n="vigor-reroll-now-rolls-vigor">When re-rolling Vigor from the rolltemplate Agility was being rolled; this has been corrected to roll Vigor.</span></li>
                        <li><span class="sheet-black" data-i18n="unskilled-athletics-shooting-dice-in-miniview">Fixed the styling for the Unskilled, Athletics, and Shooting buttons when the sheet was in summary/statblock view.</span></li>
                        <li><span class="sheet-black" data-i18n="trademark-weapon-patch">Added a patch for weapons that stopped working with the Trademark Weapon update. While the broken weapons could be \"fixed\" by simply changing how the weapon's button works and changing it back, this patch will do that automatically for all characters so the GM and players don't have to.</span></li>
                    </ul>
					<h2 class='sheet-releaseNotesSubHeader' data-i18n="planned-enhancements">Planned Enhancements</h2>
					<ul class='sheet-releaseNotesList'>
						<li><span class='sheet-black' data-i18n="variable-base-damage">Support for variable base damage for things such as Shotguns</span></li>
						<li><span class='sheet-black' data-i18n="multiple-vehicles">Ability to have multiple vehicles.</span></li>
						<li><span class='sheet-black' data-i18n="character-update-via-json">Ability to update character progession via the JSON importer</span></li>
					</ul>
					<h2 class='sheet-releaseNotesSubHeader' data-i18n="things-to-be-aware-of">Things to be aware of</h2>
					<ul class="sheet-releaseNotesList">
						<li><span class='sheet-black' data-i18n="condensed-view-and-skill-specialization">The condensed view of the character sheet has problems if you are using skill specialization. In most situations it should be fine, however, you may experience odd display issues if specializations are used.</span></li>
						<li><span class='sheet-black' data-i18n="statblock-to-chat-log">The stat block to chat output currently doesn't support custom/additional Derived Stats, or the Special Abilities container.</span></li>
					</ul>
				</div>
                <!-- Release 1.00.05 -->
				<label class="sheet-rowlabel">
			        <input type='checkbox' class='sheet-releasenotes' name='attr_releasenotes10005' value='1' /><span class='sheet-releasenotes'> <h4 class="sheet-rnversion"><span data-i18n="version">Version</span> 1.00.05</h4></span>
				</label>
				<input type='checkbox' class='sheet-releasenotes' style='display: none;' name='attr_releasenotes10005' value='1' />
				<div class='sheet-releasenotes'>
					<h2 class='sheet-releaseNotesSubHeader' data-i18n="minor-release">Minor Release</h2>
					<p data-i18n="minor-release-info">
						This release focuses on Bug Fixes and minor enhancements.
					</p>
                    <h2 class='sheet-releaseNotesSubHeader' data-i18n="enhancements">enhancements</h2>
					<ul class="sheet-releaseNotesList">
						<li><span class="sheet-black" data-i18n="hindrance-edge-chat-icons">Made a change to the button icons for Hindrances and Edges to make it clear whether the description will output to everyone or just a whisper to the GM. When the icon is <span class="sheet-pictos">q</span>, the output will be to everyone. When the icon is <span class="sheet-pictos">w</span>, the output will be a whisper to the GM.</span></li>
                        <li><span class="sheet-black" data-i18n="fear-button-enhancement">Enhanced the Fear button to roll Spirit (Fear Check) first and provide a button to roll on the Fear Table if the Spirit roll is failed.</span></li>
                        <li><span class="sheet-black" data-i18n="trademark-weapon-enhancement">Added two fields under Weapons to allow the skill roll to be modified. This would most commonly be used for Trademark Weapon, but can be used for other things, such as magic (or cursed) items that modify the attack roll, etc.</span></li>
					</ul>
                    <h2 class='sheet-releaseNotesSubHeader' data-i18n="bugs-fixed">Bugs Fixed</h2>
                    <ul class="sheet-releaseNotesList">
						<li><span class="sheet-black" data-i18n="fighting-focus-not-showing-in-statblock-view">Fixed a bug where the Fighting and Focus skills weren't showing up when the character sheet was in collapsed or "Statblock View".</span></li>
                        <li><span class="sheet-black" data-i18n="weapons-spells-damage-only-error-message">Fixed a bug for weapons and spells giving an error when they were set to roll Damage Only and the sheet was in collapsed or "Statblock View".</span></li>
                        <li><span class="sheet-black" data-i18n="athletics-electronics-not-showing-linked-attribute">Fixed a bug where the Athletics and Electronics skills weren't showing the linked attribute.</span></li>
                        <li><span class="sheet-black" data-i18n="stunned-setting-variable-type-number">Fixed a bug when selecting Stunned would set a varialbe as a Number instead of a String. It now sets it to a String to be consistent with the other variable types.</span></li>
                        <li><span class="sheet-black" data-i18n="selecting-all-wouldnt-select-core-skills">Fixed a bug where selecting All (skills) wouldn't select (or would unselect) the Core skills.</span></li>
                    </ul>
					<h2 class='sheet-releaseNotesSubHeader' data-i18n="planned-enhancements">Planned Enhancements</h2>
					<ul class='sheet-releaseNotesList'>
						<li><span class='sheet-black' data-i18n="variable-base-damage">Support for variable base damage for things such as Shotguns</span></li>
						<li><span class='sheet-black' data-i18n="multiple-vehicles">Ability to have multiple vehicles.</span></li>
						<li><span class='sheet-black' data-i18n="character-update-via-json">Ability to update character progession via the JSON importer</span></li>
					</ul>
					<h2 class='sheet-releaseNotesSubHeader' data-i18n="things-to-be-aware-of">Things to be aware of</h2>
					<ul class="sheet-releaseNotesList">
						<li><span class='sheet-black' data-i18n="condensed-view-and-skill-specialization">The condensed view of the character sheet has problems if you are using skill specialization. In most situations it should be fine, however, you may experience odd display issues if specializations are used.</span></li>
						<li><span class='sheet-black' data-i18n="statblock-to-chat-log">The stat block to chat output currently doesn't support custom/additional Derived Stats, or the Special Abilities container.</span></li>
					</ul>
				</div>
                <!-- Release 1.00.04 -->
				<label class="sheet-rowlabel">
			        <input type='checkbox' class='sheet-releasenotes' name='attr_releasenotes10004' value='1' /><span class='sheet-releasenotes'> <h4 class="sheet-rnversion"><span data-i18n="version">Version</span> 1.00.04</h4></span>
				</label>
				<input type='checkbox' class='sheet-releasenotes' style='display: none;' name='attr_releasenotes10004' value='1' />
				<div class='sheet-releasenotes'>
					<h2 class='sheet-releaseNotesSubHeader' data-i18n="minor-release">Minor Release</h2>
					<p data-i18n="minor-release-info">
						This release focuses on Bug Fixes and a minor enhancement.
					</p>
                    <h2 class='sheet-releaseNotesSubHeader' data-i18n="bugs-fixed">Bugs Fixed</h2>
                    <ul class="sheet-releaseNotesList">
						<li><span class="sheet-black" data-i18n="stealth-rerolling-spellcasting">Fixed a bug where re-rolling Stealth tried to re-roll Spellcasting.</span></li>
                        <li><span class="sheet-black" data-i18n="fixed-styling-issues-roll-templates">Fixed some styling issues for Roll Templates.</span></li>
                    </ul>
					<h2 class='sheet-releaseNotesSubHeader' data-i18n="planned-enhancements">Planned Enhancements</h2>
					<ul class='sheet-releaseNotesList'>
						<li><span class='sheet-black' data-i18n="support-for-trademark-weapon">Support for Trademark Weapon</span></li>
						<li><span class='sheet-black' data-i18n="variable-base-damage">Support for variable base damage for things such as Shotguns</span></li>
						<li><span class='sheet-black' data-i18n="multiple-vehicles">Ability to have multiple vehicles.</span></li>
						<li><span class='sheet-black' data-i18n="character-update-via-json">Ability to update character progession via the JSON importer</span></li>
					</ul>
					<h2 class='sheet-releaseNotesSubHeader' data-i18n="things-to-be-aware-of">Things to be aware of</h2>
					<p data-i18n="be-aware-info1">
						This is the initial release of this sheet. If you are coming from a different sheet, you may experience some "data loss." This data loss should be minimal if you are coming from the Savage Worlds Tabbed sheet, but will is still possible (and, in some cases, likely).
					</p>
					<p data-i18n="be-aware-info2">
						In the interest of getting this sheet out there so everyone can benefit from some of the enhanced features, we realize there are some things still missing, and some that aren't functioning exaclty right. These should be fringe cases, but wanted to make you aware. Here are some potential problems you may experience:
					</p>
					<ul class="sheet-releaseNotesList">
						<li><span class='sheet-black' data-i18n="condensed-view-and-skill-specialization">The condensed view of the character sheet has problems if you are using skill specialization. In most situations it should be fine, however, you may experience odd display issues if specializations are used.</span></li>
						<li><span class='sheet-black' data-i18n="statblock-to-chat-log">The stat block to chat output currently doesn't support custom/additional Derived Stats, or the Special Abilities container.</span></li>
					</ul>
				</div>
                <!-- Release 1.00.03 -->
				<label class="sheet-rowlabel">
			        <input type='checkbox' class='sheet-releasenotes' name='attr_releasenotes10003' value='1' /><span class='sheet-releasenotes'> <h4 class="sheet-rnversion"><span data-i18n="version">Version</span> 1.00.03</h4></span>
				</label>
				<input type='checkbox' class='sheet-releasenotes' style='display: none;' name='attr_releasenotes10003' value='1' />
				<div class='sheet-releasenotes'>
					<h2 class='sheet-releaseNotesSubHeader' data-i18n="minor-release">Minor Release</h2>
					<p data-i18n="minor-release-info">
						This release focuses on Bug Fixes and a minor enhancement.
					</p>
					<h2 class='sheet-releaseNotesSubHeader' data-i18n="enhancements">enhancements</h2>
					<ul class="sheet-releaseNotesList">
						<li><span class="sheet-black" data-i18n="swap-swade-logo-for-deadlands-logo">Added Added the ability to swap out the Savage Worlds logo for the Deadlands logo.</span></li>
					</ul>
                    <h2 class='sheet-releaseNotesSubHeader' data-i18n="bugs-fixed">Bugs Fixed</h2>
                    <ul class="sheet-releaseNotesList">
						<li><span class="sheet-black" data-i18n="skill-selection-list-firefox">Fixed a bug where the skill selection list spilled over into a third column on Firefox.</span></li>
                        <li><span class="sheet-black" data-i18n="fighting-skill-on-older-sheets">Fighting skill should auto-show for sheets version lower than 1.00.03.</span></li>
                    </ul>
					<h2 class='sheet-releaseNotesSubHeader' data-i18n="planned-enhancements">Planned Enhancements</h2>
					<ul class='sheet-releaseNotesList'>
						<li><span class='sheet-black' data-i18n="trademark-weapon">Support for Trademark Weapon</span></li>
						<li><span class='sheet-black' data-i18n="variable-base-damage">Support for variable base damage for things such as Shotguns</span></li>
						<li><span class='sheet-black' data-i18n="multiple-vehicles">Ability to have multiple vehicles.</span></li>
						<li><span class='sheet-black' data-i18n="character-update-via-json">Ability to update character progession via the JSON importer</span></li>
					</ul>
					<h2 class='sheet-releaseNotesSubHeader' data-i18n="things-to-be-aware-of">Things to be aware of</h2>
					<p data-i18n="be-aware-info1">
						This is the initial release of this sheet. If you are coming from a different sheet, you may experience some "data loss." This data loss should be minimal if you are coming from the Savage Worlds Tabbed sheet, but will is still possible (and, in some cases, likely).
					</p>
					<p data-i18n="be-aware-info2">
						In the interest of getting this sheet out there so everyone can benefit from some of the enhanced features, we realize there are some things still missing, and some that aren't functioning exaclty right. These should be fringe cases, but wanted to make you aware. Here are some potential problems you may experience:
					</p>
					<ul class="sheet-releaseNotesList">
						<li><span class='sheet-black' data-i18n="condensed-view-and-skill-specialization">The condensed view of the character sheet has problems if you are using skill specialization. In most situations it should be fine, however, you may experience odd display issues if specializations are used.</span></li>
						<li><span class='sheet-black' data-i18n="statblock-to-chat-log">The stat block to chat output currently doesn't support custom/additional Derived Stats, or the Special Abilities container.</span></li>
					</ul>
				</div>
                <!-- Release 1.00.02 -->
				<label class="sheet-rowlabel">
			        <input type='checkbox' class='sheet-releasenotes' name='attr_releasenotes10002' value='1' /><span class='sheet-releasenotes'> <h4 class="sheet-rnversion"><span data-i18n="version">Version</span> 1.00.02</h4></span>
				</label>
				<input type='checkbox' class='sheet-releasenotes' style='display: none;' name='attr_releasenotes10002' value='1' />
				<div class='sheet-releasenotes'>
					<h2 class='sheet-releaseNotesSubHeader' data-i18n="minor-release">Minor Release</h2>
					<p data-i18n="minor-release-info">
						This release focuses on Bug Fixes and a minor enhancement.
					</p>
					<h2 class='sheet-releaseNotesSubHeader' data-i18n="enhancements">enhancements</h2>
					<ul class="sheet-releaseNotesList">
						<li><span class="sheet-black" data-i18n="fear-table-support">Added a button to roll on the Fear Table. If you don't want this button showing, it can be hidden by unchecking the box on the Configuration page, under the 'Other Sheet Tweaks' setion.</span></li>
					</ul>
                    <h2 class='sheet-releaseNotesSubHeader' data-i18n="bugs-fixed">Bugs Fixed</h2>
                    <ul class="sheet-releaseNotesList">
						<li><span class="sheet-black" data-i18n="armor-expansion-icon">Armor expansion (unhide) icon - this icon was misplaced and overlapped with the Armor heading. This has been corrected.</span></li>
                        <li><span class="sheet-black" data-i18n="toughness-going-lower-than-1">Toughness going lower than 1 - if Size (or other modifiers) could cause Toughness to go lower than one (1). This has been corrected and the lowest Toughness will go is 1.</span></li>
                        <li><span class="sheet-black" data-i18n="variable-bonus-damage-die-type-not-working">Variable bonus damage die type not working - while not strictly a bug, it was confusing, because the die type selection was always visible. Using the variable bonus die type is now selected by default so that field will always work.</span></li>
                        <li><span class="sheet-black" data-i18n="fighting-skill-visibility">Fighting skill always showing - having this skill always showing was causing confusion, the skill is now hidden by default. The character sheet has an Sheet Settings option to show this skill by default.</span></li>
                        <li><span class="sheet-black" data-i18n="rof-greater-than-six">Rate of Fire 6+ - when using the Atk^x button option with a ROF greater than 6 odd things were being displayed. This has been corrected.</span></li>
                        <li><span class="sheet-black" data-i18n="unskilled-rolls-missing-misc-modifiers">Unskilled Wild Die Rolls missing the Misc. Modifiers - when making an unskilled roll with additional modifiers, those modifiers were not being applied to the Wild Die roll. This has been corrected.</span></li>
                        <li><span class="sheet-black" data-i18n="bonus-damage-roll-not-exploding">Bonus damage not exploding - the additional d6 bonus damage was not exploding if a 6 was rolled. This has been corrected.</span></li>
                    </ul>
					<h2 class='sheet-releaseNotesSubHeader' data-i18n="planned-enhancements">Planned Enhancements</h2>
					<ul class='sheet-releaseNotesList'>
						<li><span class='sheet-black' data-i18n="trademark-weapon">Support for Trademark Weapon</span></li>
						<li><span class='sheet-black' data-i18n="variable-base-damage">Support for variable base damage for things such as Shotguns</span></li>
						<li><span class='sheet-black' data-i18n="multiple-vehicles">Ability to have multiple vehicles.</span></li>
						<li><span class='sheet-black' data-i18n="character-update-via-json">Ability to update character progession via the JSON importer</span></li>
					</ul>
					<h2 class='sheet-releaseNotesSubHeader' data-i18n="things-to-be-aware-of">Things to be aware of</h2>
					<p data-i18n="be-aware-info1">
						This is the initial release of this sheet. If you are coming from a different sheet, you may experience some "data loss." This data loss should be minimal if you are coming from the Savage Worlds Tabbed sheet, but will is still possible (and, in some cases, likely).
					</p>
					<p data-i18n="be-aware-info2">
						In the interest of getting this sheet out there so everyone can benefit from some of the enhanced features, we realize there are some things still missing, and some that aren't functioning exaclty right. These should be fringe cases, but wanted to make you aware. Here are some potential problems you may experience:
					</p>
					<ul class="sheet-releaseNotesList">
						<li><span class='sheet-black' data-i18n="condensed-view-and-skill-specialization">The condensed view of the character sheet has problems if you are using skill specialization. In most situations it should be fine, however, you may experience odd display issues if specializations are used.</span></li>
						<li><span class='sheet-black' data-i18n="statblock-to-chat-log">The stat block to chat output currently doesn't support custom/additional Derived Stats, or the Special Abilities container.</span></li>
					</ul>
				</div>
                <!-- Release 1.00.01 -->
				<label class="sheet-rowlabel">
			        <input type='checkbox' class='sheet-releasenotes' name='attr_releasenotes10001' value='1' /><span class='sheet-releasenotes'> <h4 class="sheet-rnversion"><span data-i18n="version">Version</span> 1.00.01</h4></span>
				</label>
				<input type='checkbox' class='sheet-releasenotes' style='display: none;' name='attr_releasenotes10001' value='1' />
				<div class='sheet-releasenotes'>
					<h2 class='sheet-releaseNotesSubHeader' data-i18n="minor-release">Minor Release</h2>
					<p data-i18n="minor-release-info">
						This release focuses on Bug Fixes and a minor enhancement.
					</p>
					<h2 class='sheet-releaseNotesSubHeader' data-i18n="enhancements">enhancements</h2>
					<ul class="sheet-releaseNotesList">
						<li><span class="sheet-black" data-i18n="option-to-for-alphanumeric-rank-display-for-traits">An option has been added under Other Sheet Tweaks to allow one to use the alphanumeric rank designation (e.g. d4, d6, d8, etc.) instead of the die type icons.</span></li>
					</ul>
                    <h2 class='sheet-releaseNotesSubHeader' data-i18n="bugs-fixed">Bugs Fixed</h2>
                    <ul class="sheet-releaseNotesList">
						<li><span class="sheet-black" data-i18n="manual-tracking-advances">Previously one couldn't manually enter the number of Advances; an option has been added to the Other Sheet Tweaks section to allow one to 'Manually set Advances'.</span></li>
                        <li><span class="sheet-black" data-i18n="documentation-button-works">Documentation button now works and outputs the URL to the documentation wiki.</span></li>
                        <li><span class="sheet-black" data-i18n="weird-science-now-appears-in-powers-skill-drop-down">Weird Science didn't always show as an available skill to use for casting spells when Weird Science was selected as a skill on th character sheet. This has been corrected, so if Weird Science is selected in the skills section, it will show as an option for casting powers.</span></li>
                    </ul>
					<h2 class='sheet-releaseNotesSubHeader' data-i18n="planned-enhancements">Planned Enhancements</h2>
					<ul class='sheet-releaseNotesList'>
						<li><span class='sheet-black' data-i18n="trademark-weapon">Support for Trademark Weapon</span></li>
						<li><span class='sheet-black' data-i18n="variable-base-damage">Support for variable base damage for things such as Shotguns</span></li>
						<li><span class='sheet-black' data-i18n="multiple-vehicles">Ability to have multiple vehicles.</span></li>
						<li><span class='sheet-black' data-i18n="character-update-via-json">Ability to update character progession via the JSON importer</span></li>
					</ul>
					<h2 class='sheet-releaseNotesSubHeader' data-i18n="things-to-be-aware-of">Things to be aware of</h2>
					<p data-i18n="be-aware-info1">
						This is the initial release of this sheet. If you are coming from a different sheet, you may experience some "data loss." This data loss should be minimal if you are coming from the Savage Worlds Tabbed sheet, but will is still possible (and, in some cases, likely).
					</p>
					<p data-i18n="be-aware-info2">
						In the interest of getting this sheet out there so everyone can benefit from some of the enhanced features, we realize there are some things still missing, and some that aren't functioning exaclty right. These should be fringe cases, but wanted to make you aware. Here are some potential problems you may experience:
					</p>
					<ul class="sheet-releaseNotesList">
						<li><span class='sheet-black' data-i18n="condensed-view-and-skill-specialization">The condensed view of the character sheet has problems if you are using skill specialization. In most situations it should be fine, however, you may experience odd display issues if specializations are used.</span></li>
						<li><span class='sheet-black' data-i18n="statblock-to-chat-log">The stat block to chat output currently doesn't support custom/additional Derived Stats, or the Special Abilities container.</span></li>
					</ul>
				</div>
				<!-- Release 1.00.00 -->
				<label class="sheet-rowlabel">
			        <input type='checkbox' class='sheet-releasenotes' name='attr_releasenotes10000' value='1' /><span class='sheet-releasenotes'> <h4 class="sheet-rnversion"><span data-i18n="version">Version</span> 1.00.00</h4></span>
				</label>
				<input type='checkbox' class='sheet-releasenotes' style='display: none;' name='attr_releasenotes10000' value='1' />
				<div class='sheet-releasenotes'>
					<h2 class='sheet-releaseNotesSubHeader' data-i18n="initial-release">Initial Release</h2>
					<p data-i18n="initial-release-info">
						This is the intial release of the Official Savage Worlds Character Sheet for Roll20. This sheet includes a lot of automation for things like Pace, Parry, and Toughness. It also keeps track of the weight carried by your character, etc.
					</p>
					<h2 class='sheet-releaseNotesSubHeader' data-i18n="highlights">Highlights</h2>
					<ul class="sheet-releaseNotesList">
						<li><span class="sheet-black" data-i18n="single-click-trait-assignmet">A single click will set a Trait's rank; for skills, juts hover over the Rank die type to auto-expand the selection.</span></li>
						<li><span class="sheet-black" data-i18n="dice-rolling">All Traits can be rolled directly from the character sheet.</span></li>
						<li><span class="sheet-black" data-i18n="bonus-dice-control">Control over whether the sheet automatically rolls bonus dice or not.</span></li>
						<li><span class="sheet-black" data-i18n="condensed-view-of-character-sheet">A condensed view of the character sheet, making it easier to see your key Traits, weapons, and powers.</span></li>
						<li><span class="sheet-black" data-i18n="condensed-view-of-derived-stats">A condensed view of the Derived stats (Pace, Parry, Toughness) shows only the relevant info with the ability to configure and fine-tune them.</span></li>
						<li><span class="sheet-black" data-i18n="encumbrance-tracking">Auto-calculate Encumbrance penalties with the ability to turn Encumbrance off.</span></li>
						<li><span class="sheet-black" data-i18n="setting-rules">The ability handle various setting rules, like Gritty Damage.</span></li>
						<li><span class="sheet-black" data-i18n="temporary-boost-lower-traits">The ability to temporarily boost or lower traits. This is useful for things like Jack-of-All-Trades or the Boost/Lower Trait power.</span></li>
						<li><span class="sheet-black" data-i18n="json-importer-info">A JSON importer to automate importing characters. See the documentation tab for details.</span></li>
						<li><span class="sheet-black" data-i18n="combat-options-info">A Combat Options & Situations Rules tab; this can remind you of what your options are when your combat seems to be lagging.</span></li>
					</ul>
					<h2 class='sheet-releaseNotesSubHeader' data-i18n="planned-enhancements">Planned Enhancements</h2>
					<ul class='sheet-releaseNotesList'>
						<li><span class='sheet-black' data-i18n="trademark-weapon">Support for Trademark Weapon</span></li>
						<li><span class='sheet-black' data-i18n="variable-base-damage">Support for variable base damage for things such as Shotguns</span></li>
						<li><span class='sheet-black' data-i18n="multiple-vehicles">Ability to have multiple vehicles.</span></li>
						<li><span class='sheet-black' data-i18n="character-update-via-json">Ability to update character progession via the JSON importer</span></li>
					</ul>
					<h2 class='sheet-releaseNotesSubHeader' data-i18n="things-to-be-aware-of">Things to be aware of</h2>
					<p data-i18n="be-aware-info1">
						This is the initial release of this sheet. If you are coming from a different sheet, you may experience some "data loss." This data loss should be minimal if you are coming from the Savage Worlds Tabbed sheet, but will is still possible (and, in some cases, likely).
					</p>
					<p data-i18n="be-aware-info2">
						In the interest of getting this sheet out there so everyone can benefit from some of the enhanced features, we realize there are some things still missing, and some that aren't functioning exaclty right. These should be fringe cases, but wanted to make you aware. Here are some potential problems you may experience:
					</p>
					<ul class="sheet-releaseNotesList">
						<li><span class='sheet-black' data-i18n="condensed-view-and-skill-specialization">The condensed view of the character sheet has problems if you are using skill specialization. In most situations it should be fine, however, you may experience odd display issues if specializations are used.</span></li>
						<li><span class='sheet-black' data-i18n="statblock-to-chat-log">The stat block to chat output currently doesn't support custom/additional Derived Stats, or the Special Abilities container.</span></li>
					</ul>
				 </div>
				<!-- Release Template -->
				<!--<label class="sheet-rowlabel">
			        <input type='checkbox' class='sheet-releasenotes' name='attr_releasenotes40000' value='1' /><span class='sheet-releasenotes' style='color: red;'><h4 class="sheet-rnversion"><span data-i18n="version">Version</span> 4.00.00</h4></span>
				</label>
				<input type='checkbox' class='sheet-releasenotes' style='display: none;' name='attr_releasenotes40000' value='1' />
				<div class='sheet-releasenotes'>
					<p data-i18n="changes-this-release">
						Changes this release:
					</p>
					<ul>
						<li><strong data-i18n="bug-fixes">Bug Fixes</strong></li>
						<ul>
							<li data-i18n="point-one">Point One</li>
						</ul>
                        <li><strong data-i18n="sheet-enhancements">Functionality Enhancements</strong></li>
                        <ul>
							<li data-i18n="point-one">Point One</li>
						</ul>
                        <li><strong data-i18n="known-issues">Known Issues</strong></li>
                        <ul>
							<li data-i18n="point-one">Point One</li>
						</ul>
					</ul>
				</div> -->
			</div>
			<!--                     -->
			<!-- BEGIN DOCUMENTATION -->
			<!--                     -->
			<div class='sheet-documentation'>
			    <h1 class='sheet-groupHeader sheet-documentationHeader' data-i18n='documentation'>Documentation</h1>
		        <h2 class='sheet-docHeading' data-i18n='introduction-shortened-u'>INTRO</h2>
		        <p class='sheet-docparagraph'>
		        	<span data-i18n="intro-paragraph">This “in-sheet” documentation is not meant to be comprehensive, but rather highlight some features that may be less understood, but play a bigger part during a game session. For full documentation you should visit the</span> <button class="sheet-linkButton" type="roll" name="roll_wikiLink" value="/w @{character_name} https://wiki.roll20.net/Official_Savage_Worlds"><span data-i18n="roll20-wiki-link">Roll20 Character Sheet documentation wiki</span><span class="sheet-pictos">R</span></button>
		        </p>
		        <h2 class='sheet-docHeading' data-i18n='top-bar-u'>TOP BAR</h2>
		        <p class='sheet-docparagraph'>
		        	<span data-i18n="top-bar-paragraph">This contains the buttons that allow you to navigate to different aspects/views of the character sheet.  The buttons are (from left to right):</span>
		        	<ul class="sheet-docList" >
		        		<li class="sheet-docList" data-i18n="edit-mode-character-profile"></li>
		        		<li class="sheet-docList" data-i18n="character-profile"></li>
		        		<li class="sheet-docList" data-i18n="vehicle-page"></li>
		        		<li class="sheet-docList" data-i18n="character-journal-notes"></li>
		        		<li class="sheet-docList" data-i18n="configuration-page"></li>
		        		<li class="sheet-docList" data-i18n="stat-block-ouput"></li>
                        <li class="sheet-docList" data-i18n="fear-button"></li>
		        		<li class="sheet-docList" data-i18n="combat-options-and-situational-rules"></li>
		        		<li class="sheet-docList" data-i18n="release-notes"></li>
		        		<li class="sheet-docList" data-i18n="documentation-this-page"></li>
		        	</ul>
		        </p>
		        <h2 class='sheet-docHeading' data-i18n='configuration-u'>CONFIGURATION</h2>
		        <h3 class='sheet-docSubHeading' data-i18n='setting-rules'>Setting Rules</h3>
		        <p class='sheet-docparagraph'>
		        	<span data-i18n="setting-rules-paragraph">This section has options for various setting rules (such as Gritty Damage, No Power Points, etc).</span>
		        </p>
		        <p class='sheet-docparagraph'>
		        	<strong><span data-i18n="additional-derived-stats">Additional Derived Stats</span></strong>: <span data-i18n="derived-stats-paragraph">While this sheet focuses on Core Savage Worlds compliance and doesn't include any additional/custom derived stats be default, the sheet does offer an option configure your own custom derived stats. Checking the <em>Additional Derived Stats</em> checkbox, the sheet will add a section for additional derived stats. Here you can give your derived stat(s) a name and set the details for the derived stat(s). Given that various systems ahve various rules for how derived stats are calculated, none of these fields are automated, so you have maximum flexibility in tracking those stats.</span>
		        </p>
		        <p class='sheet-docparagraph'>
		        	<strong><span data-i18n="gritty-damage">Gritty Damage</span></strong>: <span data-i18n="gritty-damage-paragraph">If Gritty Damage is turned on, the GM must create a Rollable table for the Injury rolls. If this rollable table is not created and the exact name of the table entered in the Gritting Damage field for the table name, this functionality will not work.</span>
		        </p>
		        <table class="sheet-infotable">
		        	<tr><th class="sheet-titleLeft" colspan="3" data-i18n="injury-table">Injury Table</th><th  class="sheet-titleRight" colspan="2" data-i18n="rollable-table-configuration">Rollable Table Configuration</th></tr>
                    <tr>
                        <th  class="sheet-colLabels sheet-results" data-i18n="result-2d6">Result (2d6)</th><th class="sheet-colLabels" data-i18n="description">Description</th><th class="sheet-colLabels sheet-subeffect" data-i18n="sub-effect">Sub-effect</th><th class="sheet-colLabels" data-i18n="table-entry-name">Table Entry Name</th><th class="sheet-colLabels sheet-tableweight" data-i18n="table-entry-weight">Table Entry Weight</th>
                    </tr>
                    <tr>
                        <td>2</td><td data-i18n="unmentionables">Unmentionables</td><td data-i18n="not-applicable-abbr-u">N/A</td><td data-i18n="unmentionables-description">If the injury is permanent, reproduction is out of the question without miracle surgery or magic. There is no other effect from this result.</td><td class="sheet-tableweight">12</td>
                    </tr>
                    <tr>
                        <td>3-4</td><td data-i18n="arm">Arm</td><td data-i18n="left-arm">Left Arm</td><td data-i18n="left-arm-description">The victim can no longer use his left arm.</td><td class="sheet-tableweight">30</td>
                    </tr>
                    <tr>
                        <td>3-4</td><td data-i18n="arm">Arm</td><td data-i18n="right-arm">Right Arm</td><td data-i18n="right-arm-description">The victim can no longer use his right arm.</td><td class="sheet-tableweight">30</td>
                    </tr>
                    <tr>
                        <td>5-9</td><td data-i18n="guts">Guts</td><td data-i18n="broken">Broken</td><td data-i18n="broken-description">Your hero catches one in the core. Agility reduced a die type (minimum d4).</td><td class="sheet-tableweight">96</td>
                    </tr>
                    <tr>
                        <td>5-9</td><td data-i18n="guts">Guts</td><td data-i18n="battered">Battered</td><td data-i18n="battered-description">Your hero catches one in the core. Vigor reduced a die type (minimum d4).</td><td class="sheet-tableweight">96</td>
                    </tr>
                    <tr>
                        <td>5-9</td><td data-i18n="guts">Guts</td><td data-i18n="busted">Busted</td><td data-i18n="busted-description">Your hero catches one in the core. Strength reduced a die type (minimum d4).</td><td class="sheet-tableweight">96</td>
                    </tr>
                    <tr>
                        <td>10-11</td><td data-i18n="leg">Leg</td><td data-i18n="left-leg">Left Leg</td><td data-i18n="left-leg-description">Gain the Slow Hindrance (Minor), or Major if already Slow or injured in either leg.</td><td class="sheet-tableweight">30</td>
                    </tr>
                    <tr>
                        <td>10-11</td><td data-i18n="leg">Leg</td><td data-i18n="right-leg">Right Leg</td><td data-i18n="right-leg-description">Gain the Slow Hindrance (Minor), or Major if already Slow or injured in either leg.</td><td class="sheet-tableweight">30</td>
                    </tr>
                    <tr>
                        <td>12</td><td data-i18n="head">Head</td><td data-i18n="hideous-scar">Hideous Scar</td><td data-i18n="hideous-scar-description">A grievous injury to the head. Your hero now has the Ugly (Major) Hindrance.</td><td class="sheet-tableweight">6</td>
                    </tr>
                    <tr>
                        <td>12</td><td data-i18n="head">Head</td><td data-i18n="blinded">Blinded</td><td data-i18n="blinded-description">A grievous injury to the head. An eye is damaged. Gain the One Eye Hindrance (or the Blind Hindrance if he only had one good eye).</td><td class="sheet-tableweight">4</td>
                    </tr>
                    <tr>
                        <td>12</td><td data-i18n="head">Head</td><td data-i18n="brain-damage">Brain Damage</td><td data-i18n="brain-damage-description">A grievous injury to the head. Massive trauma to the head. Smarts reduced one die type (min d4).</td><td class="sheet-tableweight">2</td>
                    </tr>
                </table>
		        <p class='sheet-docparagraph'>
		        	<strong><span data-i18n="variable-bonus-damage">Variable Bonus Damage</span></strong>: <span data-i18n="variable-bonus-damage-paragraph">If a character has an Edge that alters the bonus damage die when a Raise is scored, you’ll want to select one of the Variable Bonus Damage check boxes.  The Raise Based check box will have a pop-up appear asking what Bonus Die Type to use.  If you select the Edge based one, the weapon will have a drop down for you to select the appropriate die type for that given weapon</span>
		        <h3 class='sheet-docSubHeading' data-i18n='other-sheet-tweaks'>Other Sheet Tweaks</h3>
		        <p class='sheet-docparagraph'>
		        	<span data-i18n="other-tweaks-paragraph">This section has options for changing how the sheet works and some of its capabilities.</span>
		        </p>
		        <p class='sheet-docparagraph'>
		        	<strong><span data-i18n="atk-roll-query">Atk^ roll query</span></strong>: <span data-i18n="atk-roll-paragraph1">Under weapons, if the Rate of Fire is greater than 1, you have the option of setting the weapon roll button to do auto-fire (roll multiple skill dice). This drop down menu configures the roll query to make it easier for you to do your auto-rolls.</span>
		        </p>
		        <p class='sheet-docparagraph'>
					<span data-i18n="atk-roll-paragraph2">If you have it sorted High to Low, the number of shots prompted for in the query will start at the maximum rate of fire.</span>
				</p>
				<p class='sheet-docparagraph'>
					<span data-i18n="atk-roll-paragraph3">If you have it sorted Low to High, the number of shots prompted for in the query will start at 1.</span>
				</p>
				<p class='sheet-docparagraph'>
					<strong><span data-i18n="wild-card-icon">Wild Card Icon</span></strong>: <span data-i18n="wild-card-icon-paragraph">This field can take Unicode characters and make them the Wild Card icon that appears next to the character’s name and the Stat Block Output button. Here are some unicode characters you can</span>: <textarea class="sheet-configtextarea" readonly name="attr_iconexamples">⊛ ✪ ♕ † ༒</textarea>
				</p>
				<p class='sheet-docparagraph'>
					<strong><span data-i18n="api-initiative-edges">API Initiative Edges</span></strong>: <span data-i18n="api-edges-paragraph">For Pro subscribers, the sheet supports the Deal-Init API script. If the Script is installed, clicking the <span class="sheet-pictos">i</span> icon will output the help file to chat for that script and what to use for the Edge codes.</span>
				</p>
		        <h3 class='sheet-docSubHeading' data-i18n='json-importer'>JSON Importer</h3>
		        <p class='sheet-docparagraph'>
		        	<span data-i18n="api-edges-paragraph1">The sheet supports importing of JSON data to pre-fill a character sheet. Currently, the sheet supports the generic VTT JSON as exported from savaged.us</span>
		        </p>
		        <p class='sheet-docparagraph'>
		        	<span data-i18n="api-edges-paragraph2">To import your character copy the JSON text and paste it in the JSON Importer field. Once you click out of the field, the importer will begin working. When the text disappears from the input box, the import is complete.</span>
		        </p>
		        <p class='sheet-docparagraph'>
		        	<strong><em><span data-i18n="note-u">NOTE</span></em></strong>: <span data-i18n="api-edges-paragraph3">Currently, the sheet only supports an initial import. If you import a second JSON (even for the same character) you will get duplication of any data in repeating sections (e.g. Hindrances, Edges, Weapons, etc).</span>
		        </p>
		        <h2 class='sheet-docHeading' data-i18n='character-profile-u'>CHARACTER PROFILE</h2>
		        <p class='sheet-docparagraph'>
		        	<span data-i18n="character-profile-paragraph">This page contains all the core stats for your character, including your character’s health.</span>
		        </p>
		        <h3 class='sheet-docSubHeading' data-i18n='top-bar'>Top Bar</h3>
		        <p class='sheet-docparagraph'>
		        	<strong><span data-i18n="edit-mode">Edit Mode</span> (<span class="sheet-pictos sheet-maroon">W</span>)</strong>: <span data-i18n="edit-mode-paragraph">While in “Edit” mode, the paper + pencil icon will turn to a green document icon with no pencil, and all character sections are displayed so Ranks can be set, weapons and Spells configured, etc. While in this mode, each item can be expanded for customization and configuration (more on this below).</span>
		        </p>
		        <p class='sheet-docparagraph'>
		        	<strong><span data-i18n="stat-block-mode">Stat Block Mode</span> (<span class="sheet-pictos sheet-forestgreen">F</span>)</strong>: <span data-i18n="stat-block-mode-paragraph">Conversely, while in “Stat Block” mode, Attributes, Skills, Weapons, and Powers/Spells are collapsed and visible in the Left-hand column of the sheet. Each of these sections becomes a series of buttons that can be pressed to make the various rolls without all the extra space required if these sections were show in their full, editable state.</span>
		        </p>
		        <p class='sheet-docparagraph'>
		        	<span data-i18n="edit-stat-block-paragraph1">The “Edit/Stat Block” button is only visible while the Character Profile tab is active.</span>
		        </p>
		        <p class='sheet-docparagraph'>
		        	<strong><span data-i18n="important-note">Important Note</span></strong>: <span data-i18n="edit-stat-block-paragraph2">The Stat Block mode is only useful when Skill Specialization is not being used. If you are using Skill Specialization, the layout may be funky and show inconsistently. You can still use it, just know the display might not be ideal.</span>
		        </p>
                <h3 class='sheet-docSubHeading' data-i18n="hindrances-edges-special-abilities">Hindrances, Edges, and Special Abilities</h3>
                <p class='sheet-docparagraph'>
                    <strong><span data-i18n="output-buttons">Output Buttons</span></strong>: <span data-i18n="output-button-styles">The button for these three sections will ouput the description of the Hindrance, Edge, or Special Ability to the chat panel. The icon on the button serves as a visual queue as to what type of message will be sent. A double speech bubble (<span class='sheet-pictos'>q</span>) indicates the output will be visible to everyone. A single speech bubble (<span class='sheet-pictos'>w</span>) indicates the output will be whispered to the GM.</span>
                </p>
		        <h3 class='sheet-docSubHeading' data-i18n='weapons'>Weapons</h3>
		        <p class='sheet-docparagraph'>
		        	<strong><span data-i18n="roll-button">Roll Button</span></strong>: <span data-i18n="roll-button-paragraph">The roll button can be configured to roll Damage Only, or Attack and Damage; if the Rate of Fire (RoF) is greater than one, an additional option can be configured for this button, denoted by Atkx + Dmg—this option will roll more than one skill die and a single Wild Die (for Wild Cards).</span>
		        </p>
		        <p class='sheet-docparagraph'>
		        	<em><span data-i18n="pro-tip-rate-of-fire-abbr">Pro Tip for using RoF</span></em>: <span data-i18n="pro-tip-rof-paragraph">While RoF is generally only used for automatic weapons, it can be used for melee weapons as well. This can be useful for characters how have Frenzy, or if you have a group of Extras all making the same attack roll.</span>
		        </p>
		        <p class='sheet-docparagraph'>
		        	<strong><span data-i18n="damage">Damage</span></strong>: <span data-i18n="damage-paragraph-updated">This consists of 4 fields.</span>
		        </p>
                <ul class="sheet-docList">
                    <li class="sheet-docList"><span data-i18n="attribute-field">The first can be used to configure an Attribute (generally Strength); if the weapon doesn’t use any Attributes as part of the damage formula, select N/A.</span></li>
                    <li class="sheet-docList"><span data-i18n="number-of-base-damage-dice">The second field allows you to configure the number of dice to be rolled; if a weapon does 2d6 damage, you’d enter a 2 in this field. If the weapon has a range of base damage (e.g. a shotgun has a range of 1-3d6, with the range determining the number of base damage dice to roll), enter a high end of the range as a negative number in this field. For example that shotgun base damage would be -3. When this field is populated with a negative number, the system will prompt you to confirm the number of dice to roll.</span></li>
                    <li class="sheet-docList"><span data-i18n="base-damage-die-type">The third field is where you configure the die type associated with the damage.</span></li>
                    <li class="sheet-docList"><span data-i18n="damage-modifier-field">The fourth field is a “wild card” field of sorts, you can enter any valid Roll20 entry here—not just numbers.</span></li>
                </ul>
		        <p class='sheet-docparagraph'>
		        	<em><span data-i18n="pro-tip-punches">Pro Tip for setting up Punches</span></em>: <span data-i18n="pro-tip-punches-paragraph">Since punches only do Strength damage and do not get the Wild Die, you can set up a Fist as a weapon and configure the damage to do Strength + 0 d6 + 0. This will roll a Strength die only.</span>
		        </p>
		        <p class='sheet-docparagraph'>
		        	<em><span data-i18n="pro-tip-complex-damage">Pro Tip for setting up Complex Damage</span></em>: <span data-i18n="pro-tip-complex-damage-paragraph">Some settings like Rifts do odd types of damage like 2d6 + d8. To accomplish this you would have N/A + 2d6 + 1d8! The exclamation mark tells the Roll20 dice engine to explode the die roll if the maximum number is rolled on the die. Because that field is a text field you can do any formula notation including notes for the roll. For example, the 1d8! could be written as: 1d8! [magic enchantment to do an addition d8 damage against vampires], and while that won’t all be visible, the tool tip on the roll itself would indicate what that additional d8 damage was for.</span>
		        </p>
		        <h3 class='sheet-docSubHeading' data-i18n='powers'>Powers</h3>
		        <p class='sheet-docparagraph'>
		        	<span data-i18n="powers-paragraph">This sheet allows more than Arcane Background to be configured (see below), you may have more than one set of Power Points displayed.  If you are using the No Power Points setting rule (and that option is checked on the Configuration Page), these power point fields will be hidden.</span>
		        </p>
		        <p class='sheet-docparagraph'>
		        	<strong><span data-i18n="powers-section-configuration-pane">Powers Section Configuration Pane</span></strong>: <span data-i18n="powers-section-config-paragraph1">The section configuration pane is accessed by clicking the crossed hammer + wrench icon (which will turn into a checkmark, and clicking the checkmark will close the configuration pane).</span>
		        </p>
		        <p class='sheet-docparagraph'>
		        	<span data-i18n="powers-section-config-paragraph2">This pane has two types of sections; the first configures the section headers and labels, and the second configures arcane background labels (and distinguishing colors if your character has more than one AB).</span>
		        </p>
		        <p class='sheet-docparagraph'>
		        	<span data-i18n="powers-section-config-paragraph3">If you have more than one arcane background and need to delete one, click the red trashcan icon under the list of ABs. The bottom most AB will be hidden.</span>
		        </p>
		        <p class='sheet-docparagraph'>
		        	<span data-i18n="powers-section-config-paragraph4">The sheet only allows a maximum of five (5) different Arcane Backgrounds.</span>
		        </p>
		        <h2 class='sheet-docHeading' data-i18n='combat-options-page-u'>COMBAT OPTIONS PAGE</h2>
		        <p class='sheet-docparagraph'>
		        	<span data-i18n="combat-options-paragraph1">This page contains a cheat sheet of things to try in combat to mix things up. It explains any bonuses or negative modifiers associated with the option.</span>
		        </p>
		        <p class='sheet-docparagraph'>
		        	<span data-i18n="combat-options-paragraph2">It also contains information on situational rules (such as Unstable platform). It’s a handy place to look if you want quick access to rules without having to jump to the rule book.</span>
		        </p>

                <!--
		        <input type='checkbox' class='sheet-hideReleaseSection' name='attr_is_release' /><span class='sheet-showSection'></span>
		        <h3 class='sheet-configSectionTitle'><span data-i18n='release-notes'>Release Notes</span> <span class='sheet-pictos'>N</span></h3>
		        <div class='sheet-releasepage'>
		            <p class='sheet-docparagraph' data-i18n='release-p1v1'>Release Notes page coming soon</p>
		        </div>
		        <input type='checkbox' class='sheet-hideDocSection' name='attr_is_doc' /><span class='sheet-showSection'></span>
		        <h3 class='sheet-configSectionTitle'><span data-i18n='documentation'>Documentation</span> <span class='sheet-pictos'>i</span></h3>
		        <div class='sheet-docpage'>
		            <p class='sheet-docparagraph' data-i18n='doc-p1v1'>Documentation page info coming soon</p>
		        </div>
                -->
			</div>
    	</div>
    </div>
</div>
<span data-i18n="using-character-sheet">Using character sheet</span>: <span name='attr_character_sheet'></span>

<!-- <div class="sheet-compendium_warning"> --><!-- Warning -->
    <!--<span style="font-weight: bold; font-size: 1.2em;" data-i18n="accepting-drop-u">ACCEPTING DROP FROM COMPENDIUM</span>
</div> -->
<!-- <div class="sheet-disclaimer">
    <input class="sheet-logo" type="hidden" name="attr_logo" value="1" />
	<span data-i18n="the">The</span>&nbsp;<span class="sheet-logotext"></span>&nbsp;<span class="sheet-logostandard" data-i18n="logo-info">logo is a trademark of</span>&nbsp;<span class="sheet-trademarkholder"></span><span class="sheet-logoallforone" data-i18n="all-for-one-logo-info">logo &copy; 2016 Triple Ace Games Ltd. All for One: R&eacute;gime Diabolique and all related marks and logos are trademarks of  Triple Ace Games Ltd. Ubiquity Roleplaying System, Exile Games Studio, and all associated logos and trademarks are copyright, Exile Games Studio, LLC</span><span class="sheet-logorifts" data-i18n="rifts-logo-info">logo and Megaverse are registered trademarks of PALLADIUM BOOKS, INC. All character names and likenesses are copyright and trademarks owned by Palladium Books, Inc. Savage Worlds logo is a trademark of Pinnacle Entertainment Group</span>. <span data-i18n="used-with-permission-visit-website">Used with permission. Visit their website at</span>:&nbsp;<span class="sheet-website"></span>
</div> -->
<!--- templates -->
<rolltemplate class="sheet-rolltemplate-roll">
	<div class="sheet-templateMain">
		<div class="sheet-templateHeader">
		    {{^PowerTemplate}}
		    <!-- before name:  -->
            {{#namelength}}
			<h2 class="sheet-templateBlack sheet-{{namelength}}">
            {{/namelength}}
            {{^namelength}}
            <h2 class="sheet-templateBlack">
            {{/namelength}}
                {{#rollTotal() wildcard 0}}{{#wcicon}}{{wcicon}}{{/wcicon}}{{/rollTotal() wildcard 0}}{{name}}{{#rollTotal() distracteds -2}}<span class="sheet-templateCondition" data-i18n-title="distracted"> ♦</span>{{/rollTotal() distracteds -2}}{{#rollTotal() vulnerable -2}}<span class="sheet-templateCondition" data-i18n-title="vulnerable"> ♠</span>{{/rollTotal() vulnerable -2}}{{#rollTotal() stunned -2}}<span class="sheet-templateCondition" data-i18n-title="stunned"> ♣</span>{{/rollTotal() stunned -2}}
            </h2>
			<h3 class="sheet-templateBlack">({{trait}}{{#source}}: {{source}}{{/source}})</h3>
			{{/PowerTemplate}}
			{{#PowerTemplate}}
			<h2 class="sheet-templateBlue">{{#rollTotal() wildcard 0}}{{#wcicon}}{{wcicon}}{{/wcicon}}{{/rollTotal() wildcard 0}}{{name}}{{#rollTotal() distracteds -2}}<span class="sheet-templateCondition" data-i18n-title="distracted"> ♦</span>{{/rollTotal() distracteds -2}}{{#rollTotal() vulnerable -2}}<span class="sheet-templateCondition" data-i18n-title="vulnerable"> ♠</span>{{/rollTotal() vulnerable -2}}{{#rollTotal() stunned -2}}<span class="sheet-templateCondition" data-i18n-title="stunned"> ♣</span>{{/rollTotal() stunned -2}}</h2>
			<h3 class="sheet-templateBlue">{{trait}}{{#source}}: {{source}}{{/source}}</h3>
			<!-- {{#trappings}}<h4 class="sheet-templateBlue">Trappings: {{trappings}}</h4>{{/trappings}} -->
			{{/PowerTemplate}}
		</div>
		{{#trappings}}<h4 class="sheet-templateBlue">Trappings: {{trappings}}</h4>{{/trappings}}
		{{#rollGreater() shaken 0}}
		<div class="sheet-unshakeRow">
	       <!--[<span data-i18n="roll-unshake-button"></span>](~unshakeroll)-->
	       {{unshake}}
	    </div>
		{{/rollGreater() shaken 0}}
		<div class="sheet-templateBody">
			<div class="sheet-templateRoll sheet-trollLeft">
				<span class="sheet-rollLabel">{{skill_rank}}</span>
				<span class="sheet-rollContainer">{{skill_roll}}</span>
				{{#rollGreater() numrolls 1}}
					{{#skill_roll2}}<span class="sheet-rollContainer">{{skill_roll2}}</span>{{/skill_roll2}}
				{{/rollGreater() numrolls 1}}
				{{#rollGreater() numrolls 2}}
					{{#skill_roll3}}<span class="sheet-rollContainer">{{skill_roll3}}</span>{{/skill_roll3}}
				{{/rollGreater() numrolls 2}}
				{{#rollGreater() numrolls 3}}
					{{#skill_roll4}}<span class="sheet-rollContainer">{{skill_roll4}}</span>{{/skill_roll4}}
				{{/rollGreater() numrolls 3}}
				{{#rollGreater() numrolls 4}}
					{{#skill_roll5}}<span class="sheet-rollContainer">{{skill_roll5}}</span>{{/skill_roll5}}
				{{/rollGreater() numrolls 4}}
				{{#rollGreater() numrolls 5}}
					{{#allprops() skill_rank mook showtt showwounds showfatigue showdistracted showenc skill_roll skill_roll2 skill_roll3 skill_roll4 skill_roll5 name trait source PowerTemplate wild_die wild_die2 wild_die3 wild_die4 wild_die5 mods ttmod wounds fatigue distracted encumbrance notes button DmgRoll numrolls wcicon distracteds vulnerable stunned unshake ReRoll vigorStunned unshakeTemplate ap getgritty GrittyRoll skill_rollall trappings bonus_die wci showspec showap wildcard shaken}}<span class="sheet-rollContainer">{{value}}</span>{{/allprops() skill_rank mook showtt showwounds showfatigue showdistracted showenc skill_roll skill_roll2 skill_roll3 skill_roll4 skill_roll5 name trait source PowerTemplate wild_die wild_die2 wild_die3 wild_die4 wild_die5 mods ttmod wounds fatigue distracted encumbrance notes button DmgRoll numrolls wcicon distracteds vulnerable stunned unshake ReRoll vigorStunned unshakeTemplate ap getgritty GrittyRoll skill_rollall trappings bonus_die wci showspec showap wildcard shaken}}
				{{/rollGreater() numrolls 5}}
			</div>
			<div class="sheet-templateRoll sheet-trollRight">
				{{#^rollTotal() mook 0}}<span class="sheet-rollLabel">Wild Die</span>{{/^rollTotal() mook 0}}<!--Is a Wild Card-->
				{{#rollTotal() mook 0}}<span class="sheet-rollLabel">Group/Crit Check</span>{{/rollTotal() mook 0}}<!--Is an Extra-->
				<span class="sheet-rollContainer">{{wild_die}} </span>
				{{#wild_die2}}<span class="sheet-rollContainer">{{wild_die2}}</span>{{/wild_die2}}
				{{#wild_die3}}<span class="sheet-rollContainer">{{wild_die3}}</span>{{/wild_die3}}
				{{#wild_die4}}<span class="sheet-rollContainer">{{wild_die4}}</span>{{/wild_die4}}
				{{#wild_die5}}<span class="sheet-rollContainer">{{wild_die5}}</span>{{/wild_die5}}
			</div>
		</div>
        {{#rollGreater() conviction 0}}
        <div class="sheet-convictionRoll">
            <span class="sheet-rollLabel" data-i18n="conviction"></span>
            <span class="sheet-rollContainer">{{conviction}}</span>
        </div>
        {{/rollGreater() conviction 0}}
		<div class="sheet-buttonsnsuch">
			{{#^rollTotal() mods 0}}
			<div class="sheet-templateModifiers">
				{{#^rollTotal() showtt 0}}Misc. Modifers: {{ttmod}}{{/^rollTotal() showtt 0}}{{#^rollTotal() showwounds 0}} Wounds: {{wounds}}{{/^rollTotal() showwounds 0}}{{#^rollTotal() showfatigue 0}} Fatigue: {{fatigue}}{{/^rollTotal() showfatigue 0}}{{#^rollTotal() showdistracted 0}} Distracted: {{distracted}}{{/^rollTotal() showdistracted 0}}{{#^rollTotal() showenc 0}} Enc: {{encumbrance}}{{/^rollTotal() showenc 0}}{{#^rollTotal() actpenalty 0}} Activation Penalty: {{actpenalty}}{{/^rollTotal() actpenalty 0}}
			</div>
			{{/^rollTotal() mods 0}}
			{{#notes}}
			<div class="sheet-templateModifiers">
				{{notes}}
			</div>
			{{/notes}}
			{{#button}}
			{{^PowerTemplate}}
			<div class="sheet-templateButton sheet-blackButtons">
				{{ReRoll}}
				{{DmgRoll}}
			</div>
			{{/PowerTemplate}}
			{{#PowerTemplate}}
			<div class="sheet-templateButton sheet-blueButtons">
				{{ReRoll}}
				{{DmgRoll}}
			</div>
			{{/PowerTemplate}}
			{{/button}}
		</div>
	</div>
	{{#rollTotal() stunned -2}}
	{{#vigorStunned}}
	<div class="sheet-vigormessage">
		<span data-i18n="unstun-roll">If rolling to become unstunned, remember: A success removes the Stunned condition, but leaves the character Distracted and Vulnerable; a raise removes all conditions.</span>
	</div>
	{{/vigorStunned}}
	{{/rollTotal() stunned -2}}
</rolltemplate>

<rolltemplate class="sheet-rolltemplate-damage">
	<div class="sheet-templateMain">
		<div class="sheet-templateHeader">
            {{#namelength}}
			<h2 class="sheet-{{namelength}}">
            {{/namelength}}
            {{^namelength}}
            <h2>
            {{/namelength}}
                {{#rollTotal() wildcard 0}}{{#wcicon}}{{wcicon}}{{/wcicon}}{{/rollTotal() wildcard 0}}{{name}}
            </h2>
			<h3>{{source}}{{#rollGreater() showap 0}} (<span data-i18n="armor-piercing-abbr-u">AP</span>: {{ap}}){{/rollGreater() showap 0}}</h3>
		</div>
		<div class="sheet-templateBody">
			<div class="sheet-templateRoll sheet-trollLeft">
				<span class="sheet-rollLabel">{{dmg_rank}}</span>
				<span class="sheet-rollContainer">{{dmg_roll}} </span>
				{{#dmg_roll2}}<span class="sheet-rollContainer">{{dmg_roll2}}</span>{{/dmg_roll2}}
				{{#dmg_roll3}}<span class="sheet-rollContainer">{{dmg_roll3}}</span>{{/dmg_roll3}}
				{{#dmg_roll4}}<span class="sheet-rollContainer">{{dmg_roll4}}</span>{{/dmg_roll4}}
				{{#dmg_roll5}}<span class="sheet-rollContainer">{{dmg_roll5}}</span>{{/dmg_roll5}}
			</div>
			<div class="sheet-templateRoll sheet-trollRight">
				{{#rollGreater() bonus_die 0}}
				<span class="sheet-rollLabel" data-i18n="bonus-damage">Bonus Damage</span>
				{{/rollGreater() bonus_die 0}}
				<span class="sheet-rollContainer">{{bonus_die}} </span>
				{{#bonus_die2}}<span class="sheet-rollContainer">{{bonus_die2}}</span>{{/bonus_die2}}
				{{#bonus_die3}}<span class="sheet-rollContainer">{{bonus_die3}}</span>{{/bonus_die3}}
				{{#bonus_die4}}<span class="sheet-rollContainer">{{bonus_die4}}</span>{{/bonus_die4}}
				{{#bonus_die5}}<span class="sheet-rollContainer">{{bonus_die5}}</span>{{/bonus_die5}}
			</div>
		</div>
        {{#rollGreater() conviction 0}}
        <div class="sheet-convictionRoll">
            <span class="sheet-rollLabel" data-i18n="conviction"></span>
            <span class="sheet-rollContainer">{{conviction}}</span>
        </div>
        {{/rollGreater() conviction 0}}
		<div class="sheet-buttonsnsuch">
			{{#notes}}
			<div class="sheet-templateModifiers">
				{{notes}}
			</div>
			{{/notes}}
			{{#button}}
			<div class="sheet-templateButton">
				{{DmgRoll}}
			</div>
			{{/button}}
	        {{#getgritty}}
	        <div class="sheet-templateButton">
				{{GrittyRoll}}
			</div>
	        {{/getgritty}}
	    </div>
	</div>
</rolltemplate>

<rolltemplate class="sheet-rolltemplate-info">
    <div class="sheet-templateMain">
        <div class="sheet-templateHeaderRow">
            <h2 class="sheet-templateheader">{{#rollTotal() wildcard 0}}{{#wcicon}}{{wcicon}}{{/wcicon}}{{/rollTotal() wildcard 0}}{{name}}</h2>
        </div>
        {{#item}}<h3 class="sheet-templatesubheader">{{item}}{{#type}} ({{type}}){{/type}}</h3>{{/item}}
        <div class="sheet-templatedescription">
            {{#description}}{{description}}{{/description}}
            {{#fear}}
                {{#rollLess() fear 4}}<span data-i18n="fear-table-adrenaline-surge-description" data-i18n-vars="{{fear}}"><strong>Adrenaline Surge</strong> ({{0}}): The hero’s "fight" response takes over. He acts as if he had a Joker this action!</span>{{/rollLess() fear 4}}
                {{#rollBetween() fear 4 6}}<span data-i18n="fear-table-distracted-description" data-i18n-vars="{{fear}}"><strong>Distracted</strong> ({{0}}): The hero is Distracted until the end of his next turn.</span>{{/rollBetween() fear 4 6}}
                {{#rollBetween() fear 7 9}}<span data-i18n="fear-table-vulnerable-description" data-i18n-vars="{{fear}}"><strong>Vulnerable</strong> ({{0}}): The target is Vulnerable until the end of his next turn.</span>{{/rollBetween() fear 7 9}}
                {{#rollBetween() fear 10 12}}<span data-i18n="fear-table-shaken-description" data-i18n-vars="{{fear}}"><strong>Shaken</strong> ({{0}}): The character is Shaken.</span>{{/rollBetween() fear 10 12}}
                {{#rollTotal() fear 13}}<span data-i18n="fear-table-mark-of-fear-description" data-i18n-vars="{{fear}}"><strong>The Mark of Fear</strong> ({{0}}): The hero is Stunned and suffers some cosmetic physical alteration—a white streak forms in his hair, his eyes twitch constantly, or some other minor physical alteration manifests.</span>{{/rollTotal() fear 13}}
                {{#rollBetween() fear 14 15}}<span data-i18n="fear-table-frightened-description" data-i18n-vars="{{fear}}"><strong>Frightened</strong> ({{0}}): The character gains the Hesitant Hindrance for the remainder of the encounter. If he already has it, he’s Panicked instead.</span>{{/rollBetween() fear 14 15}}
                {{#rollBetween() fear 16 17}}<span data-i18n="fear-table-panicked-description" data-i18n-vars="{{fear}}"><strong>Panicked</strong> ({{0}}): The character immediately moves his full Pace plus running die away from the danger and is Shaken.</span>{{/rollBetween() fear 16 17}}
                {{#rollBetween() fear 18 19}}<span data-i18n="fear-table-minor-phobia-description" data-i18n-vars="{{fear}}"><strong>Minor Phobia</strong> ({{0}}): The character gains a Minor Phobia Hindrance somehow associated with the trauma.</span>{{/rollBetween() fear 18 19}}
                {{#rollBetween() fear 20 21}}<span data-i18n="fear-table-major-phobia-description" data-i18n-vars="{{fear}}"><strong>Major Phobia</strong> ({{0}}): The character gains the Major Phobia Hindrance.</span>{{/rollBetween() fear 20 21}}
                {{#rollGreater() fear 21}}<span data-i18n="fear-table-heart-attack-description" data-i18n-vars="{{fear}}|{{heartattack}}"><strong>Heart Attack</strong> ({{0}}): The hero is so overwhelmed with fear that his heart stutters. He must make an immediate Vigor roll at –2. If successful, he's Stunned. If he fails, he's Incapacitated and dies in {{1}} rounds. In the latter case, a Healing roll at –4 saves his life, but he remains Incapacitated. He may be treated normally thereafter.</span>{{/rollGreater() fear 21}}
            {{/fear}}
			{{#allprops() description item type wildcard fear heartattack}}<p><strong>{{key}}:</strong> {{value}}</p>{{/allprops() description item type wildcard fear heartattack}}
        </div>
    </div>
</rolltemplate>

<rolltemplate class="sheet-rolltemplate-description">
    <table class="sheet-templatetable">
        <tr>
            <td class="sheet-theader">
                <span style="display:block;">{{#rollTotal() wildcard 0}}{{#wcicon}}{{wcicon}}{{/wcicon}}{{/rollTotal() wildcard 0}}{{name}}</span>
                <span style="display:block;">{{item}} {{#type}}({{type}}){{/type}}</span>
            </td>
        </tr>
        <tr>
            <td>{{description}}</td>
        </tr>
    </table>
</rolltemplate>

<rolltemplate class="sheet-rolltemplate-unshake">
	<div class="sheet-emoteish">
		{{name}} <span data-i18n="unshake-desc1">attempts to unshake (Spi</span>: {{skill_roll}}{{#^rollTotal() mook 0}} / <span data-i18n="unshake-desc2">Wild</span>: {{wild_die}}{{/^rollTotal() mook 0}}) <span data-i18n="unshake-desc3">and</span>
		<!-- If A Wild Card -->
		{{#^rollTotal() mook 0}}
			{{#rollGreater() skill_roll wild_die}}
				{{#rollGreater() skill_roll 3}}<span data-i18n="unshake-desc4">succeeds</span>! {{name}} <span data-i18n="unshake-desc5">can now act</span>.{{/rollGreater() skill_roll 3}}
				{{#^rollGreater() skill_roll 3}}<span data-i18n="unshake-desc6">fails</span>!{{/^rollGreater() skill_roll 3}}
			{{/rollGreater() skill_roll wild_die}}
			{{#^rollGreater() skill_roll wild_die}}
				{{#rollGreater() wild_die 3}}<span data-i18n="unshake-desc4">succeeds</span>! {{name}} <span data-i18n="unshake-desc5">can now act</span>.{{/rollGreater() wild_die 3}}
				{{#^rollGreater() wild_die 3}}<span data-i18n="unshake-desc6">fails</span>!{{/^rollGreater() wild_die 3}}
			{{/^rollGreater() skill_roll wild_die}}
		{{/^rollTotal() mook 0}}
		<!-- If an Extra -->
		{{#rollTotal() mook 0}}
			{{#rollGreater() skill_roll 3}}<span data-i18n="unshake-desc4">succeeds</span>! {{name}} <span data-i18n="unshake-desc5">can now act</span>.{{/rollGreater() skill_roll 3}}
			{{#^rollGreater() skill_roll 3}}<span data-i18n="unshake-desc6">fails</span>!{{/^rollGreater() skill_roll 3}}
		{{/rollTotal() mook 0}}
	</div>
</rolltemplate>

<rolltemplate class="sheet-rolltemplate-running">
	<div class="sheet-emoteish">
		{{name}} <span data-i18n="runs">runs for</span> {{roll}} <span data-i18n="inches">inches</span>.
	</div>
</rolltemplate>

<rolltemplate class="sheet-rolltemplate-consumables">
    <div class="sheet-emoteish">
		{{name}} <span data-i18n="consumable-roll-text" data-i18n-vars="{{consumable}}">rolls for {{0}} consumption and gets a</span> {{roll}}.
	</div>
</rolltemplate>


<rolltemplate class="sheet-rolltemplate-emote">
	<div class="sheet-emoteish">
		{{name}} {{does}}
	</div>
</rolltemplate>

<rolltemplate class="sheet-rolltemplate-gritty">
    <div class="sheet-card">
        <h2 data-i18n="injury-roll">Injury Roll</h2>
        <div class='sheet-injuryresult'>{{result}}</div>
    </div>
</rolltemplate>

<rolltemplate class="sheet-rolltemplate-statblock">
    <div class="sheet-statblockheader">
        <h2 class="sheet-fullwidth">{{#rollTotal() wildcard 0}}{{#wcicon}}{{wcicon}}{{/wcicon}}{{/rollTotal() wildcard 0}}{{name}}</h2>
    </div>
    <div class="sheet-statblockbod">
        {{#description}}<div class="sheet-justify">{{description}}</div>{{/description}}
        {{#charatts}}<div class="sheet-bodsection">**<span data-i18n="attributes">Attributes</span>**: {{charatts}}</div>{{/charatts}}
        {{#charskills}}<div class="sheet-bodsection">**<span data-i18n="skills">Skills</span>**: {{charskills}}</div>{{/charskills}}
        {{#charderived}}<div class="sheet-bodsection">{{charderived}}</div>{{/charderived}}
        {{#chargear}}<div class="sheet-bodsection">**<span data-i18n="gear">Gear</span>**: {{chargear}}</div>{{/chargear}}
        {{#charhindrances}}<div class="sheet-bodsection">**<span data-i18n="hindrances">Hindrances</span>**: {{charhindrances}}</div>{{/charhindrances}}
        {{#charedges}}<div class="sheet-bodsection">**<span data-i18n="edges">Edges</span>**: {{charedges}}</div>{{/charedges}}
		{{#rollGreater() showspec 0}}{{#charspecabilities}}<div class="sheet-bodsection">**<span data-i18n="special-abilities">Special Abilities</span>**:<!--<br />--><ul>{{charspecabilities}}</ul></div>{{/charspecabilities}}{{/rollGreater() showspec 0}}
		{{#rollGreater() powercount 0}}<div class="sheet-bodsection">{{charpowers}}</div>{{/rollGreater() powercount 0}}
    </div>
</rolltemplate>

<!-- {{name=Bonus Damage}} {{dieType=@{weaponsbdt}}} {{bonusDamage=[[@{vbonusdamage}!]]}} -->
<rolltemplate class="sheet-rolltemplate-bonusDamage">
    <div class="sheet-templateMain">
        <span class="sheet-rollDieType" data-i18n="bonus-damage">Bonus Damage</span> <span class="sheet-rollDieType">({{dieType}}):</span> <span class="sheet-rollContainer">{{bonusDamage}}</span>
    </div>
</rolltemplate>
<rolltemplate class="sheet-rolltemplate-debug">
	{{#rollLess() distracted -1}}<span class="sheet-templateCondition" data-i18n-title="distracted">♦</span>{{/rollLess() distracted -1}}{{#rollTotal() vulnerable -2}}<span class="sheet-templateCondition" data-i18n-title="vulnerable">♠</span>{{/rollTotal() vulnerable -2}}{{#rollTotal() stunned -2}}<span class="sheet-templateCondition" data-i18n-title="stunned">♣</span>{{/rollTotal() stunned -2}}
</rolltemplate>
