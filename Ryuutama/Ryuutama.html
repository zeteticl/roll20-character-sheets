<!DOCTYPE html>

<html>
    <script type="text/worker">
        on("change:injury change:condition", function() {
            getAttrs(["condition", "injury"], function(values) {
                setAttrs({
                    injured: parseInt(values.injury) > parseInt(values.condition) ? 2 : 0
                });
            });
        });
        on("change:poison change:condition", function() {
            getAttrs(["condition", "poison"], function(values) {
                setAttrs({
                    poisoned: parseInt(values.poison) > parseInt(values.condition) ? 2 : 0
                });
            });
        });
        on("change:sickness change:condition", function() {
            getAttrs(["condition", "sickness"], function(values) {
                setAttrs({
                    sick: parseInt(values.sickness) > parseInt(values.condition) ? 2 : 0
                });
            });
        });
        on("change:exhaustion change:condition", function() {
            getAttrs(["condition", "exhaustion"], function(values) {
                setAttrs({
                    exhausted: parseInt(values.exhaustion) > parseInt(values.condition) ? 2 : 0
                });
            });
        });
        on("change:muddle change:condition", function() {
            getAttrs(["condition", "muddle"], function(values) {
                setAttrs({
                    muddled: parseInt(values.muddle) > parseInt(values.condition) ? 2 : 0
                });
            });
        });
        on("change:shock change:condition", function() {
            getAttrs(["condition", "shock"], function(values) {
                setAttrs({
                    shocked: parseInt(values.shock) > parseInt(values.condition) ? 2 : 0
                });
            });
        });
        on("change:str change:poisoned change:sick change:shocked change:bonus change:condition", function() {
            getAttrs(["str", "poisoned", "sick", "shocked", "bonus", "condition"], function(values) {
                setAttrs({
                    currentStr: Math.min(12, Math.max(4, parseInt(values.str)-parseInt(values.poisoned)-parseInt(values.sick)-parseInt(values.shocked)+(values.bonus == 'STR' && parseInt(values.condition) >= 10 ? 2 : 0)))
                });
            });
        });
        on("change:dex change:injured change:sick change:shocked change:bonus change:condition", function() {
            getAttrs(["dex", "injured", "sick", "shocked", "bonus", "condition"], function(values) {
                setAttrs({
                    currentDex: Math.min(12, Math.max(4, parseInt(values.dex)-parseInt(values.injured)-parseInt(values.sick)-parseInt(values.shocked)+(values.bonus == 'DEX' && parseInt(values.condition) >= 10 ? 2 : 0)))
                });
            });
        });
        on("change:int change:muddled change:sick change:shocked change:bonus change:condition", function() {
            getAttrs(["int", "muddled", "sick", "shocked", "bonus", "condition"], function(values) {
                setAttrs({
                    currentInt: Math.min(12, Math.max(4, parseInt(values.int)-parseInt(values.muddled)-parseInt(values.sick)-parseInt(values.shocked)+(values.bonus == 'INT' && parseInt(values.condition) >= 10 ? 2 : 0)))
                });
            });
        });
        on("change:spi change:exhausted change:sick change:shocked change:bonus change:condition", function() {
            getAttrs(["spi", "exhausted", "sick", "shocked", "bonus", "condition"], function(values) {
                setAttrs({
                    currentSpi: Math.min(12, Math.max(4, parseInt(values.spi)-parseInt(values.exhausted)-parseInt(values.sick)-parseInt(values.shocked)+(values.bonus == 'SPI' && parseInt(values.condition) >= 10 ? 2 : 0)))
                });
            });
        });
        on("change:condition change:class1 change:class2", function() {
            getAttrs(["condition", "class1", "class2"], function(values) {
                var tipTopShape = 10 - (values.class1 == 'Navigator' ? 1 : 0) - (values.class2 == 'Navigator' ? 1 : 0);
                setAttrs({
                    outOfShape: parseInt(values.condition) <= 2 && parseInt(values.condition) > 0 ? 1 : 0,
                    tipTopShape: parseInt(values.condition) >= tipTopShape ? 1 : 0,
                    conditionDeath: parseInt(values.condition) <= 0 ? 1 : 0
                });
            });
        });
        on("change:healthPoints change:healthPoints_max change:condition", function() {
            getAttrs(["healthPoints", "healthPoints_max", "condition"], function(values) {
                setAttrs({
                    hpUnconscious: parseInt(values.healthPoints) <= 0 && parseInt(values.healthPoints) > (0 - parseInt(values.condition)) ? 1 : 0,
                    hpDeath: parseInt(values.healthPoints) <= (0 - parseInt(values.condition)) ? 1 : 0
                });
            });
        });
        on("change:mentalPoints", function() {
            getAttrs(["mentalPoints"], function(values) {
                setAttrs({
                    mpUnconscious: parseInt(values.mentalPoints) <= 0 ? 1 : 0
                });
            });
        });
        on("change:type1 change:type2", function() {
            getAttrs(["type1", "type2"], function(values) {
                setAttrs({
                    typeDamageMod: (values.type1 == 'Attack' ? 1 : 0) + (values.type2 == 'Attack' ? 1 : 0),
                    typeInitiativeMod: (values.type1 == 'Technical' ? 1 : 0) + (values.type2 == 'Technical' ? 1 : 0),
                    showAttackTypeMastery: (values.type1 == 'Attack' || values.type2 == 'Attack' ? 1 : 0),
                    showSecondAttackTypeMastery: (values.type1 == 'Attack' && values.type2 == 'Attack' ? 1 : 0)
                });
            });
        });
        on("change:showAttackTypeMastery", function() {
            getAttrs(["showAttackTypeMastery"], function(values) {
                if (parseInt(values.showAttackTypeMastery) == 0) {
                    setAttrs({
                        attackTypeMastery: 0
                    });
                }
            });
        });
        on("change:showSecondAttackTypeMastery", function() {
            getAttrs(["showSecondAttackTypeMastery"], function(values) {
                if (parseInt(values.showSecondAttackTypeMastery) == 0) {
                    setAttrs({
                        attackTypeMastery2: 0
                    });
                }
            });
        });
        on("change:class1 change:class2 change:class1Other change:class2Other", function() {
            getAttrs(["class1", "class2", "class1Other", "class2Other"], function(values) {
                setAttrs({
                    classTravelMod: (values.class1 == 'Minstrel' ? 1 : 0) + (values.class2 == 'Minstrel' ? 1 : 0),
                    classDirectionMod: (values.class1 == 'Minstrel' ? 1 : 0) + (values.class2 == 'Minstrel' ? 1 : 0) + (values.class1 == 'Navigator' ? 2 : 0) + (values.class2 == 'Navigator' ? 2 : 0) - (values.class1 == 'Navigator' && values.class2 == 'Navigator' ? 1 : 0),
                    classCampMod: (values.class1 == 'Minstrel' ? 1 : 0) + (values.class2 == 'Minstrel' ? 1 : 0),
                    classNegotiationMod: (values.class1 == 'Merchant' ? 1 : 0) + (values.class2 == 'Merchant' ? 1 : 0),
                    classConditionMod: (values.class1 == 'Farmer' ? 1 : 0) + (values.class2 == 'Farmer' ? 1 : 0),
                    classSkillBonus: (values.class1 != null && values.class1 == values.class2 && (values.class1 != 'Other' || values.class1Other == values.class2Other) ? 1 : 0),
                    showArtisanSkills: (values.class1 == 'Artisan' || values.class2 == 'Artisan' ? 1 : 0),
                    showFarmerSkills: (values.class1 == 'Farmer' || values.class2 == 'Farmer' ? 1 : 0),
                    showHealerSkills: (values.class1 == 'Healer' || values.class2 == 'Healer' ? 1 : 0),
                    showHunterSkills: (values.class1 == 'Hunter' || values.class2 == 'Hunter' ? 1 : 0),
                    showNavigatorSkills: (values.class1 == 'Navigator' || values.class2 == 'Navigator' ? 1 : 0),
                    showMerchantSkills: (values.class1 == 'Merchant' || values.class2 == 'Merchant' ? 1 : 0),
                    showMinstrelSkills: (values.class1 == 'Minstrel' || values.class2 == 'Minstrel' ? 1 : 0),
                    showNobleSkills: (values.class1 == 'Noble' || values.class2 == 'Noble' ? 1 : 0),
                    showWeaponGrace: (values.class1 == 'Noble' || values.class2 == 'Noble' ? 1 : 0),
                    showSecondWeaponGrace: (values.class1 == 'Noble' && values.class2 == 'Noble' ? 1 : 0),
                    animals_max: 1 + (values.class1 == 'Merchant' || values.class1 == 'Farmer' ? 2 : 0) + (values.class2 == 'Merchant' || values.class2 == 'Farmer' ? 2 : 0)
                });
            });
        });
        on("change:showWeaponGrace", function() {
            getAttrs(["showWeaponGrace"], function(values) {
                if (parseInt(values.showWeaponGrace) == 0) {
                    setAttrs({
                        weaponGrace: 0
                    });
                }
            });
        });
        on("change:showSecondWeaponGrace", function() {
            getAttrs(["showSecondWeaponGrace"], function(values) {
                if (parseInt(values.showSecondWeaponGrace) == 0) {
                    setAttrs({
                        weaponGrace2: 0
                    });
                }
            });
        });
        on("change:repeating_containers remove:repeating_containers change:repeating_animals remove:repeating_animals change:currentStr change:level change:type1 change:type2 change:class1 change:class2 change:species", function() {
            getSectionIDs("repeating_containers", function(containerIdArray) {
                getSectionIDs("repeating_animals", function(animalIdArray) {
                    var fieldNames = ["currentStr", "level", "type1", "type2", "class1", "class2", "species"]
                    for(var i=0; i < containerIdArray.length; i++) {
                        fieldNames.push("repeating_containers_" + containerIdArray[i] + "_containerCapacity");
                        fieldNames.push("repeating_containers_" + containerIdArray[i] + "_containerWater");
                    }
                    for (var i=0; i < animalIdArray.length; i++) {
                        fieldNames.push("repeating_animals_" + animalIdArray[i] + "_animalCapacity");
                    }
                    var containerItemCapacities = 0;
                    var containerWaterCapacities = 0;
                    getAttrs(fieldNames, function(values) {
                        for (var i=0; i < containerIdArray.length; i++) {
                            if (values["repeating_containers_" + containerIdArray[i] + "_containerWater"] == 1) {
                                containerWaterCapacities += parseInt(values["repeating_containers_" + containerIdArray[i] + "_containerCapacity"]);
                            } else {
                                containerItemCapacities += parseInt(values["repeating_containers_" + containerIdArray[i] + "_containerCapacity"]);
                            }
                        }
                        for (var i=0; i < animalIdArray.length; i++) {
                            containerItemCapacities += parseInt(values["repeating_animals_" + animalIdArray[i] + "_animalCapacity"]);
                        }
                        var maximumLoad = parseInt(values.currentStr) + parseInt(values.level) + 2 + (values.type1 == 'Technical' ? 3 : 0) + (values.type2 == 'Technical' ? 3 : 0) + (values.class1 == 'Farmer' ? 3 : 0) + (values.class2 == 'Farmer' ? 3 : 0) + (values.species == 'Koneko Goblin' ? 3 : 0);
                        setAttrs({
                            capacity_max: maximumLoad + containerItemCapacities,
                            weaponCapacity_max: maximumLoad,
                            water_max: containerWaterCapacities
                        });
                    });
                });
            });
        });
        on("change:repeating_containers remove:repeating_containers change:repeating_items remove:repeating_items", function() {
            getSectionIDs("repeating_containers", function(containerIdArray) {
                getSectionIDs("repeating_items", function(itemIdArray) {
                    var fieldNames = [];
                    for(var i=0; i < containerIdArray.length; i++) {
                        fieldNames.push("repeating_containers_" + containerIdArray[i] + "_containerSize");
                    }
                    for (var i=0; i < itemIdArray.length; i++) {
                        fieldNames.push("repeating_items_" + itemIdArray[i] + "_itemSize");
                        fieldNames.push("repeating_items_" + itemIdArray[i] + "_itemCount");
                    }
                    var totalBurden = 0;
                    getAttrs(fieldNames, function(values) {
                        for (var i=0; i < containerIdArray.length; i++) {
                            totalBurden += parseInt(values["repeating_containers_" + containerIdArray[i] + "_containerSize"]);
                        }
                        for (var i=0; i < itemIdArray.length; i++) {
                            totalBurden += parseInt(values["repeating_items_" + itemIdArray[i] + "_itemSize"]) * parseInt(values["repeating_items_" + itemIdArray[i] + "_itemCount"]);
                        }
                        setAttrs({
                            capacity: totalBurden
                        });
                    });
                });
            });
        });
        on("change:capacity change:capacity_max change:applyOverburdenPenalty", function() {
            getAttrs(["capacity", "capacity_max", "applyOverburdenPenalty"], function(values) {
                setAttrs({
                    overburdenPenalty: parseInt(values.applyOverburdenPenalty) * Math.max(0, parseInt(values.capacity) - parseInt(values.capacity_max)),
                    overCapacity: parseInt(values.capacity) > parseInt(values.capacity_max) ? 1 : 0
                });
            });
        });
        on("change:overburdenPenalty", function() {
            getAttrs(["overburdenPenalty"], function(values) {
                setAttrs({
                    overBurdened: parseInt(values.overburdenPenalty) > 0 ? 1 : 0,
                });
            });
        });
        on("change:repeating_armor:armorPenalty remove:repeating_armor", function() {
            getSectionIDs("repeating_armor", function(armorIdArray) {
                var fieldNames = [];
                for (var i=0; i < armorIdArray.length; i++) {
                    fieldNames.push("repeating_armor_" + armorIdArray[i] + "_armorPenalty");
                }
                var totalPenalty = 0;
                getAttrs(fieldNames, function(values) {
                    for (var i=0; i < armorIdArray.length; i++) {
                        totalPenalty += parseInt(values["repeating_armor_" + armorIdArray[i] + "_armorPenalty"]);
                    }
                    setAttrs({
                        armorPenalty: totalPenalty
                    });
                });
            });
        });
        on("change:repeating_animals remove:repeating_animals", function() {
            getSectionIDs("repeating_animals", function(idarray) {
                setAttrs({
                    animals: idarray.length
                });
            });
        });
        on("change:animals change:animals_max", function() {
            getAttrs(["animals", "animals_max"], function(values) {
                setAttrs({
                    tooManyAnimals: parseInt(values.animals) > parseInt(values.animals_max) ? 1 : 0
                });
            });
        });
        on("change:water", function() {
            getAttrs(["water"], function(values) {
                setAttrs({
                    outOfWater: parseInt(values.water) == 0 ? 1 : 0
                });
            });
        });
        on("change:repeating_weapons:weaponClassification", function() {
            getAttrs(["repeating_weapons_weaponClassification", "initialMastery", "attackTypeMastery", "attackTypeMastery2", "weaponGrace", "weaponGrace2"], function(values) {
                var masteries = [values.initialMastery, values.attackTypeMastery, values.attackTypeMastery2];
                setAttrs({
                    repeating_weapons_weaponGraceMod: ((values.repeating_weapons_weaponClassification == values.weaponGrace && masteries.indexOf(values.weaponGrace) > -1) ? 1 : 0) + ((values.repeating_weapons_weaponClassification == values.weaponGrace2 && masteries.indexOf(values.weaponGrace2) > -1) ? 1 : 0)
                });
            });
        });
        on("change:initialMastery change:attackTypeMastery change:attackTypeMastery2 change:weaponGrace change:weaponGrace2", function() {
            getSectionIDs("repeating_weapons", function(weaponIdArray) {
                var fieldNames = ["initialMastery", "attackTypeMastery", "attackTypeMastery2", "weaponGrace", "weaponGrace2"];
                for (var i=0; i < weaponIdArray.length; i++) {
                    fieldNames.push("repeating_weapons_" + weaponIdArray[i] + "_weaponClassification");
                }
                getAttrs(fieldNames, function(values) {
                    var masteries = [values.initialMastery, values.attackTypeMastery, values.attackTypeMastery2];
                    var attrsToSet = {};
                    for (var i=0; i < weaponIdArray.length; i++) {
                        var weaponClassification = values["repeating_weapons_" + weaponIdArray[i] + "_weaponClassification"];
                        var weaponGraceMod1 = weaponClassification == values.weaponGrace && masteries.indexOf(values.weaponGrace) > -1 ? 1 : 0;
                        var weaponGraceMod2 = weaponClassification == values.weaponGrace2 && masteries.indexOf(values.weaponGrace2) > -1 ? 1 : 0;
                        var weaponGraceModId = "repeating_weapons_" + weaponIdArray[i] + "_weaponGraceMod";
                        attrsToSet[weaponGraceModId] = weaponGraceMod1 + weaponGraceMod2;
                    }
                    setAttrs(attrsToSet);
                });
            });
        });
        on("change:fumble", function() {
            getAttrs(["fumble", "concentrationFumble"], function(values) {
                setAttrs({
                    showFumbleConcentration: parseInt(values.fumble) > 0 ? 1 : 0,
                    concentrationFumble: parseInt(values.fumble) > 0 ? parseInt(values.concentrationFumble) : 0
                });
            });
        });
        on("change:concentrationMP change:concentrationFumble change:type1 change:type2", function() {
            getAttrs(["concentrationMP", "concentrationFumble", "type1", "type2"], function(values) {
                var applyConcentration = parseInt(values.concentrationMP) + parseInt(values.concentrationFumble) > 0 ? true : false;
                setAttrs({
                    concentrationBonus: applyConcentration ? parseInt(values.concentrationMP) + parseInt(values.concentrationFumble) + (values.type1 == 'Technical' ? 1 : 0) + (values.type2 == 'Technical' ? 1 : 0) : 0
                });
            });
        });
        on("change:repeating_weapons:weaponSize change:repeating_armor:armorSize remove:repeating_weapons remove:repeating_armor", function() {
            var fieldNames = [];
            getSectionIDs("repeating_weapons", function(weaponIdArray) {
                for (var i=0; i < weaponIdArray.length; i++) {
                    console.log("pushing " + "repeating_weapons_" + weaponIdArray[i] + "_weaponSize")
                    fieldNames.push("repeating_weapons_" + weaponIdArray[i] + "_weaponSize");
                }
                getSectionIDs("repeating_armor", function(armorIdArray) {
                    for (var i=0; i < armorIdArray.length; i++) {
                        console.log("pushing " + "repeating_armor_" + armorIdArray[i] + "_armorSize")
                        fieldNames.push("repeating_armor_" + armorIdArray[i] + "_armorSize");
                    }
                    var totalBurden = 0;
                    console.log("burden starts at 0")
                    getAttrs(fieldNames, function(values) {
                        for (var key in values) {
                            totalBurden += parseInt(values[key])
                            console.log("burden is now" + totalBurden + " because " + parseInt(values[key]) + " was added to it")
                        }
                        setAttrs({
                            weaponCapacity: totalBurden
                        });
                    });
                });
            });
        });
        on("change:weaponCapacity change:weaponCapacity_max", function() {
            getAttrs(["weaponCapacity", "weaponCapacity_max"], function(values) {
                setAttrs({
                    overEncumbered: parseInt(values.weaponCapacity) > parseInt(values.weaponCapacity_max) ? 1 : 0
                });
            });
        });
        on("change:species change:currentSeason", function() {
            getAttrs(["species", "currentSeason"], function(values) {
                setAttrs({
                    speciesConditionMod: (values.species == 'Koneko Goblin' && values.currentSeason == 'Spring' ? 1 : 0),
                    speciesInitiativeMod: (values.species == 'Koneko Goblin' && values.currentSeason == 'Spring' ? 1 : 0)
                });
            });
        });
    </script>

    <div>
    	<input type="checkbox" name="attr_npc_switch" class="sheet-block-switch"/>
    	<span class="npc-switch-label">NPC&nbsp;</span>

        <div class='sheet-block-a characterSheet'>
            <!-- Hidden Fields -->
            <div class='hidden'>
                <input type='number' name='attr_typeInitiativeMod' value='0'/>
                <input type='number' name='attr_typeDamageMod' value='0'/>
                <input type='number' name='attr_classTravelMod' value='0'/>
                <input type='number' name='attr_classDirectionMod' value='0'/>
                <input type='number' name='attr_classCampMod' value='0'/>
                <input type='number' name='attr_classConditionMod' value='0'/>
                <input type='number' name='attr_classNegotiationMod' value='0'/>
                <input type='number' name='attr_classSkillBonus' value='0'/>
                <input type='number' name='attr_armorPenalty' value='0'/>
                <input type='number' name='attr_concentrationBonus' value='0'/>
                <input type='number' name='attr_speciesConditionMod' value='0'/>
                <input type='number' name='attr_speciesInitiativeMod' value='0'/>
            </div>
            <!-- End Hidden Fields -->

            <!-- High Level Tabs -->
            <input type="radio" class="sheet-tab sheet-tab1" name="attr_core-tab" value="1" title="Details" checked="checked"/>
            <span class="sheet-tab sheet-tab1">Info</span>
            <input type="radio" class="sheet-tab sheet-tab2" name="attr_core-tab" value="2" title="Class"/>
            <span class="sheet-tab sheet-tab2">Class</span>
            <input type="radio" class="sheet-tab sheet-tab3" name="attr_core-tab" value="3" title="Stats"/>
            <span class="sheet-tab sheet-tab3">Stats</span>
            <input type="radio" class="sheet-tab sheet-tab4" name="attr_core-tab" value="4" title="Checks"/>
            <span class="sheet-tab sheet-tab4">Checks</span>
            <input type="radio" class="sheet-tab sheet-tab5" name="attr_core-tab" value="5" title="Equipment"/>
            <span class="sheet-tab sheet-tab5">Inventory</span>
            <!-- End High Level Tabs -->

            <span class='characterDetails'>
               <div class='flex'>
                    <img class="logo" src="https://raw.githubusercontent.com/jlvgit/roll20-character-sheets/ryuutama-bug-fixes/Ryuutama/images/ryuutama_logo.png">
                    <div class='flex-column round-box'>
                        <div class="flex">
                            <div class='flex-column'>
                                <label>Name</label>
        				        <input name="attr_character_name" placeholder="Character Name" title="@{character_name}" type="text" value="" />
        				    </div>
        				    <div class="flex-column">
                                <label>Species</label>
                                <select name='attr_species'>
                                    <option value='Human'>Human</option>
                                    <option value='Koneko Goblin'>Koneko Goblin</option>
                                </select>
                            </div>
                        </div>
                        <div class='flex'>
                            <div class='flex-column'>
                                <label>Level</label>
                                <input type='number' name='attr_level' value='1' min='1'/>
                            </div>
                            <div class='flex-column'>
                                <label>Experience</label>
                                <input type='number' name='attr_exp' value='0' min='0' style='width:70px'/>
                            </div>
                            <div class='flex-column'>
                                <label>Age</label>
                                <input type='number' name='attr_charAge' min='1'/>
                            </div>
                            <div class='flex-column'>
                                <label>Gender</label>
                                <input type='text' name='attr_charGender'/>
                            </div>
                        </div>
                    </div>
                </div>

                <div class='flex personalItems'>
                    <div class='flex-column'>
                        <label class="attrLabel"> Personal Item </label>
                        <input type='text' name='attr_personalItem'/>
                    </div>
                    <div class='flex-column'>
                        <label class="attrLabel"> Party Role </label>
                        <select name="attr_role">
                            <option value=''></option>
                            <option value='Journal Keeper'>Journal Keeper</option>
                            <option value='Leader'>Leader</option>
                            <option value='Mapper'>Mapper</option>
                            <option value='Quartermaster'>Quartermaster</option>
                        </select>
                    </div>
                </div>

                <div class="flex-column">
                    <label class="attrLabel">Image Color/Appearance</label>
                    <textarea name='attr_charAppearance'></textarea>
                </div>

                <div class='flex-column'>
                    <label class="attrLabel">Hometown/Reason for Travel</label>
                    <textarea name='attr_charHometown'></textarea>
                </div>

                <div class='flex-column'>
                    <label class="attrLabel">Notes</label>
                    <textarea name='attr_charNotes'></textarea>
                </div>
            </span>

                <span class='characterClass'>
                    <div class='sheet-2olrow'>
                        <label class='headerLabel'>Class</label>
                    </div>
                    <div class='sheet-2colrow'>
                        <div class='sheet-col'>
                            Class 1:
                            <select name="attr_class1" class='charoptions'>
                                <option value=''></option>
                                <option value='Artisan'>Artisan</option>
                                <option value='Farmer'>Farmer</option>
                                <option value='Healer'>Healer</option>
                                <option value='Hunter'>Hunter</option>
                                <option value='Merchant'>Merchant</option>
                                <option value='Minstrel'>Minstrel</option>
                                <option value='Navigator'>Navigator</option>
                                <option value='Noble'>Noble</option>
                                <option value='Other'>Other</option>
                            </select>
                            <input type='text' name='attr_class1Other' placeholder='If other, type class name here'/>
                        </div>
                        <div class='sheet-col'>
                            Class 2:
                            <select name="attr_class2" class='charoptions'>
                                <option value=''></option>
                                <option value='Artisan'>Artisan</option>
                                <option value='Farmer'>Farmer</option>
                                <option value='Healer'>Healer</option>
                                <option value='Hunter'>Hunter</option>
                                <option value='Merchant'>Merchant</option>
                                <option value='Minstrel'>Minstrel</option>
                                <option value='Navigator'>Navigator</option>
                                <option value='Noble'>Noble</option>
                                <option value='Other'>Other</option>
                            </select>
                            <input type='text' name='attr_class2Other' placeholder='If other, type class name here'/>
                        </div>
                    </div>

                    <label class='headerLabel checkLabel'>Type</label>
                    <div class='sheet-2colrow'>
                        <div class='sheet-col'>
                            Type 1:
                            <select name="attr_type1" class='charoptions'>
                                <option value=''></option>
                                <option value='Attack'>Attack</option>
                                <option value='Magic'>Magic</option>
                                <option value='Technical'>Technical</option>
                            </select>
                        </div>
                        <div class='sheet-col'>
                            Season 1:
                            <select name="attr_season1" class='charoptions'>
                                <option value=''></option>
                                <option value='Spring'>Spring</option>
                                <option value='Summer'>Summer</option>
                                <option value='Autumn'>Autumn</option>
                                <option value='Winter'>Winter</option>
                            </select>
                        </div>
                    </div>

                    <div class='sheet-2colrow'>
                        <div class='sheet-col'>
                            Type 2:
                            <select name="attr_type2" class='charoptions'>
                                <option value=''></option>
                                <option value='Attack'>Attack</option>
                                <option value='Magic'>Magic</option>
                                <option value='Technical'>Technical</option>
                            </select>
                        </div>
                        <div class='sheet-col'>
                            Season 2:
                            <select name="attr_season2" class='charoptions'>
                                <option value=''></option>
                                <option value='Spring'>Spring</option>
                                <option value='Summer'>Summer</option>
                                <option value='Autumn'>Autumn</option>
                                <option value='Winter'>Winter</option>
                            </select>
                        </div>
                    </div>

                    <label class='headerLabel checkLabel'>Mastered Weapons</label>
                    <div>
                        <div>Select initial weapon mastery:</div>
                        <div class='flex'>
                            <input type="radio" class="radioChoice radioChoice2" name="attr_initialMastery" value="2" title="Blade"/>
                            <span class="radioChoice radioChoice2">Blade</span>
                            <input type="radio" class="radioChoice radioChoice3" name="attr_initialMastery" value="3" title="Polearm"/>
                            <span class="radioChoice radioChoice3">Polearm</span>
                            <input type="radio" class="radioChoice radioChoice5" name="attr_initialMastery" value="5" title="Bow"/>
                            <span class="radioChoice radioChoice5">Bow</span>
                            <input type="radio" class="radioChoice radioChoice1" name="attr_initialMastery" value="1" title="Light Blade"/>
                            <span class="radioChoice radioChoice1">Light Blade</span>
                            <input type="radio" class="radioChoice radioChoice4" name="attr_initialMastery" value="4" title="Axe"/>
                            <span class="radioChoice radioChoice4">Axe</span>
                            <input type="radio" class="radioChoice radioChoice6" name="attr_initialMastery" value="6" title="Unarmed"/>
                            <span class="radioChoice radioChoice6">Unarmed</span>
                        </div>
                    </div>

                    <span>
                        <input type='checkbox' class='showDiv' name='attr_showAttackTypeMastery' value='1'>
                        <div>
                            <div>Select bonus weapon mastery gained from the attack type:</div>
                            <div class='flex'>
                                <input type="radio" class="radioChoice radioChoice2" name="attr_attackTypeMastery" value="2" title="Blade"/>
                                <span class="radioChoice radioChoice2">Blade</span>
                                <input type="radio" class="radioChoice radioChoice3" name="attr_attackTypeMastery" value="3" title="Polearm"/>
                                <span class="radioChoice radioChoice3">Polearm</span>
                                <input type="radio" class="radioChoice radioChoice5" name="attr_attackTypeMastery" value="5" title="Bow"/>
                                <span class="radioChoice radioChoice5">Bow</span>
                                <input type="radio" class="radioChoice radioChoice1" name="attr_attackTypeMastery" value="1" title="Light Blade"/>
                                <span class="radioChoice radioChoice1">Light Blade</span>
                                <input type="radio" class="radioChoice radioChoice4" name="attr_attackTypeMastery" value="4" title="Axe"/>
                                <span class="radioChoice radioChoice4">Axe</span>
                                <input type="radio" class="radioChoice radioChoice6" name="attr_attackTypeMastery" value="6" title="Unarmed"/>
                                <span class="radioChoice radioChoice6">Unarmed</span>
                            </div>
                        </div>
                    </span>

                    <span>
                        <input type='checkbox' class='showDiv' name='attr_showSecondAttackTypeMastery' value='1'>
                        <div>
                            <div>Select additional bonus weapon mastery gained from having the attack type twice:</div>
                            <div class='flex'>
                                <input type="radio" class="radioChoice radioChoice2" name="attr_attackTypeMastery2" value="2" title="Blade"/>
                                <span class="radioChoice radioChoice2">Blade</span>
                                <input type="radio" class="radioChoice radioChoice3" name="attr_attackTypeMastery2" value="3" title="Polearm"/>
                                <span class="radioChoice radioChoice3">Polearm</span>
                                <input type="radio" class="radioChoice radioChoice5" name="attr_attackTypeMastery2" value="5" title="Bow"/>
                                <span class="radioChoice radioChoice5">Bow</span>
                                <input type="radio" class="radioChoice radioChoice1" name="attr_attackTypeMastery2" value="1" title="Light Blade"/>
                                <span class="radioChoice radioChoice1">Light Blade</span>
                                <input type="radio" class="radioChoice radioChoice4" name="attr_attackTypeMastery2" value="4" title="Axe"/>
                                <span class="radioChoice radioChoice4">Axe</span>
                                <input type="radio" class="radioChoice radioChoice6" name="attr_attackTypeMastery2" value="6" title="Unarmed"/>
                                <span class="radioChoice radioChoice6">Unarmed</span>
                            </div>
                        </div>
                    </span>

                    <span>
                        <input type='checkbox' class='showDiv' name='attr_showWeaponGrace' value='1'>
                        <div>
                            <div>Select bonus weapon mastery gained from the noble class (can be the same as a previously selected weapon mastery):</div>
                            <div class="weaponBar">
                                <input type="radio" class="radioChoice radioChoice1" name="attr_weaponGrace" value="2" title="Blade"/>
                                <span class="radioChoice radioChoice1">Blade</span>
                                <input type="radio" class="radioChoice radioChoice2" name="attr_weaponGrace" value="3" title="Polearm"/>
                                <span class="radioChoice radioChoice2">Polearm</span>
                                <input type="radio" class="radioChoice radioChoice3" name="attr_weaponGrace" value="5" title="Bow"/>
                                <span class="radioChoice radioChoice3">Bow</span>
                            </div>
                        </div>
                    </span>

                    <span>
                        <input type='checkbox' class='showDiv' name='attr_showSecondWeaponGrace' value='1'>
                        <div>
                            <div>Select additional bonus weapon mastery gained from having the noble class twice:</div>
                            <div class="weaponBar">
                                <input type="radio" class="radioChoice radioChoice1" name="attr_weaponGrace2" value="2" title="Blade"/>
                                <span class="radioChoice radioChoice1">Blade</span>
                                <input type="radio" class="radioChoice radioChoice2" name="attr_weaponGrace2" value="3" title="Polearm"/>
                                <span class="radioChoice radioChoice2">Polearm</span>
                                <input type="radio" class="radioChoice radioChoice3" name="attr_weaponGrace2" value="5" title="Bow"/>
                                <span class="radioChoice radioChoice3">Bow</span>
                            </div>
                        </div>
                    </span>
                    <div class="sheet-row">
                        <label class='headerLabel spellsLabel'>Spells/Music/Other Abilities</label>
                    </div>
                    <fieldset class='repeating_spells'>
                         <div class="sheet-spellRow flex">
                            <div class='flex-column'>
                                Name:
                                <input type="text" name="attr_spellName" class="sheet-spellName" placeholder="Hold Hands">
                            </div>
                            <div class='flex-column'>
                                MP:
                                <input type="number" name="attr_spellCost" value="0" min="0">
                            </div>
                            <div class='flex-column'>
                                Duration:
                                <input type="text" name="attr_spellDuration" class="sheet-spellDuration" placeholder="Instant">
                            </div>
                            <div class='flex-column'>
                                Target:
                                <input type="text" name="attr_spellTarget" class="sheet-spellTarget" placeholder="1 Target">
                            </div>
                            <div class='flex-column'>
                                Range:
                                <input type="text" name="attr_spellRange" class="sheet-spellRange" placeholder="Touch">
                            </div>
                            <div class='flex-column'>
                                Type:
                                <select name="attr_spellType" class="sheet-spellTypes">
                                    <option value=""></option>
                                    <option value="Incantation">Incantation</option>
                                    <option value="Music">Music</option>
                                    <option value="Spring">Seasonal (Spring)</option>
                                    <option value="Summer">Seasonal (Summer)</option>
                                    <option value="Autumn">Seasonal (Autumn)</option>
                                    <option value="Winter">Seasonal (Winter)</option>
                                    <option value="Other">Other</option>
                                </select>
                            </div>
                        </div>

                        <div class="flex">
                            <button type='roll' value='&{template:spell} {{name=@{spellName}}} {{cost=@{spellCost}}} {{duration=@{spellDuration}}} {{target=@{spellTarget}}} {{range=@{spellRange}}} {{effect=@{spellEffect}}} ' name='roll_repeatingSpellCard'></button>
                            <textarea name="attr_spellEffect" class="sheet-spellEffect" placeholder="Effect"></textarea>
                        </div>
                        <hr>
                    </fieldset>
                </span>

                <span class='characterStats'>
                    <div class="hpmpgrid">
                        <div class="hpInfo">
                            <div class="flex hpmpHeader">Hit Points</div></div>
                            <div class="hp">
                                <img src="https://raw.githubusercontent.com/Roll20/roll20-character-sheets/master/Ryuutama/images/heart.png" alt="whiteheart" class="icon">
                                <input type='checkbox' class='penaltyCondition' name='attr_hpUnconscious' value='1'/>
                                <input type='checkbox' class='deathCondition' name='attr_hpDeath' value='1'/>
                                <input type='number' class='stats' name='attr_healthPoints' value='8'/> / 
                                <input type='number' class='stats' name='attr_healthPoints_max' value='8' min='1'/>
                            </div>
                            <div class="mpInfo"><div class="flex hpmpHeader">Mental Points</div>
                        </div>
                        <div class="mp">
                            <img src="https://raw.githubusercontent.com/Roll20/roll20-character-sheets/master/Ryuutama/images/sevenpointstar.png" alt="sevenpointstar" class="icon">
                            <input type='checkbox' class='penaltyCondition' name='attr_mpUnconscious' value='1'/>
                            <input type='number' class='stats' name='attr_magicPoints' value='8' min='0'/> / 
                            <input type='number' class='stats' name='attr_magicPoints_max' value='8' min='1'/>
                        </div>
                        <div class="condInfo">
                            <label class="flex hpmpHeader">Condition (If >=10 add 1 dice size to:
                            <select name="attr_bonus" class='condAttribute'>
                                <option value=''></option>
                                <option value='STR'>STR</option>
                                <option value='DEX'>DEX</option>
                                <option value='INT'>INT</option>
                                <option value='SPI'>SPI</option>
                            </select>
                            )
                            </label>
                        </div>
                        <div class="condition flex">
                            <img src="https://raw.githubusercontent.com/Roll20/roll20-character-sheets/master/Ryuutama/images/condition.png" alt="condition" class="icon">
                            <label class="flex-column condionBar">2<input type="radio" name="attr_condition" value="2"></label>
                            <label class="flex-column condionBar">3<input type="radio" name="attr_condition" value="3"></label>
                            <label class="flex-column condionBar">4<input type="radio" name="attr_condition" value="4"></label>
                            <label class="flex-column condionBar">5<input type="radio" name="attr_condition" value="5"></label>
                            <label class="flex-column condionBar">6<input type="radio" name="attr_condition" value="6"></label>
                            <label class="flex-column condionBar">7<input type="radio" name="attr_condition" value="7"></label>
                            <label class="flex-column condionBar">8<input type="radio" name="attr_condition" value="8"></label>
                            <label class="flex-column condionBar">9<input type="radio" name="attr_condition" value="9"></label>
                            <label class="flex-column condionBar">10<input type="radio" name="attr_condition" value="10">&#9733;</label>
                            <label class="flex-column condionBar">11<input type="radio" name="attr_condition" value="11"></label>
                            <label class="flex-column condionBar">12<input type="radio" name="attr_condition" value="12"></label>
                            <label class="flex-column condionBar">13<input type="radio" name="attr_condition" value="13"></label>
                            <label class="flex-column condionBar">14<input type="radio" name="attr_condition" value="14"></label>
                            <label class="flex-column condionBar">15<input type="radio" name="attr_condition" value="15"></label>
                            <label class="flex-column condionBar">16<input type="radio" name="attr_condition" value="16"></label>
                            <label class="flex-column condionBar">17<input type="radio" name="attr_condition" value="17"></label>
                            <label class="flex-column condionBar">18<input type="radio" name="attr_condition" value="18"></label>
                            <label class="flex-column condionBar">19<input type="radio" name="attr_condition" value="19"></label>
                            <label class="flex-column condionBar">20<input type="radio" name="attr_condition" value="20"></label>
                        </div>
                    </div> 

                    <hr>

                    <div class='coreAttributes'>
                            <div class="str">
                                    <div class="coreStatGrid">
                                       <div class="coreStatText">STR</div>
                                       <div class="coreStatBaseDie flex-column"> 
                                           <select name="attr_str" class="dtype">
                                               <option value="4">d4</option>
                                               <option value="6">d6</option>
                                               <option value="8">d8</option>
                                               <option value="10">d10</option>
                                               <option value="12">d12</option>
                                           </select>
                                           <span>Base</span>
                                       </div>
                                       <div class="coreStatCurrentDie flex-column">
                                           <input type='number' name='attr_currentStr' value='4' min='4' step='2' max='12'/>
                                           <span>Current</span>
                                       </div>
                                   </div> 
                               </div>
                               
                               <div class="dex">
                                   <div class="coreStatGrid">
                                       <div class="coreStatText">DEX</div>
                                       <div class="coreStatBaseDie flex-column"> 
                                           <select name="attr_dex" class="dtype">
                                               <option value="4">d4</option>
                                               <option value="6">d6</option>
                                               <option value="8">d8</option>
                                               <option value="10">d10</option>
                                               <option value="12">d12</option>
                                           </select>
                                           <span>Base</span>
                                       </div>
                                       <div class="coreStatCurrentDie flex-column">
                                           <input type='number' name='attr_currentDex' value='4' min='4' step='2' max='12'/>
                                           <span>Current</span>
                                       </div>
                                   </div> 
                               </div>
                               <div class="int">
                                    <div class="coreStatGrid">
                                       <div class="coreStatText">INT</div>
                                       <div class="coreStatBaseDie flex-column"> 
                                           <select name="attr_int" class="dtype">
                                               <option value="4">d4</option>
                                               <option value="6">d6</option>
                                               <option value="8">d8</option>
                                               <option value="10">d10</option>
                                               <option value="12">d12</option>
                                           </select>
                                           <span>Base</span>
                                       </div>
                                       <div class="coreStatCurrentDie flex-column">
                                           <input type='number' name='attr_currentInt' value='4' min='4' step='2' max='12'/>
                                           <span>Current</span>
                                       </div>
                                   </div> 
                               </div>
                               <div class="spi">
                                    <div class="coreStatGrid">
                                       <div class="coreStatText">SPI</div>
                                       <div class="coreStatBaseDie flex-column"> 
                                           <select name="attr_spi" class="dtype">
                                               <option value="4">d4</option>
                                               <option value="6">d6</option>
                                               <option value="8">d8</option>
                                               <option value="10">d10</option>
                                               <option value="12">d12</option>
                                           </select>
                                           <span>Base</span>
                                       </div>
                                       <div class="coreStatCurrentDie flex-column">
                                           <input type='number' name='attr_currentSpi' value='4' min='4' step='2' max='12'/>
                                           <span>Current</span>
                                       </div>
                                   </div> 
                               </div>
                    </div>
                    <hr>
                    <div class='sheet-3colrow'>
                        <div class='sheet-col'>
                            <label class='headerLabel healthLabel'>Injury</label>
                            <input type='checkbox' class='penaltyCondition' name='attr_injured' value='2'/>
                            <input type='number' name='attr_injury' value='0' min='0'/> lowers DEX die size
                        </div>
                        <div class='sheet-col'>
                            <label class='headerLabel healthLabel'>Poison</label>
                            <input type='checkbox' class='penaltyCondition' name='attr_poisoned' value='2'/>
                            <input type='number' name='attr_poison' value='0' min='0'/> lowers STR die size
                        </div>
                        <div class='sheet-col'>
                            <label class='headerLabel healthLabel'>Sickness</label>
                            <input type='checkbox' class='penaltyCondition' name='attr_sick' value='2'/>
                            <input type='number' name='attr_sickness' value='0' min='0'/> lowers all dice sizes
                        </div>
                    </div>

                    <div class='sheet-3colrow'>
                        <div class='sheet-col'>
                            <label class='headerLabel healthLabel'>Exhaustion</label>
                            <input type='checkbox' class='penaltyCondition' name='attr_exhausted' value='2'/>
                            <input type='number' name='attr_exhaustion' value='0' min='0'/> lowers SPI die size
                        </div>
                        <div class='sheet-col'>
                            <label class='headerLabel healthLabel'>Muddled</label>
                            <input type='checkbox' class='penaltyCondition' name='attr_muddled' value='2'/>
                            <input type='number' name='attr_muddle' value='0' min='0'/> lowers INT die size
                        </div>
                        <div class='sheet-col'>
                            <label class='headerLabel healthLabel'>Shock</label>
                            <input type='checkbox' class='penaltyCondition' name='attr_shocked' value='2'/>
                            <input type='number' name='attr_shock' value='0' min='0'/> lowers all dice sizes
                        </div>
                    </div>
                    <hr>
                    <div class='sheet-row'>
                        <div class='sheet-col'>
                            <label class='headerLabel checkLabel'>Terrain Modifiers</label>
                            <table>
                            <tr>
                                <th>Level 1=>6</th>
                                <th>Level 2=>8</th>
                                <th>Level 3=>10</th>
                                <th>Level 4=>12</th>
                                <th>Level 5=>14</th>
                            </tr>
                            <tr>
                                <td><input type='number' name='attr_grasslandMod' value='0'/> Grassland</td>
                                <td><input type='number' name='attr_woodsMod' value='0'/> Woods</td>
                                <td><input type='number' name='attr_deepForestMod' value='0'/> Deep Forest</td>
                                <td><input type='number' name='attr_desertMod' value='0'/> Desert</td>
                                <td><input type='number' name='attr_alpineMod' value='0'/> Alpine</td>
                            </tr>
                            <tr>
                                <td><input type='number' name='attr_wastelandMod' value='0'/> Wasteland</td>
                                <td><input type='number' name='attr_highlandsMod' value='0'/> Highlands</td>
                                <td><input type='number' name='attr_swampMod' value='0'/> Swamp</td>
                                <td><input type='number' name='attr_jungleMod' value='0'/> Jungle</td>
                                <td></td>
                            </tr>
                            <tr>
                                <td></td>
                                <td><input type='number' name='attr_rockyTerrainMod' value='0'/> Rocky Terrain</td>
                                <td><input type='number' name='attr_mountainMod' value='0'/> Mountain</td>
                                <td></td>
                                <td></td>
                            </tr>
                            </table>
                        </div>
                    </div>

                    <div class='sheet-row'>
                        <div class='sheet-col'>
                            <label class='headerLabel checkLabel'>Weather Modifiers</label>
                            <table cellpadding=3>
                            <tr>
                                <th>Weather +1</th>
                                <th>Weather +3</th>
                                <th>Weather +5</th>
                            </tr>
                            <tr>
                                <td><input type='number' name='attr_rainMod' value='0'/> Rain</td>
                                <td><input type='number' name='attr_hardRainMod' value='0'/> Hard Rain</td>
                                <td><input type='number' name='attr_hurricaneMod' value='0'/> Hurricane</td>
                            </tr>
                            <tr>
                                <td><input type='number' name='attr_strongWindMod' value='0'/> Strong Wind</td>
                                <td><input type='number' name='attr_snowMod' value='0'/> Snow</td>
                                <td><input type='number' name='attr_blizzardMod' value='0'/> Blizzard</td>
                            </tr>
                            <tr>
                                <td><input type='number' name='attr_fogMod' value='0'/> Fog</td>
                                <td><input type='number' name='attr_deepFogMod' value='0'/> Deep Fog</td>
                                <td></td>
                            </tr>
                            <tr>
                                <td><input type='number' name='attr_hotMod' value='0'/> Hot</td>
                                <td><input type='number' name='attr_darkMod' value='0'/> Dark</td>
                                <td></td>
                            </tr>
                            <tr>
                                <td><input type='number' name='attr_coldMod' value='0'/> Cold</td>
                                <td></td>
                                <td></td>
                            </tr>
                            </table>
                        </div>
                    </div>
                </span>

                <span class='characterChecks'>
                     <div class='sheet-2colrow'>
                        <div class='sheet-col'>
                            <label class='headerLabel healthLabel'>Fumble Points</label>
                            <input type='number' name='attr_fumble' value='0' min='0'/>
                        </div>
                        <div class='sheet-col'>
                            <label class='headerLabel healthLabel'>Overburden Penalties</label>
                            <!--<span class='overburdenPenalty'>Overburden Penalties:</span>-->
                            <input type='checkbox' class='penaltyCondition' name='attr_overburdened' value='1'/>
                            <input type='number' name='attr_overburdenPenalty' class='overburdenPenalty' value='0'/>
                        </div>
                    </div>

                    <div class='sheet-2colrow'>
                        <div class='sheet-col'>
                             Apply Concentration to next roll?
                            <label class='checkboxLabel concentration'><input type='checkbox' name='attr_concentrationMP' value='1'> Use MP</label>
                            <input type='checkbox' class='showFumble' name='attr_showFumbleConcentration' value='1'>
                            <label class='checkboxLabel concentration'><input type='checkbox' name='attr_concentrationFumble' value='1'> Use Fumble Point</label><br>
                             *Can't apply concentration to initiative, condition, or damage rolls.
                        </div>
                        <div class='sheet-col'>
                            <label class='checkboxLabel'><input type='checkbox' name='attr_applyOverburdenPenalty' value='1' checked='true'> Apply overburden penalties</label>
                        </div>
                    </div>

                    <span class='characterChecks'>
                        <label class='headerLabel loweredHeaderLabel'>Optional Modifiers</label>
                        <div class='sheet-3colrow'>
                            <div class='sheet-col'>
                                Current Season:
                                <select name='attr_currentSeason' class='terrain'>
                                    <option value=''></option>
                                    <option value='Spring'>Spring</option>
                                    <option value='Summer'>Summer</option>
                                    <option value='Autumn'>Autumn</option>
                                    <option value='Winter'>Winter</option>
                                </select>
                            </div>
                            <div class='sheet-col'>
                                Current Terrain:
                                <select name="attr_terrain" class='terrain'>
                                    <option value='0'></option>
                                    <option value="@{grasslandMod}">Grassland</option>
                                    <option value="@{wastelandMod}">Wasteland</option>
                                    <option value="@{woodsMod}">Woods</option>
                                    <option value="@{highlandsMod}">Highlands</option>
                                    <option value="@{rockyTerrainMod}">Rocky Terrain</option>
                                    <option value="@{deepForestMod}">Deep Forest</option>
                                    <option value="@{swampMod}">Swamp</option>
                                    <option value="@{mountainMod}">Mountain</option>
                                    <option value="@{desertMod}">Desert</option>
                                    <option value="@{jungleMod}">Jungle</option>
                                    <option value="@{alpineMod}">Alpine</option>
                                </select>
                            </div>
                            <div class='sheet-col'>
                                Current Weather:
                                <select name="attr_weather" class='terrain'>
                                    <option value='0'></option>
                                    <option value="@{rainMod}">Rain</option>
                                    <option value="@{strongWindMod}">Strong Wind</option>
                                    <option value="@{fogMod}">Fog</option>
                                    <option value="@{deepFogMod}">Hot</option>
                                    <option value="@{coldMod}">Cold</option>
                                    <option value="@{hardRainMod}">Hard Rain</option>
                                    <option value="@{snowMod}">Snow</option>
                                    <option value="@{deepFogMod}">Deep Fog</option>
                                    <option value="@{darkMod}">Dark</option>
                                    <option value="@{hurricaneMod}">Hurricane</option>
                                    <option value="@{blizzardMod}">Blizzard</option>
                                </select>
                            </div>
                        </div>

                        <div class='sheet-3colrow bonusPenaltyPreferences'>
                            <div class='sheet-col'></div> <!--Empty column on purpose to move others under the right inputs-->
                            <div class='sheet-col'>
                                <label class='checkboxLabel'><input type='checkbox' name='attr_applyTerrain' value='@{terrain}'> Apply terrain bonuses/penalties</label>
                            </div>
                            <div class='sheet-col'>
                                <label class='checkboxLabel'><input type='checkbox' name='attr_applyWeather' value='@{weather}'> Apply weather bonuses/penalties</label>
                            </div>
                        </div>

                        <input type='checkbox' class='showDiv' name='attr_showFarmerSkills' value='1'>
                        <div class='sheet-3colrow'>
                            <label class='headerLabel itemLabel'>Side Job</label>
                            <div class='sheet-col'>
                                Name:
                                <input type='text' name='attr_farmerSkillName'/>
                            </div>
                            <div class='sheet-col'>
                                Effect:
                                <input type='text' name='attr_farmerSkillEffect' class='spellEffect'/>
                            </div>
                        </div>

                        <div class='sheet-row'>
                            <div class='sheet-col skillCheck classSkillRoll'>
                                Roll:
                                <button type='roll' value='&{template:skillCheck} {{season=@{currentSeason}}} {{name=@{farmerSkillName}}} {{die1=[[1d@{farmerSkillDie1}]]}} {{die2=[[1d@{farmerSkillDie2}]]}} {{bonusesAndPenalties=[[@{farmerSkillMod}-1[Skill Mod]+@{classSkillBonus}[Class Bonus]+@{applyTerrain}[Terrain]+@{applyWeather}[Weather]-@{overburdenPenalty}[Overburden]]]}}' name='roll_farmerSkillRoll'></button>
                                <select name="attr_farmerSkillDie1" class="attributeType">
                                    <option value="@{currentStr}">STR</option>
                                    <option value="@{currentDex}">DEX</option>
                                    <option value="@{currentInt}">INT</option>
                                    <option value="@{currentSpi}">SPI</option>
                                </select> +
                                <select name="attr_farmerSkillDie2" class="attributeType">
                                    <option value="@{currentStr}">STR</option>
                                    <option value="@{currentDex}">DEX</option>
                                    <option value="@{currentInt}">INT</option>
                                    <option value="@{currentSpi}">SPI</option>
                                </select> +
                                <input type='number' name='attr_farmerSkillMod' value='0'/> <span class='sideJobPenalty'>(automatic -1 is applied)</span>
                            </div>
                        </div>
                    </span>

                    <span>
                        <input type='checkbox' class='showDiv' name='attr_showArtisanSkills' value='1'>
                        <div class='sheet-2colrow'>
                            <label class='headerLabel checkLabel'>Artisan Checks</label>
                            <div class='sheet-col'>
                                <button class='skill-check-button' type='roll' value='&{template:skillCheck} {{season=@{currentSeason}}} {{name=Crafting}} {{die1=[[1d@{currentStr}]]}} {{die2=[[1d@{currentDex}]]}} {{bonusesAndPenalties=[[@{craftingMod}[Skill Mod]+@{concentrationBonus}[Concentration]+@{classSkillBonus}[Class Bonus]+@{applyTerrain}[Terrain]+@{applyWeather}[Weather]-@{overburdenPenalty}[Overburden]]]}}' name='roll_craftingRoll'>Crafting [STR+DEX]</button>
                                <input type='number' name='attr_craftingMod' value='0' class='journeyMod'/>
                            </div>
                            <div class='sheet-col'>
                                <button class='skill-check skill-check-button' type='roll' value='&{template:skillCheck} {{season=@{currentSeason}}} {{name=Trapping}} {{die1=[[1d@{currentDex}]]}} {{die2=[[1d@{currentInt}]]}} {{bonusesAndPenalties=[[@{artisanTrappingMod}[Skill Mod]+@{concentrationBonus}[Concentration]+@{classSkillBonus}[Class Bonus]+@{applyTerrain}[Terrain]+@{applyWeather}[Weather]-@{overburdenPenalty}[Overburden]]]}}' name='roll_artisanTrappingRoll'>Trapping [DEX+INT]</button>
                                <input type='number' name='attr_artisanTrappingMod' value='0' class='journeyMod'/>
                            </div>
                        </div>
                        <div class='sheet-2colrow'>
                            <div class='sheet-col'>
                                <button class='skill-check-button' type='roll' value='&{template:skillCheck} {{season=@{currentSeason}}} {{name=Repair}} {{die1=[[1d@{currentStr}]]}} {{die2=[[1d@{currentDex}]]}} {{bonusesAndPenalties=[[@{repairMod}[Skill Mod]+@{concentrationBonus}[Concentration]+@{classSkillBonus}[Class Bonus]+@{applyTerrain}[Terrain]+@{applyWeather}[Weather]-@{overburdenPenalty}[Overburden]]]}}' name='roll_repairRoll'>Repair [STR+DEX]</button>
                                <input type='number' name='attr_repairMod' value='0' class='journeyMod'/>
                            </div>
                        </div>
                    </span>

                    <span>
                        <input type='checkbox' class='showDiv' name='attr_showHealerSkills' value='1'>
                        <div class='sheet-2colrow'>
                            <label class='headerLabel checkLabel'>Healer Checks</label>
                            <div class='sheet-col'>
                                <button class='skill-check-button' type='roll' value='&{template:skillCheck} {{season=@{currentSeason}}} {{name=First Aid (out of combat)}} {{die1=[[1d@{currentInt}]]}} {{die2=[[1d@{currentSpi}]]}} {{bonusesAndPenalties=[[@{firstAidOocMod}[Skill Mod]+@{concentrationBonus}[Concentration]+@{classSkillBonus}[Class Bonus]+@{applyTerrain}[Terrain]+@{applyWeather}[Weather]-@{overburdenPenalty}[Overburden]]]}}' name='roll_firstAidOocRoll'>First Aid [INT+SPI] (out of combat)</button>
                                <input type='number' name='attr_firstAidOocMod' value='0' class='journeyMod'/>
                            </div>
                            <div class='sheet-col'>
                                <button class='skill-check-button' type='roll' value='&{template:skillCheck} {{season=@{currentSeason}}} {{name=Healing}} {{die1=[[1d@{currentInt}]]}} {{die2=[[1d@{currentSpi}]]}} {{bonusesAndPenalties=[[@{healingMod}[Skill Mod]+@{concentrationBonus}[Concentration]+@{classSkillBonus}[Class Bonus]+@{applyTerrain}[Terrain]+@{applyWeather}[Weather]-@{overburdenPenalty}[Overburden]]]}}' name='roll_healingRoll'>Healing [INT+SPI]</button>
                                <input type='number' name='attr_healingMod' value='0' class='journeyMod'/>
                            </div>
                        </div>
                        <div class='sheet-2colrow'>
                            <div class='sheet-col'>
                                <button class='skill-check-button' type='roll' value='&{template:oneDieCheck} {{season=@{currentSeason}}} {{name=First Aid}} {{result=[[1d@{currentInt}+@{firstAidIcMod}[Skill Mod]+@{concentrationBonus}[Concentration]+@{classSkillBonus}[Class Bonus]+@{applyTerrain}[Terrain]+@{applyWeather}[Weather]-@{overburdenPenalty}[Overburden]]]}}' name='roll_firstAidIcRoll'>First Aid [INT] (in combat)</button>
                                <input type='number' name='attr_firstAidIcMod' value='0' class='journeyMod'/>
                            </div>
                            <div class='sheet-col'>
                                <button class='skill-check-button' type='roll' value='&{template:skillCheck} {{season=@{currentSeason}}} {{name=Herb Gathering}} {{die1=[[1d@{currentStr}]]}} {{die2=[[1d@{currentInt}]]}} {{bonusesAndPenalties=[[@{herbGatheringMod}[Skill Mod]+@{concentrationBonus}[Concentration]+@{classSkillBonus}[Class Bonus]+@{applyTerrain}[Terrain]+@{applyWeather}[Weather]-@{overburdenPenalty}[Overburden]]]}}' name='roll_musicRoll'>Herb Gathering [STR+INT]</button>
                                <input type='number' name='attr_herbGatheringMod' value='0' class='journeyMod'/>
                            </div>
                        </div>
                    </span>

                    <span>
                        <input type='checkbox' class='showDiv' name='attr_showHunterSkills' value='1'>
                        <div class='sheet-2colrow'>
                            <label class='headerLabel checkLabel'>Hunter Checks</label>
                            <div class='sheet-col'>
                                <button class='skill-check-button' type='roll' value='&{template:skillCheck} {{season=@{currentSeason}}} {{name=Animal Tracking}} {{die1=[[1d@{currentStr}]]}} {{die2=[[1d@{currentInt}]]}} {{bonusesAndPenalties=[[@{animalTrackingMod}[Skill Mod]+@{concentrationBonus}[Concentration]+@{classSkillBonus}[Class Bonus]+@{applyTerrain}[Terrain]+@{applyWeather}[Weather]-@{overburdenPenalty}[Overburden]]]}}' name='roll_animalTrackingRoll'>Animal Tracking [STR+INT]</button>
                                <input type='number' name='attr_animalTrackingMod' value='0' class='journeyMod'/>
                            </div>
                            <div class='sheet-col'>
                                <button class='skill-check-button' type='roll' value='&{template:skillCheck} {{season=@{currentSeason}}} {{name=Trapping}} {{die1=[[1d@{currentDex}]]}} {{die2=[[1d@{currentInt}]]}} {{bonusesAndPenalties=[[@{hunterTrappingMod}[Skill Mod]+@{concentrationBonus}[Concentration]+@{classSkillBonus}[Class Bonus]+@{applyTerrain}[Terrain]+@{applyWeather}[Weather]-@{overburdenPenalty}[Overburden]]]}}' name='roll_hunterTrappingRoll'>Trapping [DEX+INT]</button>
                                <input type='number' name='attr_hunterTrappingMod' value='0' class='journeyMod'/>
                            </div>
                        </div>
                        <div class='sheet-2colrow'>
                            <div class='sheet-col'>
                                <button class='skill-check-button' type='roll' value='&{template:skillCheck} {{season=@{currentSeason}}} {{name=Hunting}} {{die1=[[1d@{currentDex}]]}} {{die2=[[1d@{currentInt}]]}} {{bonusesAndPenalties=[[@{huntingMod}[Skill Mod]+@{concentrationBonus}[Concentration]+@{classSkillBonus}[Class Bonus]+@{applyTerrain}[Terrain]+@{applyWeather}[Weather]-@{overburdenPenalty}[Overburden]]]}}' name='roll_huntingRoll'>Hunting [DEX+INT]</button>
                                <input type='number' name='attr_huntingMod' value='0' class='journeyMod'/>
                            </div>
                        </div>
                    </span>

                    <span>
                        <input type='checkbox' class='showDiv' name='attr_showMerchantSkills' value='1'>
                        <div class='sheet-2colrow'>
                            <label class='headerLabel checkLabel'>Merchant Checks</label>
                            <div class='sheet-col'>
                                <button class='skill-check-button' type='roll' value='&{template:skillCheck} {{season=@{currentSeason}}} {{name=Trader}} {{die1=[[1d@{currentInt}]]}} {{die2=[[1d@{currentSpi}]]}} {{bonusesAndPenalties=[[@{traderMod}[Skill Mod]+@{concentrationBonus}[Concentration]+@{classSkillBonus}[Class Bonus]+@{applyTerrain}[Terrain]+@{applyWeather}[Weather]-@{overburdenPenalty}[Overburden]]]}}' name='roll_traderRoll'>Trader [INT+SPI]</button>
                                <input type='number' name='attr_traderMod' value='0' class='journeyMod'/>
                            </div>
                        </div>
                    </span>

                    <span>
                        <input type='checkbox' class='showDiv' name='attr_showMinstrelSkills' value='1'>
                        <div class='sheet-2colrow'>
                            <label class='headerLabel checkLabel'>Minstrel Checks</label>
                            <div class='sheet-col'>
                                <button class='skill-check-button' type='roll' value='&{template:skillCheck} {{season=@{currentSeason}}} {{name=Knowledge of Tradition}} {{die1=[[1d@{currentInt}]]}} {{die2=[[1d@{currentInt}]]}} {{bonusesAndPenalties=[[@{knowledgeOfTraditionMod}[Skill Mod]+@{concentrationBonus}[Concentration]+@{classSkillBonus}[Class Bonus]+@{applyTerrain}[Terrain]+@{applyWeather}[Weather]-@{overburdenPenalty}[Overburden]]]}}' name='roll_knowledgeOfTraditionRoll'>Knowledge of Tradition [INT+INT]</button>
                                <input type='number' name='attr_knowledgeOfTraditionMod' value='0' class='journeyMod'/>
                            </div>
                            <div class='sheet-col'>
                                <button class='skill-check-button' type='roll' value='&{template:skillCheck} {{season=@{currentSeason}}} {{name=Music}} {{die1=[[1d@{currentDex}]]}} {{die2=[[1d@{currentSpi}]]}} {{bonusesAndPenalties=[[@{musicMod}[Skill Mod]+@{concentrationBonus}[Concentration]+@{classSkillBonus}[Class Bonus]+@{applyTerrain}[Terrain]+@{applyWeather}[Weather]-@{overburdenPenalty}[Overburden]]]}}' name='roll_musicRoll'>Music [DEX+SPI]</button>
                                <input type='number' name='attr_musicMod' value='0' class='journeyMod'/>
                            </div>
                        </div>
                    </span>

                    <span>
                        <input type='checkbox' class='showDiv' name='attr_showNavigatorSkills' value='1'>
                        <div class='sheet-2colrow'>
                            <label class='headerLabel checkLabel'>Navigator Checks</label>
                            <div class='sheet-col'>
                                <button class='skill-check-button' type='roll' value='&{template:skillCheck} {{season=@{currentSeason}}} {{name=Navigation}} {{die1=[[1d@{currentStr}]]}} {{die2=[[1d@{currentDex}]]}} {{bonusesAndPenalties=[[@{navigationMod}[Skill Mod]+@{concentrationBonus}[Concentration]+@{classSkillBonus}[Class Bonus]+@{applyTerrain}[Terrain]+@{applyWeather}[Weather]-@{overburdenPenalty}[Overburden]]]}}' name='roll_navigationRoll'>Navigation [STR+DEX]</button>
                                <input type='number' name='attr_navigationMod' value='0' class='journeyMod'/>
                            </div>
                            <div class='sheet-col'>
                                <button class='skill-check-button' type='roll' value='&{template:skillCheck} {{season=@{currentSeason}}} {{name=Repair}} {{die1=[[1d@{currentStr}]]}} {{die2=[[1d@{currentDex}]]}} {{bonusesAndPenalties=[[@{navigatorRepairMod}[Skill Mod]+@{concentrationBonus}[Concentration]+@{classSkillBonus}[Class Bonus]+@{applyTerrain}[Terrain]+@{applyWeather}[Weather]-@{overburdenPenalty}[Overburden]]]}}' name='roll_navigatorRepairRoll'>Repair [STR+DEX]</button>
                                <input type='number' name='attr_navigatorRepairMod' value='0' class='journeyMod'/>
                            </div>
                        </div>
                    </span>

                    <span>
                        <input type='checkbox' class='showDiv' name='attr_showNobleSkills' value='1'>
                        <div class='sheet-2colrow'>
                            <label class='headerLabel checkLabel'>Noble Checks</label>
                            <div class='sheet-col'>
                                <button class='skill-check-button' type='roll' value='&{template:skillCheck} {{season=@{currentSeason}}} {{name=Etiquette}} {{die1=[[1d@{currentDex}]]}} {{die2=[[1d@{currentInt}]]}} {{bonusesAndPenalties=[[@{etiquetteMod}[Skill Mod]+@{concentrationBonus}[Concentration]+@{classSkillBonus}[Class Bonus]+@{applyTerrain}[Terrain]+@{applyWeather}[Weather]-@{overburdenPenalty}[Overburden]]]}}' name='roll_etiquetteRoll'>Etiquette [DEX+INT]</button>
                                <input type='number' name='attr_etiquetteMod' value='0' class='journeyMod'/>
                            </div>
                            <div class='sheet-col'>
                                <button class='skill-check-button' type='roll' value='&{template:skillCheck} {{season=@{currentSeason}}} {{name=Refined Education}} {{die1=[[1d@{currentInt}]]}} {{die2=[[1d@{currentInt}]]}} {{bonusesAndPenalties=[[@{refinedEducationMod}[Skill Mod]+@{concentrationBonus}[Concentration]+@{classSkillBonus}[Class Bonus]+@{applyTerrain}[Terrain]+@{applyWeather}[Weather]-@{overburdenPenalty}[Overburden]]]}}' name='roll_refinedEducationRoll'>Refined Education [INT+INT]</button>
                                <input type='number' name='attr_refinedEducationMod' value='0' class='journeyMod'/>
                            </div>
                        </div>
                    </span>

                    <label class='headerLabel checkLabel'>Common Checks</label>
                    <div class='sheet-2colrow'>
                        <div class='sheet-col'>
                            <button class='skill-check-button' type='roll' value='&{template:skillCheck} {{season=@{currentSeason}}} {{name=Camp}} {{die1=[[1d@{currentDex}]]}} {{die2=[[1d@{currentInt}]]}} {{bonusesAndPenalties=[[@{campMod}[Skill Mod]+@{concentrationBonus}[Concentration]+@{classCampMod}[Class Bonus]+@{applyTerrain}[Terrain]+@{applyWeather}[Weather]-@{overburdenPenalty}[Overburden]]]}}' name='roll_campRoll'>Camp [DEX+INT]</button>
                            <input type='number' name='attr_campMod' value='0' class='journeyMod'/>
                        </div>
                        <div class='sheet-col'>
                            <button class='skill-check-button' type='roll' value='&{template:skillCheck} {{season=@{currentSeason}}} {{name=Direction}} {{die1=[[1d@{currentInt}]]}} {{die2=[[1d@{currentInt}]]}} {{bonusesAndPenalties=[[@{directionMod}[Skill Mod]+@{concentrationBonus}[Concentration]+@{classDirectionMod}[Class Bonus]+@{applyTerrain}[Terrain]+@{applyWeather}[Weather]-@{overburdenPenalty}[Overburden]]]}}' name='roll_directionRoll'>Direction [INT+INT]</button>
                            <input type='number' name='attr_directionMod' value='0' class='journeyMod'/>
                        </div>
                    </div>

                    <div class='sheet-2colrow'>
                        <div class='sheet-col'>
                            <button class='skill-check-button' type='roll' value='&{template:skillCheck} {{season=@{currentSeason}}} {{name=Condition}} {{die1=[[1d@{currentStr}]]}} {{die2=[[1d@{currentSpi}]]}} {{bonusesAndPenalties=[[@{conditionMod}[Skill Mod]+@{classConditionMod}[Class Bonus]+@{applyTerrain}[Terrain]+@{applyWeather}[Weather]+@{speciesConditionMod}-@{overburdenPenalty}[Overburden]]]}}' name='roll_conditionRoll'>Condition [STR+SPI]</button>
                            <input type='number' name='attr_conditionMod' value='0' class='journeyMod'/>
                        </div>
                        <div class='sheet-col'>
                            <button class='skill-check-button' type='roll' value='&{template:skillCheck} {{season=@{currentSeason}}} {{name=Travel}} {{die1=[[1d@{currentStr}]]}} {{die2=[[1d@{currentDex}]]}} {{bonusesAndPenalties=[[@{travelMod}[Skill Mod]+@{concentrationBonus}[Concentration]+@{classTravelMod}[Class Bonus]+@{applyTerrain}[Terrain]+@{applyWeather}[Weather]-@{armorPenalty}-@{overburdenPenalty}[Overburden]]]}}' name='roll_travelRoll'>Travel [STR+DEX]</button>
                            <input type='number' name='attr_travelMod' value='0' class='journeyMod'/>
                        </div>
                    </div>

                    <hr>

                    <div class='sheet-2colrow'>
                        <div class='sheet-col'>
                            <button class='skill-check-button' type='roll' value='&{template:skillCheck} {{season=@{currentSeason}}} {{name=Delicate Work}} {{die1=[[1d@{currentDex}]]}} {{die2=[[1d@{currentSpi}]]}} {{bonusesAndPenalties=[[@{delicateWorkMod}[Skill Mod]+@{concentrationBonus}[Concentration]+@{applyTerrain}[Terrain]+@{applyWeather}[Weather]-@{overburdenPenalty}[Overburden]]]}}' name='roll_delicateWorkRoll'>Delicate Work [DEX+SPI]</button>
                            <input type='number' name='attr_delicateWorkMod' value='0' class='journeyMod'/>
                        </div>
                        <div class='sheet-col'>
                            <button class='skill-check-button' type='roll' value='&{template:skillCheck} {{season=@{currentSeason}}} {{name=Monster Knowledge}} {{die1=[[1d@{currentInt}]]}} {{die2=[[1d@{currentInt}]]}} {{bonusesAndPenalties=[[@{monsterKnowledgeMod}[Skill Mod]+@{concentrationBonus}[Concentration]+@{applyTerrain}[Terrain]+@{applyWeather}[Weather]-@{overburdenPenalty}[Overburden]]]}}' name='roll_monsterKnowledgeRoll'>Monster Knowledge [INT+INT]</button>
                            <input type='number' name='attr_monsterKnowledgeMod' value='0' class='journeyMod'/>
                        </div>
                    </div>

                    <div class='sheet-2colrow'>
                        <div class='sheet-col'>
                            <button class='skill-check-button' type='roll' value='&{template:skillCheck} {{season=@{currentSeason}}} {{name=Dodge}} {{die1=[[1d@{currentDex}]]}} {{die2=[[1d@{currentInt}]]}} {{bonusesAndPenalties=[[@{dodgeMod}[Skill Mod]+@{concentrationBonus}[Concentration]+@{applyTerrain}[Terrain]+@{applyWeather}[Weather]-@{overburdenPenalty}[Overburden]]]}}' name='roll_dodgeRoll'>Dodge [DEX+INT]</button>
                            <input type='number' name='attr_dodgeMod' value='0' class='journeyMod'/>
                        </div>
                        <div class='sheet-col'>
                            <button class='skill-check-button' type='roll' value='&{template:skillCheck} {{season=@{currentSeason}}} {{name=Negotiation}} {{die1=[[1d@{currentInt}]]}} {{die2=[[1d@{currentSpi}]]}} {{bonusesAndPenalties=[[@{negotiationMod}[Skill Mod]+@{concentrationBonus}[Concentration]+@{classNegotiationMod}[Class Bonus]+@{applyTerrain}[Terrain]+@{applyWeather}[Weather]-@{overburdenPenalty}[Overburden]]]}}' name='roll_negotiationRoll'>Negotiation [INT+SPI]</button>
                            <input type='number' name='attr_negotiationMod' value='0' class='journeyMod'/>
                        </div>
                    </div>
                    <div class='sheet-2colrow'>
                        <div class='sheet-col'>
                            <button class='skill-check-button' type='roll' value='&{template:skillCheck} {{season=@{currentSeason}}} {{name=Drinking}} {{die1=[[1d@{currentStr}]]}} {{die2=[[1d@{currentSpi}]]}} {{bonusesAndPenalties=[[@{drinkingMod}[Skill Mod]+@{concentrationBonus}[Concentration]+@{applyTerrain}[Terrain]+@{applyWeather}[Weather]-@{overburdenPenalty}[Overburden]]]}}' name='roll_drinkingRoll'>Drinking [STR+SPI]</button>
                            <input type='number' name='attr_drinkingMod' value='0' class='journeyMod'/>

                        </div>
                        <div class='sheet-col'>
                            <button class='skill-check-button' type='roll' value='&{template:skillCheck} {{season=@{currentSeason}}} {{name=Perception}} {{die1=[[1d@{currentDex}]]}} {{die2=[[1d@{currentInt}]]}} {{bonusesAndPenalties=[[@{perceptionMod}[Skill Mod]+@{concentrationBonus}[Concentration]+@{applyTerrain}[Terrain]+@{applyWeather}[Weather]-@{overburdenPenalty}[Overburden]]]}}' name='roll_perceptionRoll'>Perception [DEX+INT]</button>
                            <input type='number' name='attr_perceptionMod' value='0' class='journeyMod'/>
                        </div>
                    </div>

                    <div class='sheet-2colrow'>
                        <div class='sheet-col'>
                            <button class='skill-check-button' type='roll' value='&{template:skillCheck} {{season=@{currentSeason}}} {{name=Hard Exercise}} {{die1=[[1d@{currentStr}]]}} {{die2=[[1d@{currentDex}]]}} {{bonusesAndPenalties=[[@{hardExerciseMod}[Skill Mod]+@{concentrationBonus}[Concentration]+@{applyTerrain}[Terrain]+@{applyWeather}[Weather]-@{overburdenPenalty}[Overburden]]]}}' name='roll_hardExerciseRoll'>Hard Exercise [STR+DEX]</button>
                            <input type='number' name='attr_hardExerciseMod' value='0' class='journeyMod'/>
                        </div>
                        <div class='sheet-col'>
                            <button class='skill-check-button' type='roll' value='&{template:skillCheck} {{season=@{currentSeason}}} {{name=Search for Food}} {{die1=[[1d@{currentStr}]]}} {{die2=[[1d@{currentInt}]]}} {{bonusesAndPenalties=[[@{foragingMod}[Skill Mod]+@{concentrationBonus}[Concentration]+@{applyTerrain}[Terrain]+@{applyWeather}[Weather]-@{overburdenPenalty}[Overburden]]]}}' name='roll_foragingRoll'>Search for Food [STR+INT]</button>
                            <input type='number' name='attr_foragingMod' value='0' class='journeyMod'/>
                        </div>
                    </div>

                    <div class='sheet-2colrow'>
                        <div class='sheet-col'>
                            <button class='skill-check-button' type='roll' value='&{template:oneDieCheck} {{season=@{currentSeason}}} {{name=@{character_name} Initiative}} {{result=[[1d@{currentDex}+1d@{currentInt}+@{initiativeMod}+@{typeInitiativeMod}[Skill Mod]+@{applyTerrain}[Terrain]+@{applyWeather}[Weather]+@{speciesInitiativeMod}-@{armorPenalty}-@{overburdenPenalty}[Overburden] &{tracker}]]}}' name='roll_initiativeRoll'>Initiative [DEX+INT]</button>
                            <input type='number' name='attr_initiativeMod' value='0' class='journeyMod'/>
                        </div>
                        <div class='sheet-col'>
                            <button class='skill-check-button' type='roll' value='&{template:skillCheck} {{season=@{currentSeason}}} {{name=Sense}} {{die1=[[1d@{currentInt}]]}} {{die2=[[1d@{currentSpi}]]}} {{bonusesAndPenalties=[[@{senseMod}[Skill Mod]+@{concentrationBonus}[Concentration]+@{applyTerrain}[Terrain]+@{applyWeather}[Weather]-@{overburdenPenalty}[Overburden]]]}}' name='roll_senseRoll'>Sense [INT+SPI]</button>
                            <input type='number' name='attr_senseMod' value='0' class='journeyMod'/>
                        </div>
                    </div>

                    <div class='sheet-2colrow'>
                        <div class='sheet-col'>
                            <button class='skill-check-button' type='roll' value='&{template:skillCheck} {{season=@{currentSeason}}} {{name=Job Knowledge}} {{die1=[[1d@{currentInt}]]}} {{die2=[[1d@{currentInt}]]}} {{bonusesAndPenalties=[[@{jobKnowledgeMod}[Skill Mod]+@{concentrationBonus}[Concentration]+@{applyTerrain}[Terrain]+@{applyWeather}[Weather]-@{overburdenPenalty}[Overburden]]]}}' name='roll_jobKnowledgeRoll'>Job Knowledge [INT+INT]</button>
                            <input type='number' name='attr_jobKnowledgeMod' value='0' class='journeyMod'/>
                        </div>
                        <div class='sheet-col'>
                            <button class='skill-check-button' type='roll' value='&{template:skillCheck} {{season=@{currentSeason}}} {{name=Stealth}} {{die1=[[1d@{currentDex}]]}} {{die2=[[1d@{currentDex}]]}} {{bonusesAndPenalties=[[@{stealthMod}[Skill Mod]+@{concentrationBonus}[Concentration]+@{applyTerrain}[Terrain]+@{applyWeather}[Weather]-@{overburdenPenalty}[Overburden]]]}}' name='roll_stealthRoll'>Stealth [DEX+DEX]</button>
                            <input type='number' name='attr_stealthMod' value='0' class='journeyMod'/>
                        </div>
                    </div>

                    <label class='headerLabel itemLabel'>Additional Checks</label>
                    <fieldset class="repeating_skills">
                        <div class='sheet-2colrow'>
                            <div class='sheet-col'>
                                Name:
                                <input type='text' name='attr_skillNameA'/>
                                <div class='skillCheck classSkillRoll'>
                                    Roll:
                                    <button type='roll' value='&{template:skillCheck} {{season=@{currentSeason}}} {{name=@{skillNameA}}} {{die1=[[1d@{skillDie1A}]]}} {{die2=[[1d@{skillDie2A}]]}} {{bonusesAndPenalties=[[@{skillModA}[Skill Mod]+@{concentrationBonus}[Concentration]+@{applyTerrain}[Terrain]+@{applyWeather}[Weather]-@{overburdenPenalty}[Overburden]]]}}' name='roll_otherRollA'></button>
                                    <select name="attr_skillDie1A" class="attributeType">
                                        <option value="@{currentStr}">STR</option>
                                        <option value="@{currentDex}">DEX</option>
                                        <option value="@{currentInt}">INT</option>
                                        <option value="@{currentSpi}">SPI</option>
                                    </select> +
                                    <select name="attr_skillDie2A" class="attributeType">
                                        <option value="@{currentStr}">STR</option>
                                        <option value="@{currentDex}">DEX</option>
                                        <option value="@{currentInt}">INT</option>
                                        <option value="@{currentSpi}">SPI</option>
                                    </select> +
                                    <input type='number' name='attr_skillModA' value='0'/>
                                </div>
                            </div>
                            <div class='sheet-col'>
                                Name:
                                <input type='text' name='attr_skillNameB'/>
                                <div class='skillCheck classSkillRoll'>
                                    Roll:
                                    <button type='roll' value='&{template:skillCheck} {{season=@{currentSeason}}} {{name=@{skillNameB}}} {{die1=[[1d@{skillDie1B}]]}} {{die2=[[1d@{skillDie2B}]]}} {{bonusesAndPenalties=[[@{skillModB}[Skill Mod]+@{concentrationBonus}[Concentration]+@{applyTerrain}[Terrain]+@{applyWeather}[Weather]-@{overburdenPenalty}[Overburden]]]}}' name='roll_otherRollA'></button>
                                    <select name="attr_skillDie1B" class="attributeType">
                                        <option value="@{currentStr}">STR</option>
                                        <option value="@{currentDex}">DEX</option>
                                        <option value="@{currentInt}">INT</option>
                                        <option value="@{currentSpi}">SPI</option>
                                    </select> +
                                    <select name="attr_skillDie2B" class="attributeType">
                                        <option value="@{currentStr}">STR</option>
                                        <option value="@{currentDex}">DEX</option>
                                        <option value="@{currentInt}">INT</option>
                                        <option value="@{currentSpi}">SPI</option>
                                    </select> +
                                    <input type='number' name='attr_skillModB' value='0'/>
                                </div>
                            </div>
                        </div>
                    </fieldset>
                </span>

                <span class='characterEquipment'>
                <label class='headerLabel itemLabel'>Currency:</label>
                <input type='number' name='attr_currency' value='0' min='0' style='width:70px'/>

                <div class='sheet-2colrow'>
                    <div class='sheet-col'>
                        <label class='headerLabel headerLabel-eq itemLabel'>Equipped Weapon & Armor Capacity</label>
                        <input type='checkbox' class='penaltyCondition' name='attr_overEncumbered' value='1'/>
                        <input type='number' name='attr_weaponCapacity' value='0' min='0'/> / <input type='number' name='attr_weaponCapacity_max' value='0' min='0'/>
                    </div>
                    <div class='sheet-col'>
                        <label class='headerLabel itemLabel'>Item Capacity</label>
                        <input type='checkbox' class='penaltyCondition' name='attr_overCapacity' value='1'/>
                        <input type='number' name='attr_capacity' value='0' min='0'/> / <input type='number' name='attr_capacity_max' value='0' min='0'/>
                    </div>
                </div>

                <div class='sheet-2colrow'>
                    <div class='sheet-col'>
                        <label class='headerLabel itemLabel'>Water Capacity</label>
                        <input type='checkbox' class='penaltyCondition' name='attr_outOfWater' value='1'/>
                        <input type='number' name='attr_water' value='0' min='0'/> / <input type='number' name='attr_water_max' value='0' min='0'/>
                    </div>
                    <div class='sheet-col'>
                        <label class='headerLabel itemLabel'>Animal Capacity</label>
                        <input type='checkbox' class='penaltyCondition' name='attr_tooManyAnimals' value='1'/>
                        <input type='number' name='attr_animals' value='0' min='0'/> / <input type='number' name='attr_animals_max' value='1' min='0'/>
                    </div>
                </div>

                <label class='headerLabel itemLabel'>Weapons</label>
                <fieldset class='repeating_weapons'>
                    <div class='sheet-row'>
                        Classification:
                        <select name='attr_weaponClassification' style='width:120px;margin-right:4px;position:relative;top:5px'>
                            <option value='0'></option>
                            <option value='1'>Light Blade</option>
                            <option value='2'>Blade</option>
                            <option value='3'>Polearm</option>
                            <option value='4'>Axe</option>
                            <option value='5'>Bow</option>
                            <option value='6'>Unarmed</option>
                        </select>
                        Name: <input type='text' name='attr_weaponName' style='width: 100px;margin-right:4px'/>
                        Effect: <input type='text' name='attr_weaponEffect' style='width: 150px; margin-right: 4px'/>
                        Durability: <input type='number' name='attr_weaponDurability' value='0' min='0'/> / <input type='number' name='attr_weaponDurability_max' value='1' min='1' style='margin-right: 4px'/>
                        Size: <input type='number' name='attr_weaponSize' value='0' min='0'/>
                    </div>
                    <div class='sheet-2colrow weaponRow2'>
                        <div class='sheet-col skillCheck'>
                            <input type='number' class='hidden' name='attr_weaponGraceMod' value='0'>
                            <button type='roll' value='&{template:accuracyCheck} {{season=@{currentSeason}}} {{name=@{weaponName}}} {{die1=[[1d@{weaponAccuracyDie1}]]}} {{die2=[[1d@{weaponAccuracyDie2}]]}} {{bonusesAndPenalties=[[@{weaponAccuracyMod}[Accuracy Mod]+@{concentrationBonus}[Concentration]+@{weaponGraceMod}[Weapon Grace]-@{overburdenPenalty}[Overburden]]]}}' name='roll_weaponAccuracyRoll'></button>
                            Accuracy:
                            <select name="attr_weaponAccuracyDie1" class="attributeType">
                                <option value="@{currentStr}">STR</option>
                                <option value="@{currentDex}">DEX</option>
                                <option value="@{currentInt}">INT</option>
                                <option value="@{currentSpi}">SPI</option>
                            </select> +
                            <select name="attr_weaponAccuracyDie2" class="attributeType">
                                <option value="@{currentStr}">STR</option>
                                <option value="@{currentDex}">DEX</option>
                                <option value="@{currentInt}">INT</option>
                                <option value="@{currentSpi}">SPI</option>
                            </select> +
                            <input type='number' name='attr_weaponAccuracyMod' value='0'/>
                        </div>
                        <div class='sheet-col skillCheck damage'>
                            <button type='roll' value='&{template:oneDieCheck} {{season=@{currentSeason}}} {{name=@{weaponName} Damage}} {{result=[[[[1+@{weaponCriticalMod}]]d@{weaponDamageDie}+@{weaponDamageMod}[Wpn Bonus]+@{typeDamageMod}[Class Type Mod]-@{overburdenPenalty}[Overburden]]]}}' name='roll_weaponDamageRoll'></button>
                            Damage:
                            <select name="attr_weaponDamageDie" class="attributeType">
                                <option value="@{currentStr}">STR</option>
                                <option value="@{currentDex}">DEX</option>
                                <option value="@{currentInt}">INT</option>
                                <option value="@{currentSpi}">SPI</option>
                            </select> +
                            <input type='number' name='attr_weaponDamageMod' value='0'/>
                            <label class='checkboxLabel inlineCheckbox'><input type='checkbox' name='attr_weaponCriticalMod' value='1'> Add Critical Die</label>
                        </div>
                    </div>
                </fieldset>

                <label class='headerLabel itemLabel'>Shields & Armor</label>
                <fieldset class='repeating_armor'>
                    <div class='sheet-3colrow'>
                        <div class='sheet-col'>
                            Name: <input type='text' name='attr_armorName'/>
                        </div>
                        <div class='sheet-col'>
                            Effect: <input type='text' name='attr_armorEffect'/>
                        </div>
                        <div class='sheet-col' style='position:relative; right:14px;'>
                            Durability: <input type='number' name='attr_armorDurability' value='0' min='0'/> / <input type='number' name='attr_armorDurability_max' value='1' min='1'/>
                            Size: <input type='number' name='attr_armorSize' value='0' min='0'/>
                        </div>
                    </div>
                    <div class='sheet-row'>
                        Defense Points: <input type='number' name='attr_armorDefense' value='0' min='0'/>
                        Penalty: <input type='number' name='attr_armorPenalty' value='0'/>
                    </div>
                </fieldset>

                <label class='headerLabel itemLabel'>Traveler's Outfit</label>
                <fieldset class='repeating_outfit'>
                    <div class='sheet-3colrow'>
                        <div class='sheet-col'>
                            Name: <input type='text' name='attr_outfitName'/>
                        </div>
                        <div class='sheet-col'>
                            Effect: <input type='text' name='attr_outfitEffect'/>
                        </div>
                    </div>
                </fieldset>

                <label class='headerLabel itemLabel'>Items</label>
                <fieldset class='repeating_items'>
                    <div class='sheet-3colrow'>
                        <div class='sheet-col'>
                            Name: <input type='text' name='attr_itemName'/>
                        </div>
                        <div class='sheet-col'>
                            Effect: <input type='text' name='attr_itemEffect'/>
                        </div>
                        <div class='sheet-col'>
                            Size: <input type='number' name='attr_itemSize' value='0' min='0'/>
                            <span class='itemCount'>Ct: <input type='number' name='attr_itemCount' value='0' min='0'/></span>
                        </div>
                    </div>
                </fieldset>

                <label class='headerLabel itemLabel'>Containers</label>
                <fieldset class='repeating_containers'>
                    <div class='sheet-3colrow'>
                        <div class='sheet-col'>
                            Name: <input type='text' name='attr_containerName'/>
                        </div>
                        <div class='sheet-col'>
                            Effect: <input type='text' name='attr_containerEffect'/>
                        </div>
                        <div class='sheet-col'>
                            Size: <input type='number' name='attr_containerSize' value='0' min='0'/>
                            Capacity: <input type='number' name='attr_containerCapacity' value='0' min='0'/>
                            <label class='checkboxLabel inlineCheckbox'><input type='checkbox' name='attr_containerWater' value='1'/> water</label>
                        </div>
                    </div>
                </fieldset>

                <label class='headerLabel itemLabel'>Animals</label>
                <fieldset class='repeating_animals'>
                    <div class='sheet-3colrow'>
                        <div class='sheet-col'>
                            Name: <input type='text' name='attr_animalName'/>
                        </div>
                        <div class='sheet-col'>
                            Effect: <input type='text' name='attr_animalEffect'/>
                        </div>
                        <div class='sheet-col'>
                            <span class='animalCapacity'>Capacity: <input type='number' name='attr_animalCapacity' value='0' min='0'/></span>
                        </div>
                    </div>
                </fieldset>
            </span>
        </div>

         <!--- Start of NPC sheet-->

        <div class="sheet-block-b npc-sheet-container">
            <table class="npc-header-table">
                <tr>
                    <td class="npc-name"><span class="npc-name" name="attr_character_name"></span></td>
                    <td class="npc-level-label">LEVEL</td>
                    <td><input class="npc-level-input" type="number" name="attr_npc_level" value="1"/></td>
                </tr>
            </table>

            <table class="npc-data-table">
                <tbody>
                    <!-- Top Half of Npc Table -->
                    <tr>
                        <td class="npc-table-section-top-left">HABITAT</td>
                        <td class="npc-table-section-top-right" colspan="3">
                            <input type="text" name="attr_npc_habitat"
                                placeholder="All"/></td>
                    </tr>
                    <tr>
                        <td class="npc-table-section-top-left">SEASON</td>
                        <td class="npc-table-section-top-right" colspan="3">
                            <select name="attr_npc_season" class='npc-season'>
                                <option value=''></option>
                                <option value='Spring'>Spring</option>
                                <option value='Summer'>Summer</option>
                                <option value='Autumn'>Autumn</option>
                                <option value='Winter'>Winter</option>
                            </select>
                        </td>
                    </tr>
                    <tr>
                        <td class="npc-table-section-top-left">MATERIALS</td>
                        <td class="npc-table-section-top-right" colspan="3">
                            <input type="text" name="attr_npc_materials" placeholder="Shell (1000G)"/></td>
                    </tr>
                    <tr>
                        <td class="npc-table-section-top-left">DRAGONICA NUMBER</td>
                        <td class="npc-table-section-top-right" colspan="3">
                            <input type="text" name="attr_npc_dragonica_num" placeholder="001"/></td>
                    </tr>

                    <!-- Bottom Half of Npc Table-->
                    <tr>
                        <td class="npc-table-section-bottom-a">HP</td>
                        <td class="npc-table-section-bottom-b">
                            <input type="number" name="attr_npc_hp" value="0"/> /
                            <input type="number" name="attr_npc_hp_max" value="0"/>
                        </td>
                        <td class="npc-table-section-bottom-c">ABILITIES</td>
                        <td class="npc-table-section-bottom-d">
                            <input type="number" name="attr_npc_str" placeholder="STR"/>
                            <input type="number" name="attr_npc_dex" placeholder="DEX"/>
                            <input type="number" name="attr_npc_int" placeholder="INT"/>
                            <input type="number" name="attr_npc_spi" placeholder="SPI"/>
                        </td>
                    </tr>
                    <tr>
                        <td class="npc-table-section-bottom-a">MP</td>
                        <td class="npc-table-section-bottom-b">
                            <input type="number" name="attr_npc_mp" value="0"/> /
                            <input type="number" name="attr_npc_mp_max" value="0"/>
                        </td>
                        <td class="npc-table-section-bottom-c">ACCURACY</td>
                        <td class="npc-table-section-bottom-d">
                            <button type='roll' value='@{wtype} &{template:accuracyCheck} {{season=@{currentSeason}}} {{name=@{character_name}}} {{die1=[[1d@{npc_accuracy_dice1}]]}} {{die2=[[1d@{npc_accuracy_dice2}]]}} {{bonusesAndPenalties=[[@{npc_accuracy_bonus}]]}}]]' name='roll_npcAccuracyRoll'></button>
                            <select name="attr_npc_accuracy_dice1" class="dtype">
                                <option value="4">d4</option>
                                <option value="6">d6</option>
                                <option value="8">d8</option>
                                <option value="10">d10</option>
                                <option value="12">d12</option>
                            </select>
                            <select name="attr_npc_accuracy_dice2" class="dtype">
                                <option value="4">d4</option>
                                <option value="6">d6</option>
                                <option value="8">d8</option>
                                <option value="10">d10</option>
                                <option value="12">d12</option>
                            </select>
                            +
                            <input type="number" name="attr_npc_accuracy_bonus" value="0"/>
                        </td>
                    </tr>
                    <tr>
                        <td class="npc-table-section-bottom-a">INITIATIVE</td>
                        <td class="npc-table-section-bottom-b">
                            <input type="number" name="attr_npc_initiative" value="0"/>
                            <button type='roll' value='@{wtype} &{template:oneDieCheck} {{season=@{currentSeason}}} {{name=@{character_name} Initiative}} {{result=[[@{npc_initiative} &{tracker}]]}}' name='roll_npcDamageRoll'></button>
                        </td>
                        <td class="npc-table-section-bottom-c">DAMAGE</td>
                        <td class="npc-table-section-bottom-d">
                            <button type='roll' value='@{wtype} &{template:oneDieCheck} {{season=@{currentSeason}}} {{name=@{character_name} Damage}} {{result=[[(1+@{npcCriticalMod})d@{npc_damage_dice} + @{npc_damage_bonus}]]}}' name='roll_npcDamageRoll'></button>
                            <select name="attr_npc_damage_dice" class="dtype">
                                <option value="4">d4</option>
                                <option value="6">d6</option>
                                <option value="8">d8</option>
                                <option value="10">d10</option>
                                <option value="12">d12</option>
                            </select>
                             +
                            <input type="number" name="attr_npc_damage_bonus" value="0"/>&nbsp;
                            <label class='checkboxLabel inlineCheckbox'><input type='checkbox' name='attr_npcCriticalMod' value='1'>&nbsp;Add Critical Die</label>
                        </td>
                    </tr>
                    <tr>
                        <td class="npc-table-section-bottom-a">CONDITION</td>
                        <td class="npc-table-section-bottom-b">
                            <input type="number" name="attr_npc_condition" /></td>
                        <td class="npc-table-section-bottom-c">ARMOR</td>
                        <td class="npc-table-section-bottom-d">
                            <input type="number" name="attr_npc_armor" /></td>
                    </tr>
                </tbody>
            </table>
            <textarea class="npc-details" name='attr_npc_details' placeholder="Space for npc details or special abilities. Use inline rolls ex. [[1d6]]."></textarea>
            <button type='roll' value='@{wtype} &{template:oneDieCheck} {{season=@{currentSeason}}} {{freetext=@{npc_details}}}' name='roll_npcDetails'>&nbsp;Output Description Box to chat</button>
            <select name="attr_wtype" class="npc-always-whisper-roll">
                <option value="" >Never Whisper Rolls</option>
                <option value="?{Whisper?|Public Roll,|Whisper Roll,/w gm }">Query Whisper</option>
                <option value="/w gm ">Always Whisper Rolls</option>
            </select>

        </div>
        <!--- End of NPC sheet-->
    </div>
    
      <!-- Roll Templates -->
            <rolltemplate class="sheet-rolltemplate-skillCheck">
    			<div class="container">
    				<div class="sheet-rolltemplate-skillCheck">
    					<div class='rollTitle {{season}}'>{{name}}</div>
    					<div class='rollResult'>{{die1}} + {{die2}} + {{bonusesAndPenalties}}
    						{{#rollWasFumble() die1}}
    							{{#rollWasFumble() die2}}
    								<div class='fumble'>FUMBLE!!!</div>
    							{{/rollWasFumble() die2}}
    						{{/rollWasFumble() die1}}
    						{{#rollWasCrit() die1}}
    							{{#rollWasCrit() die2}}
    								<div class='critical'>CRITICAL SUCCESS!!!</div>
    							{{/rollWasCrit() die2}}
    						{{/rollWasCrit() die1}}
    						{{#rollTotal() die1 6}}
    							{{#rollTotal() die2 6}}
    								{{#^rollWasCrit() die1}}
    									{{#^rollWasCrit() die2}}
    										<div class='critical'>CRITICAL SUCCESS!!!</div>
    									{{/^rollWasCrit() die2}}
    								{{/^rollWasCrit() die1}}
    								{{#rollWasCrit() die1}}
    									{{#^rollWasCrit() die2}}
    										<div class='critical'>CRITICAL SUCCESS!!!</div>
    									{{/^rollWasCrit() die2}}
    								{{/rollWasCrit() die1}}
    								{{#^rollWasCrit() die1}}
    									{{#rollWasCrit() die2}}
    										<div class='critical'>CRITICAL SUCCESS!!!</div>
    									{{/rollWasCrit() die2}}
    								{{/^rollWasCrit() die1}}
    							{{/rollTotal() die2 6}}
    						{{/rollTotal() die1 6}}
    					</div>
    				</div>
    			</div>
            </rolltemplate>

            <rolltemplate class="sheet-rolltemplate-accuracyCheck">
    			<div class="container">
    				<div class="sheet-rolltemplate-accuracyCheck">
    					<div class='rollTitle {{season}}'>{{name}} accuracy check</div>
    					<div class='rollResult'>{{die1}} + {{die2}} + {{bonusesAndPenalties}}
    						{{#rollWasFumble() die1}}
    							{{#rollWasFumble() die2}}
    								<div class='fumble'>FUMBLE!!!</div>
    							{{/rollWasFumble() die2}}
    						{{/rollWasFumble() die1}}
    						{{#rollWasCrit() die1}}
    							{{#rollWasCrit() die2}}
    								<div class='critical'>CRITICAL HIT!!!</div>
    							{{/rollWasCrit() die2}}
    						{{/rollWasCrit() die1}}
    						{{#rollTotal() die1 6}}
    							{{#rollTotal() die2 6}}
    								{{#^rollWasCrit() die1}}
    									{{#^rollWasCrit() die2}}
    										<div class='critical'>CRITICAL HIT!!!</div>
    									{{/^rollWasCrit() die2}}
    								{{/^rollWasCrit() die1}}
    								{{#rollWasCrit() die1}}
    									{{#^rollWasCrit() die2}}
    										<div class='critical'>CRITICAL HIT!!!</div>
    									{{/^rollWasCrit() die2}}
    								{{/rollWasCrit() die1}}
    								{{#^rollWasCrit() die1}}
    									{{#rollWasCrit() die2}}
    										<div class='critical'>CRITICAL HIT!!!</div>
    									{{/rollWasCrit() die2}}
    								{{/^rollWasCrit() die1}}
    							{{/rollTotal() die2 6}}
    						{{/rollTotal() die1 6}}
    					</div>
    				</div>
    			</div>
            </rolltemplate>

            <rolltemplate class="sheet-rolltemplate-oneDieCheck">
                <div class="container">
                    <div class="sheet-rolltemplate-oneDieCheck">
                        <div class='rollTitle {{season}}'>{{name}}</div>
                        {{#result}}
                            <div class='rollResult'>{{result}}</div>
                        {{/result}}
                        {{#freetext}}
                            <div class='rollFreeText'>{{freetext}}</div>
                        {{/freetext}}
                    </div>
                </div>
            </rolltemplate>
            
            <rolltemplate class="sheet-rolltemplate-spell">
                <div class="rolltemplate-spellContainer">
                        <div class='rolltemplate-spellCard'>
                            <div class='rolltemplate-spellAttr flex-column'>
                                <div class="rolltemplate-spellTitle">Spell</div>
                                <div class='rolltemplate-spellAttrText'>{{name}}</div>
                            </div>
                            <div class='flex-column'>
                                <div class="rolltemplate-spellTitle">MP</div>
                                <div class='rolltemplate-spellAttrText'>{{cost}}</div>
                            </div>
                        </div>
                        <div class='rolltemplate-spellCard'>
                            <div class='rolltemplate-spellAttr flex-column'>
                                <div class="rolltemplate-spellTitle">Duration</div>
                                <div class='rolltemplate-spellAttrText'>{{duration}}</div>
                            </div>
                            <div class='rolltemplate-spellAttr flex-column'>
                                <div class="rolltemplate-spellTitle">Target</div>
                                <div class='rolltemplate-spellAttrText'>{{target}}</div>
                            </div>
                            <div class='flex-column'>
                                <div class="rolltemplate-spellTitle">Range</div>
                                <div class='rolltemplate-spellAttrText'>{{range}}</div>
                            </div>
                        </div>
                        {{#effect}}
                            <div class='rolltemplate-spellEffect'>{{effect}}</div>
                        {{/effect}}
                    </div>
                </div>
            </rolltemplate>
            <!-- End Roll Templates -->

</html>
